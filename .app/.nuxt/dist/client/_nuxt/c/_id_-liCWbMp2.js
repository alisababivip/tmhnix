import{a as e,z as t,ap as s,c as a,Q as l,r,E as u,aL as n,ad as d,b as c,e as o,w as i,o as m,q as p,t as f,u as x,f as b,O as v,k as h,n as w,F as g,p as y,_,x as k,X as j,Y as S,C,g as P}from"../e/entry-8qgg5CL-.js";import{_ as E}from"./BaseAvatar.vue-XYSxxLJP.js";import{_ as T}from"./BaseProgress.vue-xH0Mhn3Z.js";import{_ as A}from"./BaseInput.vue-iInHQMIA.js";import{_ as D}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as I}from"./useIco-3A31FykS.js";import{u as z}from"./wallet-n04aoRPe.js";import{u as W}from"./user-nCE93tUp.js";import"./input-id-wZ-Ta08j.js";import"./useWallet-8iHzU2hV.js";import"./useEcosystem-9eBUNbsT.js";const $={class:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-5"},M={class:"col-span-1 md:col-span-2 xl:col-span-3 space-y-5"},V={class:"border-muted-200 dark:border-muted-700 flex flex-col items-center p-6 sm:flex-row"},B={class:"flex flex-col items-center gap-3 sm:flex-row"},L={class:"text-center leading-none sm:text-left"},O={class:"text-muted-800 dark:text-muted-100 font-sans text-base font-medium"},U={class:"text-muted-400 font-sans text-sm"},q=b("h3",{class:"text-start font-bold mb-2"},"Token Details",-1),Q={class:"flex flex-col gap-2"},F={class:"border-b border-muted-200 dark:border-muted-700 flex justify-between"},H=b("strong",null,"Name:",-1),N={class:"border-b border-muted-200 dark:border-muted-700 flex justify-between"},X=b("strong",null,"Address:",-1),Y={class:"flex justify-between"},G=b("strong",null,"Total Supply:",-1),J={class:"w-full"},K=b("h3",{class:"text-start font-bold mb-2"},"Active Phase Details",-1),R={class:"flex flex-col gap-2"},Z={class:"flex justify-between border-b border-muted-200 dark:border-muted-700"},ee=b("strong",null,"Price:",-1),te={class:"flex justify-between border-b border-muted-200 dark:border-muted-700"},se=b("strong",null,"Min Purchase Amount:",-1),ae={class:"flex justify-between border-b border-muted-200 dark:border-muted-700"},le=b("strong",null,"Max Purchase Amount:",-1),re={class:"flex justify-between border-b border-muted-200 dark:border-muted-700"},ue=b("strong",null,"Start Date:",-1),ne={class:"flex justify-between"},de=b("strong",null,"End Date:",-1),ce={class:"space-y-5"},oe={class:"w-full p-4 border-b text-center"},ie={class:"w-full"},me={key:0},pe={key:1},fe={key:2},xe={class:"flex items-center justify-between"},be=b("h4",{class:"text-muted-700 dark:text-muted-100 font-sans text-sm font-medium"}," Progress ",-1),ve={class:"text-muted-400 font-sans text-sm"},he={class:"border-t border-muted-200 dark:border-muted-700 pt-4 px-4"},we={class:"flex justify-between items-center text-xs pt-0 px-4"},ge={class:"text-muted-800 dark:text-muted-200"},ye={class:"text-muted-800 dark:text-muted-200 items-center flex gap-1"},_e={class:"px-4 pb-4"},ke={class:"w-full"},je={class:"flex flex-col gap-1 text-center border-b border-muted-200 dark:border-muted-700 p-4"},Se=b("span",null,"Phase",-1),Ce={class:"flex flex-col gap-1 border-b border-muted-200 dark:border-muted-700 p-4 text-center"},Pe=b("span",null,"Sale Amount",-1),Ee={class:"flex flex-col gap-1 border-b border-muted-200 dark:border-muted-700 p-4 text-center"},Te=b("span",null,"Contributions",-1),Ae=e({__name:"[id]",setup(e){const Ae=t(),{uuid:De,id:Ie}=Ae.params,{getIcoToken:ze,createIcoContribution:We}=I(),$e=s(),Me=a((()=>$e.extensionsUser)),Ve=l();a((()=>Ve.settings));const Be=z(),Le=W(),Oe=r({}),Ue=r([]),qe=r(0);let Qe=null;u((async()=>{const e=await ze(Ie);"success"===e.status&&(Ue.value=e.data.result),Qe=setInterval((()=>{Ne()}),1e3),0===$e.extensions.length&&await $e.fetchExtensionsUser(),"SPOT"===Ue.value?.purchase_wallet_type&&(await Be.fetchWallets(),Oe.value=Be.wallets[Ue.value?.purchase_currency]??{}),Me.value.ecosystem&&"ECO"===Ue.value?.purchase_wallet_type&&(await Le.fetchWallets(!1,!1),Oe.value=Le.wallets[Ue.value?.purchase_currency]??{})}));const Fe=r({days:0,hours:0,minutes:0,seconds:0,isStarted:!1}),He=a((()=>Ue.value?.phases?.find((e=>"ACTIVE"===e.status)))),Ne=()=>{const e=new Date,t=new Date(He.value?.start_date),s=new Date(He.value?.end_date);Fe.value.isStarted=e>=t;const a=(Fe.value.isStarted?s:t).getTime()-e.getTime();a<0?clearInterval(Qe):(Fe.value.days=Math.floor(a/864e5),Fe.value.hours=Math.floor(a%864e5/36e5),Fe.value.minutes=Math.floor(a%36e5/6e4),Fe.value.seconds=Math.floor(a%6e4/1e3))};n((()=>{clearInterval(Qe)}));const{toast:Xe}=d(),Ye=async()=>{const e=await We(He.value?.id,qe.value);if(Xe.response(e),"success"===e.status){const e=await ze(Ie);"success"===e.status&&(Ue.value=e.data.result),"SPOT"===Ue.value?.purchase_wallet_type&&(await Be.fetchWallets(),Oe.value=Be.wallets[Ue.value?.purchase_currency]??{}),Me.value.ecosystem&&"ECO"===Ue.value?.purchase_wallet_type&&(await Le.fetchWallets(!1,!1),Oe.value=Le.wallets[Ue.value?.purchase_currency]??{}),qe.value=0}};return(e,t)=>{const s=_,a=k,l=j,r=E,u=S,n=T,d=A,I=C,z=P,W=D;return m(),c("div",null,[o(W,null,{left:i((()=>[o(s,{size:"lg"},{default:i((()=>[p(f(x(Ue)?.name)+" Details",1)])),_:1})])),right:i((()=>[o(l,{type:"button",color:"muted",to:`/user/ico/${x(De)}`},{default:i((()=>[o(a,{name:"line-md:chevron-left",class:"h-4 w-4 mr-2"}),p(" "+f(e.$t("Back")),1)])),_:1},8,["to"])])),default:i((()=>[b("div",$,[b("div",M,[o(u,null,{default:i((()=>[b("div",V,[b("div",B,[o(r,{src:x(Ue)?.image,"badge-src":`/img/crypto/${x(Ue)?.chain}.png`,text:x(Ue)?.currency,size:"xl",class:"bg-muted-500/20 text-muted-500"},null,8,["src","badge-src","text"]),b("div",L,[b("h4",O,f(x(Ue)?.currency)+" ("+f(x(Ue)?.name)+") ",1),b("p",U,f(x(Ue)?.description),1)])])])])),_:1}),o(u,{class:"p-4 text-sm"},{default:i((()=>[q,b("ul",Q,[b("li",F,[H,p(" "+f(x(Ue).name),1)]),b("li",N,[X,p(" "+f(x(Ue).address),1)]),b("li",Y,[G,p(" "+f(x(Ue).total_supply)+" "+f(x(Ue).currency),1)])])])),_:1}),x(He)?(m(),v(u,{key:0,class:"p-4 flex flex-col sm:flex-row justify-between text-sm"},{default:i((()=>[b("div",J,[K,b("ul",R,[b("li",Z,[ee,b("span",null,f(x(He).price)+" "+f(x(Ue).purchase_currency),1)]),b("li",te,[se,b("span",null,f(x(He).min_purchase)+" "+f(x(Ue).purchase_currency),1)]),b("li",ae,[le,b("span",null,f(x(He).max_purchase)+" "+f(x(Ue).purchase_currency),1)]),b("li",re,[ue,b("span",null,f(new Date(x(He).start_date).toLocaleString()),1)]),b("li",ne,[de,b("span",null,f(new Date(x(He).end_date).toLocaleString()),1)])])])])),_:1})):h("",!0)]),b("div",ce,[o(u,{class:"space-y-5"},{default:i((()=>[b("div",oe,[b("div",ie,[x(Fe)?.isStarted?(m(),c("div",me,[b("span",null,"Ends in: "+f(x(Fe)?.days)+"d "+f(x(Fe)?.hours)+"h "+f(x(Fe)?.minutes)+"m "+f(x(Fe)?.seconds)+"s",1)])):x(Fe)?(m(),c("div",pe,[b("span",null,"Starts in: "+f(x(Fe)?.days)+"d "+f(x(Fe)?.hours)+"h "+f(x(Fe)?.minutes)+"m "+f(x(Fe)?.seconds)+"s",1)])):(m(),c("div",fe))])]),b("div",{class:w(["w-full grow space-y-1 px-4",{"pb-4":!x(Fe)?.isStarted||"ACTIVE"!==x(He)?.status}])},[b("div",xe,[be,b("div",null,[b("span",ve,f(x(He)?.contributionPercentage??0)+"% ",1)])]),o(n,{size:"xs",color:"primary",value:x(He)?.contributionPercentage??0},null,8,["value"])],2),x(Fe)?.isStarted&&"ACTIVE"===x(He)?.status?(m(),c(g,{key:0},[b("div",he,[o(d,{type:"number",label:"Amount",placeholder:"Enter amount",modelValue:x(qe),"onUpdate:modelValue":t[0]||(t[0]=e=>y(qe)?qe.value=e:null),min:x(He)?.min_purchase,max:x(He)?.max_purchase},null,8,["modelValue","min","max"])]),b("div",we,[b("span",ge,f(e.$t("Balance")),1),b("span",ye,[p(f(x(Oe)?.balance??0)+" "+f(x(Ue)?.purchase_currency),1),o(I,{to:`/user/wallets/${x(Ue)?.purchase_wallet_type?.toLowerCase()}/${x(Ue)?.purchase_currency?.toLowerCase()}`,"data-nui-tooltip":"Wallets"},{default:i((()=>[o(a,{name:"ei:plus",class:"h-5 w-5 text-success-500"})])),_:1},8,["to"])])]),b("div",_e,[o(l,{class:"w-full",color:"primary",onClick:Ye,disabled:!x(qe)||x(qe)<x(He)?.min_purchase||x(qe)>x(He)?.max_purchase||x(qe)>x(Oe)?.balance},{default:i((()=>[p(" Purchase ")])),_:1},8,["disabled"])])],64)):h("",!0)])),_:1}),o(u,null,{default:i((()=>[b("div",ke,[b("div",je,[o(s,{tag:"h3",size:"md",weight:"semibold",class:"text-muted-800 dark:text-muted-100"},{default:i((()=>[b("span",null,f(x(He)?.name),1)])),_:1}),o(z,{lead:"none",weight:"semibold",class:"text-muted-400 !text-[0.65rem] uppercase"},{default:i((()=>[Se])),_:1})]),b("div",Ce,[o(s,{tag:"h3",size:"md",weight:"semibold",class:"text-muted-800 dark:text-muted-100"},{default:i((()=>[b("span",null,f(x(He)?.allocations[0]?.percentage*x(Ue)?.allocation?.percentage/100*x(Ue)?.total_supply/100),1)])),_:1}),o(z,{lead:"none",weight:"semibold",class:"text-muted-400 !text-[0.65rem] uppercase"},{default:i((()=>[Pe])),_:1})]),b("div",Ee,[o(s,{tag:"h3",size:"md",weight:"semibold",class:"text-muted-800 dark:text-muted-100"},{default:i((()=>[b("span",null,f(x(He)?.contributions?.length??0),1)])),_:1}),o(z,{lead:"none",weight:"semibold",class:"text-muted-400 !text-[0.65rem] uppercase"},{default:i((()=>[Te])),_:1})])])])),_:1})])])])),_:1})])}}});export{Ae as default};
