import{ay as e,az as t,a,r as l,aA as n,c as u,aB as o,aC as r,aD as s,a2 as i,aE as v,aF as c,aG as d,aH as p,aI as f,aJ as m,aK as I,E as b,aL as g,K as S,a7 as R,aM as y,aN as M,aO as P,aP as x,aQ as h}from"../e/entry-8qgg5CL-.js";import{b as T,p as k,u as D,x as w,a as E}from"./use-text-value-9iwzs_EA.js";var O=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(O||{}),A=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(A||{});let F=Symbol("MenuContext");function N(e){let t=R(F,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,N),t}return t}let C=a({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:a}){let f=l(1),m=l(null),I=l(null),b=l([]),g=l(""),S=l(null),R=l(1);function y(e=(e=>e)){let t=null!==S.value?b.value[S.value]:null,a=h(e(b.value.slice()),(e=>s(e.dataRef.domRef))),l=t?a.indexOf(t):null;return-1===l&&(l=null),{items:a,activeItemIndex:l}}let M={menuState:f,buttonRef:m,itemsRef:I,items:b,searchQuery:g,activeItemIndex:S,activationTrigger:R,closeMenu:()=>{f.value=1,S.value=null},openMenu:()=>f.value=0,goToItem(e,t,a){let l=y(),n=w(e===E.Specific?{focus:E.Specific,id:t}:{focus:e},{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.disabled});g.value="",S.value=n,R.value=null!=a?a:1,b.value=l.items},search(e){let t=""!==g.value?0:1;g.value+=e.toLowerCase();let a=(null!==S.value?b.value.slice(S.value+t).concat(b.value.slice(0,S.value+t)):b.value).find((e=>e.dataRef.textValue.startsWith(g.value)&&!e.dataRef.disabled)),l=a?b.value.indexOf(a):-1;-1===l||l===S.value||(S.value=l,R.value=1)},clearSearch(){g.value=""},registerItem(e,t){let a=y((a=>[...a,{id:e,dataRef:t}]));b.value=a.items,S.value=a.activeItemIndex,R.value=1},unregisterItem(e){let t=y((t=>{let a=t.findIndex((t=>t.id===e));return-1!==a&&t.splice(a,1),t}));b.value=t.items,S.value=t.activeItemIndex,R.value=1}};return n([m,I],((e,t)=>{var a;M.closeMenu(),o(t,r.Loose)||(e.preventDefault(),null==(a=s(m))||a.focus())}),u((()=>0===f.value))),i(F,M),v(u((()=>c(f.value,{0:d.Open,1:d.Closed})))),()=>{let l={open:0===f.value,close:M.closeMenu};return p({ourProps:{},theirProps:e,slot:l,slots:t,attrs:a,name:"Menu"})}}}),L=a({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${f()}`}},setup(e,{attrs:t,slots:a,expose:l}){let n=N("MenuButton");function o(e){switch(e.key){case y.Space:case y.Enter:case y.ArrowDown:e.preventDefault(),e.stopPropagation(),n.openMenu(),S((()=>{var e;null==(e=s(n.itemsRef))||e.focus({preventScroll:!0}),n.goToItem(E.First)}));break;case y.ArrowUp:e.preventDefault(),e.stopPropagation(),n.openMenu(),S((()=>{var e;null==(e=s(n.itemsRef))||e.focus({preventScroll:!0}),n.goToItem(E.Last)}))}}function r(e){if(e.key===y.Space)e.preventDefault()}function i(t){e.disabled||(0===n.menuState.value?(n.closeMenu(),S((()=>{var e;return null==(e=s(n.buttonRef))?void 0:e.focus({preventScroll:!0})}))):(t.preventDefault(),n.openMenu(),function(e){requestAnimationFrame((()=>requestAnimationFrame(e)))}((()=>{var e;return null==(e=s(n.itemsRef))?void 0:e.focus({preventScroll:!0})}))))}l({el:n.buttonRef,$el:n.buttonRef});let v=T(u((()=>({as:e.as,type:t.type}))),n.buttonRef);return()=>{var l;let u={open:0===n.menuState.value},{id:c,...d}=e,f={ref:n.buttonRef,id:c,type:v.value,"aria-haspopup":"menu","aria-controls":null==(l=s(n.itemsRef))?void 0:l.id,"aria-expanded":0===n.menuState.value,onKeydown:o,onKeyup:r,onClick:i};return p({ourProps:f,theirProps:d,slot:u,attrs:t,slots:a,name:"MenuButton"})}}}),B=a({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${f()}`}},setup(a,{attrs:n,slots:o,expose:r}){let i=N("MenuItems"),v=l(null);function c(e){var t;switch(v.value&&clearTimeout(v.value),e.key){case y.Space:if(""!==i.searchQuery.value)return e.preventDefault(),e.stopPropagation(),i.search(e.key);case y.Enter:if(e.preventDefault(),e.stopPropagation(),null!==i.activeItemIndex.value){let e=i.items.value[i.activeItemIndex.value];null==(t=s(e.dataRef.domRef))||t.click()}i.closeMenu(),x(s(i.buttonRef));break;case y.ArrowDown:return e.preventDefault(),e.stopPropagation(),i.goToItem(E.Next);case y.ArrowUp:return e.preventDefault(),e.stopPropagation(),i.goToItem(E.Previous);case y.Home:case y.PageUp:return e.preventDefault(),e.stopPropagation(),i.goToItem(E.First);case y.End:case y.PageDown:return e.preventDefault(),e.stopPropagation(),i.goToItem(E.Last);case y.Escape:e.preventDefault(),e.stopPropagation(),i.closeMenu(),S((()=>{var e;return null==(e=s(i.buttonRef))?void 0:e.focus({preventScroll:!0})}));break;case y.Tab:e.preventDefault(),e.stopPropagation(),i.closeMenu(),S((()=>M(s(i.buttonRef),e.shiftKey?P.Previous:P.Next)));break;default:1===e.key.length&&(i.search(e.key),v.value=setTimeout((()=>i.clearSearch()),350))}}function f(e){if(e.key===y.Space)e.preventDefault()}r({el:i.itemsRef,$el:i.itemsRef}),function({container:a,accept:l,walk:n,enabled:u}){e((()=>{let e=a.value;if(!e||void 0!==u&&!u.value)return;let o=t(a);if(!o)return;let r=Object.assign((e=>l(e)),{acceptNode:l}),s=o.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,r,!1);for(;s.nextNode();)n(s.currentNode)}))}({container:u((()=>s(i.itemsRef))),enabled:u((()=>0===i.menuState.value)),accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let b=m(),g=u((()=>null!==b?(b.value&d.Open)===d.Open:0===i.menuState.value));return()=>{var e,t;let l={open:0===i.menuState.value},{id:u,...r}=a,v={"aria-activedescendant":null===i.activeItemIndex.value||null==(e=i.items.value[i.activeItemIndex.value])?void 0:e.id,"aria-labelledby":null==(t=s(i.buttonRef))?void 0:t.id,id:u,onKeydown:c,onKeyup:f,role:"menu",tabIndex:0,ref:i.itemsRef};return p({ourProps:v,theirProps:r,slot:l,attrs:n,slots:o,features:I.RenderStrategy|I.Static,visible:g.value,name:"MenuItems"})}}}),K=a({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${f()}`}},setup(t,{slots:a,attrs:n,expose:o}){let r=N("MenuItem"),i=l(null);o({el:i,$el:i});let v=u((()=>null!==r.activeItemIndex.value&&r.items.value[r.activeItemIndex.value].id===t.id)),c=k(i),d=u((()=>({disabled:t.disabled,get textValue(){return c()},domRef:i})));function f(e){if(t.disabled)return e.preventDefault();r.closeMenu(),x(s(r.buttonRef))}function m(){if(t.disabled)return r.goToItem(E.Nothing);r.goToItem(E.Specific,t.id)}b((()=>r.registerItem(t.id,d))),g((()=>r.unregisterItem(t.id))),e((()=>{0===r.menuState.value&&v.value&&0!==r.activationTrigger.value&&S((()=>{var e,t;return null==(t=null==(e=s(i))?void 0:e.scrollIntoView)?void 0:t.call(e,{block:"nearest"})}))}));let I=D();function R(e){I.update(e)}function y(e){I.wasMoved(e)&&(t.disabled||v.value||r.goToItem(E.Specific,t.id,0))}function M(e){I.wasMoved(e)&&(t.disabled||v.value&&r.goToItem(E.Nothing))}return()=>{let{disabled:e}=t,l={active:v.value,disabled:e,close:r.closeMenu},{id:u,...o}=t;return p({ourProps:{id:u,ref:i,role:"menuitem",tabIndex:!0===e?void 0:-1,"aria-disabled":!0===e||void 0,disabled:void 0,onClick:f,onFocus:m,onPointerenter:R,onMouseenter:R,onPointermove:y,onMousemove:y,onPointerleave:M,onMouseleave:M},theirProps:{...n,...o},slot:l,attrs:n,slots:a,name:"MenuItem"})}}});export{C as M,L as R,B as h,K as y};
