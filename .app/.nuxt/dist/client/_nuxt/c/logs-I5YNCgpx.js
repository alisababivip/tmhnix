import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as a}from"./BaseSelect.vue-p0KYznCX.js";import{d as t,a as l,z as s,r as o,c as r,E as i,ad as u,b as n,e as d,w as c,u as m,an as p,o as g,p as f,f as h,t as v,O as b,F as k,B as w,q as _,l as x,a1 as y,n as E,k as j,ag as S,x as $,ao as C,X as L}from"../e/entry-8qgg5CL-.js";import{_ as D,a as A}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as R}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as T}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as B,a as V}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as F}from"./TairoFlexTable-zdoraqRc.js";import{_ as I}from"./BasePagination.vue-eKZkqxB7.js";import{_ as P}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as N}from"./useStaking-1DgbeL2_.js";import{a as W}from"./strings-rQgUKePI.js";import{_ as q,a as z}from"./placeholder-search-4-dark-Jht91LnM.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const U=t({id:"userStakingLogs",state:()=>({logs:[],loading:!1}),actions:{async fetchStakingLogs(){this.loading=!0;try{const{getStakingLogs:e}=N(),a=await e();this.logs=a.data.result}catch(e){console.error("Error fetching user staking logs:",e)}this.loading=!1}}}),H={value:10},O={value:25},X={value:50},G={value:100},J=h("img",{class:"block dark:hidden",src:q,alt:"Placeholder image"},null,-1),K=h("img",{class:"hidden dark:block",src:z,alt:"Placeholder image"},null,-1),M={key:1,class:"w-full"},Q={class:"mt-6"},Y={class:"flex w-full items-center justify-between p-4 md:p-6"},Z={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},ee={class:"p-4 md:p-6"},ae={class:"mx-auto w-full text-center"},te={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},le={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},se={class:"p-4 md:p-6"},oe={class:"flex gap-x-2"},re=l({__name:"logs",setup(t){const l=U(),q=s(),z=o(""),re=o(10),ie=r((()=>parseInt(q.query.page??"1"))),ue=r((()=>l.logs.filter((e=>e.uuid.includes(z.value)||e.pool?.currency.includes(z.value))))),ne=r((()=>{const e=(ie.value-1)*re.value,a=e+re.value;return ue.value.slice(e,a)}));i((async()=>{0===l.logs.length&&(l.loading=!0,await l.fetchStakingLogs(),l.loading=!1)}));const de=e=>{switch(e){case"ACTIVE":return"warning";case"RELEASED":return"info";case"WITHDRAWN":return"success"}},ce=o(!1),me=o(!1),pe=o(null),{toast:ge}=u(),{withdrawStake:fe}=N();return(t,s)=>{const o=e,r=a,i=S,u=D,N=R,q=T,U=$,he=B,ve=V,be=A,ke=F,we=I,_e=P,xe=C,ye=L,Ee=p;return g(),n("div",null,[d(_e,null,{left:c((()=>[d(o,{modelValue:m(z),"onUpdate:modelValue":s[0]||(s[0]=e=>f(z)?z.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter stakes..."},null,8,["modelValue"])])),right:c((()=>[d(r,{modelValue:m(re),"onUpdate:modelValue":s[1]||(s[1]=e=>f(re)?re.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:c((()=>[h("option",H,"10 "+v(t.$t("per page")),1),h("option",O,"25 "+v(t.$t("per page")),1),h("option",X,"50 "+v(t.$t("per page")),1),h("option",G,"100 "+v(t.$t("per page")),1)])),_:1},8,["modelValue"])])),default:c((()=>[h("div",null,[m(l).loading||0!==m(ne)?.length?(g(),n("div",M,[d(ke,{class:"pt-5"},{default:c((()=>[(g(!0),n(k,null,w(m(ne),((e,a)=>(g(),b(be,{key:e.id,spaced:""},{start:c((()=>[d(u,{label:"Stake","hide-label":a>0,logo:`/img/crypto/${e.pool?.currency.toLowerCase()}.png`,title:`${e.pool?.currency} (${e.pool?.name})`,subtitle:e.uuid},null,8,["hide-label","logo","title","subtitle"])])),end:c((()=>[d(u,{label:"Duration","hide-label":a>0,title:`Start: ${("formatDate"in t?t.formatDate:m(W))(e.stake_date)}`,subtitle:`End: ${("formatDate"in t?t.formatDate:m(W))(e.release_date)}`},null,8,["hide-label","title","subtitle"]),d(N,{label:"Amount","hide-label":a>0,class:"w-20 xs:w-full"},{default:c((()=>[_(v(e.amount),1)])),_:2},1032,["hide-label"]),d(N,{label:"Status","hide-label":a>0,class:"w-20 xs:w-full"},{default:c((()=>[d(q,{color:de(e.status),flavor:"pastel",condensed:""},{default:c((()=>[_(v(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),d(N,{label:"Action","hide-label":a>0},{default:c((()=>[d(ve,{flavor:"context",label:"Dropdown",orientation:"end"},{default:c((()=>[x(d(he,{disabled:"RELEASED"!==e.status,onClick:a=>"RELEASED"===e.status?function(e){pe.value=e,ce.value=!0}(e):null,title:"Collect Rewards"},{start:c((()=>[d(U,{name:"solar:card-recive-bold-duotone",class:E(["me-2 block h-5 w-5",{"text-gray-400":"RELEASED"!==e.status}])},null,8,["class"])])),default:c((()=>[_(" "+v("RELEASED"===e.status?"Collect Rewards":"Locked"),1)])),_:2},1032,["disabled","onClick"]),[[y,"RELEASED"===e.status||"ACTIVE"===e.status]])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(g(),b(i,{key:0,title:m(z)&&""!==m(z)?"No matching results":"No results",subtitle:m(z)&&""!==m(z)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:c((()=>[J,K])),_:1},8,["title","subtitle"])),h("div",Q,[m(ue).length>m(re)?(g(),b(we,{key:0,"total-items":m(ue).length,"current-page":m(ie),"item-per-page":m(re)},null,8,["total-items","current-page","item-per-page"])):j("",!0)])])])),_:1}),d(Ee,{open:m(ce),size:"sm",onClose:s[5]||(s[5]=e=>ce.value=!1)},{header:c((()=>[h("div",Y,[h("h3",Z,v(t.$t("Collect"))+" "+v(t.$t("Staking Reward")),1),d(xe,{onClick:s[2]||(s[2]=e=>ce.value=!1)})])])),footer:c((()=>[h("div",se,[h("div",oe,[d(ye,{onClick:s[3]||(s[3]=e=>ce.value=!1)},{default:c((()=>[_(v(t.$t("Cancel")),1)])),_:1}),d(ye,{color:"success",flavor:"solid",onClick:s[4]||(s[4]=e=>async function(){me.value=!0;try{const e=await fe(pe.value?.id);ge.response(e),"success"===e.status&&await l.fetchStakingLogs()}catch(e){ge.danger(e)}ce.value=!1,me.value=!1,pe.value=null}()),disabled:m(me),loading:m(me)},{default:c((()=>[_(v(t.$t("Collect")),1)])),_:1},8,["disabled","loading"])])])])),default:c((()=>[h("div",ee,[h("div",ae,[h("h3",te,v(t.$t("Are you sure?")),1),h("p",le,v(t.$t("Do you really want to collect this"))+" "+v(t.$t("stake reward"))+"? "+v(t.$t("This process cannot be undone"))+". ",1)])])])),_:1},8,["open"])])}}});export{re as default};
