import{a,z as e,ac as l,ad as s,c as t,r,E as o,b as n,e as u,w as c,o as d,q as i,t as m,u as p,f as h,O as f,p as w,F as v,k as x,_ as g,x as y,X as b}from"../e/entry-8qgg5CL-.js";import{_}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as j}from"./BaseInput.vue-iInHQMIA.js";import{_ as k}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as V}from"./useForex-v_V55_1y.js";import{u as W}from"./account-JB-kYMyf.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";import"./input-id-wZ-Ta08j.js";const B={class:"space-y-5 min-h-screen pb-20"},z=h("hr",{class:"border-gray-200 dark:border-gray-700"},null,-1),C={class:"space-y-5 pl-8"},I={class:"w-full"},$=h("hr",{class:"border-gray-200 dark:border-gray-700"},null,-1),A=a({__name:"withdraw",setup(a){const A=e(),E=l(),{toast:F}=s(),{storeWithdrawTransaction:T}=V(),D=W(),L=t((()=>D.accounts.LIVE)),{accountId:S}=A.params,U=r(0),X=r(!1),q=r(null),{getForexCurrencies:N}=V(),O=r([]);async function P(){if(X.value=!0,q.value){try{const a=await T(S,q.value,U.value);F.response(a),"success"===a.status&&E.push("/user/forex")}catch(a){F.danger(a)}X.value=!1}else F.dangerText("Please select a wallet")}return o((async()=>{const a=await N();"success"===a.status&&(O.value=a.data.result),0===D.accounts?.length&&await D.fetchAccounts()})),(a,e)=>{const l=g,s=y,t=b,r=_,o=j,V=k;return d(),n("div",null,[u(V,null,{left:c((()=>[u(l,{size:"xl"},{default:c((()=>[i(m(a.$t("Withdraw"))+" from account ID: "+m(p(S)),1)])),_:1})])),right:c((()=>[h("div",null,[u(t,{to:"/user/forex",color:"muted",flavor:"pastel"},{default:c((()=>[u(s,{name:"line-md:chevron-left",class:"h-4 w-4"}),h("span",null,m(a.$t("Cancel")),1)])),_:1})])])),default:c((()=>[h("div",B,[h("div",null,[u(l,{as:"h3",size:"2xl",weight:"bold",class:"text-muted-800 dark:text-white items-center flex"},{default:c((()=>[p(q)?(d(),f(s,{key:1,name:"line-md:confirm-circle",class:"h-6 w-6 mr-2"})):(d(),f(s,{key:0,name:"line-md:loading-alt-loop",class:"h-6 w-6 mr-2"})),i(" "+m(a.$t("Select Wallet Currency")),1)])),_:1}),u(r,{class:"max-w-sm mt-5 pl-8 z-40",modelValue:p(q),"onUpdate:modelValue":e[0]||(e[0]=a=>w(q)?q.value=a:null),items:p(O).length>0?p(O)?.map((a=>a.currency)):["No currencies available"],placeholder:"Select a wallet",shape:"rounded"},null,8,["modelValue","items"])]),p(q)&&null!==p(q).value?(d(),n(v,{key:0},[z,u(l,{as:"h3",size:"2xl",weight:"bold",class:"text-muted-800 dark:text-white flex items-center gap-2"},{default:c((()=>[u(s,{name:"line-md:downloading-loop",class:"h-6 w-6"}),i(" "+m(a.$t("Withdrawal Details")),1)])),_:1}),h("div",C,[h("div",I,[(d(),f(o,{modelValue:p(U),"onUpdate:modelValue":e[1]||(e[1]=a=>w(U)?U.value=a:null),key:p(q),shape:"rounded",type:"number",label:"Withdraw amount",placeholder:"Enter your withdraw amount..."},null,8,["modelValue"]))]),h("small",null,"Account Balance: "+m(p(L)?.balance),1)]),$,h("div",null,[u(t,{class:"w-full",color:"success",onClick:P,disabled:!p(U)||p(X)||p(U)>p(L)?.balance,loading:p(X)},{default:c((()=>[i(m(a.$t("Withdraw")),1)])),_:1},8,["disabled","loading"])])],64)):x("",!0)])])),_:1})])}}});export{A as default};
