import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as a}from"./BaseSelect.vue-p0KYznCX.js";import{d as s,a as l,z as t,r as i,c as o,E as r,ad as n,ac as u,b as d,e as c,w as m,u as v,an as p,o as w,p as f,O as h,F as g,B as b,q as _,t as y,f as x,k,ag as R,x as j,ao as B,X as C}from"../e/entry-8qgg5CL-.js";import{_ as I,a as T}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as D}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as V}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as A,a as E}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as F}from"./TairoFlexTable-zdoraqRc.js";import{_ as N}from"./BasePagination.vue-eKZkqxB7.js";import{_ as P}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as L}from"./useEcommerce-2nLxpPKu.js";import{_ as $,a as q}from"./placeholder-search-4-dark-Jht91LnM.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const z=s({id:"adminEcommerceReviews",state:()=>({reviews:[],loading:!1,selectedReview:null}),getters:{getReviewById:e=>a=>e.reviews.find((e=>e.id===a))},actions:{async fetchReviews(){this.loading=!0;try{const{getAdminReviews:e}=L(),a=await e();this.reviews=a.data.result}catch(e){console.error("Error fetching admin reviews:",e)}this.loading=!1},async addReview(e){this.reviews.push(e)},async updateReview(e){const a=this.reviews.findIndex((a=>a.id===e.id));-1!==a&&(this.reviews[a]=e)},async removeReview(e){const a=this.reviews.findIndex((a=>a.id===e));-1!==a&&this.reviews.splice(a,1)},async selectReview(e){this.selectedReview=e},async selectReviewById(e){this.selectedReview=this.getReviewById(e)||null}}}),S=x("option",{value:10},"10 per page",-1),U=x("option",{value:25},"25 per page",-1),G=x("option",{value:50},"50 per page",-1),O=x("option",{value:100},"100 per page",-1),W=x("img",{class:"block dark:hidden",src:$,alt:"Placeholder image"},null,-1),X=x("img",{class:"hidden dark:block",src:q,alt:"Placeholder image"},null,-1),H={key:1,class:"w-full"},J={class:"flex items-start"},K={class:"flex items-center justify-between p-4"},M=x("h3",{class:"text-lg font-medium leading-6"},"Delete Review",-1),Q=x("div",{class:"p-4 text-center"},[x("h3",{class:"text-lg font-medium leading-6"},"Are you sure?"),x("p",{class:"mb-3 text-sm leading-5"}," Do you really want to delete this review? This process cannot be undone. ")],-1),Y={class:"p-4 flex gap-x-2"},Z=l({__name:"index",setup(s){const l=z(),{deleteAdminReview:$}=L(),q=t(),Z=i(""),ee=i(10),ae=o((()=>parseInt(q.query.page??"1"))),se=o((()=>l.reviews.filter((e=>e.product?.name.includes(Z.value)))??[])),le=o((()=>{const e=(ae.value-1)*ee.value,a=e+ee.value;return se.value.slice(e,a)}));r((async()=>{0===l.reviews.length&&(l.loading=!0,await l.fetchReviews(),l.loading=!1)}));const{toast:te}=n();u();const ie=i(!1),oe=i(!1),re=i(null);async function ne(){oe.value=!0;try{const e=await $(re.value?.id);te.response(e),"success"===e.status&&l.removeReview(re.value?.id)}catch(e){te.danger(e)}ie.value=!1,oe.value=!1,re.value=null}const ue=e=>{switch(e){case"PENDING":return"warning";case"ACTIVE":return"success";case"INACTIVE":return"danger";default:return"secondary"}};return(s,t)=>{const i=e,o=a,r=R,n=I,u=D,L=j,$=V,q=A,z=E,te=T,de=F,ce=N,me=P,ve=B,pe=C,we=p;return w(),d("div",null,[c(me,null,{left:m((()=>[c(i,{modelValue:v(Z),"onUpdate:modelValue":t[0]||(t[0]=e=>f(Z)?Z.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter reviews..."},null,8,["modelValue"])])),right:m((()=>[c(o,{modelValue:v(ee),"onUpdate:modelValue":t[1]||(t[1]=e=>f(ee)?ee.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:m((()=>[S,U,G,O])),_:1},8,["modelValue"])])),default:m((()=>[v(l).loading||0!==v(le).length?(w(),d("div",H,[c(de,{class:"pt-5"},{default:m((()=>[(w(!0),d(g,null,b(v(le),((e,a)=>(w(),h(te,{key:e.id,spaced:""},{start:m((()=>[c(n,{label:"Reviewer Name","hide-label":a>0,logo:e.user?.avatar??"/img/placeholder.png",title:`${e.user?.first_name} ${e.user?.last_name}`,subtitle:e.user?.uuid},null,8,["hide-label","logo","title","subtitle"])])),end:m((()=>[c(u,{label:"Product","hide-label":a>0,class:"w-20 xs:w-full text-xs"},{default:m((()=>[_(y(e.product?.name),1)])),_:2},1032,["hide-label"]),c(u,{label:"Rating","hide-label":a>0,class:"w-20 xs:w-full text-xs"},{default:m((()=>[x("div",J,[x("span",null,y(e.rating)+" / 5",1),c(L,{name:"uim:star",class:"w-5 h-5 text-warning-300 ml-1 mb-1"})])])),_:2},1032,["hide-label"]),c(u,{label:"Status","hide-label":a>0,class:"w-20 xs:w-full"},{default:m((()=>[c($,{color:ue(e.status),flavor:"pastel",condensed:""},{default:m((()=>[_(y(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),c(u,{label:"Actions","hide-label":a>0},{default:m((()=>[c(z,{flavor:"context",label:"Dropdown",orientation:"end"},{default:m((()=>[c(q,{onClick:a=>function(e){re.value=e,ie.value=!0}(e),title:"Delete Review"},{start:m((()=>[c(L,{name:"line-md:close",class:"me-2 block h-5 w-5"})])),default:m((()=>[_(" Delete ")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(w(),h(r,{key:0,title:v(Z)&&""!==v(Z)?"No matching results":"No results",subtitle:v(Z)&&""!==v(Z)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:m((()=>[W,X])),_:1},8,["title","subtitle"])),v(se).length>v(ee)?(w(),h(ce,{key:2,"total-items":v(se).length,"current-page":v(ae),"items-per-page":v(ee)},null,8,["total-items","current-page","items-per-page"])):k("",!0)])),_:1}),c(we,{open:v(ie),size:"sm",onClose:t[4]||(t[4]=e=>ie.value=!1)},{header:m((()=>[x("div",K,[M,c(ve,{onClick:t[2]||(t[2]=e=>ie.value=!1)})])])),footer:m((()=>[x("div",Y,[c(pe,{onClick:t[3]||(t[3]=e=>ie.value=!1)},{default:m((()=>[_("Cancel")])),_:1}),c(pe,{color:"danger",flavor:"solid",onClick:ne,disabled:v(oe),loading:v(oe)},{default:m((()=>[_(" Delete ")])),_:1},8,["disabled","loading"])])])),default:m((()=>[Q])),_:1},8,["open"])])}}});export{Z as default};
