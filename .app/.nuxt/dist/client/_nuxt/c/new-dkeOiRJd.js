import{_ as e}from"./BaseAvatar.vue-XYSxxLJP.js";import{d as t,a,ad as s,ac as l,r as n,E as r,c as u,b as c,f as i,e as d,w as m,F as o,B as p,u as x,W as f,_ as g,g as v,C as h,Y as y,o as w,t as b,q as _,O as k,p as j,x as I,X as P}from"../e/entry-8qgg5CL-.js";import{_ as $}from"./BaseRadioHeadless.vue-ZJY_gl7l.js";import{_ as z}from"./BaseInput.vue-iInHQMIA.js";import{u as B}from"./investment-ZL9JbRBy.js";import{u as T}from"./useInvestment-ZaAPyLmc.js";import{u as A}from"./wallet-n04aoRPe.js";import"./input-id-wZ-Ta08j.js";import"./useWallet-8iHzU2hV.js";const V=t({id:"userInvestmentPlan",state:()=>({plans:[],loading:!1,selectedPlan:null}),getters:{getPlanById:e=>t=>e.plans.find((e=>e.id===t))},actions:{async fetchInvestmentPlans(){this.loading=!0;try{const{getInvestmentPlans:e}=T(),t=await e();this.plans=t.data.result}catch(e){console.error("Error fetching deposit plans:",e)}this.loading=!1},async selectPlan(e){this.selectedPlan=e},async selectPlanById(e){this.selectedPlan=this.plans.find((t=>t.id===e))||null}}}),S={class:"mb-8 flex flex-col justify-between md:flex-row md:items-center"},W={class:"ltablet:max-w-full flex max-w-[425px] flex-col items-center gap-4 text-center md:flex-row md:text-left lg:max-w-full"},E={class:"text-muted-500"},U={class:"mt-4 flex items-center justify-center gap-2 md:mt-0 md:justify-start"},Y={class:"dark:border-muted-800 mb-10 grid gap-4 pb-10 md:grid-cols-2 xl:gap-8"},C={class:"flex flex-col gap-3"},M={class:"child border-muted-200 dark:border-muted-700 dark:bg-muted-800 absolute end-3 top-3 flex h-7 w-7 items-center justify-center rounded-full border bg-white opacity-0"},O={class:"flex items-center justify-start gap-5"},R=["src"],q={class:"flex gap-12"},D=["src"],F={class:"space-y-4"},H={class:"px-5"},N={class:"font-sans text-xs px-5"},X={class:"flex items-center gap-2 text-success-500"},G={class:"text-muted-400"},J={class:"text-gray-800 dark:text-gray-200"},K={class:"flex items-center gap-2 text-success-500"},L={class:"text-muted-400"},Q={class:"text-gray-800 dark:text-gray-200"},Z={class:"flex items-center gap-2 text-success-500"},ee={class:"text-muted-400"},te={class:"text-gray-800 dark:text-gray-200"},ae={class:"flex items-center gap-2 text-success-500"},se={class:"text-muted-400"},le={class:"text-gray-800 dark:text-gray-200"},ne={class:"border-t pt-2 border-gray-200 dark:border-gray-700 space-y-2 p-5"},re={class:"flex justify-between items-center text-xs pt-2"},ue={class:"text-muted-800 dark:text-muted-200"},ce={class:"text-muted-800 dark:text-muted-200 items-center flex gap-1"},ie=a({__name:"new",setup(t){const a=V(),ie=B(),{createInvestment:de}=T(),me=A(),{toast:oe}=s(),pe=l(),xe=n(),fe=n(!1),ge=n(ie.userInvestment?.plan?.name||"");r((async()=>{0===me.wallets.length&&await me.fetchWallets(),0===a.plans.length&&await a.fetchInvestmentPlans(),0===a.plans.length&&(pe.push("/user/invest"),oe.dangerText("No investment plan available, please check back later")),ve.value.length>0&&(ge.value=ve.value[0].name),ie.userInvestment||await ie.fetchUserInvestment()}));const ve=u((()=>a.plans.filter((e=>e.status)))),he=u((()=>ve.value.find((e=>e.name===ge.value)))),ye=u((()=>me.wallets[he.value?.currency]||null)),we=async()=>{if(he.value)if(xe.value)if(xe.value<he.value.min_amount)oe.dangerText("Amount is less than minimum amount");else if(xe.value>he.value.max_amount)oe.dangerText("Amount is greater than maximum amount");else if(ye.value)if(xe.value>ye.value.balance)oe.dangerText("Insufficient balance");else{fe.value=!0;try{const e=await de(he.value?.id,xe.value);oe.response(e),"success"===e.status&&(ie.userInvestment=e.data.result,await me.fetchWallets(),pe.push("/user/invest"))}catch(e){oe.danger(e)}fe.value=!1}else oe.dangerText(`You don't have a fiat wallet for ${he.value.currency}`);else oe.dangerText("Please enter amount");else oe.dangerText("Please select a plan")};return(t,a)=>{const s=e,l=g,n=v,r=I,u=P,B=h,T=y,A=$,V=z;return w(),c("form",{action:"",method:"POST",onSubmit:a[2]||(a[2]=f((()=>{}),["prevent"])),class:"mx-auto w-full max-w-4xl pb-16"},[i("div",S,[i("div",W,[d(s,{src:"/img/illustrations/wizard/finish.svg",size:"xl"}),i("div",null,[d(l,{as:"h2",size:"xl",weight:"light",lead:"tight",class:"text-muted-800 dark:text-white"},{default:m((()=>[i("span",null,b(t.$t("Select a plan")),1)])),_:1}),d(n,null,{default:m((()=>[i("span",E,b(t.$t("Select a plan that works for you. You can always change your plan later"))+". ",1)])),_:1})])]),i("div",U,[d(B,{to:"/user/invest"},{default:m((()=>[d(u,{type:"submit",color:"muted"},{default:m((()=>[d(r,{name:"line-md:arrow-small-left",class:"h-5 w-5 text-current mr-2"}),_(" "+b(t.$t("Back")),1)])),_:1})])),_:1})])]),i("div",Y,[i("div",C,[(w(!0),c(o,null,p(x(ve),(e=>(w(),k(A,{modelValue:x(ge),"onUpdate:modelValue":a[0]||(a[0]=e=>j(ge)?ge.value=e:null),name:"radio_custom",value:e.name},{default:m((()=>[d(T,{shape:"rounded",class:"text-muted-400/50 peer-checked:!border-success-500 peer-checked:text-success-500 group relative text-center peer-checked:[&_.child]:!opacity-100"},{default:m((()=>[i("div",M,[d(r,{name:"lucide:check",class:"h-3 w-3 text-current"})]),i("div",O,[i("img",{src:e?.image||"/img/placeholder.png",loading:"lazy",class:"rounded-l w-16 h-16 object-cover"},null,8,R),d(l,{as:"h4",size:"sm",weight:"medium",class:"text-muted-800 dark:text-white"},{default:m((()=>[_(b(e.title),1)])),_:2},1024)])])),_:2},1024)])),_:2},1032,["modelValue","value"])))),256))]),i("div",null,[d(T,{shape:"rounded"},{default:m((()=>[i("div",q,[i("img",{src:x(he)?.image||"/img/placeholder.png",loading:"lazy",class:"w-full mb-4 rounded-t-lg h-64 object-cover"},null,8,D)]),i("div",F,[i("div",H,[i("div",null,[d(n,{size:"xl"},{default:m((()=>[_(b(x(he)?.title),1)])),_:1})]),d(n,{size:"sm",lead:"tight",class:"text-muted-500 dark:text-muted-400"},{default:m((()=>[_(b(x(he)?.description),1)])),_:1})]),i("div",N,[i("div",null,[i("ul",null,[i("li",X,[d(r,{name:"fluent:chevron-right-12-filled",class:"h-3 w-3 text-current"}),i("span",G,[_(b(t.$t("Return of investment"))+": ",1),i("span",J,b(x(he)?.roi)+"%",1)])]),i("li",K,[d(r,{name:"fluent:chevron-right-12-filled",class:"h-3 w-3 text-current"}),i("span",L,[_(b(t.$t("Duration"))+": ",1),i("span",Q,b(x(he)?.duration+" "+(x(he)?.duration>1?"days":"day")),1)])]),i("li",Z,[d(r,{name:"fluent:chevron-right-12-filled",class:"h-3 w-3 text-current"}),i("span",ee,[_(b(t.$t("Minimum Amount"))+": ",1),i("span",te,b(x(he)?.min_amount+" "+x(he)?.currency),1)])]),i("li",ae,[d(r,{name:"fluent:chevron-right-12-filled",class:"h-3 w-3 text-current"}),i("span",se,[_(b(t.$t("Maximum Amount"))+": ",1),i("span",le,b(x(he)?.max_amount+" "+x(he)?.currency),1)])])])])]),i("div",ne,[d(V,{modelValue:x(xe),"onUpdate:modelValue":a[1]||(a[1]=e=>j(xe)?xe.value=e:null),type:"number",label:"Amount",placeholder:"Enter amount",shape:"rounded",class:"w-full",min:x(he)?.min_amount,max:x(he)?.max_amount,autocomplete:"off"},null,8,["modelValue","min","max"]),i("div",re,[i("span",ue,b(t.$t("Balance")),1),i("span",ce,[_(b(x(ye)?.balance||0)+" "+b(x(he)?.currency)+" ",1),d(B,{to:"/user/wallets/fiat","data-nui-tooltip":"Wallets"},{default:m((()=>[d(r,{name:"ei:plus",class:"h-5 w-5 text-success-500"})])),_:1})])]),d(u,{type:"submit",color:"success",onClick:we,disabled:x(fe),class:"px-4 py-2 bg-success-500 text-white rounded hover:bg-success-600 w-full"},{default:m((()=>[_(b(t.$t("Start Investing")),1)])),_:1},8,["disabled"])])])])),_:1})])])],32)}}});export{ie as default};
