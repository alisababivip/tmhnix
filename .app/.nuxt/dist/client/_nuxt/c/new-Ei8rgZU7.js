import{a as e,S as a,c as s,ad as t,ac as r,b as l,e as o,w as u,o as d,q as n,t as i,f as m,u as c,_ as p,x as f,X as g,Y as v}from"../e/entry-8qgg5CL-.js";import{_ as b}from"./BaseInput.vue-iInHQMIA.js";import{_ as h}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as j}from"./BaseTextarea.vue-8st5U0qk.js";import{_ as y}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as x}from"./useSupport-ffNMpQhG.js";import{u as B}from"./user-j76Gmn-L.js";import{z as _,u as w,t as k,F as C}from"./vee-validate.esm-n59zZCC5.js";import"./input-id-wZ-Ta08j.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";const M={class:"p-5"},S={class:"flex flex-col gap-5"},U={class:"flex xs:flex-col sm:flex-row justify-between items-center gap-5"},I={class:"w-full"},V={class:"w-full"},T={class:"flex justify-end border-t border-gray-200 dark:border-gray-700 p-5"},$=e({__name:"new",setup(e){const $=B(),H=a();s((()=>H.getProfile));const L=_.object({subject:_.string().nonempty({message:"Subject is required"}),importance:_.enum(["LOW","MEDIUM","HIGH"]),message:_.string().nonempty({message:"Message is required"})}),O=k(L),W=s((()=>({subject:"",importance:"LOW",message:""}))),q=["LOW","MEDIUM","HIGH"],{handleSubmit:E,isSubmitting:D,meta:F,errors:G,resetForm:z,setErrors:A}=w({validationSchema:O,initialValues:W}),N=s((()=>Object.keys(G.value).length)),{toast:P}=t(),{createTicket:R}=x(),X=r(),Y=E((async e=>{try{const a=await R(e);P.response(a),"success"===a.status&&(await $.fetchTickets(),X.push(`/user/support/ticket/${a.data.result.uuid}`))}catch(a){console.log(a),P.error(a)}}));return(e,a)=>{const s=p,t=f,r=g,x=b,B=h,_=j,w=v,k=y;return d(),l("div",null,[o(k,null,{left:u((()=>[o(s,{as:"h3",size:"xl",weight:"medium",class:"text-muted-800 dark:text-white"},{default:u((()=>[n(i(e.$t("Create New Support Ticket")),1)])),_:1})])),right:u((()=>[o(r,{type:"button",color:"muted",class:"hover:bg-gray-300 dark:hover:bg-gray-800",to:"/user/support"},{default:u((()=>[o(t,{name:"line-md:chevron-left",class:"h-4 w-4 mr-2"}),n(" "+i(e.$t("Back")),1)])),_:1})])),default:u((()=>[o(w,null,{default:u((()=>[m("div",M,[m("div",S,[m("div",U,[m("div",I,[o(c(C),{name:"subject"},{default:u((({field:e,errorMessage:a,handleChange:s,handleBlur:t})=>[o(x,{"model-value":e.value,error:a,disabled:c(D),type:"text",icon:"ph:user-duotone",class:"w-full",placeholder:"Subject","onUpdate:modelValue":s,onBlur:t},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})]),m("div",V,[o(c(C),{name:"importance"},{default:u((({field:e,errorMessage:a,handleChange:s,handleBlur:t})=>[o(B,{"model-value":e.value,error:a,disabled:c(D),items:q,placeholder:"Importance","onUpdate:modelValue":s,onBlur:t},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})])]),o(c(C),{name:"message"},{default:u((({field:e,errorMessage:a,handleChange:s,handleBlur:t})=>[o(_,{"model-value":e.value,error:a,disabled:c(D),placeholder:"Message","onUpdate:modelValue":s,onBlur:t},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})])]),m("div",T,[o(r,{type:"button",variant:"secondary",class:"mr-2",onClick:c(z)},{default:u((()=>[n(i(e.$t("Reset")),1)])),_:1},8,["onClick"]),o(r,{type:"submit",color:"primary",disabled:c(D)||c(N),loading:c(D),onClick:c(Y)},{default:u((()=>[n(i(e.$t("Submit")),1)])),_:1},8,["disabled","loading","onClick"])])])),_:1})])),_:1})])}}});export{$ as default};
