import{a as e,z as a,c as l,ac as t,r as s,E as u,J as r,ad as o,b as i,e as n,w as c,_ as d,o as m,q as v,t as p,u as f,f as y,p as b,O as g,af as h,k as w,n as x,F as _,B as k,X as E,Y as D,ag as L,x as V}from"../e/entry-8qgg5CL-.js";import{_ as j}from"./BaseInput.vue-iInHQMIA.js";import{_ as S}from"./BaseSelect.vue-p0KYznCX.js";import{_ as I}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as N,a as A}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as C}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as F}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as T}from"./TairoFlexTable-zdoraqRc.js";import{_ as P}from"./BasePagination.vue-eKZkqxB7.js";import{_ as $}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as B}from"./useExchange-VMAYQu3P.js";import{u as q}from"./currency-9FjTf2Bf.js";import{_ as O,a as U}from"./placeholder-search-4-dark-Jht91LnM.js";import"./input-id-wZ-Ta08j.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const R={class:"w-full flex gap-2 xs:flex-col sm:flex-row items-center"},W={value:10},G={value:25},J={value:50},M={value:100},X=y("img",{class:"block dark:hidden",src:O,alt:"Placeholder image"},null,-1),z=y("img",{class:"hidden dark:block",src:U,alt:"Placeholder image"},null,-1),Y={key:1,class:"w-full sm:pt-5"},H={class:"mr-1"},K={class:"mx-1"},Q={class:"mt-6"},Z=e({__name:"index",setup(e){const O=a(),{getOrdersByParams:U}=B(),Z=q(),ee=l((()=>Z.items)),ae=l((()=>O.query.user)),le=l((()=>"string"==typeof O.query.type?O.query.type:"binary")),te=l((()=>O.query.status)),se=l((()=>O.query.currency)),ue=l((()=>O.query.side)),re=t(),oe=s(""),ie=s(!1),ne=s(""),ce=s(10),de=l((()=>parseInt(O.query.page??"1")));let me=s([]);u((async()=>{ie.value=!0;try{const e=await U(ae.value,le.value,te.value,se.value,ue.value);me.value=e.data.result}catch(e){me.value=[],console.log(e.message)}0===Z.items.length&&await Z.fetchCurrencies(),ie.value=!1})),r((()=>O.query),(async()=>{ie.value=!0;try{const e=await U(ae.value,le.value,te.value,se.value,ue.value);me.value=e.data.result}catch(e){me.value=[],console.log(e.message)}ie.value=!1}),{immediate:!0});const ve=l((()=>me.value.filter((e=>(!ae.value||e.user.uuid===ae.value)&&((!we.value||"All"===we.value||e.side===we.value)&&((!se.value||fe(e.symbol)===se.value)&&((!_e.value||"All"===_e.value||fe(e.symbol)===_e.value)&&((!xe.value||"All"===xe.value||e.status===xe.value)&&(!(ke.value&&new Date(e.created_at)<new Date(ke.value))&&(!(Ee.value&&new Date(e.created_at)>new Date(Ee.value))&&(ne.value&&""!==ne.value&&void 0!==ne.value&&ne.value!==oe.value&&(re.push({query:{...O.query,page:"1",filter:ne.value}}),oe.value=ne.value),!ne.value||e.uuid?.includes(ne.value)))))))))).sort(((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())))),pe=l((()=>{const e=(de.value-1)*ce.value,a=e+ce.value;return ve.value.slice(e,a)})),fe=e=>e.split("/")[0],ye=e=>e.split("/")[1],be=e=>{const a=ye(e.symbol);let l,t;switch(e.status){case"WIN":t="+",l=e.amount+e.amount*(e.profit/100);break;case"LOSS":t="-",l=e.amount;break;case"DRAW":t="",l=0}return t+l+" "+a},ge=e=>{switch(le.value){case"trade":switch(e){case"COMPLETED":return"success";case"PENDING":return"warning";case"FAILED":case"CANCELLED":case"REJECTED":case"EXPIRED":return"danger";default:return"info"}case"binary":switch(e){case"WIN":return"success";case"PENDING":return"warning";case"LOSS":return"danger";default:return"info"}}},he=s(!1),we=s(""),xe=s(""),_e=s(""),ke=s(""),Ee=s(""),De="binary"===le.value?["All","RISE","FALL"]:["All","BUY","SELL"],Le="binary"===le.value?["All","WIN","LOSS","DRAW","PENDING"]:["All","COMPLETED","PENDING","FAILED","CANCELLED","REJECTED","EXPIRED"],Ve=l((()=>{let e=3;return ue.value&&e--,te.value&&e--,se.value&&e--,e})),{formatedDate:je}=o(),Se=e=>Number(ee.value.find((a=>a.currency===e))?.precision)||8;return(e,a)=>{const l=d,t=j,s=V,u=E,r=S,o=I,B=D,q=L,O=N,U=C,Z=F,ae=A,re=T,oe=P,me=$;return m(),i("div",null,[n(l,{as:"h3",size:"xl",weight:"medium",class:"text-muted-800 dark:text-white mb-4"},{default:c((()=>[v(p(f(le).toUpperCase())+" "+p(e.$t("Orders")),1)])),_:1}),n(me,null,{left:c((()=>[y("div",R,[n(t,{modelValue:f(ne),"onUpdate:modelValue":a[0]||(a[0]=e=>b(ne)?ne.value=e:null),icon:"lucide:search",placeholder:"Search Order ID..."},null,8,["modelValue"]),n(u,{onClick:a[1]||(a[1]=e=>he.value=!f(he)),color:"muted",block:""},{default:c((()=>[f(he)?(m(),g(s,{key:0,name:"line-md:arrow-up",class:"h-4 w-4 mr-2"})):(m(),g(s,{key:1,name:"line-md:arrow-down",class:"h-4 w-4 mr-2"})),v(" "+p(e.$t("Filters")),1)])),_:1})])])),right:c((()=>[n(r,{modelValue:f(ce),"onUpdate:modelValue":a[2]||(a[2]=e=>b(ce)?ce.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:c((()=>[y("option",W,"10 "+p(e.$t("per page")),1),y("option",G,"25 "+p(e.$t("per page")),1),y("option",J,"50 "+p(e.$t("per page")),1),y("option",M,"100 "+p(e.$t("per page")),1)])),_:1},8,["modelValue"])])),default:c((()=>[y("div",null,[n(h,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:c((()=>[f(he)?(m(),g(B,{key:0,class:x(`grid gap-4 xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-${f(Ve)} lg:grid-cols-${f(Ve)+2} mb-6 p-5`)},{default:c((()=>[f(ue)?w("",!0):(m(),g(o,{key:0,modelValue:f(we),"onUpdate:modelValue":a[3]||(a[3]=e=>b(we)?we.value=e:null),label:"Order Side",items:f(De),placeholder:"Select order side"},null,8,["modelValue","items"])),f(te)?w("",!0):(m(),g(o,{key:1,modelValue:f(xe),"onUpdate:modelValue":a[4]||(a[4]=e=>b(xe)?xe.value=e:null),label:"Status",items:f(Le),placeholder:"Select status"},null,8,["modelValue","items"])),f(se)?w("",!0):(m(),g(o,{key:2,modelValue:f(_e),"onUpdate:modelValue":a[5]||(a[5]=e=>b(_e)?_e.value=e:null),label:"Currency",items:f(ee).map((e=>e.currency)),placeholder:"Select currency"},null,8,["modelValue","items"])),n(t,{modelValue:f(ke),"onUpdate:modelValue":a[6]||(a[6]=e=>b(ke)?ke.value=e:null),type:"date",label:"From"},null,8,["modelValue"]),n(t,{modelValue:f(Ee),"onUpdate:modelValue":a[7]||(a[7]=e=>b(Ee)?Ee.value=e:null),type:"date",label:"To"},null,8,["modelValue"])])),_:1},8,["class"])):w("",!0)])),_:1}),f(ie)||0!==f(pe)?.length?(m(),i("div",Y,[n(re,null,{default:c((()=>[n(h,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:c((()=>[(m(!0),i(_,null,k(f(pe),((e,a)=>(m(),g(ae,{key:e.id,spaced:""},{start:c((()=>[n(O,{label:"User","hide-label":a>0,logo:e.user?.avatar,title:`${e.user?.first_name} ${e.user?.last_name}`,subtitle:e.user?.uuid},null,8,["hide-label","logo","title","subtitle"]),n(O,{label:"Market","hide-label":a>0,logo:`/img/crypto/${fe(e.symbol.toLowerCase())}.png`,title:`${e.symbol}`,subtitle:f(je)(e.created_at,!0)},null,8,["hide-label","logo","title","subtitle"])])),end:c((()=>[n(U,{label:"Side","hide-label":a>0,class:"w-20 xs:w-full text-xs"},{default:c((()=>[v(p(e.side),1)])),_:2},1032,["hide-label"]),n(U,{label:"Amount","hide-label":a>0,class:"sm:w-20 md:w-30 lg:w-24 xs:w-full flex flex-row sm:flex-col text-xs"},{default:c((()=>[y("div",H,p(parseFloat(e.amount).toFixed(Se("trade"===f(le).value?fe(e.symbol):ye(e.symbol)))),1),y("div",null,p("trade"===f(le).value?fe(e.symbol):ye(e.symbol)),1)])),_:2},1032,["hide-label"]),"trade"!==f(le)||f(ie)?w("",!0):(m(),g(U,{key:0,label:"Fee","hide-label":a>0,class:"sm:w-20 md:w-30 lg:w-24 xs:w-full flex flex-row sm:flex-col text-xs"},{default:c((()=>[y("div",K,p(parseFloat(e.fee).toFixed(Se(e.fee_currency))),1),y("div",null,p(e.fee_currency),1)])),_:2},1032,["hide-label"])),"binary"!==f(le)||f(ie)?w("",!0):(m(),g(U,{key:1,label:"Profit","hide-label":a>0,class:x(["sm:w-20 md:w-30 lg:w-24 xs:w-full text-xs",{"text-green-500":"WIN"===e.status,"text-red-500":"LOSS"===e.status}])},{default:c((()=>[v(p(be(e)),1)])),_:2},1032,["hide-label","class"])),n(U,{label:"Status","hide-label":a>0,class:x(["xs:w-full",{"w-24":"trade"===f(le),"w-20":"binary"===f(le)}])},{default:c((()=>[n(Z,{color:ge(e.status),flavor:"pastel",condensed:""},{default:c((()=>[v(p(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label","class"])])),_:2},1024)))),128))])),_:1})])),_:1})])):(m(),g(q,{key:0,title:f(ne)&&""!==f(ne)?"No matching results":"No results",subtitle:f(ne)&&""!==f(ne)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:c((()=>[X,z])),_:1},8,["title","subtitle"])),y("div",Q,[f(ve).length>f(ce)?(m(),g(oe,{key:0,"total-items":f(ve).length,"current-page":f(de),"item-per-page":f(ce)},null,8,["total-items","current-page","item-per-page"])):w("",!0)])])])),_:1})])}}});export{Z as default};
