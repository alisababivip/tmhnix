import{a as e,z as a,ac as l,ad as s,c as t,r,E as u,b as d,e as i,w as n,o,q as c,t as m,u as w,f as p,O as h,p as v,F as f,k as y,_ as x,x as g,X as b}from"../e/entry-8qgg5CL-.js";import{_ as k}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_}from"./BaseInput.vue-iInHQMIA.js";import{_ as j}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as W}from"./useEcosystem-9eBUNbsT.js";import{u as V}from"./user-csCQGhQS.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";import"./input-id-wZ-Ta08j.js";const C={class:"space-y-5 min-h-screen pb-20"},$=p("hr",{class:"border-gray-200 dark:border-gray-700"},null,-1),B={class:"space-y-5 pl-8"},z={class:"w-full"},E={class:"w-full"},U={class:"text-sm"},L={key:0},M=p("span",{class:"text-muted-500"}," Minimum Withdraw:",-1),O={key:1},F=p("span",{class:"text-muted-500"}," Maximum Withdraw:",-1),I={key:2},S=p("span",{class:"text-muted-500"}," Withdraw Fee:",-1),T=p("hr",{class:"border-gray-200 dark:border-gray-700"},null,-1),q=e({__name:"[currency]",setup(e){const q=a(),A=l(),{getWallet:D,withdraw:P}=W(),{toast:Q}=s(),X=q.params.currency.toUpperCase(),G=V(),H=t((()=>G.currencies.find((e=>e.currency===X)))),J=r(null),K=r(""),N=r(0),R=r(!1),Y=r(),Z=t((()=>J.value&&J.value.addresses?Object.keys(J.value.addresses):[]));async function ee(){if(K.value){R.value=!0;try{const e=await P(J.value?.uuid,Y.value,N.value,K.value);Q.response(e),"success"===e.status&&A.push(`/user/wallets/funding/${X.toLowerCase()}`)}catch(e){Q.danger(e)}R.value=!1}else Q.dangerText("Please enter a valid address")}u((async()=>{await async function(){try{const e=await D(X);J.value=e.data.result,Y.value=Object.keys(J.value?.addresses)[0]}catch(e){A.push("/user/wallets/funding")}0===G.currencies.length&&await G.fetchCurrencies()}()}));const ae=t((()=>{if(!Y.value||!H.value||!N.value||N.value<=0)return 0;const e=H.value.fees.withdrawal??0,a=H.value.fees.min_withdrawal??0,l=N.value*e;return Math.max(l,a)}));return(e,a)=>{const l=x,s=g,t=b,r=k,u=_,W=j;return o(),d("div",null,[i(W,null,{left:n((()=>[i(l,{size:"xl"},{default:n((()=>[c(m(w(X))+" "+m(e.$t("Withdraw")),1)])),_:1})])),right:n((()=>[p("div",null,[i(t,{to:`/user/wallets/funding/${w(X).toLowerCase()}`,color:"muted",flavor:"pastel"},{default:n((()=>[i(s,{name:"line-md:chevron-left",class:"h-4 w-4"}),p("span",null,m(e.$t("Cancel")),1)])),_:1},8,["to"])])])),default:n((()=>[p("div",C,[p("div",null,[i(l,{as:"h3",size:"2xl",weight:"bold",class:"text-muted-800 dark:text-white flex items-center gap-2"},{default:n((()=>[w(Y)?(o(),h(s,{key:1,name:"line-md:confirm-circle",class:"h-6 w-6"})):(o(),h(s,{key:0,name:"line-md:loading-alt-loop",class:"h-6 w-6"})),c(" "+m(e.$t("Select Chain")),1)])),_:1}),i(r,{class:"max-w-sm mt-5 pl-8",modelValue:w(Y),"onUpdate:modelValue":a[0]||(a[0]=e=>v(Y)?Y.value=e:null),items:w(Z),placeholder:"Select a chain",shape:"rounded"},null,8,["modelValue","items"])]),w(Y)?(o(),d(f,{key:0},[$,i(l,{as:"h3",size:"2xl",weight:"bold",class:"text-muted-800 dark:text-white flex items-center gap-2"},{default:n((()=>[i(s,{name:"line-md:downloading-loop",class:"h-6 w-6"}),c(" "+m(e.$t("Withdrawal Details")),1)])),_:1}),p("div",B,[p("div",z,[i(u,{modelValue:w(K),"onUpdate:modelValue":a[1]||(a[1]=e=>v(K)?K.value=e:null),shape:"rounded",type:"text",label:"Withdraw address",placeholder:"Enter your withdraw address..."},null,8,["modelValue"])]),p("div",E,[(o(),h(u,{modelValue:w(N),"onUpdate:modelValue":a[2]||(a[2]=e=>v(N)?N.value=e:null),key:w(Y),shape:"rounded",type:"number",label:"Withdraw amount",placeholder:"Enter your withdraw amount...",autocomplete:"off"},null,8,["modelValue"]))]),p("div",U,[w(H)?.limits?.withdrawal?.min?(o(),d("div",L,[M,c(" "+m(w(H)?.limits?.withdrawal?.min)+" "+m(w(X)),1)])):y("",!0),w(H)?.limits?.withdrawal?.max?(o(),d("div",O,[F,c(" "+m(w(H)?.limits?.withdrawal?.max)+" "+m(w(X)),1)])):y("",!0),w(H)?.fees?.withdrawal?(o(),d("div",I,[S,c(" "+m(w(ae))+" "+m(w(X)),1)])):y("",!0)])]),T,p("div",null,[i(t,{class:"w-full",color:"success",onClick:ee,disabled:!w(K)||!w(N)||w(R),loading:w(R)},{default:n((()=>[c(m(e.$t("Withdraw")),1)])),_:1},8,["disabled","loading"])])],64)):y("",!0)])])),_:1})])}}});export{q as default};
