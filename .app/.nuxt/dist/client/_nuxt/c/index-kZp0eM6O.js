import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{a,z as l,c as t,r as s,E as u,ac as r,b as o,e as n,w as i,o as c,f as d,u as m,p,O as v,q as f,t as y,af as g,k as w,n as h,F as _,B as T,x as b,X as E,Y as x,ag as D}from"../e/entry-8qgg5CL-.js";import{_ as I}from"./BaseSelect.vue-p0KYznCX.js";import{_ as k}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as V,a as A}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as j}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as N}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as F}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as P}from"./TairoFlexTable-zdoraqRc.js";import{_ as R}from"./BasePagination.vue-eKZkqxB7.js";import{_ as S}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as C}from"./useWallet-8iHzU2hV.js";import{a as L,f as O}from"./strings-rQgUKePI.js";import{_ as B,a as $}from"./placeholder-search-4-dark-Jht91LnM.js";import"./input-id-wZ-Ta08j.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const U={class:"w-full flex gap-2 xs:flex-col sm:flex-row"},q={value:10},W={value:25},M={value:50},G={value:100},X=d("img",{class:"block dark:hidden",src:B,alt:"Placeholder image"},null,-1),Y=d("img",{class:"hidden dark:block",src:$,alt:"Placeholder image"},null,-1),H={key:1,class:"w-full sm:pt-5"},z={class:"mt-6"},J=a({__name:"index",setup(a){const B=l(),{getAdminTransactions:$}=C(),J=t((()=>B.query.user)),K=t((()=>B.query.type)),Q=t((()=>B.query.status)),Z=t((()=>B.query.walletId)),ee=t((()=>B.query.walletType)),ae=s(""),le=s(!1),te=s(""),se=s(10),ue=t((()=>parseInt(B.query.page??"1")));let re=s([]);u((async()=>{le.value=!0;try{const e=await $(J.value,K.value,Q.value,Z.value,ee.value);re.value=e.data.result}catch(e){re.value=[],console.log(e.message)}le.value=!1}));const oe=t((()=>re.value.filter((e=>(!J.value||e.user.uuid===J.value)&&((!de.value||"All"===de.value||e.type===de.value)&&((!me.value||"All"===me.value||e.walletType===me.value)&&((!fe.value||"All"===fe.value||e.status===fe.value)&&(!(pe.value&&new Date(e.created_at)<new Date(pe.value))&&(!(ve.value&&new Date(e.created_at)>new Date(ve.value))&&(te.value&&""!==te.value&&void 0!==te.value&&te.value!==ae.value&&(_e.push({query:{...B.query,page:"1",filter:te.value}}),ae.value=te.value),!te.value||e.reference_id?.includes(te.value))))))))).sort(((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())))),ne=t((()=>{const e=(ue.value-1)*se.value,a=e+se.value;return oe.value.slice(e,a)})),ie=e=>{switch(e){case"COMPLETED":return"success";case"PENDING":return"warning";case"FAILED":case"CANCELLED":case"REJECTED":case"EXPIRED":return"danger";default:return"info"}},ce=s(!1),de=s(""),me=s(""),pe=s(""),ve=s(""),fe=s(""),ye=["All","FAILED","DEPOSIT","WITHDRAW","OUTGOING_TRANSFER","INCOMING_TRANSFER","PAYMENT","REFUND","BINARY_ORDER","FOREX_DEPOSIT","FOREX_WITHDRAW","INVESTMENT","INVESTMENT_ROI"],ge=["All","FIAT","SPOT"],we=["All","PENDING","COMPLETED","FAILED","CANCELLED","EXPIRED"],he=t((()=>{let e=3;return K.value&&e--,ee.value&&e--,Q.value&&e--,e})),_e=r();return(a,l)=>{const t=e,s=b,u=E,r=I,C=k,B=x,$=D,J=V,Z=j,ae=N,re=F,Te=A,be=P,Ee=R,xe=S;return c(),o("div",null,[n(xe,null,{left:i((()=>[d("div",U,[n(t,{modelValue:m(te),"onUpdate:modelValue":l[0]||(l[0]=e=>p(te)?te.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Search Transaction ID..."},null,8,["modelValue"]),n(u,{onClick:l[1]||(l[1]=e=>ce.value=!m(ce)),color:"muted",block:""},{default:i((()=>[m(ce)?(c(),v(s,{key:0,name:"line-md:arrow-up",class:"h-4 w-4 mr-2"})):(c(),v(s,{key:1,name:"line-md:arrow-down",class:"h-4 w-4 mr-2"})),f(" "+y(a.$t("Filters")),1)])),_:1})])])),right:i((()=>[n(r,{modelValue:m(se),"onUpdate:modelValue":l[2]||(l[2]=e=>p(se)?se.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:i((()=>[d("option",q,"10 "+y(a.$t("per page")),1),d("option",W,"25 "+y(a.$t("per page")),1),d("option",M,"50 "+y(a.$t("per page")),1),d("option",G,"100 "+y(a.$t("per page")),1)])),_:1},8,["modelValue"])])),default:i((()=>[d("div",null,[n(g,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:i((()=>[m(ce)?(c(),v(B,{key:0,class:h(`grid gap-4 xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-${m(he)} lg:grid-cols-${m(he)+2} mb-6 p-5`)},{default:i((()=>[m(K)?w("",!0):(c(),v(C,{key:0,modelValue:m(de),"onUpdate:modelValue":l[3]||(l[3]=e=>p(de)?de.value=e:null),label:"Transaction Type",items:ye,placeholder:"Select a Transaction Type"},null,8,["modelValue"])),m(ee)?w("",!0):(c(),v(C,{key:1,modelValue:m(me),"onUpdate:modelValue":l[4]||(l[4]=e=>p(me)?me.value=e:null),label:"Wallet Type",items:ge,placeholder:"Select a Wallet Type"},null,8,["modelValue"])),m(Q)?w("",!0):(c(),v(C,{key:2,modelValue:m(fe),"onUpdate:modelValue":l[5]||(l[5]=e=>p(fe)?fe.value=e:null),label:"Status",items:we,placeholder:"Select a Status"},null,8,["modelValue"])),n(t,{modelValue:m(pe),"onUpdate:modelValue":l[6]||(l[6]=e=>p(pe)?pe.value=e:null),type:"date",label:"From"},null,8,["modelValue"]),n(t,{modelValue:m(ve),"onUpdate:modelValue":l[7]||(l[7]=e=>p(ve)?ve.value=e:null),type:"date",label:"To"},null,8,["modelValue"])])),_:1},8,["class"])):w("",!0)])),_:1}),m(le)||0!==m(ne)?.length?(c(),o("div",H,[n(be,null,{default:i((()=>[n(g,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:i((()=>[(c(!0),o(_,null,T(m(ne),((e,l)=>(c(),v(Te,{key:e.id,spaced:""},{start:i((()=>[n(J,{label:"User","hide-label":l>0,logo:e.user?.avatar,title:`${e.user?.first_name} ${e.user?.last_name}`,subtitle:("formatDate"in a?a.formatDate:m(L))(e.created_at)},null,8,["hide-label","logo","title","subtitle"])])),end:i((()=>[n(Z,{label:"Type","hide-label":l>0,class:"w-28 xs:w-full text-xs"},{default:i((()=>[f(y(e.type),1)])),_:2},1032,["hide-label"]),n(Z,{label:"Total","hide-label":l>0,class:"w-20 xs:w-full text-xs"},{default:i((()=>[f(y("FIAT"===e.wallet?.type?("formatPrice"in a?a.formatPrice:m(O))(e.amount??0,e.wallet?.currency):(e.amount??0)+" "+e.wallet?.currency),1)])),_:2},1032,["hide-label"]),n(Z,{label:"Fee","hide-label":l>0,class:"w-20 xs:w-full text-xs"},{default:i((()=>[f(y("FIAT"===e.wallet?.type?("formatPrice"in a?a.formatPrice:m(O))(e.fee??0,e.wallet?.currency):(e.fee??0)+" "+e.wallet?.currency),1)])),_:2},1032,["hide-label"]),n(Z,{label:"Status","hide-label":l>0,class:"w-20 xs:w-full"},{default:i((()=>[n(ae,{color:ie(e.status),flavor:"pastel",condensed:""},{default:i((()=>[f(y(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),n(Z,{label:"Actions","hide-label":l>0,class:"w-full sm:w-20"},{default:i((()=>[n(re,{condensed:"",color:"muted",onClick:a=>{return l=e.uuid,void _e.push(`/admin/finance/log/${l}`);var l},"data-nui-tooltip":"View"},{default:i((()=>[n(s,{name:"ph:eye-duotone",class:"h-4 w-4"})])),_:2},1032,["onClick"])])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])),_:1})])):(c(),v($,{key:0,title:m(te)&&""!==m(te)?"No matching results":"No results",subtitle:m(te)&&""!==m(te)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:i((()=>[X,Y])),_:1},8,["title","subtitle"])),d("div",z,[m(oe).length>m(se)?(c(),v(Ee,{key:0,"total-items":m(oe).length,"current-page":m(ue),"item-per-page":m(se)},null,8,["total-items","current-page","item-per-page"])):w("",!0)])])])),_:1})])}}});export{J as default};
