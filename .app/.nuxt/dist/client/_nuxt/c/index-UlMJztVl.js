import{a as e,ad as t,S as a,c as s,ac as l,r as o,E as i,z as r,b as u,f as n,e as d,w as c,u as p,O as m,k as f,n as g,F as h,B as v,_ as x,g as w,X as b,an as _,o as y,t as k,q as j,p as P,af as $,x as T,ag as D,Y as B,C,ao as z}from"../e/entry-8qgg5CL-.js";import{_ as E}from"./BaseInput.vue-iInHQMIA.js";import{_ as V}from"./BaseSelect.vue-p0KYznCX.js";import{_ as A,a as R}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as I}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as F}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as L,a as N}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as S}from"./TairoFlexTable-zdoraqRc.js";import{_ as q}from"./BasePagination.vue-eKZkqxB7.js";import{_ as H}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_ as U}from"./BaseAvatar.vue-XYSxxLJP.js";import{u as Y}from"./useBlog-0Y19BpbN.js";import{u as O}from"./blog-ktBDzU-N.js";import{_ as G,a as J}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as W}from"./post-3bPFKFhV.js";import"./input-id-wZ-Ta08j.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const X=""+globalThis.__publicAssetsURL("img/illustrations/dashboards/writer/readers.svg"),K={class:"relative"},M={class:"grid grid-cols-12 gap-6"},Q={class:"ltablet:col-span-8 col-span-12 lg:col-span-8"},Z={class:"grid grid-cols-12 gap-6"},ee={class:"col-span-12"},te={class:"bg-primary-800 flex flex-col items-center rounded-2xl p-4 sm:flex-row"},ae=n("div",{class:"relative h-[150px] w-[320px] shrink-0 sm:h-[175px]"},[n("img",{class:"pointer-events-none absolute start-6 top-0 sm:-start-10",src:X,alt:"Readers illustration"})],-1),se={class:"mt-6 grow sm:mt-0"},le={class:"pb-4 text-center sm:pb-0 sm:text-left"},oe={class:"mt-2"},ie=n("span",null,"New article",-1),re={class:"col-span-12"},ue={class:"w-full"},ne={value:10},de={value:25},ce={value:50},pe={value:100},me=n("img",{class:"block dark:hidden",src:G,alt:"Placeholder image"},null,-1),fe=n("img",{class:"hidden dark:block",src:J,alt:"Placeholder image"},null,-1),ge={key:1,class:"w-full sm:pt-5"},he={class:"mt-6"},ve={class:"ltablet:col-span-4 col-span-12 lg:col-span-4"},xe={class:"bg-muted-200 dark:bg-muted-800/70 rounded-2xl p-6"},we={class:"mb-8 flex items-center justify-between"},be=["src"],_e={class:"mb-3"},ye={class:"text-muted-400"},ke={class:"flex gap-3"},je={class:"text-muted-400"},Pe={class:"flex w-full items-center justify-between p-4 md:p-6"},$e={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},Te={class:"p-4 md:p-6"},De={class:"mx-auto w-full text-center"},Be={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},Ce={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},ze={class:"p-4 md:p-6"},Ee={class:"flex gap-x-2"},Ve=e({__name:"index",setup(e){const{formatedDate:G,toast:J}=t(),X=a(),Ve=s((()=>X.getProfile)),Ae=W(),{deletePost:Re}=Y(),Ie=O(),Fe=s((()=>Ve.value?.author)),Le=l(),Ne=o("");i((async()=>{X.isLoggedIn||Le.push("/auth/login"),He.value=!0,0===Ie.posts.length&&await Ie.fetchPosts(),He.value=!1}));const Se=s((()=>Ie.posts?.slice(0,5)));o("recent");const qe=r(),He=o(!1),Ue=o(""),Ye=o(10),Oe=s((()=>parseInt(qe.query.page??"1"))),Ge=s((()=>Ie.posts?.filter((e=>e.author?.uuid===Fe.value?.uuid))||[])),Je=s((()=>Ge.value.filter((e=>(Ue.value&&""!==Ue.value&&void 0!==Ue.value&&Ue.value!==Ne.value&&(Le.push({query:{...qe.query,page:"1",filter:Ue.value}}),Ne.value=Ue.value),!Ue.value||e.title?.includes(Ue.value)))).sort(((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime())))),We=s((()=>{const e=(Oe.value-1)*Ye.value,t=e+Ye.value;return Je.value.slice(e,t)})),Xe=e=>{switch(e){case"PUBLISHED":return"success";case"DRAFT":return"warning";case"TRASH":return"danger";default:return"info"}},Ke=o(!1),Me=o(!1);return(e,t)=>{const a=x,s=w,l=T,o=b,i=E,r=V,Y=D,O=A,W=I,X=F,Le=L,Ne=N,qe=R,Ge=S,Qe=q,Ze=H,et=U,tt=B,at=C,st=z,lt=_;return y(),u("div",K,[n("div",M,[n("div",Q,[n("div",Z,[n("div",ee,[n("div",te,[ae,n("div",se,[n("div",le,[d(a,{tag:"h1",class:"text-white opacity-90"},{default:c((()=>[n("span",null,k(e.$t("Hello"))+", "+k(p(Ve).first_name),1)])),_:1}),d(s,{size:"sm",class:"max-w-xs text-white opacity-70"},{default:c((()=>[n("span",null,[p(Fe)?.status?"PENDING"===p(Fe)?.status?(y(),u(h,{key:1},[j(k(e.$t("Your author profile is currently pending for approval"))+". ",1)],64)):"REJECTED"===p(Fe)?.status?(y(),u(h,{key:2},[j(k(e.$t("Your author profile has been rejected"))+". ",1)],64)):"APPROVED"===p(Fe)?.status?(y(),u(h,{key:3},[j(k(e.$t("Have any ideas for a new article? If not, you should definitely check the feed for some inspiration"))+". ",1)],64)):f("",!0):(y(),u(h,{key:0},[j(k(e.$t("You don't have an author profile yet. Create one to start writing articles"))+". ",1)],64))])])),_:1}),n("div",oe,["APPROVED"===p(Fe)?.status?(y(),m(o,{key:0,size:"sm",color:"light",flavor:"outline",class:"w-full sm:w-auto",to:"/blog/author/post?type=new"},{default:c((()=>[d(l,{name:"lucide:plus",class:"h-4 w-4"}),ie])),_:1})):p(Fe)?.status?f("",!0):(y(),m(o,{key:1,size:"sm",color:"light",flavor:"outline",class:"w-full sm:w-auto",to:"/blog/author/new"},{default:c((()=>[d(l,{name:"lucide:plus",class:"h-4 w-4"}),n("span",null,k(e.$t("Create author profile")),1)])),_:1}))])])])])]),n("div",re,[d(Ze,null,{left:c((()=>[n("div",ue,[d(i,{modelValue:p(Ue),"onUpdate:modelValue":t[0]||(t[0]=e=>P(Ue)?Ue.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Search Post Title..."},null,8,["modelValue"])])])),right:c((()=>[d(r,{modelValue:p(Ye),"onUpdate:modelValue":t[1]||(t[1]=e=>P(Ye)?Ye.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:c((()=>[n("option",ne,"10 "+k(e.$t("per page")),1),n("option",de,"25 "+k(e.$t("per page")),1),n("option",ce,"50 "+k(e.$t("per page")),1),n("option",pe,"100 "+k(e.$t("per page")),1)])),_:1},8,["modelValue"])])),default:c((()=>[n("div",null,[p(He)||0!==p(We)?.length?(y(),u("div",ge,[d(Ge,null,{default:c((()=>[d($,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:c((()=>[(y(!0),u(h,null,v(p(We),((e,t)=>(y(),m(qe,{key:e.id,spaced:""},{start:c((()=>[d(O,{label:"Post","hide-label":t>0,picture:e.image||"/img/placeholder.png",title:e.title,subtitle:p(G)(e.created_at,!0)},null,8,["hide-label","picture","title","subtitle"])])),end:c((()=>[d(X,{label:"Status","hide-label":t>0,class:"w-20 xs:w-full"},{default:c((()=>[d(W,{color:Xe(e.status),flavor:"pastel",condensed:""},{default:c((()=>[j(k(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),d(X,{label:"Actions","hide-label":t>0,class:"w-20 xs:justify-end xs:w-full"},{default:c((()=>[d(Ne,{flavor:"context",label:"Dropdown",orientation:"end"},{default:c((()=>[d(Le,{to:`/blog/${e.slug}`,title:"View Post"},{start:c((()=>[d(l,{name:"ph:eye-duotone",class:"me-2 block h-5 w-5"})])),_:2},1032,["to"]),d(Le,{to:`/blog/author/post?type=edit&slug=${e.slug}`,title:"Edit Post"},{start:c((()=>[d(l,{name:"line-md:edit-twotone",class:"me-2 block h-5 w-5"})])),_:2},1032,["to"]),d(Le,{onClick:t=>function(e){Ae.selectedPost=e,Ke.value=!0}(e),title:"Delete Post"},{start:c((()=>[d(l,{name:"line-md:close",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])),_:1})])):(y(),m(Y,{key:0,title:p(Ue)&&""!==p(Ue)?"No matching results":"No results",subtitle:p(Ue)&&""!==p(Ue)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:c((()=>[me,fe])),_:1},8,["title","subtitle"])),n("div",he,[p(Je).length>p(Ye)?(y(),m(Qe,{key:0,"total-items":p(Je).length,"current-page":p(Oe),"item-per-page":p(Ye)},null,8,["total-items","current-page","item-per-page"])):f("",!0)])])])),_:1})])])]),n("div",ve,[n("div",xe,[n("div",we,[d(a,{as:"h3",size:"md",weight:"semibold",lead:"tight",class:"text-muted-800 dark:text-white"},{default:c((()=>[n("span",null,k(e.$t("New articles")),1)])),_:1})]),n("div",{class:g(["ptablet:grid ptablet:grid-cols-2 flex flex-col gap-6 overflow-y-auto pr-1",{"h-[calc(70vh)]":p(Se)?.length>2,"h-[calc(100%)]":p(Se)?.length<=2&&p(Se)?.length>0}])},[p(Se)?.length?(y(!0),u(h,{key:0},v(p(Se)?.slice(0,5),(e=>(y(),m(at,{to:`/blog/${e.slug}`,class:"flex flex-col",key:e.id},{default:c((()=>[n("img",{src:e.image||"/img/illustrations/dashboards/writer/post-1.svg",alt:"Post image",class:"bg-muted-200 rounded-xl"},null,8,be),d(tt,{class:"shadow-muted-300/30 dark:shadow-muted-900/20 -mt-8 !rounded-2xl p-6 shadow-xl"},{default:c((()=>[n("div",_e,[d(a,{as:"h4",size:"md",weight:"light",lead:"tight",class:"text-muted-800 mb-1 dark:text-white"},{default:c((()=>[n("span",null,k(e.title.length>50?e.title.slice(0,50)+"...":e.title),1)])),_:2},1024),d(s,{size:"xs"},{default:c((()=>[n("span",ye,k(e.description.length>100?e.description.slice(0,100)+"...":e.description),1)])),_:2},1024)]),n("div",ke,[d(et,{src:e.author?.user?.avatar||"/img/placeholder.png",text:"BT",size:"xs",class:"bg-primary-100 dark:bg-primary-500/20 text-primary-500 shrink-0"},null,8,["src"]),n("div",null,[d(a,{as:"h4",size:"xs",weight:"light",lead:"tight",class:"text-muted-800 dark:text-white text-left"},{default:c((()=>[n("span",null,k(e.author?.user?.first_name)+" "+k(e.author?.user?.last_name),1)])),_:2},1024),d(s,{size:"xs",class:"text-left"},{default:c((()=>[n("span",je,k(p(G)(e.created_at)),1)])),_:2},1024)])])])),_:2},1024)])),_:2},1032,["to"])))),128)):f("",!0)],2)])])]),d(lt,{open:p(Ke),size:"sm",onClose:t[5]||(t[5]=e=>Ke.value=!1)},{header:c((()=>[n("div",Pe,[n("h3",$e,k(e.$t("Delete"))+" "+k(e.$t("Post")),1),d(st,{onClick:t[2]||(t[2]=e=>Ke.value=!1)})])])),footer:c((()=>[n("div",ze,[n("div",Ee,[d(o,{onClick:t[3]||(t[3]=e=>Ke.value=!1)},{default:c((()=>[j(k(e.$t("Cancel")),1)])),_:1}),d(o,{color:"danger",flavor:"solid",onClick:t[4]||(t[4]=e=>async function(){Me.value=!0;try{await Re(Ae.selectedPost?.id),J.successText("Post deleted successfully"),await Ie.fetchPosts()}catch(e){J.danger(e)}Ke.value=!1,Me.value=!1}()),disabled:p(Me),loading:p(Me)},{default:c((()=>[j(k(e.$t("Delete")),1)])),_:1},8,["disabled","loading"])])])])),default:c((()=>[n("div",Te,[n("div",De,[n("h3",Be,k(e.$t("Are you sure?")),1),n("p",Ce,k(e.$t("Do you really want to delete this"))+" "+k(e.$t("post"))+"? "+k(e.$t("This process cannot be undone"))+". ",1)])])])),_:1},8,["open"])])}}});export{Ve as default};
