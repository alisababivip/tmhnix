import{a as e,r as a,z as t,ac as r,ad as s,c as l,E as n,O as c,w as o,o as d,e as i,q as u,t as p,u as f,f as m,b as x,k as g,F as v,B as y,p as h,x as b,X as k,Y as w,ao as _,an as T}from"../e/entry-8qgg5CL-.js";import{_ as E}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as $}from"./BaseTextarea.vue-8st5U0qk.js";import{_ as C}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as D}from"./useWallet-8iHzU2hV.js";import{f as j,a as P}from"./strings-rQgUKePI.js";import"./input-id-wZ-Ta08j.js";const R={class:"flex items-center justify-between mb-6"},A={class:"text-2xl font-semibold text-gray-800 dark:text-gray-200"},W={class:"flex items-center xs:flex-col sm:flex-row gap-2"},L={class:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 gap-4 mb-6 text-gray-700 dark:text-gray-400"},I={class:"flex flex-col"},B={class:"text-sm font-semibold text-gray-600 dark:text-gray-200"},M={class:"flex flex-col"},O={class:"text-sm font-semibold text-gray-600 dark:text-gray-200"},S={key:0,class:"flex flex-col"},z={class:"text-sm font-semibold text-gray-600 dark:text-gray-200"},N={class:"p-4 border rounded-md mb-6 text-gray-700 dark:border-gray-600 dark:text-gray-400"},F={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},H={class:"mb-4"},X={key:1},J={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},G=["href"],V={key:2},q={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},K={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6 text-gray-700 dark:text-gray-400"},U={class:"p-4 border rounded-md dark:border-gray-600"},Y={class:"flex jsutify-start items-center"},Z=["src"],Q={class:"font-bold"},ee={class:"p-4 border rounded-md dark:border-gray-600"},ae={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},te={key:0,class:"p-4 border rounded-md dark:border-gray-600 mb-6"},re={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},se={class:"grid gap-5 grid-cols-3"},le={class:"text-sm font-semibold text-gray-600 dark:text-gray-200"},ne={key:0},ce=["src"],oe={key:1,class:"p-4 border rounded-md dark:border-gray-600 mb-6"},de={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},ie=["innerHTML"],ue={key:2,class:"w-full flex gap-2 xs:flex-col sm:flex-row mb-2"},pe={class:"flex w-full items-center justify-between p-4 md:p-6"},fe={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},me={class:"p-4 md:p-6"},xe={class:"mx-auto w-full text-start"},ge={class:"p-4 md:p-6"},ve={class:"flex gap-x-2"},ye={class:"flex w-full items-center justify-between p-4 md:p-6"},he={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},be={class:"p-4 md:p-6"},ke={class:"mx-auto w-full text-start"},we={class:"p-4 md:p-6"},_e={class:"flex gap-x-2"},Te=e({__name:"[uuid]",setup(e){const Te=a(null),{getTransaction:Ee,updateTransactionStatus:$e,approveSpotWalletWithdrawal:Ce,rejectSpotWalletWithdrawal:De}=D(),je=t(),Pe=r(),Re=a(!1),Ae=a(!1),{toast:We}=s(),Le=l((()=>je.params.uuid)),Ie=a("We are sorry, your transaction has been rejected. Please contact support for more information. \n\nRejection reason goes here.  \n\nThank you.");n((async()=>{try{const e=await Ee(Le.value);Te.value=e.data.result}catch(e){Pe.back(),We.danger(e)}}));const Be=async(e,a)=>{if(Te.value)if("SPOT"===Te.value?.wallet?.type)if("COMPLETED"===e){try{const a=await Ce(Le.value);We.response(a),"success"===a.status&&(Te.value.status=e)}catch(t){We.danger(t)}Ae.value=!1}else{try{const t=await De(Le.value,a);We.response(t),"success"===t.status&&(Te.value.status=e,Te.value.metadata.note=a)}catch(t){We.danger(t)}Re.value=!1}else{try{const t=await $e(Le.value,e,a);We.response(t),"success"===t.status&&(Te.value.status=e,"REJECTED"===e&&(Te.value.metadata.note=a))}catch(t){We.danger(t)}"REJECTED"===e&&(Re.value=!1),"COMPLETED"===e&&(Ae.value=!1)}},Me=e=>{switch(e){case"COMPLETED":return"success";case"PENDING":return"warning";case"FAILED":case"CANCELLED":case"REJECTED":case"EXPIRED":return"danger";default:return"info"}},Oe=e=>{switch(e){case"DEPOSIT":return"success";case"WITHDRAW":return"danger";case"TRANSFER":return"warning";default:return"info"}},Se=l((()=>{if(!Te.value?.metadata?.chain)return null;switch(Te.value.metadata.chain){case"ETH":return`https://etherscan.io/tx/${Te.value.reference_id}`;case"BTC":return`https://www.blockchain.com/btc/tx/${Te.value.reference_id}`;case"LTC":return`https://blockchair.com/litecoin/transaction/${Te.value.reference_id}`;case"BCH":return`https://blockchair.com/bitcoin-cash/transaction/${Te.value.reference_id}`;case"XRP":return`https://xrpscan.com/tx/${Te.value.reference_id}`;case"XLM":return`https://stellarscan.io/transaction/${Te.value.reference_id}`;case"TRX":return`https://tronscan.org/#/transaction/${Te.value.reference_id}`;case"DOGE":return`https://dogechain.info/tx/${Te.value.reference_id}`;case"DASH":return`https://chainz.cryptoid.info/dash/tx.dws?${Te.value.reference_id}.htm`;case"ZEC":return`https://chainz.cryptoid.info/zec/tx.dws?${Te.value.reference_id}.htm`;case"XMR":return`https://xmrchain.net/tx/${Te.value.reference_id}`;case"BSC":case"BNB":return`https://bscscan.com/tx/${Te.value.reference_id}`;case"SOL":return`https://explorer.solana.com/tx/${Te.value.reference_id}`;case"ADA":return`https://explorer.cardano.org/en/transaction?id=${Te.value.reference_id}`;case"DOT":return`https://polkascan.io/polkadot/transaction/${Te.value.reference_id}`;case"KSM":return`https://polkascan.io/kusama/transaction/${Te.value.reference_id}`;default:return null}}));return(e,a)=>{const t=b,r=k,s=E,l=w,n=_,D=T,Ee=$,$e=C;return d(),c($e,{class:"mb-20"},{right:o((()=>[i(r,{onClick:a[0]||(a[0]=e=>f(Pe).back()),color:"muted"},{default:o((()=>[i(t,{name:"line-md:chevron-left",class:"mr-2"}),u(" "+p(e.$t("Back")),1)])),_:1})])),default:o((()=>[i(l,{class:"px-8 pt-8 pb-4 mx-auto"},{default:o((()=>[m("div",R,[m("h1",A,p(e.$t("Transaction Details")),1),m("div",W,[i(s,{shape:"rounded",color:Me(f(Te)?.status),flavor:"pastel",class:"dark:bg-opacity-80"},{default:o((()=>[u(p(f(Te)?.status),1)])),_:1},8,["color"]),i(s,{shape:"rounded",color:Oe(f(Te)?.type),class:"dark:bg-opacity-80"},{default:o((()=>[u(p(f(Te)?.type),1)])),_:1},8,["color"])])]),m("div",L,[m("div",I,[m("label",B,p(e.$t("Total Amount"))+":",1),u(" "+p("FIAT"===f(Te)?.wallet?.type?("formatPrice"in e?e.formatPrice:f(j))(f(Te)?.amount,f(Te)?.wallet?.currency):f(Te)?.amount+" "+f(Te)?.wallet?.currency),1)]),m("div",M,[m("label",O,p(e.$t("Total Fee"))+":",1),u(" "+p("FIAT"===f(Te)?.wallet?.type?("formatPrice"in e?e.formatPrice:f(j))(f(Te)?.fee??0,f(Te)?.wallet?.currency):(f(Te)?.fee??0)+" "+f(Te)?.wallet?.currency),1)]),"WITHDRAW"===f(Te)?.type&&"FIAT"===f(Te)?.wallet?.type?(d(),x("div",S,[m("label",z,p(e.$t("Withdraw Method"))+":",1),u(" "+p(f(Te)?.method),1)])):g("",!0)]),m("div",N,[f(Te)?.description?(d(),x(v,{key:0},[m("h2",F,p(e.$t("Description"))+": ",1),m("p",H,p(f(Te)?.description),1)],64)):g("",!0),f(Se)&&f(Te)?.reference_id?(d(),x("div",X,[m("h2",J,p(e.$t("Blockchain Transaction"))+": ",1),m("a",{href:f(Se),target:"_blank",rel:"noopener noreferrer",class:"text-blue-500 hover:underline"},p(f(Te)?.reference_id),9,G)])):(d(),x("div",V,[m("h2",q,p(e.$t("Transaction ID"))+": ",1),m("p",null,p(f(Te)?.uuid),1)]))]),m("div",K,[m("div",U,[m("div",Y,[m("img",{loading:"lazy",src:f(Te)?.user?.avatar||"/img/avatars/placeholder-file.png",class:"mr-2 h-16 w-16 rounded-full"},null,8,Z),m("div",null,[m("div",Q,p(f(Te)?.user.first_name)+" "+p(f(Te)?.user.last_name),1),m("div",null,p(f(Te)?.user.uuid),1)])])]),m("div",ee,[m("h2",ae,p(e.$t("Date"))+": ",1),m("p",null,p(("formatDate"in e?e.formatDate:f(P))(f(Te)?.created_at)),1)])]),f(Te)?.metadata?.custom_data?(d(),x("div",te,[m("h2",re,p(e.$t("Withdraw Details"))+": ",1),m("div",se,[(d(!0),x(v,null,y(f(Te)?.metadata?.custom_data,((e,a)=>(d(),x("div",{key:a},[m("label",le,p(e.title)+": ",1),"input"===e.type||"textarea"===e.type?(d(),x("p",ne,p(e.value),1)):"file upload"===e.type?(d(),x("img",{key:1,loading:"lazy",src:e.value,height:"180"},null,8,ce)):g("",!0)])))),128))])])):g("",!0),f(Te)?.metadata?.note&&"REJECTED"===f(Te)?.status?(d(),x("div",oe,[m("h2",de,p(e.$t("Note"))+": ",1),m("p",{innerHTML:f(Te)?.metadata?.note.replace(/\n/g,"<br />")},null,8,ie)])):g("",!0),"PENDING"===f(Te)?.status?(d(),x("div",ue,[i(r,{onClick:a[1]||(a[1]=e=>Ae.value=!0),color:"success",class:"w-full"},{default:o((()=>[u(p(e.$t("Approve Transaction")),1)])),_:1}),i(r,{onClick:a[2]||(a[2]=e=>Re.value=!0),color:"danger",class:"w-full"},{default:o((()=>[u(p(e.$t("Reject Transaction")),1)])),_:1})])):g("",!0)])),_:1}),i(D,{open:f(Ae),size:"lg",onClose:a[6]||(a[6]=()=>Ae.value=!1)},{header:o((()=>[m("div",pe,[m("h3",fe,p(e.$t("Approve Transaction")),1),i(n,{onClick:a[3]||(a[3]=e=>Ae.value=!1)})])])),footer:o((()=>[m("div",ge,[m("div",ve,[i(r,{onClick:a[4]||(a[4]=e=>Ae.value=!1)},{default:o((()=>[u(p(e.$t("Cancel")),1)])),_:1}),i(r,{color:"success",flavor:"solid",onClick:a[5]||(a[5]=e=>Be("COMPLETED"))},{default:o((()=>[u(p(e.$t("Approve")),1)])),_:1})])])])),default:o((()=>[m("div",me,[m("div",xe,[m("p",null,p(e.$t("Are you sure you want to approve this transaction? This action cannot be undone"))+". ",1)])])])),_:1},8,["open"]),i(D,{open:f(Re),size:"lg",onClose:a[11]||(a[11]=()=>Re.value=!1)},{header:o((()=>[m("div",ye,[m("h3",he,p(e.$t("Reject Transaction")),1),i(n,{onClick:a[7]||(a[7]=e=>Re.value=!1)})])])),footer:o((()=>[m("div",we,[m("div",_e,[i(r,{onClick:a[9]||(a[9]=e=>Re.value=!1)},{default:o((()=>[u(p(e.$t("Cancel")),1)])),_:1}),i(r,{color:"danger",flavor:"solid",onClick:a[10]||(a[10]=e=>Be("REJECTED",f(Ie)))},{default:o((()=>[u(p(e.$t("Reject")),1)])),_:1})])])])),default:o((()=>[m("div",be,[m("div",ke,[i(Ee,{modelValue:f(Ie),"onUpdate:modelValue":a[8]||(a[8]=e=>h(Ie)?Ie.value=e:null),type:"text",rows:"10",label:"Please provide a reason for rejection.",placeholder:"Enter rejection reason",shape:"curved",classes:{input:"h-12"}},null,8,["modelValue"])])])])),_:1},8,["open"])])),_:1})}}});export{Te as default};
