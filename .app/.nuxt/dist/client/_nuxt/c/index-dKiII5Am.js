import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as t}from"./BaseSelect.vue-p0KYznCX.js";import{d as s,a,z as l,E as o,r as n,c as r,a4 as i,aL as c,ay as d,b as u,e as m,w as p,o as f,u as g,p as h,q as x,t as v,f as w,af as k,F as y,B as b,O as _,k as T,x as j,X as I,ag as P,_ as B,g as V,C as E,Y as z}from"../e/entry-8qgg5CL-.js";import{_ as S}from"./BaseAvatar.vue-XYSxxLJP.js";import{_ as C}from"./BaseProgress.vue-xH0Mhn3Z.js";import{_ as M}from"./BasePagination.vue-eKZkqxB7.js";import{_ as $}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_ as A,a as q}from"./placeholder-search-6-dark-MQ5RJyXR.js";import{u as D}from"./useIco-3A31FykS.js";import"./input-id-wZ-Ta08j.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const F=s({id:"icoToken",state:()=>({tokens:[],loading:!1,selectedToken:null}),getters:{getTokenById:e=>t=>e.tokens.find((e=>e.id===t))},actions:{async fetchIcoTokens(){this.loading=!0;try{const{getIcoTokens:e}=D(),t=await e();this.tokens=t.data.result}catch(e){console.error("Error fetching deposit tokens:",e)}this.loading=!1},async removeToken(e){const t=this.tokens.findIndex((t=>t.id===e));this.tokens.splice(t,1)},async selectToken(e){this.selectedToken=e},async selectTokenById(e){this.selectedToken=this.tokens.find((t=>t.id===e))||null}}}),L=w("option",{value:10},"10 per page",-1),U=w("option",{value:25},"25 per page",-1),O=w("option",{value:50},"50 per page",-1),N=w("option",{value:100},"100 per page",-1),W={key:0},X=w("img",{class:"block dark:hidden",src:A,alt:"Placeholder image"},null,-1),Y=w("img",{class:"hidden dark:block",src:q,alt:"Placeholder image"},null,-1),G={key:1},H={class:"border-muted-200 dark:border-muted-700 flex flex-col items-center border-b p-6 sm:flex-row"},J={class:"flex flex-col items-center gap-3 sm:flex-row"},K={class:"text-center leading-none sm:text-left"},Q={class:"text-muted-800 dark:text-muted-100 font-sans text-base font-medium"},R={class:"text-muted-400 font-sans text-sm"},Z={class:"mt-4 flex items-center gap-3 sm:ms-auto sm:mt-0"},ee={class:"divide-muted-200 dark:divide-muted-700 flex items-center justify-center divide-x"},te={class:"flex flex-col gap-1 px-4 text-center"},se=w("span",null,"Phase",-1),ae={class:"flex flex-col gap-1 px-4 text-center"},le=w("span",null,"Sale Amount",-1),oe={class:"flex flex-col gap-1 px-4 text-center"},ne=w("span",null,"Contributions",-1),re={class:"flex flex-col items-center justify-between px-6 py-4 sm:flex-row"},ie={class:"w-full grow space-y-1 sm:w-auto sm:max-w-[260px]"},ce={class:"flex items-center justify-between"},de=w("h4",{class:"text-muted-700 dark:text-muted-100 font-sans text-sm font-medium"}," Progress ",-1),ue={class:"text-muted-400 font-sans text-sm"},me={class:"mt-4 w-full sm:mt-0 sm:w-auto"},pe={key:0},fe={key:1},ge={key:2},he={class:"mt-4 w-full sm:mt-0 sm:w-auto"},xe={class:"mt-6"},ve=a({__name:"index",setup(s){const a=l(),{uuid:A}=a.params,q=F();let D;o((async()=>{0===q.tokens.length&&await q.fetchIcoTokens(),D=setInterval((()=>{_e.value.forEach(Te)}),1e3)}));const ve=n(""),we=n(10),ke=r((()=>parseInt(a.query.page??"1"))),ye=r((()=>q.tokens.filter((e=>e.currency.includes(ve.value))))),be=i(new Map),_e=r((()=>{const e=(ke.value-1)*we.value,t=e+we.value;return ye.value.slice(e,t).map((e=>{const t=e.phases?.find((e=>"ACTIVE"===e.status)),s=be.get(e.id);return{...e,activePhase:t,countdown:s}}))})),Te=e=>{const t=e.phases?.find((e=>"ACTIVE"===e.status));if(t){const s=new Date,a=new Date(t.start_date),l=new Date(t.end_date),o=s>=a;let n=(o?l:a).getTime()-s.getTime();n<0&&(n=0);let r=Math.floor(n/864e5),i=Math.floor(n%864e5/36e5),c=Math.floor(n%36e5/6e4),d=Math.floor(n%6e4/1e3);be.set(e.id,{days:r,hours:i,minutes:c,seconds:d,isStarted:o})}};return c((()=>{clearInterval(D)})),d((()=>{ye.value.forEach(Te)})),(s,a)=>{const l=e,o=t,n=j,r=I,i=P,c=S,d=B,q=V,D=C,F=E,Te=z,je=M,Ie=$;return f(),u("div",null,[m(Ie,null,{left:p((()=>[m(l,{modelValue:g(ve),"onUpdate:modelValue":a[0]||(a[0]=e=>h(ve)?ve.value=e:null),icon:"lucide:search",placeholder:"Filter offers...",classes:{wrapper:"w-full sm:w-auto"}},null,8,["modelValue"]),m(o,{modelValue:g(we),"onUpdate:modelValue":a[1]||(a[1]=e=>h(we)?we.value=e:null),placeholder:"Items per page",label:"",classes:{wrapper:"w-full sm:w-40"}},{default:p((()=>[L,U,O,N])),_:1},8,["modelValue"])])),right:p((()=>[m(r,{type:"button",color:"muted",to:"/user/ico"},{default:p((()=>[m(n,{name:"line-md:chevron-left",class:"h-4 w-4 mr-2"}),x(" "+v(s.$t("Back")),1)])),_:1})])),default:p((()=>[w("div",null,[0===g(_e).length?(f(),u("div",W,[m(i,{title:"No matching results",subtitle:"Looks like we couldn't find any matching results for your search terms. Try other search terms."},{image:p((()=>[X,Y])),_:1})])):(f(),u("div",G,[m(k,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:p((()=>[(f(!0),u(y,null,b(g(_e),(e=>(f(),_(Te,{key:e.id},{default:p((()=>[w("div",H,[w("div",J,[m(c,{src:e.image,"badge-src":`/img/crypto/${e.chain}.png`,text:e.currency,size:"xl",class:"bg-muted-500/20 text-muted-500"},null,8,["src","badge-src","text"]),w("div",K,[w("h4",Q,v(e.currency)+" ("+v(e.name)+") ",1),w("p",R,v(e.description),1)])]),w("div",Z,[w("div",ee,[w("div",te,[m(d,{tag:"h3",size:"md",weight:"semibold",class:"text-muted-800 dark:text-muted-100"},{default:p((()=>[w("span",null,v(e.activePhase?.name),1)])),_:2},1024),m(q,{lead:"none",weight:"semibold",class:"text-muted-400 !text-[0.65rem] uppercase"},{default:p((()=>[se])),_:1})]),w("div",ae,[m(d,{tag:"h3",size:"md",weight:"semibold",class:"text-muted-800 dark:text-muted-100"},{default:p((()=>[w("span",null,v(e.activePhase?.allocations[0]?.percentage*e.allocation?.percentage/100*e.total_supply/100),1)])),_:2},1024),m(q,{lead:"none",weight:"semibold",class:"text-muted-400 !text-[0.65rem] uppercase"},{default:p((()=>[le])),_:1})]),w("div",oe,[m(d,{tag:"h3",size:"md",weight:"semibold",class:"text-muted-800 dark:text-muted-100"},{default:p((()=>[w("span",null,v(e.activePhase?.contributions??0),1)])),_:2},1024),m(q,{lead:"none",weight:"semibold",class:"text-muted-400 !text-[0.65rem] uppercase"},{default:p((()=>[ne])),_:1})])])])]),w("div",re,[w("div",ie,[w("div",ce,[de,w("div",null,[w("span",ue,v(e.activePhase?.contributionPercentage??0)+"% ",1)])]),m(D,{size:"xs",color:"primary",value:e.activePhase?.contributionPercentage??0},null,8,["value"])]),w("div",me,[e.countdown?.isStarted?(f(),u("div",pe,[w("span",null,"Ends in: "+v(e.countdown?.days)+"d "+v(e.countdown?.hours)+"h "+v(e.countdown?.minutes)+"m "+v(e.countdown?.seconds)+"s",1)])):g(be).has(e.id)?(f(),u("div",fe,[w("span",null,"Starts in: "+v(e.countdown?.days)+"d "+v(e.countdown?.hours)+"h "+v(e.countdown?.minutes)+"m "+v(e.countdown?.seconds)+"s",1)])):(f(),u("div",ge,"Sale has ended"))]),w("div",he,[m(F,{to:`/user/ico/${g(A)}/offer/${e.id}`},{default:p((()=>[m(r,{class:"w-full sm:w-auto",color:"primary"},{default:p((()=>[x(" View Offering ")])),_:1})])),_:2},1032,["to"])])])])),_:2},1024)))),128))])),_:1})])),w("div",xe,[g(ye).length>g(we)?(f(),_(je,{key:0,"total-items":g(ye).length,"current-page":g(ke),"item-per-page":g(we)},null,8,["total-items","current-page","item-per-page"])):T("",!0)])])])),_:1})])}}});export{ve as default};
