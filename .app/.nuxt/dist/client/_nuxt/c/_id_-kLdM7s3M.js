import{a as e,ad as a,ac as s,z as t,c as r,E as l,O as n,w as o,o as u,e as i,q as d,t as m,u as c,f as p,_ as f,x as h,X as y,Y as b}from"../e/entry-8qgg5CL-.js";import{_ as g}from"./BaseTextarea.vue-8st5U0qk.js";import{_ as q}from"./TairoFormSave.vue-aLVbwikq.js";import{_ as w}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as v}from"./useFaq-K_svOq1B.js";import{z as _,u as B,t as j,F}from"./vee-validate.esm-n59zZCC5.js";import{u as V}from"./entries-UqKw90l3.js";import"./input-id-wZ-Ta08j.js";const E=e({__name:"[id]",setup(e){const{toast:E}=a(),x=s(),{id:C}=t().params,S=V(),{updateAdminFaq:T}=v(),U=r((()=>S.selectedFaq||S.getFaqById(C)));l((async()=>{const e=Number(C);0===S.faqs.length&&await S.fetchFaqs(),await S.selectEntryById(e)}));const k=_.object({question:_.string().nonempty("Question is required"),answer:_.string().nonempty("Answer is required")}),$=r((()=>({...U.value}))),{handleSubmit:A,isSubmitting:W}=B({validationSchema:j(k),initialValues:$}),z=A((async e=>{try{const a=await T(Number(C),e.question,e.answer);E.response(a),"success"===a.status&&(await S.fetchFaqs(),x.push("/admin/extensions/faq/entries"))}catch(a){E.danger(a)}}));return(e,a)=>{const s=f,t=h,r=y,l=g,v=b,_=q,B=w;return u(),n(B,null,{left:o((()=>[i(s,{size:"lg"},{default:o((()=>[d(m(e.$t("Edit Faq Entry")),1)])),_:1})])),right:o((()=>[i(r,{type:"button",color:"muted",class:"hover:bg-gray-300 dark:hover:bg-gray-800",to:"/admin/extensions/faq/entries"},{default:o((()=>[i(t,{name:"line-md:chevron-left",class:"h-4 w-4 mr-2"}),d(" "+m(e.$t("Back")),1)])),_:1}),i(r,{type:"submit",color:"primary",disabled:c(W),class:"w-full",onClick:c(z)},{default:o((()=>[d(m(e.$t("Edit Entry")),1)])),_:1},8,["disabled","onClick"])])),default:o((()=>[p("form",{onSubmit:a[0]||(a[0]=(...e)=>c(z)&&c(z)(...e)),class:"space-y-8"},[i(v,{class:"p-5 space-y-5"},{default:o((()=>[i(c(F),{name:"question"},{default:o((({field:e,errorMessage:a,handleChange:s,handleBlur:t})=>[i(l,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,s],error:a,label:"Question",shape:"rounded",placeholder:"Write a question",class:"w-full",onBlur:t},null,8,["modelValue","onUpdate:modelValue","error","onBlur"])])),_:1}),i(c(F),{name:"answer"},{default:o((({field:e,errorMessage:a,handleChange:s,handleBlur:t})=>[i(l,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,s],error:a,label:"Answer",shape:"rounded",placeholder:"Write an answer",class:"w-full",onBlur:t},null,8,["modelValue","onUpdate:modelValue","error","onBlur"])])),_:1})])),_:1}),i(_,null,{default:o((()=>[i(r,{type:"submit",color:"primary",disabled:c(W),class:"w-full"},{default:o((()=>[d(m(e.$t("Edit Entry")),1)])),_:1},8,["disabled"])])),_:1})],32)])),_:1})}}});export{E as default};
