import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as a}from"./BaseSelect.vue-p0KYznCX.js";import{a as t,z as l,ad as s,r as o,c as r,ac as i,E as u,b as n,e as d,w as c,u as p,an as m,o as g,p as f,f as v,t as h,O as w,af as y,F as _,B as b,q as x,k,ag as j,x as $,ao as P,X as T}from"../e/entry-8qgg5CL-.js";import{_ as B,a as D}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as C}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as V}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as F,a as q}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as A}from"./TairoFlexTable-zdoraqRc.js";import{_ as I}from"./BasePagination.vue-eKZkqxB7.js";import{_ as L}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as S,a as E}from"./pages-sB5p2rcA.js";import{a as U}from"./strings-rQgUKePI.js";import{_ as z,a as N}from"./placeholder-search-4-dark-Jht91LnM.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const R={class:"pb-10"},H={value:10},O={value:25},W={value:50},X={value:100},G=v("img",{class:"block dark:hidden",src:z,alt:"Placeholder image"},null,-1),J=v("img",{class:"hidden dark:block",src:N,alt:"Placeholder image"},null,-1),K={key:1,class:"w-full sm:pt-5"},M={class:"mt-6"},Q={class:"flex w-full items-center justify-between p-4 md:p-6"},Y={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},Z={class:"p-4 md:p-6"},ee={class:"mx-auto w-full text-center"},ae={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},te={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},le={class:"p-4 md:p-6"},se={class:"flex gap-x-2"},oe=t({__name:"pages",setup(t){const z=S(),N=l(),{toast:oe}=s(),{deletePage:re}=E(),ie=o(""),ue=o(10),ne=r((()=>parseInt(N.query.page??"1"))),de=o(!1),ce=i(),pe=o(""),me=r((()=>z.pages));u((async()=>{de.value=!0,0===z.pages.length&&await z.fetchPages(),de.value=!1}));const ge=r((()=>me.value.filter((e=>(ie.value&&""!==ie.value&&void 0!==ie.value&&ie.value!==pe.value&&(ce.push({query:{...N.query,page:"1",filter:ie.value}}),pe.value=ie.value),!ie.value||e.title?.includes(ie.value)))).sort(((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())))),fe=r((()=>{const e=(ne.value-1)*ue.value,a=e+ue.value;return ge.value.slice(e,a)})),ve=e=>{switch(e){case"PUBLISHED":return"success";case"DRAFT":return"warning";default:return"info"}},he=o(!1),we=o(!1);return(t,l)=>{const s=e,o=a,r=j,i=B,u=C,S=V,E=$,N=F,ce=q,pe=D,me=A,ye=I,_e=L,be=P,xe=T,ke=m;return g(),n("div",R,[d(_e,null,{left:c((()=>[d(s,{modelValue:p(ie),"onUpdate:modelValue":l[0]||(l[0]=e=>f(ie)?ie.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Search Page Title..."},null,8,["modelValue"])])),right:c((()=>[d(o,{modelValue:p(ue),"onUpdate:modelValue":l[1]||(l[1]=e=>f(ue)?ue.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:c((()=>[v("option",H,"10 "+h(t.$t("per page")),1),v("option",O,"25 "+h(t.$t("per page")),1),v("option",W,"50 "+h(t.$t("per page")),1),v("option",X,"100 "+h(t.$t("per page")),1)])),_:1},8,["modelValue"])])),default:c((()=>[v("div",null,[p(de)||0!==p(fe)?.length?(g(),n("div",K,[d(me,null,{default:c((()=>[d(y,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:c((()=>[(g(!0),n(_,null,b(p(fe),((e,a)=>(g(),w(pe,{key:e.id,spaced:""},{start:c((()=>[d(i,{label:"Page","hide-label":a>0,picture:e.image,title:e.title,subtitle:("formatDate"in t?t.formatDate:p(U))(e.created_at)},null,8,["hide-label","picture","title","subtitle"])])),end:c((()=>[d(S,{label:"Status","hide-label":a>0,class:"w-20 xs:w-full"},{default:c((()=>[d(u,{color:ve(e.status),flavor:"pastel",condensed:""},{default:c((()=>[x(h(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),d(S,{label:"Actions","hide-label":a>0,class:"w-20 xs:justify-end xs:w-full"},{default:c((()=>[d(ce,{flavor:"context",label:"Dropdown",orientation:"end"},{default:c((()=>[d(N,{to:`/page/${e.slug}`,title:"View Page"},{start:c((()=>[d(E,{name:"ph:eye-duotone",class:"me-2 block h-5 w-5"})])),_:2},1032,["to"]),d(N,{to:`/admin/pages?type=edit&slug=${e.slug}`,title:"Edit Page"},{start:c((()=>[d(E,{name:"line-md:edit-twotone",class:"me-2 block h-5 w-5"})])),_:2},1032,["to"])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])),_:1})])):(g(),w(r,{key:0,title:p(ie)&&""!==p(ie)?"No matching results":"No results",subtitle:p(ie)&&""!==p(ie)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:c((()=>[G,J])),_:1},8,["title","subtitle"])),v("div",M,[p(ge).length>p(ue)?(g(),w(ye,{key:0,"total-items":p(ge).length,"current-page":p(ne),"item-per-page":p(ue)},null,8,["total-items","current-page","item-per-page"])):k("",!0)])])])),_:1}),d(ke,{open:p(he),size:"sm",onClose:l[5]||(l[5]=e=>he.value=!1)},{header:c((()=>[v("div",Q,[v("h3",Y,h(t.$t("Delete"))+" "+h(t.$t("Page")),1),d(be,{onClick:l[2]||(l[2]=e=>he.value=!1)})])])),footer:c((()=>[v("div",le,[v("div",se,[d(xe,{onClick:l[3]||(l[3]=e=>he.value=!1)},{default:c((()=>[x(h(t.$t("Cancel")),1)])),_:1}),d(xe,{color:"danger",flavor:"solid",onClick:l[4]||(l[4]=e=>async function(){we.value=!0;try{const e=await re(z.currentPage?.id);z.pages=z.pages.filter((e=>e.id!==z.currentPage?.id)),oe.response(e)}catch(e){oe.danger(e)}he.value=!1,we.value=!1,z.currentPage=null}()),disabled:p(we),loading:p(we)},{default:c((()=>[x(h(t.$t("Delete")),1)])),_:1},8,["disabled","loading"])])])])),default:c((()=>[v("div",Z,[v("div",ee,[v("h3",ae,h(t.$t("Are you sure?")),1),v("p",te,h(t.$t("Do you really want to delete this"))+" "+h(t.$t("page"))+" "+h(t.$t("This process cannot be undone"))+". "+h(t.$t("This will also delete all the posts associated with this page"))+". ",1)])])])),_:1},8,["open"])])}}});export{oe as default};
