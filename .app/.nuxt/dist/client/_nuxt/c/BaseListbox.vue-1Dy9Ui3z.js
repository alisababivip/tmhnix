import{r as e,c as t,a as l,aF as a,a6 as o,aA as i,aB as s,aC as n,aD as u,a2 as r,aE as d,aG as p,E as v,J as c,I as b,dj as f,dk as m,dl as x,aH as g,dm as y,F as h,aI as S,aJ as O,aK as L,aL as k,ay as R,K as P,a7 as w,aQ as I,aM as B,h as T,i as D,o as V,b as _,e as z,w as j,u as A,t as F,q as $,j as M,O as C,k as E,n as N,f as K,T as U,B as q,p as H,x as Q,s as J,_ as G,a0 as W}from"../e/entry-8qgg5CL-.js";import{_ as X}from"./BaseIconBox.vue-qjQCKz6R.js";import{_ as Y}from"./BaseAvatar.vue-XYSxxLJP.js";import{x as Z,a as ee,b as te,p as le,u as ae}from"./use-text-value-9iwzs_EA.js";function oe(e={},t=null,l=[]){for(let[a,o]of Object.entries(e))se(l,ie(t,a),o);return l}function ie(e,t){return e?e+"["+t+"]":t}function se(e,t,l){if(Array.isArray(l))for(let[a,o]of l.entries())se(e,ie(t,a.toString()),o);else l instanceof Date?e.push([t,l.toISOString()]):"boolean"==typeof l?e.push([t,l?"1":"0"]):"string"==typeof l?e.push([t,l]):"number"==typeof l?e.push([t,`${l}`]):null==l?e.push([t,""]):oe(l,t,e)}function ne(e,t){return e===t}var ue=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ue||{}),re=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(re||{}),de=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(de||{});let pe=Symbol("ListboxContext");function ve(e){let t=w(pe,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ve),t}return t}let ce=l({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>ne},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(l,{slots:S,attrs:O,emit:L}){let k=e(1),R=e(null),P=e(null),w=e(null),B=e([]),T=e(""),D=e(null),V=e(1);function _(e=(e=>e)){let t=null!==D.value?B.value[D.value]:null,l=I(e(B.value.slice()),(e=>u(e.dataRef.domRef))),a=t?l.indexOf(t):null;return-1===a&&(a=null),{options:l,activeOptionIndex:a}}let z=t((()=>l.multiple?1:0)),[j,A]=function(l,a,o){let i=e(null==o?void 0:o.value),s=t((()=>void 0!==l.value));return[t((()=>s.value?l.value:i.value)),function(e){return s.value||(i.value=e),null==a?void 0:a(e)}]}(t((()=>l.modelValue)),(e=>L("update:modelValue",e)),t((()=>l.defaultValue))),F=t((()=>void 0===j.value?a(z.value,{1:[],0:void 0}):j.value)),$={listboxState:k,value:F,mode:z,compare(e,t){if("string"==typeof l.by){let a=l.by;return(null==e?void 0:e[a])===(null==t?void 0:t[a])}return l.by(e,t)},orientation:t((()=>l.horizontal?"horizontal":"vertical")),labelRef:R,buttonRef:P,optionsRef:w,disabled:t((()=>l.disabled)),options:B,searchQuery:T,activeOptionIndex:D,activationTrigger:V,closeListbox(){l.disabled||1!==k.value&&(k.value=1,D.value=null)},openListbox(){l.disabled||0!==k.value&&(k.value=0)},goToOption(e,t,a){if(l.disabled||1===k.value)return;let o=_(),i=Z(e===ee.Specific?{focus:ee.Specific,id:t}:{focus:e},{resolveItems:()=>o.options,resolveActiveIndex:()=>o.activeOptionIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.disabled});T.value="",D.value=i,V.value=null!=a?a:1,B.value=o.options},search(e){if(l.disabled||1===k.value)return;let t=""!==T.value?0:1;T.value+=e.toLowerCase();let a=(null!==D.value?B.value.slice(D.value+t).concat(B.value.slice(0,D.value+t)):B.value).find((e=>e.dataRef.textValue.startsWith(T.value)&&!e.dataRef.disabled)),o=a?B.value.indexOf(a):-1;-1===o||o===D.value||(D.value=o,V.value=1)},clearSearch(){l.disabled||1!==k.value&&""!==T.value&&(T.value="")},registerOption(e,t){let l=_((l=>[...l,{id:e,dataRef:t}]));B.value=l.options,D.value=l.activeOptionIndex},unregisterOption(e){let t=_((t=>{let l=t.findIndex((t=>t.id===e));return-1!==l&&t.splice(l,1),t}));B.value=t.options,D.value=t.activeOptionIndex,V.value=1},theirOnChange(e){l.disabled||A(e)},select(e){l.disabled||A(a(z.value,{0:()=>e,1:()=>{let t=o($.value.value).slice(),l=o(e),a=t.findIndex((e=>$.compare(l,o(e))));return-1===a?t.push(l):t.splice(a,1),t}}))}};i([P,w],((e,t)=>{var l;$.closeListbox(),s(t,n.Loose)||(e.preventDefault(),null==(l=u(P))||l.focus())}),t((()=>0===k.value))),r(pe,$),d(t((()=>a(k.value,{0:p.Open,1:p.Closed}))));let M=t((()=>{var e;return null==(e=u(P))?void 0:e.closest("form")}));return v((()=>{c([M],(()=>{if(M.value&&void 0!==l.defaultValue)return M.value.addEventListener("reset",e),()=>{var t;null==(t=M.value)||t.removeEventListener("reset",e)};function e(){$.theirOnChange(l.defaultValue)}}),{immediate:!0})})),()=>{let{name:e,modelValue:t,disabled:a,form:o,...i}=l,s={open:0===k.value,disabled:a,value:F.value};return b(h,[...null!=e&&null!=F.value?oe({[e]:F.value}).map((([e,t])=>b(f,m({features:x.Hidden,key:e,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:o,name:e,value:t})))):[],g({ourProps:{},theirProps:{...O,...y(i,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:s,slots:S,attrs:O,name:"Listbox"})])}}}),be=l({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-listbox-label-${S()}`}},setup(e,{attrs:t,slots:l}){let a=ve("ListboxLabel");function o(){var e;null==(e=u(a.buttonRef))||e.focus({preventScroll:!0})}return()=>{let i={open:0===a.listboxState.value,disabled:a.disabled.value},{id:s,...n}=e,u={id:s,ref:a.labelRef,onClick:o};return g({ourProps:u,theirProps:n,slot:i,attrs:t,slots:l,name:"ListboxLabel"})}}}),fe=l({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${S()}`}},setup(e,{attrs:l,slots:a,expose:o}){let i=ve("ListboxButton");function s(e){switch(e.key){case B.Space:case B.Enter:case B.ArrowDown:e.preventDefault(),i.openListbox(),P((()=>{var e;null==(e=u(i.optionsRef))||e.focus({preventScroll:!0}),i.value.value||i.goToOption(ee.First)}));break;case B.ArrowUp:e.preventDefault(),i.openListbox(),P((()=>{var e;null==(e=u(i.optionsRef))||e.focus({preventScroll:!0}),i.value.value||i.goToOption(ee.Last)}))}}function n(e){if(e.key===B.Space)e.preventDefault()}function r(e){i.disabled.value||(0===i.listboxState.value?(i.closeListbox(),P((()=>{var e;return null==(e=u(i.buttonRef))?void 0:e.focus({preventScroll:!0})}))):(e.preventDefault(),i.openListbox(),function(e){requestAnimationFrame((()=>requestAnimationFrame(e)))}((()=>{var e;return null==(e=u(i.optionsRef))?void 0:e.focus({preventScroll:!0})}))))}o({el:i.buttonRef,$el:i.buttonRef});let d=te(t((()=>({as:e.as,type:l.type}))),i.buttonRef);return()=>{var t,o;let p={open:0===i.listboxState.value,disabled:i.disabled.value,value:i.value.value},{id:v,...c}=e,b={ref:i.buttonRef,id:v,type:d.value,"aria-haspopup":"listbox","aria-controls":null==(t=u(i.optionsRef))?void 0:t.id,"aria-expanded":0===i.listboxState.value,"aria-labelledby":i.labelRef.value?[null==(o=u(i.labelRef))?void 0:o.id,v].join(" "):void 0,disabled:!0===i.disabled.value||void 0,onKeydown:s,onKeyup:n,onClick:r};return g({ourProps:b,theirProps:c,slot:p,attrs:l,slots:a,name:"ListboxButton"})}}}),me=l({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${S()}`}},setup(l,{attrs:o,slots:i,expose:s}){let n=ve("ListboxOptions"),r=e(null);function d(e){switch(r.value&&clearTimeout(r.value),e.key){case B.Space:if(""!==n.searchQuery.value)return e.preventDefault(),e.stopPropagation(),n.search(e.key);case B.Enter:if(e.preventDefault(),e.stopPropagation(),null!==n.activeOptionIndex.value){let e=n.options.value[n.activeOptionIndex.value];n.select(e.dataRef.value)}0===n.mode.value&&(n.closeListbox(),P((()=>{var e;return null==(e=u(n.buttonRef))?void 0:e.focus({preventScroll:!0})})));break;case a(n.orientation.value,{vertical:B.ArrowDown,horizontal:B.ArrowRight}):return e.preventDefault(),e.stopPropagation(),n.goToOption(ee.Next);case a(n.orientation.value,{vertical:B.ArrowUp,horizontal:B.ArrowLeft}):return e.preventDefault(),e.stopPropagation(),n.goToOption(ee.Previous);case B.Home:case B.PageUp:return e.preventDefault(),e.stopPropagation(),n.goToOption(ee.First);case B.End:case B.PageDown:return e.preventDefault(),e.stopPropagation(),n.goToOption(ee.Last);case B.Escape:e.preventDefault(),e.stopPropagation(),n.closeListbox(),P((()=>{var e;return null==(e=u(n.buttonRef))?void 0:e.focus({preventScroll:!0})}));break;case B.Tab:e.preventDefault(),e.stopPropagation();break;default:1===e.key.length&&(n.search(e.key),r.value=setTimeout((()=>n.clearSearch()),350))}}s({el:n.optionsRef,$el:n.optionsRef});let v=O(),c=t((()=>null!==v?(v.value&p.Open)===p.Open:0===n.listboxState.value));return()=>{var e,t,a,s;let r={open:0===n.listboxState.value},{id:p,...v}=l,b={"aria-activedescendant":null===n.activeOptionIndex.value||null==(e=n.options.value[n.activeOptionIndex.value])?void 0:e.id,"aria-multiselectable":1===n.mode.value||void 0,"aria-labelledby":null!=(s=null==(t=u(n.labelRef))?void 0:t.id)?s:null==(a=u(n.buttonRef))?void 0:a.id,"aria-orientation":n.orientation.value,id:p,onKeydown:d,role:"listbox",tabIndex:0,ref:n.optionsRef};return g({ourProps:b,theirProps:v,slot:r,attrs:o,slots:i,features:L.RenderStrategy|L.Static,visible:c.value,name:"ListboxOptions"})}}}),xe=l({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${S()}`}},setup(l,{slots:i,attrs:s,expose:n}){let r=ve("ListboxOption"),d=e(null);n({el:d,$el:d});let p=t((()=>null!==r.activeOptionIndex.value&&r.options.value[r.activeOptionIndex.value].id===l.id)),b=t((()=>a(r.mode.value,{0:()=>r.compare(o(r.value.value),o(l.value)),1:()=>o(r.value.value).some((e=>r.compare(o(e),o(l.value))))}))),f=t((()=>a(r.mode.value,{1:()=>{var e;let t=o(r.value.value);return(null==(e=r.options.value.find((e=>t.some((t=>r.compare(o(t),o(e.dataRef.value)))))))?void 0:e.id)===l.id},0:()=>b.value}))),m=le(d),x=t((()=>({disabled:l.disabled,value:l.value,get textValue(){return m()},domRef:d})));function y(e){if(l.disabled)return e.preventDefault();r.select(l.value),0===r.mode.value&&(r.closeListbox(),P((()=>{var e;return null==(e=u(r.buttonRef))?void 0:e.focus({preventScroll:!0})})))}function h(){if(l.disabled)return r.goToOption(ee.Nothing);r.goToOption(ee.Specific,l.id)}v((()=>r.registerOption(l.id,x))),k((()=>r.unregisterOption(l.id))),v((()=>{c([r.listboxState,b],(()=>{0===r.listboxState.value&&b.value&&a(r.mode.value,{1:()=>{f.value&&r.goToOption(ee.Specific,l.id)},0:()=>{r.goToOption(ee.Specific,l.id)}})}),{immediate:!0})})),R((()=>{0===r.listboxState.value&&p.value&&0!==r.activationTrigger.value&&P((()=>{var e,t;return null==(t=null==(e=u(d))?void 0:e.scrollIntoView)?void 0:t.call(e,{block:"nearest"})}))}));let S=ae();function O(e){S.update(e)}function L(e){S.wasMoved(e)&&(l.disabled||p.value||r.goToOption(ee.Specific,l.id,0))}function w(e){S.wasMoved(e)&&(l.disabled||p.value&&r.goToOption(ee.Nothing))}return()=>{let{disabled:e}=l,t={active:p.value,selected:b.value,disabled:e},{id:a,value:o,disabled:n,...u}=l,r={id:a,ref:d,role:"option",tabIndex:!0===e?void 0:-1,"aria-disabled":!0===e||void 0,"aria-selected":b.value,disabled:void 0,onClick:y,onFocus:h,onPointerenter:O,onMouseenter:O,onPointermove:L,onMousemove:L,onPointerleave:w,onMouseleave:w};return g({ourProps:r,theirProps:u,slot:t,attrs:s,slots:i,name:"ListboxOption"})}}});const ge={class:"nui-listbox-outer"},ye={class:"nui-listbox-button-inner"},he={class:"nui-listbox-chevron"},Se={key:4,class:"nui-listbox-placeload"},Oe={class:"nui-listbox-option-inner"},Le={key:2,class:"nui-listbox-selected-icon"},ke={key:1,class:"text-danger-600 mt-1 block font-sans text-[0.65rem] font-medium leading-none"},Re=l({__name:"BaseListbox",props:{items:{},modelValue:{default:void 0},modelModifiers:{default:()=>({})},shape:{default:void 0},label:{default:""},labelFloat:{type:Boolean},loading:{type:Boolean,default:!1},error:{type:[String,Boolean],default:!1},disabled:{type:Boolean,default:!1},icon:{default:""},selectedIcon:{default:"lucide:check"},multiple:{type:Boolean,default:!1},multipleLabel:{type:[String,Function],default:()=>(e,t)=>0===e.length?"No elements selected":e.length>1?`${e.length} elements selected`:String(t?e?.[0]?.[t]:e?.[0])},placeholder:{default:""},size:{default:"md"},contrast:{default:"default"},properties:{default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:l}){const a=e,o=l,i=T(),s=t((()=>a.shape??i.nui.defaultShapes?.input)),n={straight:"",rounded:"nui-listbox-rounded",smooth:"nui-listbox-smooth",curved:"nui-listbox-curved",full:"nui-listbox-full"},u={sm:"nui-listbox-sm",md:"nui-listbox-md",lg:"nui-listbox-lg"},r={default:"nui-listbox-default","default-contrast":"nui-listbox-default-contrast",muted:"nui-listbox-muted","muted-contrast":"nui-listbox-muted-contrast"},d=D(a,"modelValue",o,{passive:!0}),p=t((()=>{if(!a.loading)return a.labelFloat?a.label:a.placeholder})),v=t((()=>{if(a.modelModifiers.prop&&a.properties.value){const e=a.properties.value;return a.items.find((t=>t[e]===d.value))}return d.value}));return(e,t)=>{const l=Q,o=X,i=Y,c=J,b=G,f=W;return V(),_("div",{class:N(["nui-listbox",[r[a.contrast],u[a.size],A(s)&&n[A(s)],a.error&&!a.loading&&"nui-listbox-error",a.loading&&"nui-listbox-loading",a.labelFloat&&"nui-listbox-label-float",a.icon&&"nui-has-icon"]])},[z(A(ce),{modelValue:A(d),"onUpdate:modelValue":t[0]||(t[0]=e=>H(d)?d.value=e:null),by:a.modelModifiers.prop?void 0:a.properties.value,multiple:a.multiple,disabled:a.disabled},{default:j((({open:t})=>["label"in e.$slots&&!a.labelFloat||a.label&&!a.labelFloat?(V(),C(A(be),{key:0,class:"nui-listbox-label"},{default:j((()=>[M(e.$slots,"label",{},(()=>[$(F(a.label),1)]))])),_:3})):E("",!0),K("div",ge,[z(A(fe),{disabled:a.disabled,class:"nui-listbox-button"},{default:j((()=>[M(e.$slots,"listbox-button",{value:A(v),open:t},(()=>[K("div",ye,[a.icon?(V(),C(o,{key:0,size:"xs",shape:"rounded",class:"nui-icon-box"},{default:j((()=>[z(l,{name:a.icon,class:"nui-icon-box-inner"},null,8,["name"])])),_:1})):E("",!0),Array.isArray(A(v))?(V(),_(h,{key:1},[0===A(v).length&&A(p)?(V(),_("div",{key:0,class:N(["nui-listbox-placeholder",a.loading&&"text-transparent select-none"])},F(A(p))+"azeaze ",3)):E("",!0),K("div",{class:N(["block truncate text-left",[a.loading&&"select-none text-transparent",0===A(v).length&&"text-muted-300 dark:text-muted-500"]])},F("function"==typeof a.multipleLabel?a.multipleLabel(A(v),a.properties.label):a.multipleLabel),3)],64)):A(v)?(V(),_(h,{key:2},[a.properties.media&&A(v)[a.properties.media]?(V(),C(i,{key:0,src:A(v)[a.properties.media],size:"xs",class:"-ms-2 me-2"},null,8,["src"])):a.properties.icon&&A(v)[a.properties.icon]?(V(),C(o,{key:1,size:"xs",shape:"rounded",class:"-ms-2 me-2"},{default:j((()=>[z(l,{name:A(v)[a.properties.icon],class:"h-4 w-4"},null,8,["name"])])),_:1})):E("",!0),K("div",{class:N(["truncate text-left",a.loading&&"text-transparent select-none"])},F(a.properties.label?A(v)[a.properties.label]:a.properties.value?A(v)[a.properties.value]:A(v)),3)],64)):(V(),_("div",{key:3,class:N(["nui-listbox-placeholder",a.loading&&"text-transparent select-none"])},F(A(p)),3)),K("span",he,[z(l,{name:"lucide:chevron-down",class:N(["nui-listbox-chevron-inner",[t&&"rotate-180"]])},null,8,["class"])]),a.loading?(V(),_("div",Se,[z(c,{class:"nui-placeload"})])):E("",!0)])]))])),_:2},1032,["disabled"]),z(U,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:j((()=>[z(A(me),{class:"nui-listbox-options"},{default:j((()=>[(V(!0),_(h,null,q(a.items,(s=>(V(),C(A(xe),{key:a.properties.value?s[a.properties.value]:s,value:a.modelModifiers.prop&&a.properties.value?s[a.properties.value]:s,as:"template"},{default:j((({active:n,selected:u})=>[K("li",{class:N(["nui-listbox-option group/nui-listbox-option",[n&&"nui-active"]])},[M(e.$slots,"listbox-item",{item:s,open:t,active:n,selected:u},(()=>[a.properties.media&&s[a.properties.media]?(V(),C(i,{key:0,src:s[a.properties.media],size:"xs"},null,8,["src"])):a.properties.icon&&s[a.properties.icon]?(V(),C(o,{key:1,size:"sm",shape:"rounded"},{default:j((()=>[z(l,{name:s[a.properties.icon],class:"text-muted-400 group-hover/nui-listbox-option:text-primary-500 h-5 w-5 transition-colors duration-200"},null,8,["name"])])),_:2},1024)):E("",!0),K("div",Oe,[z(b,{as:"h4",weight:u?"semibold":"normal",size:"sm",class:"nui-listbox-heading"},{default:j((()=>[$(F(a.properties.label?s[a.properties.label]:a.properties.value?s[a.properties.value]:s),1)])),_:2},1032,["weight"]),a.properties.sublabel&&s[a.properties.sublabel]?(V(),C(f,{key:0,size:"xs",class:"nui-listbox-text"},{default:j((()=>[$(F(s[a.properties.sublabel]),1)])),_:2},1024)):E("",!0)]),u?(V(),_("span",Le,[z(l,{name:e.selectedIcon,class:"nui-listbobx-selected-icon-inner"},null,8,["name"])])):E("",!0)]))],2)])),_:2},1032,["value"])))),128))])),_:2},1024)])),_:2},1024),"label"in e.$slots&&a.labelFloat||a.label&&a.labelFloat?(V(),C(A(be),{key:0,class:"nui-label-float"},{default:j((()=>[M(e.$slots,"label",{},(()=>[$(F(a.label),1)]))])),_:3})):E("",!0),a.error&&"string"==typeof a.error?(V(),_("span",ke,F(a.error),1)):E("",!0)])])),_:3},8,["modelValue","by","multiple","disabled"])],2)}}});export{Re as _};
