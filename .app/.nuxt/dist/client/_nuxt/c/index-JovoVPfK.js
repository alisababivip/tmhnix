import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{a,z as l,r as t,c as s,E as o,ac as r,b as u,e as n,w as i,o as d,f as c,u as m,p,O as v,q as f,t as g,af as h,n as y,k as w,F as _,B as b,x as k,X as x,Y as j,ag as V}from"../e/entry-8qgg5CL-.js";import{_ as T}from"./BaseSelect.vue-p0KYznCX.js";import{_ as B,a as $}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as D}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as F}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as C}from"./TairoFlexTable-zdoraqRc.js";import{_ as I}from"./BasePagination.vue-eKZkqxB7.js";import{_ as U}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_ as q,a as A}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as N}from"./referrals-BZrFRMdV.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";import"./useMlm-tZO3tueF.js";const L={class:"w-full flex gap-2 xs:flex-col sm:flex-row"},P={value:10},R={value:25},S={value:50},z={value:100},E=c("img",{class:"block dark:hidden",src:q,alt:"Placeholder image"},null,-1),M=c("img",{class:"hidden dark:block",src:A,alt:"Placeholder image"},null,-1),O={key:1,class:"w-full sm:pt-5"},W={class:"mt-6"},X=a({__name:"index",setup(a){const q=l(),A=N(),X=t(""),Y=t(!1),G=t(""),H=t(10),J=s((()=>parseInt(q.query.page??"1")));o((async()=>{Y.value=!0,await A.fetchAllNodes(),Y.value=!1}));const K=s((()=>A.nodes.filter((e=>(!ee.value||"All"===ee.value||e.status===ee.value)&&(!(ae.value&&new Date(e.created_at)<new Date(ae.value))&&(!(le.value&&new Date(e.created_at)>new Date(le.value))&&(G.value&&""!==G.value&&void 0!==G.value&&G.value!==X.value&&(te.push({query:{...q.query,page:"1",filter:G.value}}),X.value=G.value),!G.value||e.id?.includes(G.value)))))).sort(((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())))),Q=s((()=>{const e=(J.value-1)*H.value,a=e+H.value;return K.value.slice(e,a)})),Z=t(!1),ee=t(""),ae=t(""),le=t(""),te=r();return(a,l)=>{const t=e,s=k,o=x,r=T,q=j,A=V,N=B,X=D,ee=F,se=$,oe=C,re=I,ue=U;return d(),u("div",null,[n(ue,null,{left:i((()=>[c("div",L,[n(t,{modelValue:m(G),"onUpdate:modelValue":l[0]||(l[0]=e=>p(G)?G.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Search Node ID..."},null,8,["modelValue"]),n(o,{onClick:l[1]||(l[1]=e=>Z.value=!m(Z)),color:"muted",block:""},{default:i((()=>[m(Z)?(d(),v(s,{key:0,name:"line-md:arrow-up",class:"h-4 w-4 mr-2"})):(d(),v(s,{key:1,name:"line-md:arrow-down",class:"h-4 w-4 mr-2"})),f(" "+g(a.$t("Filters")),1)])),_:1})])])),right:i((()=>[n(r,{modelValue:m(H),"onUpdate:modelValue":l[2]||(l[2]=e=>p(H)?H.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:i((()=>[c("option",P,"10 "+g(a.$t("per page")),1),c("option",R,"25 "+g(a.$t("per page")),1),c("option",S,"50 "+g(a.$t("per page")),1),c("option",z,"100 "+g(a.$t("per page")),1)])),_:1},8,["modelValue"])])),default:i((()=>[c("div",null,[n(h,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:i((()=>[m(Z)?(d(),v(q,{key:0,class:y("grid gap-4 xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-3 mb-6 p-5")},{default:i((()=>[n(t,{modelValue:m(ae),"onUpdate:modelValue":l[3]||(l[3]=e=>p(ae)?ae.value=e:null),type:"date",label:"From"},null,8,["modelValue"]),n(t,{modelValue:m(le),"onUpdate:modelValue":l[4]||(l[4]=e=>p(le)?le.value=e:null),type:"date",label:"To"},null,8,["modelValue"])])),_:1})):w("",!0)])),_:1}),m(Y)||0!==m(Q)?.length?(d(),u("div",O,[n(oe,null,{default:i((()=>[n(h,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:i((()=>[(d(!0),u(_,null,b(m(Q),((e,a)=>(d(),v(se,{key:e.id,spaced:""},{start:i((()=>[n(N,{label:"User","hide-label":a>0,logo:e.avatar??"/img/placeholder.png",title:`${e.first_name} ${e.last_name}`,subtitle:e.uuid},null,8,["hide-label","logo","title","subtitle"])])),end:i((()=>[n(X,{label:"Referrals","hide-label":a>0,class:"w-20 xs:w-full text-sm"},{default:i((()=>[f(g(e.binaryReferralCount),1)])),_:2},1032,["hide-label"]),n(X,{label:"Actions","hide-label":a>0,class:"w-20"},{default:i((()=>[n(ee,{condensed:"",color:"muted",onClick:a=>{return l=e.uuid,void te.push(`/admin/extensions/affiliate/nodes/${l}`);var l},"data-nui-tooltip":"View"},{default:i((()=>[n(s,{name:"ph:eye-duotone",class:"h-4 w-4"})])),_:2},1032,["onClick"])])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])),_:1})])):(d(),v(A,{key:0,title:m(G)&&""!==m(G)?"No matching results":"No results",subtitle:m(G)&&""!==m(G)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:i((()=>[E,M])),_:1},8,["title","subtitle"])),c("div",W,[m(K).length>m(H)?(d(),v(re,{key:0,"total-items":m(K).length,"current-page":m(J),"item-per-page":m(H)},null,8,["total-items","current-page","item-per-page"])):w("",!0)])])])),_:1})])}}});export{X as default};
