import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as l}from"./BaseSelect.vue-p0KYznCX.js";import{d as a,a as t,z as s,r,c as o,E as i,ad as n,b as u,e as d,w as f,u as c,an as m,o as p,p as h,f as v,t as g,O as w,F as b,B as x,q as y,k as _,ag as k,x as j,ao as O,X as P}from"../e/entry-8qgg5CL-.js";import{_ as C,a as $}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as B}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as T}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as D,a as I}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as A}from"./TairoFlexTable-zdoraqRc.js";import{_ as E}from"./BasePagination.vue-eKZkqxB7.js";import{_ as F}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as L}from"./useP2P-NV4dmDWU.js";import{_ as V,a as N}from"./placeholder-search-4-dark-Jht91LnM.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const q=a({id:"adminP2POffers",state:()=>({offers:[],loading:!1,selectedOffer:null}),getters:{getOfferById:e=>l=>e.offers.find((e=>e.id===l))},actions:{async fetchP2POffers(){this.loading=!0;try{const{getAdminP2POffers:e}=L(),l=await e();this.offers=l.data.result}catch(e){console.error("Error fetching P2P offers:",e)}this.loading=!1},async removeOffer(e){const l=this.offers.findIndex((l=>l.id===e));-1!==l&&this.offers.splice(l,1)},async selectOffer(e){this.selectedOffer=e},async selectOfferById(e){this.selectedOffer=this.getOfferById(e)}}}),z={value:10},S={value:25},U={value:50},W={value:100},G=v("img",{class:"block dark:hidden",src:V,alt:"Placeholder image"},null,-1),M=v("img",{class:"hidden dark:block",src:N,alt:"Placeholder image"},null,-1),R={key:1,class:"w-full"},X={class:"mt-6"},H={class:"flex w-full items-center justify-between p-4 md:p-6"},J={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},K={class:"p-4 md:p-6"},Q={class:"mx-auto w-full text-center"},Y={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},Z={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},ee={class:"p-4 md:p-6"},le={class:"flex gap-x-2"},ae=t({__name:"index",setup(a){const t=q(),{deleteAdminP2POffer:V}=L(),N=s(),ae=r(""),te=r(10),se=o((()=>parseInt(N.query.page??"1"))),re=o((()=>t.offers.filter((e=>e.currency?.includes(ae.value))))),oe=o((()=>{const e=(se.value-1)*te.value,l=e+te.value;return re.value.slice(e,l)}));i((async()=>{0===t.offers.length&&(t.loading=!0,await t.fetchP2POffers(),t.loading=!1)}));const{toast:ie}=n(),ne=r(!1),ue=r(!1),de=r(null);async function fe(){if(de.value){ue.value=!0;try{await V(de.value.id),t.removeOffer(de.value.id),ie.successText("Offer deleted successfully")}catch(e){ie.error("Failed to delete offer")}ne.value=!1,ue.value=!1,de.value=null}}const ce=e=>{switch(e){case"PENDING":return"warning";case"ACTIVE":case"COMPLETED":return"success";case"CANCELLED":return"danger";default:return"info"}};return(a,s)=>{const r=e,o=l,i=k,n=C,L=B,V=T,N=j,q=D,ie=I,me=$,pe=A,he=E,ve=F,ge=O,we=P,be=m;return p(),u("div",null,[d(ve,null,{left:f((()=>[d(r,{modelValue:c(ae),"onUpdate:modelValue":s[0]||(s[0]=e=>h(ae)?ae.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter offers..."},null,8,["modelValue"])])),right:f((()=>[d(o,{modelValue:c(te),"onUpdate:modelValue":s[1]||(s[1]=e=>h(te)?te.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:f((()=>[v("option",z,"10 "+g(a.$t("per page")),1),v("option",S,"25 "+g(a.$t("per page")),1),v("option",U,"50 "+g(a.$t("per page")),1),v("option",W,"100 "+g(a.$t("per page")),1)])),_:1},8,["modelValue"])])),default:f((()=>[v("div",null,[c(t).loading||0!==c(oe).length?(p(),u("div",R,[d(pe,{class:"pt-5"},{default:f((()=>[(p(!0),u(b,null,x(c(oe),((e,l)=>(p(),w(me,{key:e.id,spaced:""},{start:f((()=>[d(n,{label:"Offer","hide-label":l>0,logo:`/img/crypto/${e.currency.toLowerCase()}.png`,title:`${e.currency} (${e.wallet_type} Wallet)`,subtitle:e.uuid},null,8,["hide-label","logo","title","subtitle"])])),end:f((()=>[d(L,{label:"Amount","hide-label":l>0,class:"w-20 xs:w-full text-xs"},{default:f((()=>[y(g(e.amount),1)])),_:2},1032,["hide-label"]),d(L,{label:"Price","hide-label":l>0,class:"w-20 xs:w-full text-xs"},{default:f((()=>[y(g(e.price),1)])),_:2},1032,["hide-label"]),d(L,{label:"Status","hide-label":l>0,class:"w-20 xs:w-full"},{default:f((()=>[d(V,{color:ce(e.status),flavor:"pastel",condensed:""},{default:f((()=>[y(g(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),d(L,{label:"Actions","hide-label":l>0},{default:f((()=>[d(ie,{flavor:"context",label:"Dropdown",orientation:"end"},{default:f((()=>[d(q,{onClick:l=>{return a=e,de.value=a,void(ne.value=!0);var a},title:"Delete Offer"},{default:f((()=>[d(N,{name:"line-md:close",class:"w-4 h-4 mr-2"}),y(" "+g(a.$t("Delete")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(p(),w(i,{key:0,title:c(ae)&&""!==c(ae)?"No matching results":"No results",subtitle:c(ae)&&""!==c(ae)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:f((()=>[G,M])),_:1},8,["title","subtitle"])),v("div",X,[c(re).length>c(te)?(p(),w(he,{key:0,"total-items":c(re).length,"current-page":c(se),"item-per-page":c(te)},null,8,["total-items","current-page","item-per-page"])):_("",!0)])])])),_:1}),d(be,{open:c(ne),size:"sm",onClose:s[4]||(s[4]=()=>ne.value=!1)},{header:f((()=>[v("div",H,[v("h3",J,g(a.$t("Delete Offer")),1),d(ge,{onClick:s[2]||(s[2]=()=>ne.value=!1)})])])),footer:f((()=>[v("div",ee,[v("div",le,[d(we,{onClick:s[3]||(s[3]=()=>ne.value=!1)},{default:f((()=>[y(g(a.$t("Cancel")),1)])),_:1}),d(we,{color:"danger",flavor:"solid",onClick:fe,disabled:c(ue),loading:c(ue)},{default:f((()=>[y(g(a.$t("Delete")),1)])),_:1},8,["disabled","loading"])])])])),default:f((()=>[v("div",K,[v("div",Q,[v("h3",Y,g(a.$t("Are you sure?")),1),v("p",Z,g(a.$t("Do you really want to delete this offer? it will refund the amount to the user, This process cannot be undone.")),1)])])])),_:1},8,["open"])])}}});export{ae as default};
