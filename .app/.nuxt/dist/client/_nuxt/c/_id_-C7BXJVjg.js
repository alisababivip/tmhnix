import{a as e,z as a,r as l,c as s,E as t,ad as o,b as r,e as d,w as i,u,an as n,o as c,q as m,t as p,f,O as h,F as v,B as b,p as y,_ as g,x as _,X as k,ag as w,ao as x}from"../e/entry-8qgg5CL-.js";import{_ as j,a as A}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as C}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as O}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as B,a as L}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as D}from"./TairoFlexTable-zdoraqRc.js";import{_ as $}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_ as T}from"./BaseInput.vue-iInHQMIA.js";import{u as N}from"./useEcommerce-2nLxpPKu.js";import{_ as E,a as K}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as P}from"./orders-6snY74Ln.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./input-id-wZ-Ta08j.js";const F=f("img",{class:"block dark:hidden",src:E,alt:"Placeholder image"},null,-1),I=f("img",{class:"hidden dark:block",src:K,alt:"Placeholder image"},null,-1),W={key:1,class:"w-full"},z={class:"flex w-full items-center justify-between p-4 md:p-6"},V={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},S={class:"px-4 md:px-6 space-y-5"},q={class:"p-4 md:p-6"},R={class:"flex gap-x-2"},U=e({__name:"[id]",setup(e){const E=P(),{getAdminOrder:K,updateAdminOrderItem:U}=N(),X=a(),{id:G}=X.params,H=l(null),J=s((()=>H.value?.order_items));t((async()=>{await M()}));const M=async()=>{const e=await K(G);H.value=e.data.result},{toast:Q}=o(),Y=l(!1),Z=l(""),ee=l(null),ae=()=>{ee.value=null,Z.value="",Y.value=!1},le=l(!1),se=async()=>{le.value=!0;try{const e=await U(ee.value?.id,Z.value);Q.response(e),"success"===e.status&&(await M(),await E.fetchOrders())}catch(e){Q.danger(e)}le.value=!1,ae()};return(e,a)=>{const l=g,s=_,t=k,o=w,N=j,E=C,K=O,P=B,U=L,X=A,G=D,M=$,Q=x,te=T,oe=n;return c(),r("div",null,[d(M,null,{left:i((()=>[d(l,{size:"lg"},{default:i((()=>[m(p(e.$t("Order"))+" #"+p(u(H)?.id)+" Items ",1)])),_:1})])),right:i((()=>[d(t,{type:"button",color:"muted",class:"hover:bg-gray-300 dark:hover:bg-gray-800",to:"/admin/extensions/ecommerce/orders"},{default:i((()=>[d(s,{name:"line-md:chevron-left",class:"h-4 w-4 mr-2"}),m(" "+p(e.$t("Back")),1)])),_:1})])),default:i((()=>[f("div",null,[0===u(J)?.length?(c(),h(o,{key:0,title:e.filter&&""!==e.filter?"No matching orders":"No orders found",subtitle:e.filter&&""!==e.filter?"Looks like we couldn't find any matching orders for your search terms. Try other search terms.":"Looks like we don't have any orders here yet."},{image:i((()=>[F,I])),_:1},8,["title","subtitle"])):(c(),r("div",W,[d(G,{class:"pt-5"},{default:i((()=>[(c(!0),r(v,null,b(u(J),((e,a)=>(c(),h(X,{key:e.id,spaced:""},{start:i((()=>[d(N,{label:"Customer","hide-label":a>0,logo:e.product?.image,title:e.product?.name,subtitle:e.product?.type},null,8,["hide-label","logo","title","subtitle"])])),end:i((()=>[d(K,{label:"Status","hide-label":a>0,class:"w-20 xs:w-full"},{default:i((()=>[d(E,{color:"DOWNLOADABLE"===e.type||e.key?"success":"warning",flavor:"pastel",condensed:""},{default:i((()=>[m(p("DOWNLOADABLE"===e.type||e.key?"Completed":"Pending"),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),d(K,{label:"Key","hide-label":a>0,class:"w-20 xs:w-full"},{default:i((()=>[m(p("DOWNLOADABLE"===e.type?e.product?.file_path:e.key??"N/A"),1)])),_:2},1032,["hide-label"]),d(K,{label:"Actions","hide-label":a>0},{default:i((()=>[d(U,{flavor:"context",label:"Dropdown",orientation:"end"},{default:i((()=>[d(P,{onClick:a=>(e=>{ee.value=e,Z.value=e.key??"",Y.value=!0})(e),title:"Add Key"},{start:i((()=>[d(s,{name:"solar:key-bold-duotone",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})]))])])),_:1}),d(oe,{open:u(Y),size:"lg",onClose:ae},{header:i((()=>[f("div",z,[f("h3",V,p(e.$t("Add Key")),1),d(Q,{onClick:a[0]||(a[0]=e=>Y.value=!1)})])])),footer:i((()=>[f("div",q,[f("div",R,[d(t,{onClick:a[2]||(a[2]=e=>Y.value=!1)},{default:i((()=>[m(p(e.$t("Cancel")),1)])),_:1}),d(t,{color:"primary",flavor:"solid",onClick:se,disabled:u(le),loading:u(le)},{default:i((()=>[m(p(e.$t("Submit")),1)])),_:1},8,["disabled","loading"])])])])),default:i((()=>[f("div",S,[d(te,{modelValue:u(Z),"onUpdate:modelValue":a[1]||(a[1]=e=>y(Z)?Z.value=e:null),placeholder:e.$t("Purchase Key"),label:e.$t("Purchase Key"),disabled:u(le)},null,8,["modelValue","placeholder","label","disabled"])])])),_:1},8,["open"])])}}});export{U as default};
