import{a as e,ad as a,R as l,c as t,r as s,ac as r,b as o,e as i,w as n,u as d,an as m,o as u,q as c,f as p,t as f,_ as v,x as g,X as h,ao as b}from"../e/entry-8qgg5CL-.js";import{_ as y}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_}from"./BaseInput.vue-iInHQMIA.js";import{u as x}from"./useMailwizard-mGGEZWYz.js";import{v as C}from"./vue-email-editor.common-wo_sH4QP.js";import{z as k,u as w,t as j,F as T}from"./vee-validate.esm-n59zZCC5.js";import"./input-id-wZ-Ta08j.js";import"./vue.runtime.esm-bundler-o14tx7LQ.js";const z={class:"flex w-full items-center justify-between p-4 md:p-6"},B={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},V={class:"px-4 md:px-6"},E={class:"p-4 md:p-6"},N={class:"flex gap-x-2"},S=e({__name:"create",setup(e){const{toast:S}=a(),M=l(),$=t((()=>M.isDarkMode)),{createTemplate:q}=x(),F=s(!1),O=s(null),U=()=>{F.value=!0},D=k.object({name:k.string().nonempty("Name is required")}),H=t((()=>({name:""}))),{handleSubmit:I,isSubmitting:J,values:L,resetForm:P}=w({validationSchema:j(D),initialValues:H}),R=s(!1),W=s(!1),X=r(),A=I((async e=>{O.value?.editor.exportHtml((async a=>{try{const l=await q(e.name,a.html,JSON.stringify(a.design));S.response(l),"success"===l.status&&X.push("/admin/extensions/mailwizard/templates")}catch(l){S.danger(l)}}))}));return(e,a)=>{const l=v,t=g,s=h,r=y,x=b,k=_,w=m;return u(),o("div",null,[i(r,null,{left:n((()=>[i(l,{size:"lg"},{default:n((()=>[c("Create Template")])),_:1})])),right:n((()=>[i(s,{type:"button",color:"muted",class:"hover:bg-gray-300 dark:hover:bg-gray-800",to:"/admin/extensions/mailwizard/templates"},{default:n((()=>[i(t,{name:"line-md:chevron-left",class:"h-4 w-4 mr-2"}),c(" Back ")])),_:1}),i(s,{type:"submit",color:"primary",disabled:d(J)||!d(F)||!d(O),loading:d(J)||!d(F)||!d(O),class:"w-full",onClick:a[0]||(a[0]=()=>W.value=!0)},{default:n((()=>[c(" Create ")])),_:1},8,["disabled","loading"])])),default:n((()=>[i(d(C.EmailEditor),{onLoad:U,ref_key:"emailEditor",ref:O,style:{height:"calc(80vh)"},appearance:{theme:d($)?"dark":"light",panels:{tools:{dock:"left"}}}},null,8,["appearance"])])),_:1}),i(w,{open:d(W),size:"sm",onClose:a[3]||(a[3]=()=>W.value=!1)},{header:n((()=>[p("div",z,[p("h3",B,f(e.$t("Create Template")),1),i(x,{onClick:a[1]||(a[1]=()=>W.value=!1)})])])),footer:n((()=>[p("div",E,[p("div",N,[i(s,{onClick:a[2]||(a[2]=()=>W.value=!1)},{default:n((()=>[c(f(e.$t("Cancel")),1)])),_:1}),i(s,{color:"success",flavor:"solid",onClick:d(A),disabled:d(R),loading:d(R)},{default:n((()=>[c(f(e.$t("Create")),1)])),_:1},8,["onClick","disabled","loading"])])])])),default:n((()=>[p("div",V,[i(d(T),{name:"name"},{default:n((({field:e,errorMessage:a,handleChange:l,handleBlur:t})=>[i(k,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,l],error:a,label:"Name",placeholder:"Enter Template Name",shape:"rounded",class:"w-full",onBlur:t},null,8,["modelValue","onUpdate:modelValue","error","onBlur"])])),_:1})])])),_:1},8,["open"])])}}});export{S as default};
