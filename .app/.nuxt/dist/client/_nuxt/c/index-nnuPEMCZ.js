import{a as e,U as l,Q as a,c as o,r as s,as as n,b as t,e as r,w as i,u as d,W as u,Y as c,o as m,f as b,q as p,t as v,O as g,k as h,_ as f,a0 as _,X as B}from"../e/entry-8qgg5CL-.js";import{_ as y}from"./BaseMessage.vue-Kpn2u5Rn.js";import{_ as w}from"./BaseInput.vue-iInHQMIA.js";import{_ as x}from"./BaseTextarea.vue-8st5U0qk.js";import{_ as k}from"./TairoFormGroup.vue--3qC-osX.js";import{_ as V}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as U}from"./TairoFormSave.vue-aLVbwikq.js";import{z as j,u as S,t as M,F as E}from"./vee-validate.esm-n59zZCC5.js";import"./input-id-wZ-Ta08j.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";const T={class:"flex items-center justify-between p-4"},C={class:"flex items-center gap-2"},D={class:"px-8"},F={class:"mx-auto space-y-12 py-8"},$={class:"text-gray-700 dark:text-gray-300"},O={class:"grid grid-cols-12 gap-4 pt-2"},Y={class:"col-span-12 sm:col-span-6"},A={class:"col-span-12 sm:col-span-6"},I={class:"col-span-12"},P={class:"grid grid-cols-12 gap-4 pt-2"},L={class:"col-span-12 sm:col-span-6"},z={class:"col-span-12 sm:col-span-6"},G={class:"col-span-12 sm:col-span-6"},J={class:"col-span-12 sm:col-span-6"},R={class:"col-span-12 sm:col-span-6"},q={class:"grid grid-cols-12 gap-4 pt-2"},N={class:"col-span-12 sm:col-span-6"},Q={class:"col-span-12 sm:col-span-6"},W={class:"col-span-12 sm:col-span-6"},X={class:"col-span-12 sm:col-span-6"},H={class:"grid grid-cols-12 gap-4 pt-2"},K={class:"col-span-12 sm:col-span-6"},Z={class:"text-xs text-warning-500"},ee={class:"col-span-12 sm:col-span-6"},le={class:"text-xs text-warning-500"},ae={class:"grid grid-cols-12 gap-4 pt-2"},oe={class:"col-span-12 sm:col-span-6"},se={class:"col-span-12 sm:col-span-6"},ne={class:"text-xs text-warning-500"},te={key:0,class:"col-span-12 sm:col-span-6"},re={class:"text-xs text-warning-500"},ie=e({__name:"index",setup(e){const{updateSettings:ie}=l(),de=a(),ue=o((()=>de.settings)),ce=j.object({site_name:j.string().min(1,"Please enter a site name"),site_email:j.string().email("Please enter a valid email"),site_description:j.string(),site_maintenance:j.object({label:j.string(),value:j.boolean()}).nullable(),frontend:j.object({label:j.string(),value:j.boolean()}).nullable(),spot_exchange:j.object({label:j.string(),value:j.boolean()}).nullable(),binary_trading:j.object({label:j.string(),value:j.boolean()}),email_verification:j.object({label:j.string(),value:j.boolean()}).nullable(),two_factor:j.object({label:j.string(),value:j.boolean()}).nullable(),sms_otp:j.object({label:j.string(),value:j.boolean()}),frontend_type:j.string(),blog:j.object({label:j.string(),value:j.boolean()}).nullable(),social_links:j.object({facebook:j.string().url().or(j.literal("")),twitter:j.string().url().or(j.literal("")),instagram:j.string().url().or(j.literal("")),linkedin:j.string().url().or(j.literal("")),youtube:j.string().url().or(j.literal(""))})}),me=M(ce),be=o((()=>{let e={label:ue.value.site_maintenance?"Enabled":"Disabled",value:!!ue.value.site_maintenance},l={label:ue.value.spot_exchange?"Enabled":"Disabled",value:!!ue.value.spot_exchange},a={label:ue.value.frontend?"Enabled":"Disabled",value:!!ue.value.frontend},o={label:ue.value.binary_trading?"Enabled":"Disabled",value:!!ue.value.binary_trading},s={label:ue.value.email_verification?"Enabled":"Disabled",value:!!ue.value.email_verification},n={label:ue.value.sms_otp?"Enabled":"Disabled",value:!!ue.value.sms_otp},t={label:ue.value.two_factor?"Enabled":"Disabled",value:!!ue.value.two_factor},r={label:ue.value.blog?"Enabled":"Disabled",value:!!ue.value.blog};return{site_name:ue.value.site_name||"",site_email:ue.value.site_email||"",site_description:ue.value.site_description||"",site_maintenance:e,spot_exchange:l,frontend:a,frontend_type:ue.value.frontend_type||"Basic",binary_trading:o,email_verification:s,sms_otp:n,two_factor:t,blog:r,social_links:{facebook:ue.value.social_links?.facebook||"",twitter:ue.value.social_links?.twitter||"",instagram:ue.value.social_links?.instagram||"",linkedin:ue.value.social_links?.linkedin||"",youtube:ue.value.social_links?.youtube||""}}})),pe=[{label:"Enabled",value:!0},{label:"Disabled",value:!1}],{handleSubmit:ve,isSubmitting:ge,setFieldError:he,meta:fe,errors:_e,resetForm:Be,setErrors:ye}=S({validationSchema:me,initialValues:be}),we=s(!1),xe=o((()=>Object.keys(_e.value).length));n((()=>{if(fe.value.dirty)return confirm("You have unsaved changes. Are you sure you want to leave?")}));const ke=ve((async e=>{e.site_maintenance&&(e.site_maintenance=e.site_maintenance.value),e.spot_exchange&&(e.spot_exchange=e.spot_exchange.value),e.frontend&&(e.frontend=e.frontend.value),e.binary_trading&&(e.binary_trading=e.binary_trading.value),e.email_verification&&(e.email_verification=e.email_verification.value),e.sms_otp&&(e.sms_otp=e.sms_otp.value),e.two_factor&&(e.two_factor=e.two_factor.value),e.blog&&(e.blog=e.blog.value),e.social_links=JSON.stringify(e.social_links),we.value=!1;try{const l=await ie(e);"success"===l.status&&(await ie(e),document.documentElement.scrollTo({top:0,behavior:"smooth"}),we.value=!0,de.setSettings(Object.values(l.data.result)),setTimeout((()=>{we.value=!1}),3e3))}catch(l){if(l.data&&l.data.errors)for(const[e,a]of Object.entries(l.data.errors))he(e,a[0]);else console.error("An unknown error occurred:",l)}}));return(e,l)=>{const a=f,o=_,s=B,n=y,j=w,S=x,M=k,ie=V,de=c,ce=U;return m(),t("form",{method:"POST",action:"",class:"w-full pb-16",onSubmit:l[2]||(l[2]=u(((...e)=>d(ke)&&d(ke)(...e)),["prevent"]))},[r(de,null,{default:i((()=>[b("div",T,[b("div",null,[r(a,{tag:"h2",size:"sm",weight:"medium",lead:"normal",class:"uppercase tracking-wider"},{default:i((()=>[p(v(e.$t("General Settings")),1)])),_:1}),r(o,{size:"xs",class:"text-muted-400"},{default:i((()=>[p(v(e.$t("Edit your site settings")),1)])),_:1})]),b("div",C,[r(s,{type:"submit",color:"primary",class:"w-24",disabled:d(ge)||!d(fe).dirty,loading:d(ge)},{default:i((()=>[p(v(e.$t("Save")),1)])),_:1},8,["disabled","loading"])])]),b("div",D,[b("div",F,[d(we)?(m(),g(n,{key:0,onClose:l[0]||(l[0]=e=>we.value=!1)},{default:i((()=>[b("span",$,v(e.$t("Your settings have been saved"))+"!",1)])),_:1})):h("",!0),d(xe)?(m(),g(n,{key:1,type:"danger",onClose:l[1]||(l[1]=()=>d(ye)({}))},{default:i((()=>[p(v(e.$t("This form has"))+" "+v(d(xe))+" "+v(e.$t("errors, please check them before submitting")),1)])),_:1})):h("",!0),r(M,{label:"Basic Info",sublabel:"This is how others will recognize you"},{default:i((()=>[b("div",O,[b("div",Y,[r(d(E),{name:"site_name"},{default:i((({field:e,errorMessage:l,handleChange:a,handleBlur:o})=>[r(j,{"model-value":e.value,error:l,disabled:d(ge),type:"text",icon:"dashicons:admin-site-alt2",placeholder:"Site name","onUpdate:modelValue":a,onBlur:o,label:"Site name"},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})]),b("div",A,[r(d(E),{name:"site_email"},{default:i((({field:e,errorMessage:l,handleChange:a,handleBlur:o})=>[r(j,{"model-value":e.value,error:l,disabled:d(ge),type:"text",icon:"material-symbols:alternate-email",placeholder:"Site Email","onUpdate:modelValue":a,onBlur:o,label:"Site Email"},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})]),b("div",I,[r(d(E),{name:"site_description"},{default:i((({field:e,errorMessage:l,handleChange:a,handleBlur:o})=>[r(S,{"model-value":e.value,error:l,disabled:d(ge),rows:"4",placeholder:"It's considered a standard SEO best practice to keep site description at around 160-165 characters maximum","onUpdate:modelValue":a,onBlur:o,label:"Site Description"},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})])])])),_:1}),r(M,{label:"Social Links",sublabel:"Please enter your social links, leave empty if you don't want to show them, they will be shown in the footer, make sure to add the full url"},{default:i((()=>[b("div",P,[b("div",L,[r(d(E),{name:"social_links.facebook"},{default:i((({field:e,errorMessage:l,handleChange:a,handleBlur:o})=>[r(j,{"model-value":e.value,error:l,disabled:d(ge),type:"text",icon:"dashicons:facebook-alt",placeholder:"Facebook",label:"Facebook","onUpdate:modelValue":a,onBlur:o},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})]),b("div",z,[r(d(E),{name:"social_links.twitter"},{default:i((({field:e,errorMessage:l,handleChange:a,handleBlur:o})=>[r(j,{"model-value":e.value,error:l,disabled:d(ge),type:"text",icon:"dashicons:twitter",placeholder:"Twitter",label:"Twitter","onUpdate:modelValue":a,onBlur:o},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})]),b("div",G,[r(d(E),{name:"social_links.instagram"},{default:i((({field:e,errorMessage:l,handleChange:a,handleBlur:o})=>[r(j,{"model-value":e.value,error:l,disabled:d(ge),type:"text",icon:"dashicons:instagram",placeholder:"Instagram",label:"Instagram","onUpdate:modelValue":a,onBlur:o},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})]),b("div",J,[r(d(E),{name:"social_links.linkedin"},{default:i((({field:e,errorMessage:l,handleChange:a,handleBlur:o})=>[r(j,{"model-value":e.value,error:l,disabled:d(ge),type:"text",icon:"dashicons:linkedin",placeholder:"Linkedin",label:"Linkedin","onUpdate:modelValue":a,onBlur:o},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})]),b("div",R,[r(d(E),{name:"social_links.youtube"},{default:i((({field:e,errorMessage:l,handleChange:a,handleBlur:o})=>[r(j,{"model-value":e.value,error:l,disabled:d(ge),type:"text",icon:"dashicons:youtube",placeholder:"Youtube",label:"Youtube","onUpdate:modelValue":a,onBlur:o},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})])])])),_:1}),r(M,{label:"Access",sublabel:"Your access settings"},{default:i((()=>[b("div",q,[b("div",N,[r(d(E),{name:"site_maintenance"},{default:i((({field:e,errorMessage:l,handleChange:a,handleBlur:o})=>[r(ie,{"model-value":e.value,error:l,disabled:d(ge),items:pe,properties:{label:"label",value:"value"},placeholder:"Site Maintenance",label:"Site Maintenance",shape:"rounded","onUpdate:modelValue":a,onBlur:o},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})]),b("div",Q,[r(d(E),{name:"blog"},{default:i((({field:e,errorMessage:l,handleChange:a,handleBlur:o})=>[r(ie,{"model-value":e.value,error:l,disabled:d(ge),items:pe,properties:{label:"label",value:"value"},placeholder:"Blog",label:"Blog",shape:"rounded","onUpdate:modelValue":a,onBlur:o},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})]),b("div",W,[r(d(E),{name:"frontend"},{default:i((({field:e,errorMessage:l,handleChange:a,handleBlur:o})=>[r(ie,{"model-value":e.value,error:l,disabled:d(ge),items:pe,properties:{label:"label",value:"value"},placeholder:"Frontend",label:"Frontend",shape:"rounded","onUpdate:modelValue":a,onBlur:o},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})]),b("div",X,[r(d(E),{name:"frontend_type"},{default:i((({field:e,errorMessage:l,handleChange:a,handleBlur:o})=>[r(ie,{"model-value":e.value,error:l,disabled:d(ge),items:["Basic","Advanced"],placeholder:"Frontend Type",label:"Frontend Type",shape:"rounded","onUpdate:modelValue":a,onBlur:o},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})])])])),_:1}),r(M,{label:"Trading",sublabel:"Your trading settings"},{default:i((()=>[b("div",H,[b("div",K,[r(d(E),{name:"spot_exchange"},{default:i((({field:l,errorMessage:a,handleChange:o,handleBlur:s})=>[r(ie,{"model-value":l.value,error:a,disabled:d(ge),items:pe,properties:{label:"label",value:"value"},placeholder:"Spot Exchange",label:"Spot Exchange",shape:"rounded","onUpdate:modelValue":o,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"]),b("small",null,[b("span",Z,v(e.$t("Disable this option if you want to disable spot trading, binary trading, spot wallets")),1)])])),_:1})]),b("div",ee,[r(d(E),{name:"binary_trading"},{default:i((({field:l,errorMessage:a,handleChange:o,handleBlur:s})=>[r(ie,{"model-value":l.value,error:a,disabled:d(ge),items:pe,properties:{label:"label",value:"value"},placeholder:"Binary Trading",label:"Binary Trading",shape:"rounded","onUpdate:modelValue":o,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"]),b("small",null,[b("span",le,v(e.$t("Disable this option if you want to disable binary trading, binary wallets")),1)])])),_:1})])])])),_:1}),r(M,{label:"Authentication",sublabel:"Your authentication settings"},{default:i((()=>[b("div",ae,[b("div",oe,[r(d(E),{name:"email_verification"},{default:i((({field:e,errorMessage:l,handleChange:a,handleBlur:o})=>[r(ie,{"model-value":e.value,error:l,disabled:d(ge),items:pe,properties:{label:"label",value:"value"},placeholder:"Email Verification",label:"Email Verification",shape:"rounded","onUpdate:modelValue":a,onBlur:o},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})]),b("div",se,[r(d(E),{name:"two_factor"},{default:i((({field:l,errorMessage:a,handleChange:o,handleBlur:s})=>[r(ie,{"model-value":l.value,error:a,disabled:d(ge),items:pe,properties:{label:"label",value:"value"},placeholder:"Two Factor",label:"Two Factor",shape:"rounded","onUpdate:modelValue":o,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"]),b("small",null,[b("span",ne,v(e.$t("Disable this option if you want to disable two factor authentication")),1)])])),_:1})]),d(ue)?.two_factor?(m(),t("div",te,[r(d(E),{name:"sms_otp"},{default:i((({field:l,errorMessage:a,handleChange:o,handleBlur:s})=>[r(ie,{"model-value":l.value,error:a,disabled:d(ge),items:pe,properties:{label:"label",value:"value"},placeholder:"SMS OTP",label:"SMS OTP",shape:"rounded","onUpdate:modelValue":o,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"]),b("small",null,[b("span",re,v(e.$t("Disable this option if you want to disable sms otp in two factor authentication")),1)])])),_:1})])):h("",!0)])])),_:1})])])])),_:1}),r(ce,{disabled:d(ge),loading:d(ge),onReset:d(Be)},null,8,["disabled","loading","onReset"])],32)}}});export{ie as default};
