import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{d as a,a as l,z as t,r as s,c as o,E as r,ac as u,ad as n,b as i,e as c,w as d,o as m,f as p,u as v,p as f,O as g,q as h,t as _,af as y,n as w,k as b,F as T,B as x,x as E,X as k,Y as D,ag as V}from"../e/entry-8qgg5CL-.js";import{_ as j}from"./BaseSelect.vue-p0KYznCX.js";import{_ as C}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as F,a as A}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as B}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as I}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as O}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as L}from"./TairoFlexTable-zdoraqRc.js";import{_ as R}from"./BasePagination.vue-eKZkqxB7.js";import{_ as S}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_ as $,a as P}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as U}from"./useForex-v_V55_1y.js";import"./input-id-wZ-Ta08j.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const X=a({id:"forexTransactions",state:()=>({transactions:[],loading:!1}),getters:{count:e=>e.transactions.length},actions:{async fetchTransactions(){const{getForexTransactions:e}=U(),a=await e();"success"===a.status&&(this.transactions=a.data.result??null)}}}),W={class:"w-full flex gap-2 xs:flex-col sm:flex-row"},q={value:10},N={value:25},H={value:50},J={value:100},M=p("img",{class:"block dark:hidden",src:$,alt:"Placeholder image"},null,-1),z=p("img",{class:"hidden dark:block",src:P,alt:"Placeholder image"},null,-1),Y={key:1,class:"w-full sm:pt-5"},G={class:"mt-6"},K=l({__name:"index",setup(a){const l=t(),$=X(),P=s(!1),U=s(""),K=s(10),Q=o((()=>parseInt(l.query.page??"1"))),Z=s("");r((async()=>{P.value=!0,await $.fetchTransactions(),P.value=!1}));const ee=o((()=>$.transactions.filter((e=>(!te.value||"All"===te.value||e.status===te.value)&&((!se.value||"All"===se.value||e.type===se.value)&&(!(oe.value&&new Date(e.created_at)<new Date(oe.value))&&(!(re.value&&new Date(e.created_at)>new Date(re.value))&&(U.value&&""!==U.value&&void 0!==U.value&&U.value!==Z.value&&(ie.push({query:{...l.query,page:"1",filter:U.value}}),Z.value=U.value),!U.value||e.uuid?.includes(U.value))))))).sort(((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())))),ae=o((()=>{const e=(Q.value-1)*K.value,a=e+K.value;return ee.value.slice(e,a)})),le=s(!1),te=s(""),se=s(""),oe=s(""),re=s(""),ue=["All","ACTIVE","COMPLETED","CANCELLED","REJECTED"],ne=["All","FOREX_DEPOSIT","FOREX_WITHDRAW"],ie=u(),{formatedDate:ce}=n(),de=e=>{switch(e){case"COMPLETED":return"success";case"REJECTED":case"CANCELLED":return"danger";default:return"info"}},me={FOREX_DEPOSIT:"Deposit",FOREX_WITHDRAW:"Withdraw"};return(a,l)=>{const t=e,s=E,o=k,r=j,u=C,n=D,$=V,X=F,Z=B,pe=I,ve=O,fe=A,ge=L,he=R,_e=S;return m(),i("div",null,[c(_e,null,{left:d((()=>[p("div",W,[c(t,{modelValue:v(U),"onUpdate:modelValue":l[0]||(l[0]=e=>f(U)?U.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Search Transaction ID..."},null,8,["modelValue"]),c(o,{onClick:l[1]||(l[1]=e=>le.value=!v(le)),color:"muted",block:""},{default:d((()=>[v(le)?(m(),g(s,{key:0,name:"line-md:arrow-up",class:"h-4 w-4 mr-2"})):(m(),g(s,{key:1,name:"line-md:arrow-down",class:"h-4 w-4 mr-2"})),h(" "+_(a.$t("Filters")),1)])),_:1})])])),right:d((()=>[c(r,{modelValue:v(K),"onUpdate:modelValue":l[2]||(l[2]=e=>f(K)?K.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:d((()=>[p("option",q,"10 "+_(a.$t("per page")),1),p("option",N,"25 "+_(a.$t("per page")),1),p("option",H,"50 "+_(a.$t("per page")),1),p("option",J,"100 "+_(a.$t("per page")),1)])),_:1},8,["modelValue"])])),default:d((()=>[p("div",null,[c(y,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:d((()=>[v(le)?(m(),g(n,{key:0,class:w("grid gap-4 xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-3 mb-6 p-5")},{default:d((()=>[c(u,{modelValue:v(te),"onUpdate:modelValue":l[3]||(l[3]=e=>f(te)?te.value=e:null),label:"Status",items:ue,placeholder:"Select a Status"},null,8,["modelValue"]),c(u,{modelValue:v(se),"onUpdate:modelValue":l[4]||(l[4]=e=>f(se)?se.value=e:null),label:"Type",items:ne,placeholder:"Select a Type"},null,8,["modelValue"]),c(t,{modelValue:v(oe),"onUpdate:modelValue":l[5]||(l[5]=e=>f(oe)?oe.value=e:null),type:"date",label:"From"},null,8,["modelValue"]),c(t,{modelValue:v(re),"onUpdate:modelValue":l[6]||(l[6]=e=>f(re)?re.value=e:null),type:"date",label:"To"},null,8,["modelValue"])])),_:1})):b("",!0)])),_:1}),v(P)||0!==v(ae)?.length?(m(),i("div",Y,[c(ge,null,{default:d((()=>[c(y,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:d((()=>[(m(!0),i(T,null,x(v(ae),((e,a)=>(m(),g(fe,{key:e.id,spaced:""},{start:d((()=>[c(X,{label:"User","hide-label":a>0,logo:e.user?.avatar,title:`${e.user?.first_name} ${e.user?.last_name}`,subtitle:v(ce)(e.created_at,!0)},null,8,["hide-label","logo","title","subtitle"])])),end:d((()=>[c(Z,{label:"Amount","hide-label":a>0,class:"w-20 xs:w-full text-xs"},{default:d((()=>[h(_(e.amount),1)])),_:2},1032,["hide-label"]),c(Z,{label:"Type","hide-label":a>0,class:"w-20 xs:w-full"},{default:d((()=>[c(pe,{color:"FOREX_DEPOSIT"===e.type?"success":"danger",flavor:"pastel",condensed:""},{default:d((()=>[h(_(me[e.type]),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),c(Z,{label:"Status","hide-label":a>0,class:"w-20 xs:w-full"},{default:d((()=>[c(pe,{color:de(e.status),flavor:"pastel",condensed:""},{default:d((()=>[h(_(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),c(Z,{label:"Actions","hide-label":a>0,class:"w-20"},{default:d((()=>[c(ve,{condensed:"",color:"muted",onClick:a=>{return l=e.uuid,void ie.push(`/admin/extensions/forex/transactions/${l}`);var l},"data-nui-tooltip":"View"},{default:d((()=>[c(s,{name:"ph:eye-duotone",class:"h-4 w-4"})])),_:2},1032,["onClick"])])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])),_:1})])):(m(),g($,{key:0,title:v(U)&&""!==v(U)?"No matching results":"No results",subtitle:v(U)&&""!==v(U)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:d((()=>[M,z])),_:1},8,["title","subtitle"])),p("div",G,[v(ee).length>v(K)?(m(),g(he,{key:0,"total-items":v(ee).length,"current-page":v(Q),"item-per-page":v(K)},null,8,["total-items","current-page","item-per-page"])):b("",!0)])])])),_:1})])}}});export{K as default};
