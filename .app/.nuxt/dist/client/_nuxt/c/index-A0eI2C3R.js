import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{a,z as l,r as t,c as s,E as r,ac as o,b as u,e as n,w as i,o as c,f as m,u as d,p,O as f,q as v,t as g,af as y,k as _,F as h,B as w,X as b,Y as k,ag as j,x}from"../e/entry-8qgg5CL-.js";import{_ as D}from"./BaseSelect.vue-p0KYznCX.js";import{_ as E,a as T}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as V}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as B}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as F}from"./TairoFlexTable-zdoraqRc.js";import{_ as $}from"./BasePagination.vue-eKZkqxB7.js";import{_ as C}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as I}from"./useMlm-tZO3tueF.js";import{a as L}from"./strings-rQgUKePI.js";import{_ as P,a as N}from"./placeholder-search-4-dark-Jht91LnM.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const R={class:"w-full flex gap-2 xs:flex-col sm:flex-row"},U={value:10},A={value:25},S={value:50},q={value:100},M=m("img",{class:"block dark:hidden",src:P,alt:"Placeholder image"},null,-1),O=m("img",{class:"hidden dark:block",src:N,alt:"Placeholder image"},null,-1),X={key:1,class:"w-full sm:pt-5"},z={class:"mt-6"},G=a({__name:"index",setup(a){const P=l(),{getReferrals:N}=I(),G=t(!1),J=t(""),W=t(10),Y=s((()=>parseInt(P.query.page??"1")));let H=t([]);r((async()=>{G.value=!0;try{const e=await N();H.value=e.data.result}catch(e){H.value=[]}G.value=!1}));const K=s((()=>H.value.filter((e=>!(ae.value&&new Date(e.created_at)<new Date(ae.value))&&(!(le.value&&new Date(e.created_at)>new Date(le.value))&&(!J.value||e.id?.includes(J.value))))).sort(((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())))),Q=s((()=>{const e=(Y.value-1)*W.value,a=e+W.value;return K.value.slice(e,a)})),Z=e=>{switch(e){case"COMPLETED":return"success";case"PENDING":return"warning";case"FAILED":case"CANCELLED":case"REJECTED":case"EXPIRED":return"danger";default:return"info"}},ee=t(!1),ae=t(""),le=t("");return o(),(a,l)=>{const t=e,s=x,r=b,o=D,I=k,P=j,N=E,H=V,te=B,se=T,re=F,oe=$,ue=C;return c(),u("div",null,[n(ue,null,{left:i((()=>[m("div",R,[n(t,{modelValue:d(J),"onUpdate:modelValue":l[0]||(l[0]=e=>p(J)?J.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Search Referral ID..."},null,8,["modelValue"]),n(r,{onClick:l[1]||(l[1]=e=>ee.value=!d(ee)),color:"muted",block:""},{default:i((()=>[d(ee)?(c(),f(s,{key:0,name:"line-md:arrow-up",class:"h-4 w-4 mr-2"})):(c(),f(s,{key:1,name:"line-md:arrow-down",class:"h-4 w-4 mr-2"})),v(" "+g(a.$t("Filters")),1)])),_:1})])])),right:i((()=>[n(o,{modelValue:d(W),"onUpdate:modelValue":l[2]||(l[2]=e=>p(W)?W.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:i((()=>[m("option",U,"10 "+g(a.$t("per page")),1),m("option",A,"25 "+g(a.$t("per page")),1),m("option",S,"50 "+g(a.$t("per page")),1),m("option",q,"100 "+g(a.$t("per page")),1)])),_:1},8,["modelValue"])])),default:i((()=>[m("div",null,[n(y,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:i((()=>[d(ee)?(c(),f(I,{key:0,class:"grid gap-4 xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-2 mb-6 p-5"},{default:i((()=>[n(t,{modelValue:d(ae),"onUpdate:modelValue":l[3]||(l[3]=e=>p(ae)?ae.value=e:null),type:"date",label:"From"},null,8,["modelValue"]),n(t,{modelValue:d(le),"onUpdate:modelValue":l[4]||(l[4]=e=>p(le)?le.value=e:null),type:"date",label:"To"},null,8,["modelValue"])])),_:1})):_("",!0)])),_:1}),d(G)||0!==d(Q)?.length?(c(),u("div",X,[n(re,null,{default:i((()=>[n(y,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:i((()=>[(c(!0),u(h,null,w(d(Q),((e,l)=>(c(),f(se,{key:e.id,spaced:""},{start:i((()=>[n(N,{label:"User","hide-label":l>0,logo:e.referred?.avatar,title:`${e.referred?.first_name} ${e.referred?.last_name}`,subtitle:("formatDate"in a?a.formatDate:d(L))(e.created_at)},null,8,["hide-label","logo","title","subtitle"])])),end:i((()=>[n(te,{label:"Status","hide-label":l>0},{default:i((()=>[n(H,{color:Z(e.status),flavor:"pastel",condensed:""},{default:i((()=>[v(g(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])),_:1})])):(c(),f(P,{key:0,title:d(J)&&""!==d(J)?"No matching results":"No results",subtitle:d(J)&&""!==d(J)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:i((()=>[M,O])),_:1},8,["title","subtitle"])),m("div",z,[d(K).length>d(W)?(c(),f(oe,{key:0,"total-items":d(K).length,"current-page":d(Y),"item-per-page":d(W)},null,8,["total-items","current-page","item-per-page"])):_("",!0)])])])),_:1})])}}});export{G as default};
