import{a as e,U as l,Q as a,c as o,r as t,J as s,b as i,e as d,w as u,Y as n,o as c,f as r,q as m,t as g,u as v,O as p,k as f,p as b,_ as k,a0 as h,x as _}from"../e/entry-8qgg5CL-.js";import{_ as y}from"./BaseMessage.vue-Kpn2u5Rn.js";import{_ as w}from"./BaseButtonIcon.vue-6tAU_b7C.js";import{_ as j}from"./BaseInputFileHeadless.vue-LOgyN9kF.js";import{_ as x}from"./TairoFormGroup.vue--3qC-osX.js";import{u as C}from"./fetch-i3Y1jjTS.js";import{z as U,u as V,a as F,t as T}from"./vee-validate.esm-n59zZCC5.js";import"./input-id-wZ-Ta08j.js";const z={method:"POST",action:"",class:"w-full pb-16"},S={class:"flex items-center justify-between p-4"},L={class:"px-8"},O={class:"mx-auto space-y-12 py-8"},B={class:"text-gray-700 dark:text-gray-300"},D={class:"grid xs:grid-cols-1 md:grid-cols-2 gap-6 pt-2"},R={class:"relative flex flex-col items-center justify-center gap-4"},$={class:"relative h-16 w-16"},E=["src"],I=["src"],P={key:2,class:"absolute bottom-0 end-0 z-20"},Y={key:3,class:"absolute bottom-0 end-0 z-20"},q={class:"relative","data-nui-tooltip":"Upload image"},G={key:0,class:"text-danger-600 inline-block font-sans text-[.8rem]"},H={class:"relative flex flex-col items-center justify-center gap-4"},J={class:"relative h-16 w-16"},M=["src"],Q=["src"],Z={key:2,class:"absolute bottom-0 end-0 z-20"},A={key:3,class:"absolute bottom-0 end-0 z-20"},K={class:"relative","data-nui-tooltip":"Upload image"},N={key:0,class:"text-danger-600 inline-block font-sans text-[.8rem]"},W={class:"relative flex flex-col items-center justify-center gap-4"},X={class:"relative h-16 w-64"},ee=["src"],le=["src"],ae={key:2,class:"absolute bottom-0 end-0 z-20"},oe={key:3,class:"absolute bottom-0 end-0 z-20"},te={class:"relative","data-nui-tooltip":"Upload image"},se={key:0,class:"text-danger-600 inline-block font-sans text-[.8rem]"},ie={class:"relative flex flex-col items-center justify-center gap-4"},de={class:"relative h-16 w-64"},ue=["src"],ne=["src"],ce={key:2,class:"absolute bottom-0 end-0 z-20"},re={key:3,class:"absolute bottom-0 end-0 z-20"},me={class:"relative","data-nui-tooltip":"Upload image"},ge={key:0,class:"text-danger-600 inline-block font-sans text-[.8rem]"},ve={class:"relative flex flex-col items-center justify-center gap-4"},pe={class:"relative h-64 w-64"},fe=["src"],be=["src"],ke={key:2,class:"absolute bottom-0 end-0 z-20"},he={key:3,class:"absolute bottom-0 end-0 z-20"},_e={class:"relative","data-nui-tooltip":"Upload image"},ye={key:0,class:"text-danger-600 inline-block font-sans text-[.8rem]"},we=e({__name:"logo",setup(e){const{updateSettings:we}=l(),je=a(),xe=o((()=>je.settings)),Ce=U.object({logo:U.union([U.string(),U.custom((e=>e instanceof File))]).nullable(),card_logo:U.union([U.string(),U.custom((e=>e instanceof File))]).nullable(),dark_logo:U.union([U.string(),U.custom((e=>e instanceof File))]).nullable(),full_logo:U.union([U.string(),U.custom((e=>e instanceof File))]).nullable(),dark_full_logo:U.union([U.string(),U.custom((e=>e instanceof File))]).nullable()}),Ue=T(Ce),Ve=o((()=>({logo:xe.value.logo||null,card_logo:xe.value.card_logo||null,dark_logo:xe.value.dark_logo||null,full_logo:xe.value.full_logo||null,dark_full_logo:xe.value.dark_full_logo||null}))),{setFieldError:Fe,errors:Te,setFieldValue:ze,setErrors:Se}=V({validationSchema:Ue,initialValues:Ve}),Le=t(!1),Oe=o((()=>Object.keys(Te.value).length)),Be=t(xe.value.logo||null),De=t(xe.value.card_logo||null),Re=t(xe.value.dark_logo||null),$e=t(xe.value.full_logo||null),Ee=t(xe.value.dark_full_logo||null),Ie=F("avatar");s(Be,(e=>{const l=e?.item(0)||null;ze("logo",l),Be.value&&Pe("logo")})),s(Re,(e=>{const l=e?.item(0)||null;ze("dark_logo",l),Re.value&&Pe("dark_logo")})),s($e,(e=>{const l=e?.item(0)||null;ze("full_logo",l),$e.value&&Pe("full_logo")})),s(Ee,(e=>{const l=e?.item(0)||null;ze("dark_full_logo",l),Ee.value&&Pe("dark_full_logo")})),s(De,(e=>{const l=e?.item(0)||null;ze("card_logo",l),De.value&&Pe("card_logo")}));const Pe=async e=>{const l=o((()=>{switch(e){case"logo":return Be;case"dark_logo":return Re;case"full_logo":return $e;case"dark_full_logo":return Ee;case"card_logo":return De}}));let a;try{Le.value=!1;const o=new FormData;if(o.append("files",l.value.value[0]),o.append("oldImagePath",xe.value[e]),o.append("type","logo"),a=await C("/api/upload",{method:"POST",body:o},"$D41ZD67cVp"),a&&""!==a.data.value){const l={[e]:a.data.value[0]};let o=await we(l);"success"===o.status&&(o=await we(l),document.documentElement.scrollTo({top:0,behavior:"smooth"}),Le.value=!0,je.setSettings(Object.values(o.data.result)),setTimeout((()=>{Le.value=!1}),3e3))}}catch(t){console.log(t);for(const[e,l]of Object.entries(t.data.errors))Fe(e,l[0])}},Ye=e=>e instanceof File||e instanceof Blob;return(e,l)=>{const a=k,o=h,t=y,s=_,C=w,U=j,V=x,F=n;return c(),i("form",z,[d(F,null,{default:u((()=>[r("div",S,[r("div",null,[d(a,{tag:"h2",size:"sm",weight:"medium",lead:"normal",class:"uppercase tracking-wider"},{default:u((()=>[m(g(e.$t("Site Logo")),1)])),_:1}),d(o,{size:"xs",class:"text-muted-400"},{default:u((()=>[m(g(e.$t("This is the logo that will be displayed on your site")),1)])),_:1})])]),r("div",L,[r("div",O,[v(Le)?(c(),p(t,{key:0,onClose:l[0]||(l[0]=e=>Le.value=!1)},{default:u((()=>[r("span",B,g(e.$t("Your settings have been saved"))+"!",1)])),_:1})):f("",!0),v(Oe)?(c(),p(t,{key:1,type:"danger",onClose:l[1]||(l[1]=()=>v(Se)({}))},{default:u((()=>[m(g(e.$t("The file you uploaded is not valid")),1)])),_:1})):f("",!0),r("div",D,[d(V,{label:"Logo",sublabel:"This is the logo that will be displayed on your site"},{default:u((()=>[r("div",R,[d(U,{accept:"image/*",modelValue:v(Be),"onUpdate:modelValue":l[2]||(l[2]=e=>b(Be)?Be.value=e:null)},{default:u((({open:e,remove:l,preview:a,files:o})=>[r("div",$,[o?.length&&Ye(o[0])?(c(),i("img",{key:0,src:a(o[0]).value,alt:"Upload preview",class:"bg-muted-200 dark:bg-muted-700/60 h-16 w-16 rounded-full object-cover object-center"},null,8,E)):(c(),i("img",{key:1,src:v(xe).logo,alt:"Upload preview",class:"bg-muted-200 dark:bg-muted-700/60 h-16 w-16 rounded-full object-cover object-center"},null,8,I)),o?.length&&Ye(o[0])?(c(),i("div",P,[d(C,{condensed:"",shape:"full",onClick:e=>l(o.item(0)),"data-nui-tooltip":"Remove image"},{default:u((()=>[d(s,{name:"lucide:x",class:"h-4 w-4"})])),_:2},1032,["onClick"])])):(c(),i("div",Y,[r("div",q,[d(C,{condensed:"",shape:"full",onClick:e},{default:u((()=>[d(s,{name:"lucide:plus",class:"h-4 w-4"})])),_:2},1032,["onClick"])])]))])])),_:1},8,["modelValue"]),v(Ie)?(c(),i("div",G,g(v(Ie)),1)):f("",!0)])])),_:1}),d(V,{label:"Dark Logo",sublabel:"This is the dark logo that will be displayed on your site"},{default:u((()=>[r("div",H,[d(U,{accept:"image/*",modelValue:v(Re),"onUpdate:modelValue":l[3]||(l[3]=e=>b(Re)?Re.value=e:null)},{default:u((({open:e,remove:l,preview:a,files:o})=>[r("div",J,[o?.length&&Ye(o[0])?(c(),i("img",{key:0,src:a(o.item(0)).value,alt:"Upload preview",class:"bg-muted-200 dark:bg-muted-700/60 h-16 w-16 rounded-full object-cover object-center"},null,8,M)):(c(),i("img",{key:1,src:v(xe).dark_logo,alt:"Upload preview",class:"bg-muted-200 dark:bg-muted-700/60 h-16 w-16 rounded-full object-cover object-center"},null,8,Q)),o?.length&&Ye(o[0])?(c(),i("div",Z,[d(C,{condensed:"",shape:"full",onClick:e=>l(o.item(0)),"data-nui-tooltip":"Remove image"},{default:u((()=>[d(s,{name:"lucide:x",class:"h-4 w-4"})])),_:2},1032,["onClick"])])):(c(),i("div",A,[r("div",K,[d(C,{condensed:"",shape:"full",onClick:e},{default:u((()=>[d(s,{name:"lucide:plus",class:"h-4 w-4"})])),_:2},1032,["onClick"])])]))])])),_:1},8,["modelValue"]),v(Ie)?(c(),i("div",N,g(v(Ie)),1)):f("",!0)])])),_:1}),d(V,{label:"Full Logo",sublabel:"This is the full logo that will be displayed on your site"},{default:u((()=>[r("div",W,[d(U,{accept:"image/*",modelValue:v($e),"onUpdate:modelValue":l[4]||(l[4]=e=>b($e)?$e.value=e:null)},{default:u((({open:e,remove:l,preview:a,files:o})=>[r("div",X,[o?.length&&Ye(o[0])?(c(),i("img",{key:0,src:a(o.item(0)).value,alt:"Upload preview",class:"bg-muted-200 dark:bg-muted-700/60 h-16 w-64 rounded-lg object-cover object-center"},null,8,ee)):(c(),i("img",{key:1,src:v(xe).full_logo,alt:"Upload preview",class:"bg-muted-200 dark:bg-muted-700/60 h-16 w-64 rounded-lg object-cover object-center"},null,8,le)),o?.length&&Ye(o[0])?(c(),i("div",ae,[d(C,{condensed:"",shape:"full",onClick:e=>l(o.item(0)),"data-nui-tooltip":"Remove image"},{default:u((()=>[d(s,{name:"lucide:x",class:"h-4 w-4"})])),_:2},1032,["onClick"])])):(c(),i("div",oe,[r("div",te,[d(C,{condensed:"",shape:"full",onClick:e},{default:u((()=>[d(s,{name:"lucide:plus",class:"h-4 w-4"})])),_:2},1032,["onClick"])])]))])])),_:1},8,["modelValue"]),v(Ie)?(c(),i("div",se,g(v(Ie)),1)):f("",!0)])])),_:1}),d(V,{label:"Dark Full Logo",sublabel:"This is the dark full logo that will be displayed on your site"},{default:u((()=>[r("div",ie,[d(U,{accept:"image/*",modelValue:v(Ee),"onUpdate:modelValue":l[5]||(l[5]=e=>b(Ee)?Ee.value=e:null)},{default:u((({open:e,remove:l,preview:a,files:o})=>[r("div",de,[o?.length&&Ye(o[0])?(c(),i("img",{key:0,src:a(o.item(0)).value,alt:"Upload preview",class:"bg-muted-200 dark:bg-muted-700/60 h-16 w-64 rounded-lg object-cover object-center"},null,8,ue)):(c(),i("img",{key:1,src:v(xe).dark_full_logo,alt:"Upload preview",class:"bg-muted-200 dark:bg-muted-700/60 h-16 w-64 rounded-lg object-cover object-center"},null,8,ne)),o?.length&&Ye(o[0])?(c(),i("div",ce,[d(C,{condensed:"",shape:"full",onClick:e=>l(o.item(0)),"data-nui-tooltip":"Remove image"},{default:u((()=>[d(s,{name:"lucide:x",class:"h-4 w-4"})])),_:2},1032,["onClick"])])):(c(),i("div",re,[r("div",me,[d(C,{condensed:"",shape:"full",onClick:e},{default:u((()=>[d(s,{name:"lucide:plus",class:"h-4 w-4"})])),_:2},1032,["onClick"])])]))])])),_:1},8,["modelValue"]),v(Ie)?(c(),i("div",ge,g(v(Ie)),1)):f("",!0)])])),_:1}),d(V,{label:"Card Logo",sublabel:"This is the card logo that will be displayed on your site social cards"},{default:u((()=>[r("div",ve,[d(U,{accept:"image/*",modelValue:v(De),"onUpdate:modelValue":l[6]||(l[6]=e=>b(De)?De.value=e:null)},{default:u((({open:e,remove:l,preview:a,files:o})=>[r("div",pe,[o?.length&&Ye(o[0])?(c(),i("img",{key:0,src:a(o.item(0)).value,alt:"Upload preview",class:"bg-muted-200 dark:bg-muted-700/60 h-64 w-64 rounded-lg object-cover object-center"},null,8,fe)):(c(),i("img",{key:1,src:v(xe).card_logo,alt:"Upload preview",class:"bg-muted-200 dark:bg-muted-700/60 h-64 w-64 rounded-lg object-cover object-center"},null,8,be)),o?.length&&Ye(o[0])?(c(),i("div",ke,[d(C,{condensed:"",shape:"full",onClick:e=>l(o.item(0)),"data-nui-tooltip":"Remove image"},{default:u((()=>[d(s,{name:"lucide:x",class:"h-4 w-4"})])),_:2},1032,["onClick"])])):(c(),i("div",he,[r("div",_e,[d(C,{condensed:"",shape:"full",onClick:e},{default:u((()=>[d(s,{name:"lucide:plus",class:"h-4 w-4"})])),_:2},1032,["onClick"])])]))])])),_:1},8,["modelValue"]),v(Ie)?(c(),i("div",ye,g(v(Ie)),1)):f("",!0)])])),_:1})])])])])),_:1})])}}});export{we as default};
