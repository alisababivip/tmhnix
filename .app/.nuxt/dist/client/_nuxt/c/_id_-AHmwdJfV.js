import{a as e,z as a,r as l,ad as s,E as o,c as r,b as t,e as n,w as d,o as u,q as i,t as m,u as c,f as p,F as b,B as h,_ as f,x as _,X as v,Y as y}from"../e/entry-8qgg5CL-.js";import{_ as g}from"./BaseInput.vue-iInHQMIA.js";import{_ as S}from"./BaseTextarea.vue-8st5U0qk.js";import{_ as U}from"./BaseSwitchBall.vue-Xcs_6krq.js";import{_ as B}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as E}from"./useNotification--fi6QyMz.js";import{z as T,u as V,t as j,F as x}from"./vee-validate.esm-n59zZCC5.js";import"./input-id-wZ-Ta08j.js";import"./IconCheck-JvP9GQU1.js";const A={class:"pb-10"},C={class:"grid gap-5 xs:grid-cols-1 md:grid-cols-3 lg:grid-cols-4"},N={class:"xs:col-span-1 md:col-span-2 lg:col-span-3 space-y-5"},I={class:"col-span-1"},M={class:"space-y-3 text-xs"},w={class:"text-gray-600 dark:text-gray-400"},R={class:"font-semibold text-gray-800 dark:text-gray-200"},k={class:"text-gray-500"},D={class:"space-y-3 text-xs"},O=e({__name:"[id]",setup(e){const O=a(),{id:P}=O.params,L=l(!1),{toast:Y}=s(),{getNotificationTemplate:$,updateNotificationTemplate:z}=E(),F=l([]);o((async()=>{L.value=!0;try{const e=await $(P);"string"==typeof e.data.result.short_codes&&(e.data.result.short_codes=JSON.parse(e.data.result.short_codes)),F.value=e.data.result}catch(e){console.log(e)}L.value=!1,console.log(F.value)}));const q=T.object({subject:T.string().nonempty("Subject is required"),email_body:T.string().nullable().optional(),sms_body:T.string().nullable().optional(),push_body:T.string().nullable().optional(),email:T.boolean().nullable().optional(),sms:T.boolean().nullable().optional(),push:T.boolean().nullable().optional()}),H=r((()=>({subject:F.value.subject??"",email_body:F.value.email_body??"",sms_body:F.value.sms_body??"",push_body:F.value.push_body??"",email:F.value.email??!1,sms:F.value.sms??!1,push:F.value.push??!1}))),{handleSubmit:W,isSubmitting:G}=V({validationSchema:j(q),initialValues:H}),J=W((async e=>{try{const a=await z(P,e);Y.response(a)}catch(a){Y.danger(a)}})),K=e=>{switch(e){case"FIRSTNAME":return"User first name";case"LASTNAME":return"User last name";case"EMAIL":return"User email";case"PHONE":return"User phone";case"COMPANY":return"User company";case"ADDRESS":return"User address";case"CITY":return"User city";case"STATE":return"User state";case"ZIP":return"User zip";case"COUNTRY":return"User country";case"PASSWORD":return"User password";case"USERNAME":return"User username";case"URL":case"SITE_URL":return"Site url";case"CREATED_AT":return"Template related Created at";case"UPDATED_AT":return"Updated at date";case"SITE_NAME":return"Site name";case"SITE_EMAIL":return"Site email";case"SITE_PHONE":return"Site phone";case"SITE_ADDRESS":return"Site address";case"TOKEN":return"Template related token";case"LAST_LOGIN":return"User last login"}};return(e,a)=>{const l=f,s=_,o=v,r=g,E=S,T=y,V=U,j=B;return u(),t("div",A,[n(j,null,{left:d((()=>[n(l,null,{default:d((()=>[i(m(e.$t("Editing"))+" "+m(c(F)?.name)+" "+m(e.$t("Template")),1)])),_:1})])),right:d((()=>[n(o,{color:"success",onClick:c(J)},{default:d((()=>[n(s,{name:"line-md:confirm",class:"w-5 h-5 mr-2"}),i(" "+m(e.$t("Save")),1)])),_:1},8,["onClick"]),n(o,{color:"muted",to:"/admin/settings/notifications/templates"},{default:d((()=>[n(s,{name:"line-md:arrow-small-left",class:"w-5 h-5 mr-2"}),i(" "+m(e.$t("Back")),1)])),_:1})])),default:d((()=>[p("div",C,[p("div",N,[n(c(x),{name:"subject"},{default:d((({field:e,errorMessage:a,handleChange:l,handleBlur:s})=>[n(r,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,l],error:a,disabled:c(G),type:"text",label:"Subject",placeholder:"Enter subject",onBlur:s},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1}),n(c(x),{name:"email_body"},{default:d((({field:e,errorMessage:a,handleChange:l,handleBlur:s})=>[n(E,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,l],error:a,disabled:c(G),label:"Email Body",rows:"10",placeholder:"Enter email body",onBlur:s},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1}),n(c(x),{name:"sms_body"},{default:d((({field:e,errorMessage:a,handleChange:l,handleBlur:s})=>[n(E,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,l],error:a,disabled:c(G),label:"SMS Body",placeholder:"Enter sms body",onBlur:s},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1}),n(c(x),{name:"push_body"},{default:d((({field:e,errorMessage:a,handleChange:l,handleBlur:s})=>[n(E,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,l],error:a,disabled:c(G),label:"Push Body",placeholder:"Enter push body",onBlur:s},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1})]),p("div",I,[n(T,{class:"p-5"},{default:d((()=>[n(l,{size:"md",class:"mb-5"},{default:d((()=>[i(m(e.$t("Variables")),1)])),_:1}),p("div",M,[(u(!0),t(b,null,h(c(F)?.short_codes,((e,a)=>(u(),t("div",{class:"flex flex-col",key:a},[p("span",w,[i("%"),p("span",R,m(e),1),i("%")]),p("span",k,m(K(e)),1)])))),128))])])),_:1}),n(T,{class:"p-5 mt-5"},{default:d((()=>[p("div",D,[n(c(x),{name:"email"},{default:d((({field:e,handleChange:a,handleBlur:l})=>[n(V,{"model-value":e.value,disabled:c(G),label:"Email",sublabel:"Send emails notifications",color:"primary","onUpdate:modelValue":a,onBlur:l},null,8,["model-value","disabled","onUpdate:modelValue","onBlur"])])),_:1}),n(c(x),{name:"sms"},{default:d((({field:e,handleChange:a,handleBlur:l})=>[n(V,{"model-value":e.value,disabled:"",label:"SMS (coming soon)",sublabel:"Send sms notifications",color:"primary","onUpdate:modelValue":a,onBlur:l},null,8,["model-value","onUpdate:modelValue","onBlur"])])),_:1}),n(c(x),{name:"push"},{default:d((({field:e,handleChange:a,handleBlur:l})=>[n(V,{"model-value":e.value,disabled:"",label:"Push (coming soon)",sublabel:"Send push notifications",color:"primary","onUpdate:modelValue":a,onBlur:l},null,8,["model-value","onUpdate:modelValue","onBlur"])])),_:1})])])),_:1})])])])),_:1})])}}});export{O as default};
