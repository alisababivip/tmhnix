import{_ as e}from"./TairoPagination.vue-mpKAEnSS.js";import{_ as a}from"./Chart.vue-6iSre37Q.js";import{_ as r,a as t,b as l,c as s,d as n,e as o}from"./Info.vue-4naXgi2S.js";import{a as i,S as d,c as u,o as c,b as p,l as g,L as v,u as m,f as y,M as b,F as f,B as h,n as k,W as x,t as w,y as C,d as $,r as j,E as _,J as O,ad as T,e as L,w as E,k as P,a1 as I,af as A,O as B,q,Z as S,X as G,C as M,an as z,p as V,c7 as W,c5 as N,x as F,ao as R,z as U,cN as D,as as H}from"../e/entry-8qgg5CL-.js";import{u as J}from"./market-Bq5Nv6Cu.js";import{u as Q}from"./wallet-n04aoRPe.js";import{_ as X}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as Z}from"./BaseIconBox.vue-qjQCKz6R.js";import{u as K}from"./useWallet-8iHzU2hV.js";import{u as Y}from"./useAiTrading-wIB0sHyU.js";import{u as ee}from"./investment-XmzczllC.js";import{C as ae,N as re,P as te,S as le}from"./carousel-tMbU9gzZ.js";import{u as se}from"./socket--t7FR4dG.js";import"./useExchange-VMAYQu3P.js";import"./market-OqEbt887.js";import"./useEcosystem-9eBUNbsT.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";import"./composables-Om4eAUXX.js";import"./input-id-wZ-Ta08j.js";import"./TairoButtonIcon.vue-KqKLsAHm.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";const ne={class:"group relative ml-2 mr-5"},oe=["disabled"],ie={class:"rc-slider-mark absolute top-6 left-0 w-full text-xs"},de=["onClick"],ue={class:"rc-slider-step absolute w-full bg-transparent"},ce=["onClick"],pe=C(i({__name:"range",props:{min:{type:Number,default:0},max:{type:Number,default:100},isLeverage:{type:Boolean,default:!1},pair:{type:String,default:""}},setup(e){const a=J(),r=Q(),t=d(),l=e,s=u((()=>l.max-l.min)),n=u((()=>{let e=[];e.push(l.min);for(let a=25;a<=l.max;a+=25)e.push(a);return e})),o=e=>{a.order.percentage=Math.round(e/l.max*100)};return(i,d)=>(c(),p("div",ne,[g(y("input",{"onUpdate:modelValue":d[0]||(d[0]=e=>m(a).order.percentage=e),disabled:!m(t).isLoggedIn||0===m(r).wallets[l.pair]?.balance,type:"range",class:"rc-slider appearance-none relative w-full h-1 rounded-sm transition-opacity duration-200 p-0 m-0",style:b({background:`linear-gradient(to right, #01bc8d 0%, #01bc8d ${m(a).order.percentage}%, rgb(200 200 200 / 0.2) ${m(a).order.percentage}%, rgb(200 200 200 / 0.2) 100%)`}),onChange:d[1]||(d[1]=e=>{a.order.percentage=Math.round(a.order.percentage)})},null,44,oe),[[v,m(a).order.percentage]]),y("div",ie,[(c(!0),p(f,null,h(m(n),(r=>(c(),p("div",{key:r,class:k(["rc-slider-mark-text absolute inline align-middle text-center cursor-pointer",m(a).order.percentage>=r/m(s)*100&&0!==m(a).order.percentage?"text-gray-800 dark:text-gray-200":"text-gray-400 dark:text-gray-500"]),style:b({left:`calc(${r/m(s)*100}% ${r===m(n)[m(n).length-1]?"- 10px":r!==m(n)[0]?"- 4px":""})`}),onClick:x((e=>o(r)),["prevent"])},w(r)+w(e.isLeverage?"x":"%"),15,de)))),128))]),y("div",ue,[(c(!0),p(f,null,h(m(n),(e=>(c(),p("div",{key:e,class:k(["rc-slider-dot absolute bottom-1 w-2.5 h-2.5 border-2 border-gray-400 bg-white cursor-pointer rounded-full align-middle",{"border-green-500":m(a).order.percentage>=e/m(s)*100}]),style:b({left:`calc(${e/m(s)*100}%)`}),onClick:x((a=>o(e)),["prevent"])},null,14,ce)))),128))])]))}}),[["__scopeId","data-v-5bfed440"]]),ge=$({id:"aiTradingPlan",state:()=>({plans:[],loading:!1,selectedPlan:null}),getters:{getPlanById:e=>a=>e.plans.find((e=>e.id===a))},actions:{async fetchAiTradingPlans(){this.loading=!0;try{const{getAITradingPlans:e}=Y(),a=await e();this.plans=a.data.result}catch(e){console.error("Error fetching deposit plans:",e)}this.loading=!1},async selectPlan(e){this.selectedPlan=e},async selectPlanById(e){this.selectedPlan=this.plans.find((a=>a.id===e))||null}}}),ve={key:0,class:"flex w-full relative px-2 py-3"},me={class:"text-md font-heading"},ye={key:1},be={class:"h-full dark:bg-gray-900"},fe={class:"space-y-2 pt-2"},he={class:"flex justify-between px-2 text-xs"},ke={class:"text-gray-500 dark:text-gray-400"},xe={class:"text-gray-700 dark:text-gray-200"},we={class:"px-2 space-y-2"},Ce={key:"orderRange",class:"pb-10"},$e=(e=>(W("data-v-bb62f961"),e=e(),N(),e))((()=>y("hr",{class:"border-gray-200 dark:border-gray-700"},null,-1))),je={class:"flex justify-between px-2 text-xs",key:"total"},_e={class:"text-gray-500 dark:text-gray-400"},Oe={class:"text-gray-700 dark:text-gray-300"},Te={class:"flex justify-between px-2 text-xs",key:"total"},Le={class:"text-gray-500 dark:text-gray-400"},Ee={class:"text-gray-700 dark:text-gray-300"},Pe={class:"px-2"},Ie={key:0},Ae={key:1},Be={key:2,class:"text-lg font-heading"},qe={key:1,style:{inset:"0px",border:"1px dashed rgba(243, 243, 243, 0.08)"},class:"text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-2 rounded-md text-sm flex text-center justify-center"},Se={class:"flex w-full items-center justify-between px-4 md:px-6 pt-4"},Ge={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},Me={class:"px-4 md:px-6 pb-4"},ze={class:"mx-auto w-full text-center"},Ve=["onClick"],We={class:"px-2 bg-gray-900/50 dark:bg-gray-100/50 rounded-lg text-gray-100 dark:text-gray-900"},Ne={class:"font-semibold"},Fe={class:"text-sm text-gray-300 dark:text-gray-700"},Re={class:"absolute top-2 right-2"},Ue=C(i({__name:"Order",props:{currency:{type:String,required:!0},pair:{type:String,required:!0}},setup(e){const a=e,t=S(),l=null!==t.public.appActiveExchange&&void 0!==t.public.appActiveExchange&&""!==t.public.appActiveExchange?t.public.appActiveExchange:null,s=J(),n=d(),o=j(!1),i=Q(),{createSpotWallet:v}=K(),x=ee();const C=u((()=>{const e=Number(s.selectedMarket?.metadata?.precision?.amount)||4;return Math.abs(e)})),$=j(!1),W=ge(),N=u((()=>W.plans)),U=u((()=>ce.value?.ai_trading_plan_duration?.map((e=>({label:`${e.duration?.duration||""} ${e.duration?.timeframe?.toLowerCase()||""}`.trim(),value:e.duration?.id})))||[]));_((async()=>{n.isLoggedIn&&($.value=!0,0===i.wallets.length&&await i.fetchWallets(),void 0!==i.wallets[a.pair]&&null!==i.wallets[a.pair]||await async function(e){try{const a=await v(e);i.wallets[e]=a.data.result}catch(a){o.value=!0}}(a.pair),$.value=!1),0===W.plans.length&&await W.fetchAiTradingPlans()}));const D=u((()=>i.wallets[a.pair]||null)),H=j(!1),se=j(!1),ne=u((()=>s.order?.amount||0));O((()=>s.order.percentage),(e=>{if(!n.isLoggedIn)return;if(0===e)return void(s.order.amount=0);if(e>99)return void(s.order.amount=D.value?.balance.toFixed(C.value||2)||0);const r=(i.wallets[a.pair]?.balance||0)*(e/100);s.order.amount=Math.round(r)}));const{createOrder:oe}=Y(),{toast:ie}=T();async function de(){if(n.isLoggedIn)if(0!==s.order.amount)if(ne.value>D.value?.balance)ie.dangerText("Insufficient balance");else if(De.value){se.value=!0;try{const e=await oe(ce.value?.id,De.value?.value,s.order.amount,a.currency,a.pair);ie.response(e),"success"===e.status&&(ce.value=null,De.value=null,s.order.amount=0,s.order.percentage=0,x.investments.push(e.data.result),await i.fetchWallets(),await x.fetchActiveInvestments())}catch(e){ie.danger(e)}se.value=!1}else ie.dangerText("Please select a duration");else ie.dangerText("Please enter an amount");else ie.dangerText("Please login to place an order")}const ue=j(!0),ce=j(null),Ue=j(!1),De=j(null),He=e=>{H.value=!H.value};return(a,t)=>{const o=F,d=G,u=r,v=pe,x=X,j=M,_=R,O=Z,T=z;return c(),p("div",{class:k(["bg-gray-50 shadow w-full",{"rounded-l-lg h-full dark:bg-gray-900":a.$viewport.isGreaterOrEquals("sm"),"absolute bottom-0 dark:bg-gray-800":a.$viewport.isLessThan("sm"),"h-[460px]":m(H)&&a.$viewport.isLessThan("sm")}])},[a.$viewport.isLessThan("sm")?(c(),p("div",ve,[L(d,{shape:"rounded",shadow:"flat",class:"w-full",onClick:He,color:"primary",condensed:""},{default:E((()=>[y("span",me,[m(H)?(c(),B(o,{key:0,name:"line-md:chevron-down",class:"h-4 w-4"})):(c(),p("span",ye,[L(o,{name:"line-md:chevron-up",class:"h-4 w-4"}),q(" "+w(a.$t("Invest Now")),1)]))])])),_:1})])):P("",!0),g(y("div",be,[y("div",{class:k(["relative",{"pt-1 h-[calc(100%-32px)] ":!m(ue),"rounded-tl-lg h-full ":m(ue)}]),role:"tabpanel","aria-labelledby":"spot-tab"},[y("div",fe,[y("div",he,[y("span",ke,w(a.$t("Available")),1),y("span",xe,w((m(D)?.balance.toFixed(m(C)||2)||0)+" "+e.pair),1)]),y("div",we,[L(A,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full duration-300","enter-to-class":"opacity-100 translate-x-0 duration-300","leave-active-class":"transform-gpu duration-300","leave-from-class":"opacity-100 translate-x-0 duration-300","leave-to-class":"opacity-0 -translate-x-full duration-300"},{default:E((()=>[L(d,{key:"plansButton",color:"primary",class:"w-full mt-1",flavor:"pastel",onClick:t[0]||(t[0]=e=>Ue.value=!0)},{default:E((()=>[q(w(m(ce)?m(ce).title:a.$t("Select Plan")),1)])),_:1}),L(u,{modelValue:m(s).order.amount,"onUpdate:modelValue":t[1]||(t[1]=e=>m(s).order.amount=e),key:"amount",shape:"rounded",autocomplete:"off",placeholder:"Amount",type:"number",inputText:e.pair,min:m(ce)?.min_amount},null,8,["modelValue","inputText","min"]),y("div",Ce,[L(v,{range:"0",min:0,max:100,isLeverage:!1,pair:e.pair},null,8,["pair"])]),L(x,{key:"duration",modelValue:m(De),"onUpdate:modelValue":t[2]||(t[2]=e=>V(De)?De.value=e:null),items:m(U)||[],properties:{label:"label",value:"value"},placeholder:"Please select a duration",label:"Duration",shape:"rounded",disabled:0===m(U)?.length||m(se)||!m(l)||!m(ce),loading:!m(U)||0===m(U)?.length||m($)||m(se)||!m(l)||!m(ce)},null,8,["modelValue","items","disabled","loading"])])),_:1})])]),y("div",{class:k(["w-full absolute space-y-2",{"bottom-20":a.$viewport.isLessThan("sm"),"bottom-2":a.$viewport.isGreaterOrEquals("sm")}])},[$e,y("div",je,[y("span",_e,w(a.$t("Min Amount")),1),y("span",Oe,w(m(ce)?.min_amount)+" "+w(e.pair),1)]),y("div",Te,[y("span",Le,w(a.$t("Max Amount")),1),y("span",Ee,w(m(ce)?.max_amount)+" "+w(e.pair),1)]),y("div",Pe,[m(n).isLoggedIn?(c(),B(d,{disabled:m(se)||!m(i).wallets[e.pair]||m(ne)<m(ce)?.min_amount||m(ne)>m(ce)?.max_amount||!m(l)||!m(ce)||!m(De),loading:m(se)||m($),key:"buyButton",shape:"rounded",shadow:"flat",class:"w-full",color:m(i).wallets[e.pair]&&m(l)?"success":"danger",onClick:de},{default:E((()=>[m(i).wallets[e.pair]?m(l)?(c(),p("span",Be,[L(o,{name:"bi:battery-charging",class:"h-5 w-5"}),q(" "+w(a.$t("Invest")),1)])):(c(),p("span",Ae,w(a.$t("Exchange is offline")),1)):(c(),p("span",Ie,w(a.$t("Wallet Generation Failed")),1))])),_:1},8,["disabled","loading","color"])):(c(),p("div",qe,[L(j,{class:"text-warning-500 mr-1",to:"/login"},{default:E((()=>[q(w(a.$t("Login")),1)])),_:1}),q(" "+w(a.$t("or"))+" ",1),L(j,{class:"text-warning-500 ml-1",to:"/register"},{default:E((()=>[q(w(a.$t("Register")),1)])),_:1})]))])],2)],2)],512),[[I,m(H)||a.$viewport.isGreaterOrEquals("sm")]]),L(T,{open:m(Ue),size:"lg",onClose:t[4]||(t[4]=e=>Ue.value=!1),key:"isPlansOpenModel"},{header:E((()=>[y("div",Se,[y("h3",Ge,w(a.$t("Select Plan")),1),L(_,{onClick:t[3]||(t[3]=e=>Ue.value=!1)})])])),default:E((()=>[y("div",Me,[y("div",ze,[L(m(ae),null,{addons:E((()=>[L(m(re)),L(m(te))])),default:E((()=>[(c(!0),p(f,null,h(m(N),((e,a)=>(c(),B(m(le),{key:a},{default:E((()=>[y("div",{class:"carousel__item flex w-full flex-col justify-center items-center rounded-lg cursor-pointer relative",style:b(`background-image: url(${e.image});background-size: cover;background-position: center;background-repeat: no-repeat;`),onClick:a=>{return r=e,ce.value?.id!==r.id&&(De.value=null),ce.value=r,void(Ue.value=!1);var r}},[y("div",We,[y("div",Ne,w(e.title),1),y("div",Fe,w(e.description),1)]),y("div",Re,[L(O,{size:"md",class:"bg-red-100/80 text-red-500 dark:border-2 dark:border-red-500 dark:bg-red-500/20 dark:text-red-400","data-nui-tooltip":"Trending","data-nui-tooltip-position":"left"},{default:E((()=>[L(o,{name:"ph:fire-duotone",class:"h-5 w-5"})])),_:1})])],12,Ve)])),_:2},1024)))),128))])),_:1})])])])),_:1},8,["open"])],2)}}}),[["__scopeId","data-v-bb62f961"]]),De={class:"Ticker"},He={key:1,class:"ChartAndInfo rounded-r-lg"},Je={key:2,class:"Orderbook flex"},Qe={class:"h-full flex items-center justify-center relative"},Xe={key:1,class:"bg-white dark:bg-gray-900 p-1 h-full rounded-lg"},Ze={key:3,class:"Order flex"},Ke={class:"h-full flex items-center justify-center relative z-10"},Ye={key:1,class:"bg-white dark:bg-gray-900 p-1 h-full rounded-l-lg"},ea={key:4,class:"collapseTradesOrdersButton flex justify-center items-center"},aa={key:5,class:"Trades flex"},ra={key:0,class:"h-full flex items-center justify-center relative"},ta={key:2,class:"bg-white dark:bg-gray-900 p-1 h-full rounded-tl-lg"},la={key:3,class:"bg-white dark:bg-gray-900 p-1 w-full rounded-tl-lg"},sa={key:6,id:"orders",class:"Orders"},na={key:1,class:"bg-white dark:bg-gray-900 p-1 w-full rounded-tr-lg"},oa={key:7,class:"Info"},ia=i({__name:"index",setup(r){const i=J(),d=se(),g=U(),v=u((()=>g.params.currency)),b=u((()=>g.params.pair)),f=u((()=>v.value+"/"+b.value));D({title:f.value});const h=j(!1),x=j(!1);_((async()=>{0===i.markets.length&&(await i.fetchMarkets(),i.selectMarketBySymbol(v.value+"/"+b.value)),h.value||(d.createSocket("trade"),h.value=!0),x.value||(d.createSocket("tickers"),x.value=!0)})),H(((e,a,r)=>{e.path.startsWith("/trade")||(d.closeSocket("trade"),d.closeSocket("tickers"),h.value=!1,x.value=!1),r()}));const w=j(!1),C=j(!1),$=j(!1),O=j(!1),T=()=>{w.value=!w.value},E=()=>{C.value=!C.value},I=()=>{$.value=!$.value},A=()=>{$.value=!1,O.value=!O.value};return(r,i)=>{const d=e,u=a,g=t,f=F,h=l,x=Ue,j=s,_=o,q=n;return c(),p("div",{style:{"font-family":"BinancePlex, Arial, sans-serif !important"},class:k([{tradingContainerOrderCollapsed:m(w),tradingContainerOrderBookCollapsed:m(C),tradingContainerOrderAndOrderBookCollapsed:m(w)&&m(C),tradingContainerTradesCollapsed:m($),tradingContainerTradesOrdersCollapsed:m(O),tradingContainerTradesOrdersOrderbookCollapsed:m(O)&&m(C),tradingContainerTradesOrdersOrderCollapsed:m(O)&&m(w),tradingContainerTradesOrdersOrderbookOrderCollapsed:m(O)&&m(C)&&m(w)},"tradingContainer bg-slate-100 dark:bg-black h-[calc(100vh-64px)] relative mt-16"])},[y("div",De,[L(d,{currency:m(v),pair:m(b)},null,8,["currency","pair"])]),r.$viewport.isGreaterOrEquals("md")||r.$viewport.isLessThan("sm")?(c(),p("div",{key:0,class:k(["Chart bg-gray-100 dark:bg-gray-800 rounded-r-lg shadow",{"mt-0.5":r.$viewport.isGreaterOrEquals("md")}])},[L(u,{currency:m(v),pair:m(b),class:"rounded-lg"},null,8,["currency","pair"])],2)):P("",!0),r.$viewport.isLessThan("md")&&r.$viewport.isGreaterOrEquals("sm")?(c(),p("div",He,[L(g,{currency:m(v),pair:m(b)},null,8,["currency","pair"])])):P("",!0),r.$viewport.isGreaterOrEquals("md")?(c(),p("div",Je,[y("div",Qe,[y("div",{class:"h-24 border-gray-200 bg-white dark:bg-gray-800 p-0.5 flex items-center justify-center border rounded relative hover:bg-info-500 dark:hover:bg-info-500 dark:border-black group transition-all duration-300 cursor-pointer",onClick:E},[L(f,{name:"line-md:chevron-small-"+(m(C)?"left":"right"),class:"h-2 w-2 absolute rounded-full bg-gray-100 dark:bg-gray-700 group-hover:bg-info-500 -start-0.5 z-50 group-hover:h-4 group-hover:w-4 group-hover:-start-1.5 transition-all duration-300"},null,8,["name"])])]),m(C)?(c(),p("div",Xe)):(c(),B(h,{key:0,currency:m(v),pair:m(b)},null,8,["currency","pair"]))])):P("",!0),r.$viewport.isGreaterOrEquals("sm")?(c(),p("div",Ze,[y("div",Ke,[y("div",{class:"h-24 border-gray-200 bg-white dark:bg-gray-800 p-0.5 flex items-center justify-center border rounded relative hover:bg-info-500 dark:hover:bg-info-500 dark:border-black group transition-all duration-300 cursor-pointer",onClick:T},[L(f,{name:"line-md:chevron-small-"+(m(w)?"left":"right"),class:"h-2 w-2 absolute rounded-full bg-gray-100 dark:bg-gray-700 group-hover:bg-info-500 -start-0.5 z-20 group-hover:h-4 group-hover:w-4 group-hover:-start-1.5 transition-all duration-300"},null,8,["name"])])]),m(w)?(c(),p("div",Ye)):(c(),B(x,{key:0,currency:m(v),pair:m(b)},null,8,["currency","pair"]))])):P("",!0),r.$viewport.isGreaterOrEquals("md")?(c(),p("div",ea,[y("div",{class:"w-24 border-gray-200 bg-white dark:bg-gray-800 p-0.5 flex items-center justify-center hover:bg-info-500 dark:hover:bg-info-500 dark:border-black border rounded relative group transition-all duration-300 cursor-pointer",onClick:A},[L(f,{name:"line-md:chevron-small-"+(m(O)?"up":"down"),class:"h-2 w-2 group-hover:h-4 group-hover:w-4 absolute rounded-full cursor-pointer bg-gray-100 dark:bg-gray-700 group-hover:bg-info-500 -top-0.5 group-hover:-top-1.5 start-50 transition-all duration-300"},null,8,["name"])])])):P("",!0),r.$viewport.isGreaterOrEquals("md")?(c(),p("div",aa,[m(O)?P("",!0):(c(),p("div",ra,[y("div",{class:"h-24 border-gray-200 bg-white dark:bg-gray-800 p-0.5 flex items-center justify-center border rounded relative hover:bg-info-500 dark:hover:bg-info-500 dark:border-black group transition-all duration-300 cursor-pointer",onClick:I},[L(f,{name:"line-md:chevron-small-"+(m($)?"left":"right"),class:"h-2 w-2 absolute rounded-full bg-gray-100 dark:bg-gray-700 group-hover:bg-info-500 -start-0.5 z-50 group-hover:h-4 group-hover:w-4 group-hover:-start-1.5 transition-all duration-300"},null,8,["name"])])])),m($)||m(O)?P("",!0):(c(),B(j,{key:1,currency:m(v),pair:m(b)},null,8,["currency","pair"])),m($)?(c(),p("div",ta)):P("",!0),m(O)?(c(),p("div",la)):P("",!0)])):P("",!0),r.$viewport.isGreaterOrEquals("sm")?(c(),p("div",sa,[m(O)?P("",!0):(c(),B(_,{key:0,class:"h-full bg-white dark:bg-gray-900 rounded-tr-lg shadow"})),m(O)?(c(),p("div",na)):P("",!0)])):P("",!0),r.$viewport.isLessThan("sm")?(c(),p("div",oa,[L(q,{currency:m(v),pair:m(b)},null,8,["currency","pair"])])):P("",!0),r.$viewport.isLessThan("sm")?(c(),B(x,{key:8,currency:m(v),pair:m(b)},null,8,["currency","pair"])):P("",!0)],2)}}});export{ia as default};
