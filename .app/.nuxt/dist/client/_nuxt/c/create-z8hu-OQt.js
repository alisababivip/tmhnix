import{a as e,ad as l,ac as a,E as s,c as d,r,O as o,w as t,o as n,e as u,q as i,t as m,f as p,u as c,b as f,B as b,n as v,F as h,W as _,_ as y,x as B,X as V,Y as g}from"../e/entry-8qgg5CL-.js";import{_ as x}from"./BaseInput.vue-iInHQMIA.js";import{_ as j}from"./BaseSwitchBall.vue-Xcs_6krq.js";import{_ as w}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as q}from"./BaseButtonIcon.vue-6tAU_b7C.js";import{_ as C}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as U}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as k}from"./useKyc-y1ecMeTj.js";import{z as S,u as T,t as $,F as M}from"./vee-validate.esm-n59zZCC5.js";import{u as F}from"./template-_415AK_u.js";import"./input-id-wZ-Ta08j.js";import"./IconCheck-JvP9GQU1.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";const E={class:"flex xs:flex-col sm:flex-row justify-start xs:items-start sm:items-center gap-5"},I={class:"flex xs:flex-col sm:flex-row justify-start xs:items-start sm:items-center gap-5"},z={class:"flex justify-between items-center"},K={class:"text-xl font-semibold"},L={class:"grid grid-cols-1 sm:grid-cols-12 gap-5"},D={class:"col-span-1 sm:col-span-4"},N={class:"col-span-1 sm:col-span-3"},O={class:"col-span-1 sm:col-span-5"},P={class:"flex xs:flex-col sm:flex-row justify-start xs:items-start sm:items-center gap-5"},R={class:"sm:pt-6"},A={class:"sm:pt-6"},W={class:"flex items-center justify-center"},Y=e({__name:"create",setup(e){const Y=F(),{createKycTemplate:X}=k(),{toast:Z}=l(),G=a();s((async()=>{0===Y.templates.length&&await Y.fetchKycTemplates()}));const H=()=>S.object({enabled:S.boolean().nullable().optional().default(!1),required:S.boolean().nullable().optional().default(!1),level:S.enum(["1","2","3"])}),J=S.object({title:S.string().nonempty(),options:S.object({first_name:H(),last_name:H(),email:H(),phone:H(),address:H(),city:H(),state:H(),country:H(),zip:H(),dob:H(),ssn:H(),document_passport:H(),document_drivers_license:H(),document_id_card:H(),custom_fields:S.array(S.object({title:S.string().nonempty(),required:S.boolean().nullable().optional().default(!1),type:S.enum(["input","textarea","file upload"]),level:S.enum(["1","2","3"])}).nullable().optional())})}),Q=d((()=>({title:"",options:{first_name:{enabled:!1,required:!1,level:"1"},last_name:{enabled:!1,required:!1,level:"1"},email:{enabled:!1,required:!1,level:"1"},phone:{enabled:!1,required:!1,level:"1"},address:{enabled:!1,required:!1,level:"1"},city:{enabled:!1,required:!1,level:"1"},state:{enabled:!1,required:!1,level:"1"},country:{enabled:!1,required:!1,level:"1"},zip:{enabled:!1,required:!1,level:"1"},dob:{enabled:!1,required:!1,level:"1"},ssn:{enabled:!1,required:!1,level:"1"},document_passport:{enabled:!1,required:!1,level:"1"},document_drivers_license:{enabled:!1,required:!1,level:"1"},document_id_card:{enabled:!1,required:!1,level:"1"},custom_fields:[]}}))),{handleSubmit:ee,isSubmitting:le,setFieldError:ae}=T({validationSchema:$(J),initialValues:Q}),se=r([]),de=()=>{se.value.push({title:"",required:!1,type:"input",level:"1"})},re=ee((async e=>{if(Y.templates.find((l=>l.title===e.title)))return ae("title","Template with this title already exists"),void window.scrollTo({top:0,behavior:"smooth"});try{const l=await X(e);Z.response(l),"success"===l.status&&(await Y.fetchKycTemplates(),G.push("/admin/kyc/templates"))}catch(l){Z.danger(l)}})),oe={first_name:"First Name",last_name:"Last Name",email:"Email",phone:"Phone",address:"Address",city:"City",state:"State",country:"Country",zip:"Zip",dob:"Date of Birth",ssn:"SSN",document_passport:"Passport",document_drivers_license:"Driver License",document_id_card:"ID Card",custom_fields:"Custom Fields"},te=["document_passport","document_drivers_license","document_id_card"],ne=Object.keys(J.shape.options.shape).filter((e=>!te.includes(e)&&"custom_fields"!==e));return(e,l)=>{const a=y,s=B,d=V,r=x,k=g,S=j,T=w,$=q,F=C,Y=U;return n(),o(Y,null,{left:t((()=>[u(a,{size:"lg"},{default:t((()=>[i(m(e.$t("Create Template")),1)])),_:1})])),right:t((()=>[u(d,{type:"button",color:"muted",to:"/admin/kyc/templates"},{default:t((()=>[u(s,{name:"line-md:chevron-left",class:"h-4 w-4 mr-2"}),i(" "+m(e.$t("Back")),1)])),_:1})])),default:t((()=>[p("form",{action:"",method:"POST",onSubmit:l[0]||(l[0]=_(((...e)=>c(re)&&c(re)(...e)),["prevent"])),class:"space-y-10"},[u(k,{class:"p-5 space-y-5"},{default:t((()=>[u(c(M),{name:"title"},{default:t((({field:e,errorMessage:l,handleChange:a,handleBlur:s})=>[u(r,{modelValue:e.value,"onUpdate:modelValue":[l=>e.value=l,a],error:l,disabled:c(le),type:"text",label:"Title",placeholder:"Enter template title",shape:"rounded",class:"w-full",onBlur:s},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1})])),_:1}),u(k,null,{default:t((()=>[(n(!0),f(h,null,b(c(ne),((e,l)=>(n(),f("div",{key:l,class:v(["p-5 flex xs:flex-col sm:flex-row justify-between items-start gap-5",{" border-b border-muted-300 dark:border-muted-700":"ssn"!==e}])},[p("span",null,m(oe[e]),1),p("div",E,[u(c(M),{name:`options.${e}.enabled`},{default:t((({field:e,errorMessage:l,handleChange:a,handleBlur:s})=>[u(S,{modelValue:e.value,"onUpdate:modelValue":[l=>e.value=l,a],error:l,disabled:c(le),onBlur:s,label:"Enabled",color:"success"},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:2},1032,["name"]),u(c(M),{name:`options.${e}.required`},{default:t((({field:e,errorMessage:l,handleChange:a,handleBlur:s})=>[u(S,{modelValue:e.value,"onUpdate:modelValue":[l=>e.value=l,a],error:l,disabled:c(le),onBlur:s,label:"Required",color:"primary"},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:2},1032,["name"]),u(c(M),{name:`options.${e}.level`},{default:t((({field:e,errorMessage:l,handleChange:a,handleBlur:s})=>[u(T,{modelValue:e.value,"onUpdate:modelValue":[l=>e.value=l,a],error:l,disabled:c(le),onBlur:s,items:["1","2","3"],placeholder:"Select a level",shape:"rounded",condensed:"",class:"min-w-[96px]"},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:2},1032,["name"])])],2)))),128))])),_:1}),u(k,null,{default:t((()=>[(n(),f(h,null,b(te,((e,l)=>p("div",{key:l,class:v(["p-5 flex xs:flex-col sm:flex-row justify-between items-start gap-5",{" border-b border-muted-300 dark:border-muted-700":"document_id_card"!==e}])},[p("span",null,m(oe[e]),1),p("div",I,[u(c(M),{name:`options.${e}.enabled`},{default:t((({field:e,errorMessage:l,handleChange:a,handleBlur:s})=>[u(S,{modelValue:e.value,"onUpdate:modelValue":[l=>e.value=l,a],error:l,disabled:c(le),onBlur:s,label:"Enabled",color:"success"},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:2},1032,["name"]),u(c(M),{name:`options.${e}.required`},{default:t((({field:e,errorMessage:l,handleChange:a,handleBlur:s})=>[u(S,{modelValue:e.value,"onUpdate:modelValue":[l=>e.value=l,a],error:l,disabled:c(le),onBlur:s,label:"Required",color:"primary"},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:2},1032,["name"]),u(c(M),{name:`options.${e}.level`},{default:t((({field:e,errorMessage:l,handleChange:a,handleBlur:s})=>[u(T,{modelValue:e.value,"onUpdate:modelValue":[l=>e.value=l,a],error:l,disabled:c(le),onBlur:s,items:["1","2","3"],placeholder:"Select a level",shape:"rounded",condensed:"",class:"min-w-[96px]"},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:2},1032,["name"])])],2))),64))])),_:1}),u(k,{class:"p-5 space-y-5"},{default:t((()=>[p("div",z,[p("h3",K,m(e.$t("Custom Fields")),1),u($,{type:"button",color:"primary",onClick:de,condensed:""},{default:t((()=>[u(s,{name:"line-md:plus",class:"h-5 w-5"})])),_:1})]),(n(!0),f(h,null,b(c(se),((e,l)=>(n(),f("div",{key:l,class:"space-y-4"},[p("div",L,[p("div",D,[u(c(M),{name:`options.custom_fields[${l}].title`},{default:t((({field:e,errorMessage:l,handleChange:a,handleBlur:s})=>[u(r,{modelValue:e.value,"onUpdate:modelValue":[l=>e.value=l,a],error:l,disabled:c(le),onBlur:s,type:"text",label:"Field Title",placeholder:"Ex: username",shape:"rounded",class:"w-full"},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:2},1032,["name"])]),p("div",N,[u(c(M),{name:`options.custom_fields[${l}].type`},{default:t((({field:e,errorMessage:l,handleChange:a,handleBlur:s})=>[u(T,{modelValue:e.value,"onUpdate:modelValue":[l=>e.value=l,a],error:l,disabled:c(le),onBlur:s,label:"Field Type",items:["input","textarea","file upload"],placeholder:"Select a type",shape:"rounded"},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:2},1032,["name"])]),p("div",O,[p("div",P,[u(c(M),{name:`options.custom_fields[${l}].level`},{default:t((({field:e,errorMessage:l,handleChange:a,handleBlur:s})=>[u(T,{modelValue:e.value,"onUpdate:modelValue":[l=>e.value=l,a],error:l,disabled:c(le),onBlur:s,items:["1","2","3"],label:"Field Level",placeholder:"Select a level",shape:"rounded",class:"min-w-[96px]"},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:2},1032,["name"]),p("span",R,[u(c(M),{name:`options.custom_fields[${l}].required`},{default:t((({field:e,errorMessage:l,handleChange:a,handleBlur:s})=>[u(S,{modelValue:e.value,"onUpdate:modelValue":[l=>e.value=l,a],error:l,disabled:c(le),onBlur:s,label:"Required",color:"primary"},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:2},1032,["name"])]),p("span",A,[u(F,{type:"button",color:"danger",onClick:e=>(e=>{se.value.splice(e,1)})(l)},{default:t((()=>[u(s,{name:"line-md:close",class:"h-4 w-4"})])),_:2},1032,["onClick"])])])])])])))),128))])),_:1}),p("div",W,[u(k,{class:"p-2 w-64"},{default:t((()=>[u(d,{disabled:c(le),loading:c(le),block:!0,color:"primary",type:"submit",class:"w-full"},{default:t((()=>[i(" Create ")])),_:1},8,["disabled","loading"])])),_:1})])],32)])),_:1})}}});export{Y as default};
