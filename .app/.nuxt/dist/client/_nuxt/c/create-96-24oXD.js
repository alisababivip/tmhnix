import{a as e,S as a,c as r,ad as t,ac as l,r as o,J as s,O as d,w as n,o as u,e as i,q as m,t as c,f as p,u as f,p as h,W as b,b as v,A as g,F as x,B as y,n as w,k as _,_ as V,x as k,X as j,Y as B}from"../e/entry-8qgg5CL-.js";import{_ as U}from"./BaseInput.vue-iInHQMIA.js";import{_ as C}from"./BaseProgress.vue-xH0Mhn3Z.js";import{_ as M}from"./BaseInputFileHeadless.vue-LOgyN9kF.js";import{_ as q}from"./BaseTextarea.vue-8st5U0qk.js";import{_ as F}from"./BaseButtonIcon.vue-6tAU_b7C.js";import{_ as I}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as P}from"./BaseCheckbox.vue-cNhyVlDH.js";import{_ as S}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as T}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as W}from"./useWallet-8iHzU2hV.js";import{u as D}from"./fetch-i3Y1jjTS.js";import{b as E}from"./strings-rQgUKePI.js";import{_ as $}from"./placeholder-file-IxKzOaSl.js";import{z as R,u as z,t as A,F as K}from"./vee-validate.esm-n59zZCC5.js";import{u as O}from"./methods-1ZR1EQN-.js";import"./input-id-wZ-Ta08j.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";import"./IconCheck-JvP9GQU1.js";const L={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},G={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},H=["onDrop"],J=["onClick","onKeydown"],X={class:"p-5 text-center"},Y={class:"text-muted-400 font-sans text-sm"},N={class:"text-muted-400 font-sans text-[0.7rem] font-semibold uppercase"},Q={for:"file",class:"text-muted-400 group-hover:text-primary-500 group-focus:text-primary-500 cursor-pointer font-sans text-sm underline underline-offset-4 transition-colors duration-300"},Z={key:1,class:"mt-6 space-y-2"},ee={class:"border-muted-200 dark:border-muted-700 dark:bg-muted-800 relative flex items-center justify-end gap-2 rounded-xl border bg-white p-3"},ae={class:"flex items-center gap-2"},re={class:"shrink-0"},te=["src"],le={key:1,class:"h-14 w-14 rounded-xl object-cover object-center",src:$,alt:"Image preview"},oe={class:"font-sans"},se={class:"text-muted-800 dark:text-muted-100 line-clamp-1 block text-sm"},de={class:"text-muted-400 block text-xs"},ne={class:"flex gap-2"},ue={class:"border-muted-200 hover:border-primary-500 text-muted-700 dark:text-muted-200 hover:text-primary-600 dark:border-muted-700 dark:bg-muted-900 dark:hover:border-primary-500 dark:hover:text-primary-600 relative flex h-8 w-8 cursor-pointer items-center justify-center rounded-full border bg-white transition-colors duration-300 disabled:cursor-not-allowed disabled:opacity-60",disabled:"",type:"button",tooltip:"Cancel"},ie=p("span",{class:"sr-only"},"Cancel",-1),me={class:"border-muted-200 hover:border-primary-500 text-muted-700 dark:text-muted-200 hover:text-primary-600 dark:border-muted-700 dark:bg-muted-900 dark:hover:border-primary-500 dark:hover:text-primary-600 relative flex h-8 w-8 cursor-pointer items-center justify-center rounded-full border bg-white transition-colors duration-300",type:"button",tooltip:"Upload"},ce=p("span",{class:"sr-only"},"Upload",-1),pe=["onClick"],fe=p("span",{class:"sr-only"},"Remove",-1),he={key:0,class:"mb-4 h-36 w-full flex items-center justify-center overflow-hidden rounded-xl"},be=["src"],ve={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},ge={class:"flex justify-between items-center"},xe={class:"text-xl font-semibold mb-4"},ye={class:"grid grid-cols-1 sm:grid-cols-12 gap-6"},we={class:"col-span-1 sm:col-span-6"},_e={class:"col-span-1 sm:col-span-4"},Ve={class:"col-span-1 sm:col-span-2"},ke={class:"flex justify-end items-center gap-2 pt-6"},je=e({__name:"create",setup(e){const $=a();r((()=>$.getProfile));const{toast:je}=t(),Be=l(),Ue=O(),Ce=R.object({title:R.string().nonempty("Title is required"),instructions:R.string().nonempty("Instructions are required"),image:R.union([R.string(),R.null()]).optional(),fixed_fee:R.number().min(0,"Fixed fee must be greater or equal to 0"),percentage_fee:R.number().min(0,"Percentage fee must be greater or equal to 0").max(100,"Percentage fee must be less than or equal to 100"),processing_time:R.string().nonempty("Processing time is required"),min_amount:R.number().min(0,"Minimum amount must be greater or equal to 0"),max_amount:R.number().min(0,"Maximum amount must be greater or equal to 0"),status:R.boolean(),custom_fields:R.array(R.object({title:R.string(),required:R.boolean(),type:R.enum(["input","textarea","file upload"])}))}),Me=r((()=>({title:"",instructions:"",image:null,fixed_fee:0,percentage_fee:0,processing_time:"",min_amount:0,max_amount:0,status:!0,custom_fields:[]}))),{handleSubmit:qe,isSubmitting:Fe,resetForm:Ie}=z({validationSchema:A(Ce),initialValues:Me}),Pe=o(null),Se=o(null);s(Pe,(e=>{const a=e?.item(0)||null;if(Pe.value){const e=new FileReader;e.onload=e=>{Se.value=e.target?.result},e.readAsDataURL(a)}}));const Te=o([]),We=()=>{Te.value.push({title:"",required:!1,type:"input"})},{createWithdrawMethod:De}=W(),Ee=qe((async e=>{try{let a={...e,image:"",custom_fields:Te.value};if(Pe.value){const e=new FormData;e.append("files",Pe.value[0]),e.append("type","withdrawMethods");const r=await D("/api/upload",{method:"POST",body:e},"$6feaKcrGde");r&&""!==r.data.value&&(a.image=r.data.value[0])}const r=await De(a);je.response(r),"success"===r.status&&(await Ue.fetchWithdrawMethods(),Be.push("/admin/finance/withdraw/methods"),Ie())}catch(a){je.danger(a)}}));return(e,a)=>{const r=V,t=k,l=j,o=U,s=B,W=C,D=M,$=q,R=F,z=I,A=P,O=S,je=T;return u(),d(je,null,{left:n((()=>[i(r,{size:"lg"},{default:n((()=>[m(c(e.$t("Create Withdraw Method")),1)])),_:1})])),right:n((()=>[i(l,{type:"button",color:"muted",to:"/admin/finance/withdraw/methods"},{default:n((()=>[i(t,{name:"line-md:chevron-left",class:"h-4 w-4 mr-2"}),m(" "+c(e.$t("Back")),1)])),_:1})])),default:n((()=>[p("form",{onSubmit:a[3]||(a[3]=(...e)=>f(Ee)&&f(Ee)(...e)),class:"space-y-8"},[p("div",L,[i(s,{class:"p-5 space-y-5"},{default:n((()=>[i(f(K),{name:"title"},{default:n((({field:e,errorMessage:a,handleChange:r,handleBlur:t})=>[i(o,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,r],error:a,disabled:f(Fe),type:"text",label:"Title",placeholder:"Enter title",shape:"rounded",class:"w-full",onBlur:t},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1}),i(f(K),{name:"processing_time"},{default:n((({field:e,errorMessage:a,handleChange:r,handleBlur:t})=>[i(o,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,r],error:a,type:"text",label:"Processing Time",placeholder:"Ex: 3 Days",shape:"rounded",class:"w-full",onBlur:t},null,8,["modelValue","onUpdate:modelValue","error","onBlur"])])),_:1})])),_:1}),i(s,{class:"p-5"},{default:n((()=>[p("div",G,[i(D,{modelValue:f(Pe),"onUpdate:modelValue":a[2]||(a[2]=e=>h(Pe)?Pe.value=e:null)},{default:n((({open:r,remove:l,preview:o,drop:s,files:d})=>[p("div",{class:"",onDragenter:a[0]||(a[0]=b((()=>{}),["stop","prevent"])),onDragover:a[1]||(a[1]=b((()=>{}),["stop","prevent"])),onDrop:s},[d?.length?(u(),v("ul",Z,[(u(!0),v(x,null,y(d,(a=>(u(),v("li",{key:a.name},[p("div",ee,[p("div",ae,[p("div",re,[a.type.startsWith("image")?(u(),v("img",{key:0,class:"h-14 w-14 rounded-xl object-cover object-center",src:o(a).value,alt:"Image preview"},null,8,te)):(u(),v("img",le))]),p("div",oe,[p("span",se,c(a.name),1),p("span",de,c(("formatFileSize"in e?e.formatFileSize:f(E))(a.size)),1)])]),p("div",{class:w(["ms-auto w-32 px-4 transition-opacity duration-300","opacity-100"])},[i(W,{value:0,size:"xs",color:"success"})]),p("div",ne,[p("button",ue,[i(t,{name:"lucide:slash",class:"h-4 w-4"}),ie]),p("button",me,[i(t,{name:"lucide:arrow-up",class:"h-4 w-4"}),ce]),p("button",{class:"border-muted-200 hover:border-primary-500 text-muted-700 dark:text-muted-200 hover:text-primary-600 dark:border-muted-700 dark:bg-muted-900 dark:hover:border-primary-500 dark:hover:text-primary-600 relative flex h-8 w-8 cursor-pointer items-center justify-center rounded-full border bg-white transition-colors duration-300",type:"button",tooltip:"Remove",onClick:b((e=>l(a)),["prevent"])},[i(t,{name:"lucide:x",class:"h-4 w-4"}),fe],8,pe)])])])))),128))])):(u(),v("div",{key:0,class:"nui-focus border-muted-300 dark:border-muted-700 hover:border-muted-400 focus:border-muted-400 dark:hover:border-muted-600 dark:focus:border-muted-700 group cursor-pointer rounded-lg border-[3px] border-dashed transition-colors duration-300",tabindex:"0",role:"button",onClick:r,onKeydown:g(b(r,["prevent"]),["enter"])},[p("div",X,[i(t,{name:"mdi-light:cloud-upload",class:"text-muted-400 group-hover:text-primary-500 group-focus:text-primary-500 mb-2 h-10 w-10 transition-colors duration-300"}),p("h4",Y,c(e.$t("Drop file to upload")),1),p("div",null,[p("span",N,c(e.$t("Or")),1)]),p("label",Q,c(e.$t("Select Image")),1)])],40,J))],40,H)])),_:1},8,["modelValue"]),f(Se)?(u(),v("div",he,[p("img",{src:f(Se),alt:"Image Preview",class:"max-h-full max-w-full object-cover object-center"},null,8,be)])):_("",!0)])])),_:1})]),i(s,{class:"p-5"},{default:n((()=>[i(f(K),{name:"instructions"},{default:n((({field:e,errorMessage:a,handleChange:r,handleBlur:t})=>[i($,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,r],error:a,label:"Withdraw Instruction",shape:"rounded",placeholder:"Write withdrawal instructions...",class:"w-full",onBlur:t},null,8,["modelValue","onUpdate:modelValue","error","onBlur"])])),_:1})])),_:1}),p("div",ve,[i(s,{class:"p-5 space-y-5"},{default:n((()=>[i(f(K),{name:"fixed_fee"},{default:n((({field:e,errorMessage:a,handleChange:r,handleBlur:t})=>[i(o,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,r],error:a,type:"number",label:"Fixed Fee",placeholder:"Enter fixed fee",shape:"rounded",class:"w-full",onBlur:t},null,8,["modelValue","onUpdate:modelValue","error","onBlur"])])),_:1}),i(f(K),{name:"percentage_fee"},{default:n((({field:e,errorMessage:a,handleChange:r,handleBlur:t})=>[i(o,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,r],error:a,type:"number",label:"Percentage fee",placeholder:"Enter Percentage fee",shape:"rounded",min:"0",max:"100",class:"w-full",onBlur:t},null,8,["modelValue","onUpdate:modelValue","error","onBlur"])])),_:1})])),_:1}),i(s,{class:"p-5 space-y-5"},{default:n((()=>[i(f(K),{name:"min_amount"},{default:n((({field:e,errorMessage:a,handleChange:r,handleBlur:t})=>[i(o,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,r],error:a,type:"number",label:"Minimum Amount",placeholder:"Enter minimum amount",shape:"rounded",class:"w-full",onBlur:t},null,8,["modelValue","onUpdate:modelValue","error","onBlur"])])),_:1}),i(f(K),{name:"max_amount"},{default:n((({field:e,errorMessage:a,handleChange:r,handleBlur:t})=>[i(o,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,r],error:a,type:"number",label:"Maximum Amount",placeholder:"Enter maximum amount",shape:"rounded",class:"w-full",onBlur:t},null,8,["modelValue","onUpdate:modelValue","error","onBlur"])])),_:1})])),_:1})]),i(s,{class:"p-5 space-y-5"},{default:n((()=>[p("div",ge,[p("h3",xe,c(e.$t("Custom Fields")),1),i(R,{type:"button",color:"primary",onClick:We,condensed:""},{default:n((()=>[i(t,{name:"line-md:plus",class:"h-5 w-5"})])),_:1})]),(u(!0),v(x,null,y(f(Te),((e,a)=>(u(),v("div",{key:a,class:"space-y-4"},[p("div",ye,[p("div",we,[i(o,{modelValue:e.title,"onUpdate:modelValue":a=>e.title=a,shape:"rounded",label:"Field Title",placeholder:"Ex: username"},null,8,["modelValue","onUpdate:modelValue"])]),p("div",_e,[i(z,{modelValue:e.type,"onUpdate:modelValue":a=>e.type=a,label:"Field Type",items:["input","textarea","file upload"],placeholder:"Select a type",shape:"rounded"},null,8,["modelValue","onUpdate:modelValue"])]),p("div",Ve,[p("div",ke,[i(A,{modelValue:e.required,"onUpdate:modelValue":a=>e.required=a,label:"Required"},null,8,["modelValue","onUpdate:modelValue"]),i(O,{type:"button",color:"danger",onClick:e=>(e=>{Te.value.splice(e,1)})(a)},{default:n((()=>[i(t,{name:"line-md:close",class:"h-4 w-4"})])),_:2},1032,["onClick"])])])])])))),128))])),_:1}),i(l,{type:"submit",color:"primary",disabled:f(Fe),class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"},{default:n((()=>[m(c(e.$t("Create Method")),1)])),_:1},8,["disabled"])],32)])),_:1})}}});export{je as default};
