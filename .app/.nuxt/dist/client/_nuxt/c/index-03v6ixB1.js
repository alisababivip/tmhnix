import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as a}from"./BaseSelect.vue-p0KYznCX.js";import{d as l,a as t,z as s,ad as o,S as i,c as n,r,E as u,b as d,e as c,w as m,u as p,an as f,o as h,f as g,p as v,t as y,O as k,F as w,B as b,q as _,k as x,ag as j,x as $,ao as K,X as C}from"../e/entry-8qgg5CL-.js";import{_ as D,a as T}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as B}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as V}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as P,a as E}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as F}from"./TairoFlexTable-zdoraqRc.js";import{_ as I}from"./BasePagination.vue-eKZkqxB7.js";import{_ as A}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as L}from"./useKyc-y1ecMeTj.js";import{_ as N,a as S}from"./placeholder-search-4-dark-Jht91LnM.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const U=l({id:"kyc",state:()=>({kycs:[],selectedKyc:{},loading:!1}),getters:{count:e=>e.kycs.length},actions:{async fetchKycs(){this.loading=!0;const{getKycs:e}=L(),a=await e();"success"===a.status&&(this.kycs=a.data.result),this.loading=!1}}}),R={class:"w-full"},q={value:10},z={value:25},O={value:50},G={value:100},J={class:"xs:pt-0 sm:pt-5"},W=g("img",{class:"block dark:hidden",src:N,alt:"Placeholder image"},null,-1),X=g("img",{class:"hidden dark:block",src:S,alt:"Placeholder image"},null,-1),H={key:1,class:"w-full"},M={class:"mt-6"},Q={class:"flex w-full items-center justify-between p-4 md:p-6"},Y={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},Z={class:"p-4 md:p-6"},ee={class:"mx-auto w-full text-center"},ae={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},le={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},te={class:"p-4 md:p-6"},se={class:"flex gap-x-2"},oe=t({__name:"index",setup(l){const t=U(),N=s(),{toast:S}=o(),{updateKycStatus:oe,deleteKyc:ie}=L(),ne=i();n((()=>ne.getProfile));const re=r(""),ue=r(10),de=n((()=>parseInt(N.query.page??"1")));r([]);const ce=n((()=>t.kycs)),me=n((()=>ce.value?.filter((e=>e.user.uuid.includes(re.value))))),pe=n((()=>{const e=(de.value-1)*ue.value,a=e+ue.value;return me.value.slice(e,a)}));u((async()=>{0===t.kycs.length&&(t.loading=!0,await t.fetchKycs(),t.loading=!1)}));const fe=r(!1),he=r(!1);const ge=e=>{switch(e){case"PENDING":return"warning";case"APPROVED":return"success";case"REJECTED":return"danger";default:return"info"}},{formatedDate:ve}=o();return(l,s)=>{const o=e,i=a,n=j,r=D,u=B,L=V,N=$,U=P,oe=E,ne=T,ce=F,ye=I,ke=A,we=K,be=C,_e=f;return h(),d("div",null,[c(ke,null,{left:m((()=>[g("div",R,[c(o,{modelValue:p(re),"onUpdate:modelValue":s[0]||(s[0]=e=>v(re)?re.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter User ID..."},null,8,["modelValue"])])])),right:m((()=>[c(i,{modelValue:p(ue),"onUpdate:modelValue":s[1]||(s[1]=e=>v(ue)?ue.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:m((()=>[g("option",q,"10 "+y(l.$t("per page")),1),g("option",z,"25 "+y(l.$t("per page")),1),g("option",O,"50 "+y(l.$t("per page")),1),g("option",G,"100 "+y(l.$t("per page")),1)])),_:1},8,["modelValue"])])),default:m((()=>[g("div",J,[p(t).loading||0!==p(pe)?.length?(h(),d("div",H,[c(ce,null,{default:m((()=>[(h(!0),d(w,null,b(p(pe),((e,a)=>(h(),k(ne,{key:e.id,spaced:""},{start:m((()=>[c(r,{label:"User","hide-label":a>0,logo:e.user.avatar,title:`${e.user?.first_name} (${e.user?.last_name})`,subtitle:p(ve)(e.created_at,!0)},null,8,["hide-label","logo","title","subtitle"])])),end:m((()=>[c(u,{label:"Template","hide-label":a>0,class:"w-20 xs:w-full"},{default:m((()=>[_(y(e.template.title),1)])),_:2},1032,["hide-label"]),c(u,{label:"Level","hide-label":a>0,class:"w-20 xs:w-full"},{default:m((()=>[_(y(e.level),1)])),_:2},1032,["hide-label"]),c(u,{label:"Status","hide-label":a>0,class:"w-20 xs:w-full"},{default:m((()=>[c(L,{color:ge(e.status),flavor:"pastel",condensed:""},{default:m((()=>[_(y(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),c(u,{label:"Actions","hide-label":a>0},{default:m((()=>[c(oe,{flavor:"context",label:"Dropdown",orientation:"end"},{default:m((()=>[c(U,{to:`/admin/kyc/application/${e.id}`,title:"View"},{start:m((()=>[c(N,{name:"ph:eye-duotone",class:"me-2 block h-5 w-5"})])),_:2},1032,["to"]),c(U,{onClick:a=>function(e){t.selectedKyc=e,fe.value=!0}(e),title:"Delete"},{start:m((()=>[c(N,{name:"line-md:close",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(h(),k(n,{key:0,title:p(re)&&""!==p(re)?"No matching results":"No results",subtitle:p(re)&&""!==p(re)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:m((()=>[W,X])),_:1},8,["title","subtitle"])),g("div",M,[p(me).length>p(ue)?(h(),k(ye,{key:0,"total-items":p(me).length,"current-page":p(de),"item-per-page":p(ue)},null,8,["total-items","current-page","item-per-page"])):x("",!0)])])])),_:1}),c(_e,{open:p(fe),size:"sm",onClose:s[5]||(s[5]=e=>fe.value=!1)},{header:m((()=>[g("div",Q,[g("h3",Y,y(l.$t("Delete"))+" "+y(l.$t("Kyc")),1),c(we,{onClick:s[2]||(s[2]=e=>fe.value=!1)})])])),footer:m((()=>[g("div",te,[g("div",se,[c(be,{onClick:s[3]||(s[3]=e=>fe.value=!1)},{default:m((()=>[_(y(l.$t("Cancel")),1)])),_:1}),c(be,{color:"danger",flavor:"solid",onClick:s[4]||(s[4]=e=>async function(){he.value=!0;try{const e=await ie(t.selectedKyc?.id);t.kycs=t.kycs.filter((e=>e.id!==t.selectedKyc?.id)),S.response(e)}catch(e){console.log(e),S.danger(e)}fe.value=!1,he.value=!1,t.selectedKyc=null}()),disabled:p(he),loading:p(he)},{default:m((()=>[_(y(l.$t("Delete")),1)])),_:1},8,["disabled","loading"])])])])),default:m((()=>[g("div",Z,[g("div",ee,[g("h3",ae,y(l.$t("Are you sure?")),1),g("p",le,y(l.$t("Do you really want to delete this"))+" "+y(l.$t("kyc"))+" "+y(l.$t("This process cannot be undone"))+". "+y(l.$t("This will also delete all the posts associated with this kyc"))+". ",1)])])])),_:1},8,["open"])])}}});export{oe as default};
