import{a as e,r as t,z as a,ac as s,ad as l,c as r,E as o,O as n,w as u,o as d,e as i,q as c,t as m,u as f,f as p,n as g,b as x,k as v,x as b,X as y,Y as h,ao as k,an as w}from"../e/entry-8qgg5CL-.js";import{_}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as j}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as C}from"./BaseInput.vue-iInHQMIA.js";import{_ as D}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as I}from"./useForex-v_V55_1y.js";import{z as S,u as $,t as B,F as A}from"./vee-validate.esm-n59zZCC5.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";import"./input-id-wZ-Ta08j.js";const E={class:"flex items-center justify-between mb-6"},R={class:"text-2xl font-semibold text-gray-800 dark:text-gray-200"},P={class:"flex items-center xs:flex-col sm:flex-row gap-2"},W={class:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 gap-4 mb-6 text-gray-700 dark:text-gray-400"},L={class:"flex flex-col"},T={class:"text-sm font-semibold text-gray-600 dark:text-gray-200"},N={class:"flex flex-col"},O={class:"text-sm font-semibold text-gray-600 dark:text-gray-200"},V={class:"flex flex-col"},F={class:"text-sm font-semibold text-gray-600 dark:text-gray-200"},U={class:"p-4 border rounded-md mb-6 text-gray-700 dark:border-gray-600 dark:text-gray-400"},z={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},M={class:"mb-4"},X={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},q={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6 text-gray-700 dark:text-gray-400"},J={class:"p-4 border rounded-md dark:border-gray-600"},Y={class:"flex jsutify-start items-center"},G=["src"],H={class:"font-bold"},K={class:"p-4 border rounded-md dark:border-gray-600"},Q={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},Z={key:0,class:"w-full flex gap-2 xs:flex-col sm:flex-row mb-2"},ee={class:"flex w-full items-center justify-between p-4 md:p-6"},te={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},ae={class:"p-4 md:p-6"},se={class:"mx-auto w-full text-start space-y-3"},le={class:"p-4 md:p-6"},re={class:"flex gap-x-2"},oe=e({__name:"[uuid]",setup(e){const oe=S.object({result:S.string().nonempty("Please select an option"),profit:S.number().min(0,"Please enter a valid profit")}),ne=B(oe),{handleSubmit:ue,isSubmitting:de,values:ie}=$({validationSchema:ne,initialValues:{result:"DRAW",profit:0}}),ce=t(null),{getAdminForexInvestment:me,updateForexInvestment:fe}=I(),pe=a(),ge=s();t(!1);const xe=t(!1),{toast:ve}=l(),be=r((()=>pe.params.uuid));t("We are sorry, your transaction has been rejected. Please contact support for more information. \n\nRejection reason goes here.  \n\nThank you.");const ye=["WIN","LOSS","DRAW"];o((async()=>{try{const e=await me(be.value);ce.value=e.data.result}catch(e){ge.back(),ve.danger(e)}}));const he=ue((async e=>{if(ce.value){try{const t=await fe(be.value,e.result,e.profit);ve.response(t),"success"===t.status&&(ce.value.result=e.result,ce.value.profit=e.profit)}catch(t){ve.danger(t)}xe.value=!1}})),ke=e=>{switch(e){case"COMPLETED":return"success";case"FAILED":case"CANCELLED":case"REJECTED":case"EXPIRED":return"danger";default:return"info"}},we=e=>{switch(e){case"WIN":return"success";case"LOSS":return"danger";case"DRAW":return"warning";default:return"info"}},{formatedDate:_e}=l();return(e,t)=>{const a=b,s=y,l=_,r=h,o=k,I=j,S=C,$=w,B=D;return d(),n(B,{class:"mb-20"},{right:u((()=>[i(s,{onClick:t[0]||(t[0]=e=>f(ge).back()),color:"muted"},{default:u((()=>[i(a,{name:"line-md:chevron-left",class:"mr-2"}),c(" "+m(e.$t("Back")),1)])),_:1})])),default:u((()=>[i(r,{class:"px-8 pt-8 pb-4 mx-auto"},{default:u((()=>[p("div",E,[p("h1",R,m(e.$t("Investment Details")),1),p("div",P,[i(l,{shape:"rounded",color:ke(f(ce)?.status),flavor:"pastel",class:"dark:bg-opacity-80"},{default:u((()=>[c(m(f(ce)?.status),1)])),_:1},8,["color"]),i(l,{shape:"rounded",color:null!==f(ce)?.result?we(f(ce)?.result):"warning",flavor:"pastel",class:"dark:bg-opacity-80"},{default:u((()=>[c(m(null!==f(ce)?.result?f(ce)?.result:"Result not set"),1)])),_:1},8,["color"])])]),p("div",W,[p("div",L,[p("label",T,m(e.$t("Total Amount"))+":",1),c(" "+m(f(ce)?.amount),1)]),p("div",N,[p("label",O,m(e.$t("Profit"))+":",1),p("span",{class:g({"text-green-500":null!==f(ce)?.profit&&"WIN"===f(ce)?.result,"text-red-500":null!==f(ce)?.profit&&"LOSS"===f(ce)?.result,"text-gray-500":null!==f(ce)?.profit&&"DRAW"===f(ce)?.result,"text-warning-500":null===f(ce)?.profit})},m(null!==f(ce)?.profit?("WIN"===f(ce)?.result?"+":"LOSS"===f(ce)?.result?"-":"")+f(ce)?.profit:"Not set"),3)]),p("div",V,[p("label",F,m(e.$t("Duration"))+":",1),c(" "+m(f(ce)?.duration.duration)+" "+m(f(ce)?.duration.timeframe),1)])]),p("div",U,[p("h2",z,m(e.$t("Plan"))+" "+m(f(ce)?.plan?.title)+": ",1),p("p",M,m(f(ce)?.plan?.description),1),p("div",null,[p("h2",X,m(e.$t("Investment ID"))+": ",1),p("p",null,m(f(ce)?.uuid),1)])]),p("div",q,[p("div",J,[p("div",Y,[p("img",{loading:"lazy",src:f(ce)?.user?.avatar||"/img/avatars/placeholder-file.png",class:"mr-2 h-16 w-16 rounded-full"},null,8,G),p("div",null,[p("div",H,m(f(ce)?.user.first_name)+" "+m(f(ce)?.user.last_name),1),p("div",null,m(f(ce)?.user.uuid),1)])])]),p("div",K,[p("h2",Q,m(e.$t("Date"))+": ",1),p("p",null,m(f(_e)(f(ce)?.created_at,!0)),1)])]),"ACTIVE"===f(ce)?.status?(d(),x("div",Z,[i(s,{onClick:t[1]||(t[1]=e=>xe.value=!0),color:"success",class:"w-full"},{default:u((()=>[c(m(e.$t("Set Result")),1)])),_:1})])):v("",!0)])),_:1}),i($,{open:f(xe),size:"lg",onClose:t[5]||(t[5]=()=>xe.value=!1)},{header:u((()=>[p("div",ee,[p("h3",te,m(e.$t("Set Investment Result")),1),i(o,{onClick:t[2]||(t[2]=e=>xe.value=!1)})])])),footer:u((()=>[p("div",le,[p("div",re,[i(s,{onClick:t[3]||(t[3]=e=>xe.value=!1)},{default:u((()=>[c(m(e.$t("Cancel")),1)])),_:1}),i(s,{color:"success",flavor:"solid",onClick:t[4]||(t[4]=e=>f(he)())},{default:u((()=>[c(m(e.$t("Submit")),1)])),_:1})])])])),default:u((()=>[p("div",ae,[p("div",se,[p("div",null,m(e.$t("Are you sure you want to set this result for this investment?")),1),p("div",null,m(e.$t("Please note that this action will set the end result for this investment and the profit will be calculated based on the result you set.")),1),i(f(A),{name:"result"},{default:u((({field:e,errorMessage:t,handleChange:a,handleBlur:s})=>[i(I,{"model-value":e.value,error:t,disabled:f(de),items:ye,placeholder:"Please select a result",label:"Result",shape:"rounded","onUpdate:modelValue":a,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1}),"DRAW"!==f(ie).result?(d(),n(f(A),{key:0,name:"profit"},{default:u((({field:e,errorMessage:t,handleChange:a,handleBlur:s})=>[i(S,{"model-value":e.value,error:t,disabled:f(de),type:"number",placeholder:"Profit","onUpdate:modelValue":a,onBlur:s,label:"Profit"},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})):v("",!0)])])])),_:1},8,["open"])])),_:1})}}});export{oe as default};
