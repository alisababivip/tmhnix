import{a as e,z as a,ac as l,ad as t,c as r,r as s,E as u,o as d,b as n,e as o,w as i,u as m,t as c,q as h,f as w,O as p,p as f,F as v,k as y,_ as x,x as b,X as W}from"../e/entry-8qgg5CL-.js";import{_ as g}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as V}from"./BaseInput.vue-iInHQMIA.js";import{_ as k}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as $}from"./wallet-n04aoRPe.js";import{u as _}from"./currency-9FjTf2Bf.js";import{u as j}from"./useWallet-8iHzU2hV.js";const C={class:"space-y-5 min-h-screen pb-20"},z=w("hr",{class:"border-gray-300 dark:border-gray-700"},null,-1),N={class:"space-y-5 pl-8"},U={class:"w-full"},E={class:"w-full"},S={key:0,class:"w-full"},T={class:"w-full"},B=w("hr",{class:"border-gray-300 dark:border-gray-700"},null,-1),L=e({__name:"index",props:{flutter:{type:Boolean,default:!1}},setup(e){const L=e,O=a(),F=l(),M=$(),P=_(),{toast:R}=t(),{createSpotWithdrawTransaction:q}=j(),D=O.params.currency.toUpperCase(),I=r((()=>P.currencies)),X=r((()=>M.wallet)),A=s(null),G=s(""),H=s(0),J=s(null),K=s(!1),Q=r((()=>X.value?.addresses?Object.keys(X.value.addresses):[])),Y=r((()=>I.value.find((e=>e.currency===X.value?.currency)))),Z=r((()=>Y.value.chains.find((e=>e.network===A.value)))),ee=r((()=>Z.value?.memoRegex&&""!==Z.value?.memoRegex)),ae=r((()=>Z.value?.withdrawFee));async function le(){if(G.value){K.value=!0;try{const e=await q(X.value?.currency,A.value,H.value,G.value,J.value);R.response(e),"success"===e.status&&F.push(`/user/${L.flutter?"flutter/":""}wallets/spot/${D.toLowerCase()}`)}catch(e){R.danger(e)}K.value=!1}else R.dangerText("Please enter a valid address")}return u((async()=>{await async function(){try{await M.fetchWallet(D,"SPOT")}catch(e){F.push(`/user/${L.flutter?"flutter/":""}wallets/spot`)}0===P.currencies.length&&await P.fetchCurrencies();Q.value.length>0&&(A.value=Q.value[0])}()})),(a,l)=>{const t=x,r=b,s=W,u=g,$=V,_=k;return d(),n("div",null,[o(_,null,{left:i((()=>[o(t,{size:"xl"},{default:i((()=>[h(c(m(D))+" "+c(a.$t("Withdraw")),1)])),_:1})])),right:i((()=>[w("div",null,[o(s,{to:`/user/${e.flutter?"flutter/":""}wallets/spot/${m(D).toLowerCase()}`,color:"muted",flavor:"pastel"},{default:i((()=>[o(r,{name:"line-md:chevron-left",class:"h-4 w-4"}),w("span",null,c(a.$t("Cancel")),1)])),_:1},8,["to"])])])),default:i((()=>[w("div",C,[w("div",null,[o(t,{as:"h3",size:"2xl",weight:"bold",class:"text-muted-800 dark:text-white items-center flex"},{default:i((()=>[m(A)?(d(),p(r,{key:1,name:"line-md:confirm-circle",class:"h-6 w-6 mr-2"})):(d(),p(r,{key:0,name:"line-md:loading-alt-loop",class:"h-6 w-6 mr-2"})),h(" "+c(a.$t("Select Chain")),1)])),_:1}),o(u,{class:"max-w-sm mt-5 pl-8 z-40",modelValue:m(A),"onUpdate:modelValue":l[0]||(l[0]=e=>f(A)?A.value=e:null),items:m(Q),placeholder:"Select a chain",shape:"rounded"},null,8,["modelValue","items"])]),m(A)?(d(),n(v,{key:0},[z,o(t,{as:"h3",size:"2xl",weight:"bold",class:"text-muted-800 dark:text-white"},{default:i((()=>[o(r,{name:"line-md:downloading-loop",class:"h-6 w-6 mr-2"}),h(" "+c(a.$t("Withdrawal Details")),1)])),_:1}),w("div",N,[w("div",U,[o($,{modelValue:m(G),"onUpdate:modelValue":l[1]||(l[1]=e=>f(G)?G.value=e:null),shape:"rounded",type:"text",label:"Withdraw address",placeholder:"Enter your withdraw address...",icon:"logos:ethereum"},null,8,["modelValue"])]),w("div",E,[(d(),p($,{modelValue:m(H),"onUpdate:modelValue":l[2]||(l[2]=e=>f(H)?H.value=e:null),key:m(A),min:Number(m(Z)?.minWithdraw),max:Number(m(Z)?.maxWithdraw),shape:"rounded",type:"number",label:"Withdraw amount",placeholder:"Enter your withdraw amount...",icon:"streamline:money-atm-card-2-deposit-money-payment-finance-atm-withdraw",error:m(Z)?.minWithdraw&&m(H)<Number(m(Z)?.minWithdraw)?`Minimum withdraw amount is ${m(Z)?.minWithdraw} ${m(D)}`:!!(m(Z)?.maxWithdraw&&m(H)>Number(m(Z)?.maxWithdraw))&&`Maximum withdraw amount is ${m(Z)?.maxWithdraw} ${m(D)}`},null,8,["modelValue","min","max","error"]))]),m(ee)?(d(),n("div",S,[(d(),p($,{modelValue:m(J),"onUpdate:modelValue":l[3]||(l[3]=e=>f(J)?J.value=e:null),key:m(A),shape:"rounded",type:"text",label:"Withdraw memo",placeholder:"Enter your withdraw memo...",icon:"ph:copy-fill"},null,8,["modelValue"]))])):y("",!0),w("div",T,[o($,{modelValue:m(ae),"onUpdate:modelValue":l[4]||(l[4]=e=>f(ae)?ae.value=e:null),shape:"rounded",type:"number",label:"Withdraw fee",icon:"heroicons-outline:receipt-tax",readonly:""},null,8,["modelValue"])])]),B,w("div",null,[o(s,{class:"w-full",color:"success",onClick:le,disabled:!m(G)||!m(H)||m(Z)?.minWithdraw&&m(H)<Number(m(Z)?.minWithdraw)||m(Z)?.maxWithdraw&&m(H)>Number(m(Z)?.maxWithdraw)||m(K),loading:m(K)},{default:i((()=>[h(c(a.$t("Withdraw")),1)])),_:1},8,["disabled","loading"])])],64)):y("",!0)])])),_:1})])}}});export{L as _};
