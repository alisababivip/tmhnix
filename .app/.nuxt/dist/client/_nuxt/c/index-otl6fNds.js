import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as a}from"./BaseSelect.vue-p0KYznCX.js";import{a as t,z as l,r as s,c as o,E as i,ad as n,ac as r,b as u,e as d,w as m,u as c,an as p,o as h,p as f,f as v,t as g,q as w,O as y,F as b,B as k,k as _,x,X as j,ag as C,ao as $}from"../e/entry-8qgg5CL-.js";import{_ as B,a as P}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as M}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as F,a as T}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as V}from"./TairoFlexTable-zdoraqRc.js";import{_ as D}from"./BasePagination.vue-eKZkqxB7.js";import{_ as L}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as A}from"./useP2P-NV4dmDWU.js";import{_ as I,a as U}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as q}from"./payment-methods-MEQZc0hn.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const z={value:10},E={value:25},N={value:50},O={value:100},R=v("img",{class:"block dark:hidden",src:I,alt:"Placeholder image"},null,-1),S=v("img",{class:"hidden dark:block",src:U,alt:"Placeholder image"},null,-1),W={key:1,class:"w-full"},X={class:"mt-6"},G={class:"flex w-full items-center justify-between p-4 md:p-6"},H={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},J={class:"p-4 md:p-6"},K={class:"mx-auto w-full text-center"},Q={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},Y={class:"p-4 md:p-6"},Z={class:"flex gap-x-2"},ee=t({__name:"index",setup(t){const I=q(),{deleteUserPaymentMethod:U}=A(),ee=l(),ae=s(""),te=s(10),le=o((()=>parseInt(ee.query.page??"1"))),se=o((()=>I.methods.filter((e=>e.name?.toLowerCase().includes(ae.value.toLowerCase()))))),oe=o((()=>{const e=(le.value-1)*te.value,a=e+te.value;return se.value.slice(e,a)}));i((async()=>{0===I.methods.length&&(I.loading=!0,await I.fetchPaymentMethods(),I.loading=!1)}));const{toast:ie}=n(),ne=r();const re=s(!1),ue=s(!1),de=s(null);async function me(){if(de.value){ue.value=!0;try{const e=await U(de.value.id);ie.response(e),"success"===e.status&&await I.fetchPaymentMethods()}catch(e){ie.danger(e)}re.value=!1,ue.value=!1,de.value=null}}return(t,l)=>{const s=e,o=a,i=x,n=j,r=C,A=B,U=M,q=F,ee=T,ie=P,ce=V,pe=D,he=L,fe=$,ve=p;return h(),u("div",null,[d(he,null,{left:m((()=>[d(s,{modelValue:c(ae),"onUpdate:modelValue":l[0]||(l[0]=e=>f(ae)?ae.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter methods..."},null,8,["modelValue"]),d(o,{modelValue:c(te),"onUpdate:modelValue":l[1]||(l[1]=e=>f(te)?te.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:m((()=>[v("option",z,"10 "+g(t.$t("per page")),1),v("option",E,"25 "+g(t.$t("per page")),1),v("option",N,"50 "+g(t.$t("per page")),1),v("option",O,"100 "+g(t.$t("per page")),1)])),_:1},8,["modelValue"])])),right:m((()=>[d(n,{color:"primary",flavor:"solid",to:"/user/p2p/payment-methods/create"},{default:m((()=>[d(i,{name:"line-md:plus",class:"me-2 block h-5 w-5"}),w(" "+g(t.$t("Create")),1)])),_:1})])),default:m((()=>[v("div",null,[c(I).loading||0!==c(oe).length?(h(),u("div",W,[d(ce,{class:"pt-5"},{default:m((()=>[(h(!0),u(b,null,k(c(oe),((e,a)=>(h(),y(ie,{key:e.id,spaced:""},{start:m((()=>[d(A,{label:"Method","hide-label":a>0,picture:e.image||"/img/placeholder.png",title:e.name,subtitle:e.instructions.length>50?e.instructions.slice(0,50)+"...":e.instructions},null,8,["hide-label","picture","title","subtitle"])])),end:m((()=>[d(U,{"hide-label":a>0,class:"w-24 xs:w-full",label:"Currency"},{default:m((()=>[w(g(e.currency),1)])),_:2},1032,["hide-label"]),d(U,{label:"Actions","hide-label":a>0},{default:m((()=>[d(ee,{flavor:"context",label:"Dropdown",orientation:"end"},{default:m((()=>[d(q,{onClick:a=>function(e){I.selectPaymentMethod(e),ne.push(`/user/p2p/payment-methods/edit/${e.id}`)}(e),title:"Edit Method"},{start:m((()=>[d(i,{name:"line-md:edit-twotone",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"]),d(q,{onClick:a=>{return t=e,de.value=t,void(re.value=!0);var t},title:"Delete Method"},{start:m((()=>[d(i,{name:"line-md:close",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(h(),y(r,{key:0,title:c(ae)&&""!==c(ae)?"No matching results":"No results",subtitle:c(ae)&&""!==c(ae)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any payment gateways here yet."},{image:m((()=>[R,S])),_:1},8,["title","subtitle"])),v("div",X,[c(se).length>c(te)?(h(),y(pe,{key:0,"total-items":c(se).length,"current-page":c(le),"item-per-page":c(te)},null,8,["total-items","current-page","item-per-page"])):_("",!0)])])])),_:1}),d(ve,{open:c(re),size:"sm",onClose:l[4]||(l[4]=()=>re.value=!1)},{header:m((()=>[v("div",G,[v("h3",H,g(t.$t("Delete Method")),1),d(fe,{onClick:l[2]||(l[2]=()=>re.value=!1)})])])),footer:m((()=>[v("div",Y,[v("div",Z,[d(n,{onClick:l[3]||(l[3]=()=>re.value=!1)},{default:m((()=>[w(g(t.$t("Cancel")),1)])),_:1}),d(n,{color:"danger",flavor:"solid",onClick:me,disabled:c(ue),loading:c(ue)},{default:m((()=>[w(g(t.$t("Delete")),1)])),_:1},8,["disabled","loading"])])])])),default:m((()=>[v("div",J,[v("div",K,[v("h3",Q,g(t.$t("Are you sure you want to delete this method?")),1)])])])),_:1},8,["open"])])}}});export{ee as default};
