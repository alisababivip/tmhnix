import{a as e,z as a,r as l,ad as n,c as r,ac as o,b as s,e as t,w as d,o as i,f as u,t as m,u as p,q as c,x as b,X as h}from"../e/entry-8qgg5CL-.js";import{_ as y}from"./BaseInput.vue-iInHQMIA.js";import{_ as v}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as f}from"./useEcosystem-9eBUNbsT.js";import{u as g}from"./admin-Nwh6nXjV.js";import{z as V,u as k,t as B,F as C}from"./vee-validate.esm-n59zZCC5.js";import"./input-id-wZ-Ta08j.js";const _={class:"text-lg font-semibold"},x={class:"p-4 md:p-6"},T={class:"mx-auto w-full text-start"},U={class:"grid gap-5 grid-cols-1 sm:grid-cols-2"},S={class:"p-4 md:p-6"},j=e({__name:"create",setup(e){const j=a(),{chain:w}=j.params,E=g(),{createAdminToken:M}=f(),q=l(!1),{toast:H}=n(),A=V.object({name:V.string().nonempty("Name is required"),currency:V.string().nonempty("Currency is required").refine((e=>e.length<=11),{message:"Currency can't be longer than 11 characters"}).refine((e=>/^[A-Z0-9]+$/.test(e)),{message:"Currency must be all uppercase and contain only alphabets and numbers, no spaces"}),initialSupply:V.number().int().positive("Initial supply must be a positive number"),cap:V.number().int().positive("Cap must be a positive number"),initialHolder:V.string().nonempty("Initial holder is required"),decimals:V.number().int().positive("Decimals must be a positive number")}).refine((e=>e.cap>=e.initialSupply),{message:"Cap must be larger than or equal to initial supply"}),D=r((()=>({name:"",currency:"",initialSupply:1e8,cap:1e8,initialHolder:"",decimals:18}))),{handleSubmit:$,isSubmitting:I,resetForm:N}=k({validationSchema:B(A),initialValues:D}),F=o(),z=$((async e=>{I.value=!0;const{name:a,currency:l,initialSupply:n,initialHolder:r,decimals:o,cap:s}=e;try{const e=await M(w,a,l,n,s,r,o);H.response(e),"success"===e.status&&(await E.fetchTokensAll(),q.value=!1,N(),F.push(`/admin/extensions/ecosystem/tokens/${w}`))}catch(t){H.danger(t)}I.value=!1}));return(e,a)=>{const l=b,n=h,r=y,o=v;return i(),s("div",null,[t(o,null,{left:d((()=>[u("div",_," Deploying New "+m(p(w))+" Tokens ",1)])),right:d((()=>[t(n,{to:`/admin/extensions/ecosystem/tokens/${p(w)}`,color:"muted",flavor:"pastel"},{default:d((()=>[t(l,{name:"line-md:chevron-left",class:"me-2 h-4 w-4"}),c(" Back ")])),_:1},8,["to"])])),default:d((()=>[u("div",x,[u("div",T,[u("div",U,[t(p(C),{name:"name"},{default:d((({field:e,errorMessage:a,handleChange:l,handleBlur:n})=>[t(r,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,l],error:a,disabled:p(I),type:"text",label:"Token Name",placeholder:"Enter token name",onBlur:n},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1}),t(p(C),{name:"currency"},{default:d((({field:e,errorMessage:a,handleChange:l,handleBlur:n})=>[t(r,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,l],error:a,disabled:p(I),type:"text",label:"Token Symbol",placeholder:"Enter token symbol",onBlur:n},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1}),t(p(C),{name:"initialSupply"},{default:d((({field:e,errorMessage:a,handleChange:l,handleBlur:n})=>[t(r,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,l],error:a,disabled:p(I),type:"number",label:"Token Supply",placeholder:"Enter token supply amount",onBlur:n},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1}),t(p(C),{name:"cap"},{default:d((({field:e,errorMessage:a,handleChange:l,handleBlur:n})=>[t(r,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,l],error:a,disabled:p(I),type:"number",label:"Token Cap (Max Supply)",placeholder:"Enter token max cap amount",onBlur:n},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1}),t(p(C),{name:"initialHolder"},{default:d((({field:e,errorMessage:a,handleChange:l,handleBlur:n})=>[t(r,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,l],error:a,disabled:p(I),type:"text",label:"Token Holder Address",placeholder:"Enter address where tokens will be sent",onBlur:n},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1}),t(p(C),{name:"decimals"},{default:d((({field:e,errorMessage:a,handleChange:l,handleBlur:n})=>[t(r,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,l],error:a,disabled:p(I),type:"number",label:"Token Decimals",placeholder:"Enter token decimals",onBlur:n},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1})])])]),u("div",S,[t(n,{color:"primary",flavor:"solid",onClick:a[0]||(a[0]=e=>p(z)()),disabled:p(I),loading:p(I)},{default:d((()=>[c(m(e.$t("Deploy Token")),1)])),_:1},8,["disabled","loading"])])])),_:1})])}}});export{j as default};
