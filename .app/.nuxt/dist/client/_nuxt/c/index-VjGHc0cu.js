import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{d as a,a as l,z as t,r as s,c as u,E as r,ac as o,ad as n,b as i,e as c,w as d,o as m,f as p,u as v,p as f,O as h,q as g,t as w,af as b,n as _,k as y,F as x,B as k,x as V,X as j,Y as I,ag as D}from"../e/entry-8qgg5CL-.js";import{_ as A}from"./BaseSelect.vue-p0KYznCX.js";import{_ as E}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as T,a as C}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as S}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as L}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as F}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as B}from"./TairoFlexTable-zdoraqRc.js";import{_ as P}from"./BasePagination.vue-eKZkqxB7.js";import{_ as R}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_ as U,a as $}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as N}from"./useForex-v_V55_1y.js";import{u as W}from"./plans-SNXSlSM4.js";import"./input-id-wZ-Ta08j.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const O=a({id:"adminForexInvestment",state:()=>({investments:[],userInvestment:null,loading:!1}),getters:{count:e=>e.investments.length},actions:{async fetchInvestments(){this.loading=!0;const{getAdminForexInvestments:e}=N(),a=await e();"success"===a.status&&(this.investments=a.data.result),this.loading=!1},async fetchUserInvestment(){const{getForexInvestments:e}=N(),a=await e();"success"===a.status&&(this.userInvestment=a.data.result??null)}}}),q={class:"w-full flex gap-2 xs:flex-col sm:flex-row"},J={value:10},M={value:25},X={value:50},z={value:100},Y=p("img",{class:"block dark:hidden",src:U,alt:"Placeholder image"},null,-1),Z=p("img",{class:"hidden dark:block",src:$,alt:"Placeholder image"},null,-1),G={key:1,class:"w-full sm:pt-5"},H={key:0},K={key:1},Q={class:"mt-6"},ee=l({__name:"index",setup(a){const l=t(),U=O(),$=W(),N=s(""),ee=s(!1),ae=s(""),le=s(10),te=u((()=>parseInt(l.query.page??"1")));r((async()=>{ee.value=!0,await U.fetchInvestments(),0===$.plans.length&&await $.fetchForexPlans(),ee.value=!1}));const se=u((()=>U.investments.filter((e=>(!oe.value||"All"===oe.value||e.type===oe.value)&&((!ne.value||"All"===ne.value||e.status===ne.value)&&((!ie.value||"All"===ie.value||e.result===ie.value)&&(!(ce.value&&new Date(e.created_at)<new Date(ce.value))&&(!(de.value&&new Date(e.created_at)>new Date(de.value))&&(ae.value&&""!==ae.value&&void 0!==ae.value&&ae.value!==N.value&&(ve.push({query:{...l.query,page:"1",filter:ae.value}}),N.value=ae.value),!ae.value||e.uuid?.includes(ae.value)))))))).sort(((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())))),ue=u((()=>{const e=(te.value-1)*le.value,a=e+le.value;return se.value.slice(e,a)})),re=s(!1),oe=s(""),ne=s(""),ie=s(""),ce=s(""),de=s(""),me=["All","ACTIVE","COMPLETED","CANCELLED","REJECTED"],pe=["All","WIN","LOSS","DRAW"],ve=o(),{formatedDate:fe}=n(),he=e=>{switch(e){case"COMPLETED":return"success";case"REJECTED":case"CANCELLED":return"danger";default:return"info"}},ge=e=>{switch(e){case"WIN":return"success";case"LOSS":return"danger";case"DRAW":return"warning";default:return"info"}},we=e=>{switch(e){case"WIN":return"+";case"LOSS":return"-";default:return""}};return(a,l)=>{const t=e,s=V,u=j,r=A,o=E,n=I,U=D,N=T,W=S,O=L,be=F,_e=C,ye=B,xe=P,ke=R;return m(),i("div",null,[c(ke,null,{left:d((()=>[p("div",q,[c(t,{modelValue:v(ae),"onUpdate:modelValue":l[0]||(l[0]=e=>f(ae)?ae.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Search Investment ID..."},null,8,["modelValue"]),c(u,{onClick:l[1]||(l[1]=e=>re.value=!v(re)),color:"muted",block:""},{default:d((()=>[v(re)?(m(),h(s,{key:0,name:"line-md:arrow-up",class:"h-4 w-4 mr-2"})):(m(),h(s,{key:1,name:"line-md:arrow-down",class:"h-4 w-4 mr-2"})),g(" "+w(a.$t("Filters")),1)])),_:1})])])),right:d((()=>[c(r,{modelValue:v(le),"onUpdate:modelValue":l[2]||(l[2]=e=>f(le)?le.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:d((()=>[p("option",J,"10 "+w(a.$t("per page")),1),p("option",M,"25 "+w(a.$t("per page")),1),p("option",X,"50 "+w(a.$t("per page")),1),p("option",z,"100 "+w(a.$t("per page")),1)])),_:1},8,["modelValue"])])),default:d((()=>[p("div",null,[c(b,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:d((()=>[v(re)?(m(),h(n,{key:0,class:_("grid gap-4 xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-3 mb-6 p-5")},{default:d((()=>[c(o,{modelValue:v(oe),"onUpdate:modelValue":l[3]||(l[3]=e=>f(oe)?oe.value=e:null),label:"Investment Plan",items:v($).plans.map((e=>e.title)),placeholder:"Select Investment Plan"},null,8,["modelValue","items"]),c(o,{modelValue:v(ne),"onUpdate:modelValue":l[4]||(l[4]=e=>f(ne)?ne.value=e:null),label:"Status",items:me,placeholder:"Select a Status"},null,8,["modelValue"]),c(o,{modelValue:v(ie),"onUpdate:modelValue":l[5]||(l[5]=e=>f(ie)?ie.value=e:null),label:"Result",items:pe,placeholder:"Select a Result"},null,8,["modelValue"]),c(t,{modelValue:v(ce),"onUpdate:modelValue":l[6]||(l[6]=e=>f(ce)?ce.value=e:null),type:"date",label:"From"},null,8,["modelValue"]),c(t,{modelValue:v(de),"onUpdate:modelValue":l[7]||(l[7]=e=>f(de)?de.value=e:null),type:"date",label:"To"},null,8,["modelValue"])])),_:1})):y("",!0)])),_:1}),v(ee)||0!==v(ue)?.length?(m(),i("div",G,[c(ye,null,{default:d((()=>[c(b,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:d((()=>[(m(!0),i(x,null,k(v(ue),((e,a)=>(m(),h(_e,{key:e.id,spaced:""},{start:d((()=>[c(N,{label:"User","hide-label":a>0,logo:e.user?.avatar,title:`${e.user?.first_name} (${e.user?.last_name})`,subtitle:v(fe)(e.created_at,!0)},null,8,["hide-label","logo","title","subtitle"])])),end:d((()=>[c(W,{label:"Plan","hide-label":a>0,class:"w-20 xs:w-full text-xs"},{default:d((()=>[g(w(e.plan?.title),1)])),_:2},1032,["hide-label"]),c(W,{label:"Amount","hide-label":a>0,class:"w-20 xs:w-full text-xs"},{default:d((()=>[g(w(e.amount),1)])),_:2},1032,["hide-label"]),c(W,{label:"Result","hide-label":a>0,class:"w-20 xs:w-full"},{default:d((()=>[c(O,{color:ge(e.result),flavor:"pastel",condensed:""},{default:d((()=>[e.result?(m(),i("span",H,w(we(e.result))+w("DRAW"===e.result?0:e.profit),1)):(m(),i("span",K,"N/A"))])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),c(W,{label:"Status","hide-label":a>0,class:"w-20 xs:w-full"},{default:d((()=>[c(O,{color:he(e.status),flavor:"pastel",condensed:""},{default:d((()=>[g(w(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),c(W,{label:"Actions","hide-label":a>0,class:"w-20"},{default:d((()=>[c(be,{condensed:"",color:"muted",onClick:a=>{return l=e.uuid,void ve.push(`/admin/extensions/forex/investments/${l}`);var l},"data-nui-tooltip":"View"},{default:d((()=>[c(s,{name:"ph:eye-duotone",class:"h-4 w-4"})])),_:2},1032,["onClick"])])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])),_:1})])):(m(),h(U,{key:0,title:v(ae)&&""!==v(ae)?"No matching results":"No results",subtitle:v(ae)&&""!==v(ae)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:d((()=>[Y,Z])),_:1},8,["title","subtitle"])),p("div",Q,[v(se).length>v(le)?(m(),h(xe,{key:0,"total-items":v(se).length,"current-page":v(te),"item-per-page":v(le)},null,8,["total-items","current-page","item-per-page"])):y("",!0)])])])),_:1})])}}});export{ee as default};
