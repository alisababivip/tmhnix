import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{d as a,a as l,z as t,r as s,c as r,E as u,b as o,e as n,w as d,o as i,u as c,p as m,O as p,q as f,t as v,f as h,af as g,n as y,k as w,F as b,B as _,X as T,Y as V,ag as P,x as k}from"../e/entry-8qgg5CL-.js";import{_ as D}from"./BaseSelect.vue-p0KYznCX.js";import{_ as U,a as B}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as E}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as j}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as I}from"./TairoFlexTable-zdoraqRc.js";import{_ as $}from"./BasePagination.vue-eKZkqxB7.js";import{_ as x}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_ as F,a as C}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as L}from"./useP2P-NV4dmDWU.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const N=a({id:"adminP2PTrades",state:()=>({trades:[],loading:!1,selectedTrade:null}),getters:{getTradeById:e=>a=>e.trades.find((e=>e.id===a))},actions:{async fetchP2PTrades(){this.loading=!0;try{const{getAdminP2PTrades:e}=L(),a=await e();this.trades=a.data.result}catch(e){console.error("Error fetching P2P trades:",e)}this.loading=!1},async removeTrade(e){const a=this.trades.findIndex((a=>a.id===e));-1!==a&&this.trades.splice(a,1)},async selectTrade(e){this.selectedTrade=e},async selectTradeById(e){this.selectedTrade=this.getTradeById(e)}}}),S={value:10},A={value:25},R={value:50},O={value:100},W=h("img",{class:"block dark:hidden",src:F,alt:"Placeholder image"},null,-1),q=h("img",{class:"hidden dark:block",src:C,alt:"Placeholder image"},null,-1),z={key:1,class:"w-full"},G={class:"mt-6"},M=l({__name:"index",setup(a){const l=N(),F=t(),C=s(!1),L=s(""),M=s(null),X=s(null),Y=s(null),H=s(null),J=s(""),K=s(""),Q=s(10),Z=r((()=>parseInt(F.query.page??"1"))),ee=r((()=>l.trades.filter((e=>{if(M.value&&M.value!==e?.seller?.uuid)return!1;if(X.value&&X.value!==e?.user?.uuid)return!1;const a=`${e?.seller?.first_name?.toLowerCase()} ${e?.seller?.last_name?.toLowerCase()}`,l=`${e?.user?.first_name?.toLowerCase()} ${e?.user?.last_name?.toLowerCase()}`;return!(Y.value&&!a.includes(Y.value))&&(!(H.value&&!l.includes(H.value))&&(!(J.value&&new Date(e.created_at)<new Date(J.value))&&(!(K.value&&new Date(e.created_at)>new Date(K.value))&&(!L.value||e.uuid?.includes(L.value)||e?.offer?.currency?.includes(L.value)))))})).sort(((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())))),ae=r((()=>{const e=(Z.value-1)*Q.value,a=e+Q.value;return ee.value.slice(e,a)}));u((async()=>{0===l.trades.length&&(l.loading=!0,await l.fetchP2PTrades(),l.loading=!1)}));const le=e=>{switch(e){case"PENDING":return"warning";case"PAID":case"ESCROW_REVIEW":return"info";case"DISPUTE_OPEN":case"CANCELLED":return"danger";case"RELEASED":return"primary";case"COMPLETED":return"success";case"REFUNDED":return"secondary";default:return"default"}};return(a,t)=>{const s=e,r=k,u=T,F=D,N=V,te=P,se=U,re=E,ue=j,oe=B,ne=I,de=$,ie=x;return i(),o("div",null,[n(ie,null,{left:d((()=>[n(s,{modelValue:c(L),"onUpdate:modelValue":t[0]||(t[0]=e=>m(L)?L.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter trades..."},null,8,["modelValue"]),n(u,{onClick:t[1]||(t[1]=e=>C.value=!c(C)),color:"muted",block:""},{default:d((()=>[c(C)?(i(),p(r,{key:0,name:"line-md:arrow-up",class:"h-4 w-4 mr-2"})):(i(),p(r,{key:1,name:"line-md:arrow-down",class:"h-4 w-4 mr-2"})),f(" "+v(a.$t("Filters")),1)])),_:1})])),right:d((()=>[n(F,{modelValue:c(Q),"onUpdate:modelValue":t[2]||(t[2]=e=>m(Q)?Q.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:d((()=>[h("option",S,"10 "+v(a.$t("per page")),1),h("option",A,"25 "+v(a.$t("per page")),1),h("option",R,"50 "+v(a.$t("per page")),1),h("option",O,"100 "+v(a.$t("per page")),1)])),_:1},8,["modelValue"])])),default:d((()=>[h("div",null,[n(g,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:d((()=>[c(C)?(i(),p(N,{key:0,class:y("grid gap-4 xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-3 mb-6 p-5")},{default:d((()=>[n(s,{modelValue:c(M),"onUpdate:modelValue":t[3]||(t[3]=e=>m(M)?M.value=e:null),label:"Seller UUID",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter by Seller UUID..."},null,8,["modelValue"]),n(s,{modelValue:c(Y),"onUpdate:modelValue":t[4]||(t[4]=e=>m(Y)?Y.value=e:null),label:"Seller Name",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter by Seller Name..."},null,8,["modelValue"]),n(s,{modelValue:c(X),"onUpdate:modelValue":t[5]||(t[5]=e=>m(X)?X.value=e:null),label:"Buyer UUID",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter by Buyer UUID..."},null,8,["modelValue"]),n(s,{modelValue:c(H),"onUpdate:modelValue":t[6]||(t[6]=e=>m(H)?H.value=e:null),label:"Buyer Name",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter by Buyer Name..."},null,8,["modelValue"]),n(s,{modelValue:c(J),"onUpdate:modelValue":t[7]||(t[7]=e=>m(J)?J.value=e:null),type:"date",label:"From"},null,8,["modelValue"]),n(s,{modelValue:c(K),"onUpdate:modelValue":t[8]||(t[8]=e=>m(K)?K.value=e:null),type:"date",label:"To"},null,8,["modelValue"])])),_:1})):w("",!0)])),_:1}),c(l).loading||0!==c(ae).length?(i(),o("div",z,[n(ne,{class:"pt-5"},{default:d((()=>[(i(!0),o(b,null,_(c(ae),((e,a)=>(i(),p(oe,{key:e.id,spaced:""},{start:d((()=>[n(se,{label:"Trade","hide-label":a>0,title:e.uuid,subtitle:e.offer?.payment_method?.name},null,8,["hide-label","title","subtitle"])])),end:d((()=>[n(se,{label:"Peers","hide-label":a>0,title:`Seller: ${e.seller?.first_name} ${e.seller?.last_name}`,subtitle:`Buyer: ${e.user?.first_name} ${e.user?.last_name}`},null,8,["hide-label","title","subtitle"]),n(re,{label:"Amount","hide-label":a>0,class:"w-24 xs:w-full text-xs"},{default:d((()=>[f(v(e.amount)+" "+v(e?.offer?.currency),1)])),_:2},1032,["hide-label"]),n(re,{label:"Status","hide-label":a>0,class:"w-28 xs:w-full"},{default:d((()=>[n(ue,{color:le(e?.status),flavor:"pastel"},{default:d((()=>[f(v(e?.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(i(),p(te,{key:0,title:c(L)&&""!==c(L)?"No matching results":"No results",subtitle:c(L)&&""!==c(L)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:d((()=>[W,q])),_:1},8,["title","subtitle"])),h("div",G,[c(ee).length>c(Q)?(i(),p(de,{key:0,"total-items":c(ee).length,"current-page":c(Z),"item-per-page":c(Q)},null,8,["total-items","current-page","item-per-page"])):w("",!0)])])])),_:1})])}}});export{M as default};
