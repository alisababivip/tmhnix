import{_ as e}from"./WizardStepTitle.vue-i3gP8sdL.js";import{a,r as l,i as s,o as t,b as u,u as o,t as r,k as i,f as c,l as d,aY as n,m,p,j as v,aa as f,ab as b,ac as y,Z as g,E as h,J as k,c as x,e as V,F as _,B as j,w,q as C,s as O,Y as $,X as z,_ as B}from"../e/entry-8qgg5CL-.js";import{u as S}from"./input-id-wZ-Ta08j.js";import{_ as U}from"./BaseTabs.vue-L62ISjad.js";import{u as q}from"./multi-step-form-Tb8qYR9z.js";const A={class:"group/nui-checkbox-headless relative"},N=["for"],T={class:"relative"},Y=["id","true-value","false-value"],E=a({inheritAttrs:!1,__name:"BaseCheckboxHeadless",props:{label:{default:void 0},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},modelValue:{default:void 0},id:{default:void 0}},emits:["update:modelValue"],setup(e,{expose:a,emit:y}){const g=e,h=y,k=l(),x=s(g,"modelValue",h,{passive:!0});a({el:k});const V=S((()=>g.id));return(e,a)=>(t(),u("div",A,[g.label?(t(),u("label",{key:0,for:o(V),class:"text-muted-400 mb-1 inline-block cursor-pointer select-none font-sans text-sm"},r(g.label),9,N)):i("",!0),c("div",T,[d(c("input",m({id:o(V),ref_key:"inputRef",ref:k,"onUpdate:modelValue":a[0]||(a[0]=e=>p(x)?x.value=e:null),"true-value":g.trueValue,"false-value":g.falseValue},e.$attrs,{class:"peer absolute inset-0 z-20 h-full w-full cursor-pointer opacity-0",type:"checkbox"}),null,16,Y),[[n,o(x)]]),v(e.$slots,"default",f(b({value:o(x)})))])]))}}),F={class:"w-full"},H={key:0,class:"grid gap-5 xs:grid-cols-1 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5"},J={class:"grow space-y-2"},P={class:"flex justify-end mb-3 gap-2"},R={key:0,class:"grid gap-5 xs:grid-cols-1 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5"},W={class:"flex w-full items-center gap-2"},X=c("div",{class:"child text-muted-300 ms-auto"},[c("div",{class:"h-3 w-3 rounded-full bg-current"})],-1),Z=a({__name:"step-4",setup(a){const s=y(),{data:d}=q();d.value.exchange||s.push("/admin/exchange/wizard");const n=l({}),m=l({}),v=l(!0),f=l(""),b=g().public.apiPath;h((async()=>{v.value=!0;const e=await $fetch(`${b}/api/exchange/settings/fetch/markets`,{credentials:"include",headers:{"client-platform":"browser"},query:{exchange:d.value.exchange}});if("success"===e.status){if(n.value=e.data.result,Object.keys(d.value.symbols).length>0)for(const e in d.value.symbols)m.value[e]=!0;Object.keys(n.value).length>0&&(f.value=Object.keys(n.value)[0]),v.value=!1}})),k(m.value,(e=>{d.value.symbols=Object.keys(e).filter((a=>e[a])).reduce(((e,a)=>{const l=Object.keys(n.value).find((e=>n.value[e][a]));return l&&(d.value.symbols[a]?e[a]={...n.value[l][a],precision:d.value.symbols[a].precision,limits:d.value.symbols[a].limits,taker:d.value.symbols[a].taker,maker:d.value.symbols[a].maker}:e[a]=n.value[l][a]),e}),{})}));const S=x((()=>Object.keys(n.value).map((e=>({value:e,label:e})))));return(a,l)=>{const s=e,d=O,b=$,y=z,g=B,h=E,k=U;return t(),u("div",F,[V(s),o(v)?(t(),u("div",H,[(t(),u(_,null,j(40,(e=>V(b,{key:e,shape:"curved",class:"flex items-center gap-3 p-4"},{default:w((()=>[c("div",J,[V(d,{class:"h-3 w-4/5 rounded-lg"}),V(d,{class:"h-3 w-3/5 rounded-lg"})])])),_:2},1024))),64))])):i("",!0),V(k,{type:"box",tabs:o(S),modelValue:o(f),"onUpdate:modelValue":l[0]||(l[0]=e=>p(f)?f.value=e:null)},{tab:w((({activeValue:e})=>[c("div",P,[V(y,{onClick:a=>(e=>{for(const a in n.value[e])m.value[a]=!0})(e),color:"primary",type:"button"},{default:w((()=>[C(r(a.$t("Select All")),1)])),_:2},1032,["onClick"]),V(y,{onClick:a=>(e=>{for(const a in n.value[e])m.value[a]=!1})(e),color:"danger",type:"button"},{default:w((()=>[C(r(a.$t("Clear Selection")),1)])),_:2},1032,["onClick"])]),o(n)[e]?(t(),u("div",R,[(t(!0),u(_,null,j(o(n)[e],((e,a)=>(t(),u("div",{key:a},[V(h,{modelValue:o(m)[a],"onUpdate:modelValue":e=>o(m)[a]=e},{default:w((()=>[V(b,{shape:"rounded",class:"peer-checked:!border-primary-500 peer-checked:[&_.child]:!text-primary-500 border-2 p-4 opacity-50 peer-checked:opacity-100"},{default:w((()=>[c("div",W,[c("div",null,[V(g,{as:"h4",size:"sm",weight:"medium",lead:"none"},{default:w((()=>[C(r(a),1)])),_:2},1024)]),X])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])))),128))])):i("",!0)])),_:1},8,["tabs","modelValue"])])}}});export{Z as default};
