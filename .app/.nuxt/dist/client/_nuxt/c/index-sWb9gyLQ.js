import{a as e,r,J as t,E as a,G as s,b as l,f as o,q as n,t as i,e as d,u as c,n as u,w as p,x as g,an as v,o as y,y as b,ad as h,a4 as m,c as x,W as k,k as f,ae as w,S as $,l as T,L as O,M as B,F as E,B as M,a1 as C,af as L,O as A,X as _,C as S,Z as q,z as D,Y as G,ap as U,Q as W,cN as j,ac as I,as as P}from"../e/entry-8qgg5CL-.js";import{b as Y,a as R,_ as V}from"./TairoPagination.vue-mpKAEnSS.js";import{u as N}from"./market-Bq5Nv6Cu.js";import{u as F}from"./useEcosystem-9eBUNbsT.js";import{u as z}from"./socket-uQEypT2z.js";import{_ as K}from"./Chart.vue-YiyWNwaG.js";import{_ as J}from"./Chart.vue-6iSre37Q.js";import{b as H,c as Q,f as X,_ as Z,a as ee,g as re,d as te}from"./Info.vue-4naXgi2S.js";import{u as ae}from"./composables-Om4eAUXX.js";import{u as se}from"./user-nCE93tUp.js";import{u as le}from"./market-OqEbt887.js";import{u as oe}from"./wallet-n04aoRPe.js";import{u as ne}from"./useWallet-8iHzU2hV.js";import{u as ie}from"./useExchange-VMAYQu3P.js";import{_ as de}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{u as ce}from"./socket--t7FR4dG.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";import"./input-id-wZ-Ta08j.js";import"./investment-XmzczllC.js";import"./useAiTrading-wIB0sHyU.js";const ue={key:0,class:"flex text-xs text-white items-center space-x-1 px-1.5 h-full"},pe={class:"flex-1 shadow p-2 bg-white dark:bg-gray-800 rounded-md"},ge={class:"text-black dark:text-gray-100 flex-1 shadow p-2 bg-white dark:bg-gray-800 rounded-md"},ve={class:"text-gray-400 dark:text-gray-400"},ye={class:"text-black dark:text-gray-100 flex-1 shadow p-2 bg-white dark:bg-gray-800 rounded-md"},be={class:"text-gray-400 dark:text-gray-400"},he={class:"text-black dark:text-gray-100 flex-1 shadow p-2 bg-white dark:bg-gray-800 rounded-md"},me={class:"text-gray-400 dark:text-gray-400"},xe={key:1,class:"grid grid-cols-2 text-white items-center px-1.5 h-full"},ke={class:"col-span-1 flex flex-col"},fe={class:"group-hover:text-warning-400"},we={class:"flex gap-3 items-center justify-start"},$e={class:"col-span-1 grid grid-cols-2 text-xxs"},Te={class:"col-span-1"},Oe={class:"flex flex-col"},Be={class:"text-gray-400 dark:text-gray-400"},Ee={class:"text-gray-800 dark:text-gray-100"},Me={class:"flex flex-col"},Ce={class:"text-gray-400 dark:text-gray-400"},Le={class:"text-gray-800 dark:text-gray-100"},Ae={class:"col-span-1"},_e={class:"flex flex-col"},Se={class:"text-gray-400 dark:text-gray-400"},qe={class:"text-gray-800 dark:text-gray-100"},De={class:"flex flex-col"},Ge={class:"text-gray-400 dark:text-gray-400"},Ue={class:"text-gray-800 dark:text-gray-100"},We=b(e({__name:"Ticker",props:{currency:{type:String,required:!0},pair:{type:String,required:!0}},setup(e){const b=z(),h=e,m=N(),x=r({percentage:0,percentage_class:"",baseVolume:0,quoteVolume:0,high:0,low:0}),k=r([]);const f=new Worker(URL.createObjectURL(new Blob(["\n          self.onmessage = (event) => {\n  const rawData = event.data;\n  if (!rawData) {\n    return;\n  }\n\n  const watchTicker = JSON.parse(rawData);\n  if (!Array.isArray(watchTicker) || watchTicker.length === 0) {\n    return;\n  }\n\n  const latestTicker = watchTicker[watchTicker.length - 1];\n  const oldestTicker = watchTicker[0];\n\n  if (!latestTicker || !oldestTicker) {\n    return;\n  }\n\n  const last = latestTicker.close;\n  const baseVolume = latestTicker.volume;\n  const quoteVolume = latestTicker.volume * latestTicker.close;\n  const high = latestTicker.high;\n  const low = latestTicker.low;\n\n  // Calculate percentage based on the oldest and latest ticker data\n  const percentage = ((latestTicker.close - oldestTicker.open) / oldestTicker.open) * 100;\n\n  const processedData = {\n    last,\n    percentage,\n    baseVolume,\n    quoteVolume,\n    high,\n    low,\n  };\n\n  self.postMessage(JSON.stringify(processedData));\n};\n\n\n          "],{type:"text/javascript"})));t((()=>b.ticker),(e=>{e&&(0===k.value.length?k.value=[e,e]:1===k.value.length?k.value.push(e):2===k.value.length&&(k.value=[k.value[1],e]),f.postMessage(JSON.stringify(k.value)))}),{immediate:!0});const{getTicker:w}=F();a((async()=>{try{const e=await w(`${h.currency}/${h.pair}`);Array.isArray(e.data.result)&&e.data.result.length>0&&(k.value=e.data.result,f.postMessage(JSON.stringify(k.value)))}catch(e){console.error("API Error: ",e)}T(),window.addEventListener("beforeunload",$)})),t((()=>b.isSocketOpen),(e=>{e?T():O()})),s((()=>{$(),window.removeEventListener("beforeunload",$)}));const $=()=>{O(),f.terminate()},T=()=>{try{b.subscribe("exchange",{method:"ticker",symbol:`${h.currency}/${h.pair}`})}catch(e){console.error("Socket Error: ",e)}},O=()=>{b.unsubscribe("exchange",{method:"ticker",symbol:`${h.currency}/${h.pair}`})},B=(e,r)=>Number(e)>Number(r)?"text-success-500 dark:text-success-400":Number(e)<Number(r)?"text-danger-500 dark:text-danger-500":"text-gray-800 dark:text-gray-100";f.onmessage=e=>{const r=JSON.parse(e.data);m.bestAskClass=B(r.last,m.bestAsk)||"text-gray-800 dark:text-gray-200",m.bestAsk=Number(r.last),x.value.percentage=Number(r.percentage),x.value.percentage_class=B(Number(r.percentage),0),x.value.baseVolume=r.baseVolume,x.value.quoteVolume=r.quoteVolume,x.value.high=r.high,x.value.low=r.low};const E=r(!1);return(r,t)=>{const a=g,s=Y,b=v;return y(),l("div",{class:u(["bg-white dark:bg-gray-900 shadow relative h-full",{"rounded-r-lg":r.$viewport.isGreaterOrEquals("sm")}])},[r.$viewport.isGreaterOrEquals("xs")?(y(),l("div",ue,[o("div",{class:"flex-1 px-5 flex items-center text-lg relative text-gray-800 dark:text-gray-200 cursor-pointer",onClick:t[0]||(t[0]=e=>E.value=!0)},[n(i(e.currency)+"/"+i(e.pair)+" ",1),d(a,{name:`icons8:chevron-${c(E)?"up":"down"}-round`,class:"h-5 w-5 ml-2"},null,8,["name"])]),o("div",pe,[o("div",{class:u([c(m).bestAskClass||"text-gray-800 dark:text-gray-100","font-bold"])},i(c(m).bestAsk),3),o("div",null,[o("span",{class:u(c(x).percentage_class||"text-gray-800 dark:text-gray-100")},i(Number(c(x).percentage||0).toFixed(2))+" %",3)])]),o("div",ge,[o("div",ve,i(r.$t("Volume")),1),o("div",null,i(Number(c(x).baseVolume).toFixed(2)),1)]),o("div",ye,[o("div",be,i(r.$t("High")),1),o("div",null,i(c(x).high),1)]),o("div",he,[o("div",me,i(r.$t("Low")),1),o("div",null,i(c(x).low),1)])])):(y(),l("div",xe,[o("div",ke,[o("div",{class:"flex-1 flex items-center relative text-gray-800 dark:text-gray-200 cursor-pointer group",onClick:t[1]||(t[1]=e=>E.value=!0)},[o("span",fe,i(e.currency)+"/"+i(e.pair),1),d(a,{name:`icons8:chevron-${c(E)?"up":"down"}-round`,class:"h-4 w-4 ml-2 group-hover:text-warning-400"},null,8,["name"])]),o("div",we,[o("span",{class:u(["text-xl font-bold",c(m).bestAskClass||"text-gray-800 dark:text-gray-100"])},i(c(m).bestAsk),3),o("span",{class:u(["text-xs",c(x).percentage_class||"text-gray-800 dark:text-gray-100"])},i(c(x).percentage)+" % ",3)])]),o("div",$e,[o("div",Te,[o("div",Oe,[o("span",Be,i(r.$t("24h High"))+":",1),o("span",Ee,i(c(x).high),1)]),o("div",Me,[o("span",Ce,i(r.$t("24h Low"))+":",1),o("span",Le,i(c(x).low),1)])]),o("div",Ae,[o("div",_e,[o("span",Se,i(r.$t("24h Vol"))+" ("+i(e.currency)+"):",1),o("span",qe,i(c(x).baseVolume.toFixed(2)),1)]),o("div",De,[o("span",Ge,i(r.$t("24h Vol"))+" ("+i(e.pair)+"):",1),o("span",Ue,i(c(x).quoteVolume.toFixed(2)),1)])])])])),d(b,{open:c(E),size:"md",onClose:t[2]||(t[2]=e=>E.value=!1)},{default:p((()=>[d(s)])),_:1},8,["open"])],2)}}}),[["__scopeId","data-v-1ffec90e"]]),je={class:"bg-white dark:bg-gray-900 shadow h-full w-full rounded-r-lg"},Ie={class:"w-full bg-gray-100 dark:bg-gray-800 rounded-r-lg"},Pe={id:"myTab",class:"nf flex-cols -mb-px flex overflow-x-hidden text-center",role:"tablist"},Ye={role:"presentation"},Re=["aria-selected"],Ve={role:"presentation"},Ne=["aria-selected"],Fe={role:"presentation"},ze=["aria-selected"],Ke=e({__name:"ChartAndInfo",props:{currency:{type:String,required:!0},pair:{type:String,required:!0}},setup(e){const t=r("creatable"),a=e=>t.value===e,s=e=>{t.value=e};return(r,t)=>{const n=J,c=H,p=Q;return y(),l("div",je,[o("div",Ie,[o("ul",Pe,[o("li",Ye,[o("button",{id:"creatable-tab",class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",a("creatable")?"active-tab":"inactive-tab"]),type:"button",role:"tab","aria-controls":"creatable","aria-selected":!!a("creatable"),onClick:t[0]||(t[0]=e=>s("creatable"))},i(r.$t("Chart")),11,Re)]),o("li",Ve,[o("button",{id:"orderbook-tab",class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",a("orderbook")?"active-tab":"inactive-tab"]),type:"button",role:"tab","aria-controls":"orderbook","aria-selected":!!a("orderbook"),onClick:t[1]||(t[1]=e=>s("orderbook"))},i(r.$t("Orderbook")),11,Ne)]),o("li",Fe,[o("button",{id:"trades-tab",class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",a("trades")?"active-tab":"inactive-tab"]),type:"button",role:"tab","aria-controls":"trades","aria-selected":!!a("trades"),onClick:t[2]||(t[2]=e=>s("trades"))},i(r.$t("Trades")),11,ze)])])]),o("div",{class:u(["h-[calc(100%-2rem)] rounded-r-lg",{hidden:!a("creatable")}]),role:"tabpanel","aria-labelledby":"creatable-tab"},[d(n,{currency:e.currency,pair:e.pair},null,8,["currency","pair"])],2),o("div",{id:"orderbook",class:u(["h-[calc(100%-2rem)]",{hidden:!a("orderbook")}]),role:"tabpanel","aria-labelledby":"orderbook-tab"},[d(c,{currency:e.currency,pair:e.pair},null,8,["currency","pair"])],2),o("div",{id:"trades",class:u(["h-[calc(100%-2rem)]",{hidden:!a("trades")}]),role:"tabpanel","aria-labelledby":"trades-tab"},[d(p,{currency:e.currency,pair:e.pair},null,8,["currency","pair"])],2)])}}}),Je={key:0,class:"flex px-1 pt-1 h-10",role:"tablist"},He={class:"px-1 pt-1"},Qe=[w('<svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-71b5c352><path d="M3 8.5 h2 v5 h-2 v-5 z" fill="#5EEAD4" data-v-71b5c352></path><path d="M3 2.5 h2 v5 h-2 v-5 z" fill="#F43F5E" data-v-71b5c352></path><path d="M6 2.5 h7 v2 h-7 v-2 z" fill="currentColor" fill-opacity="0.9" data-v-71b5c352></path><path d="M6 5.5 h7 v2 h-7 v-2 z" fill="currentColor" fill-opacity="0.9" data-v-71b5c352></path><path d="M6 8.5 h7 v2 h-7 v-2 z" fill="currentColor" fill-opacity="0.9" data-v-71b5c352></path><path d="M6 11.5 h7 v2 h-7 v-2 z" fill="currentColor" fill-opacity="0.9" data-v-71b5c352></path></svg>',1)],Xe={class:"px-1 pt-1"},Ze=[w('<svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-71b5c352><path d="M3 2.5 h2 v11 h-2 v-5 z" fill="#5EEAD4" data-v-71b5c352></path><path d="M6 2.5 h7 v2 h-7 v-2 z" fill="currentColor" fill-opacity="0.9" data-v-71b5c352></path><path d="M6 5.5 h7 v2 h-7 v-2 z" fill="currentColor" fill-opacity="0.9" data-v-71b5c352></path><path d="M6 8.5 h7 v2 h-7 v-2 z" fill="currentColor" fill-opacity="0.9" data-v-71b5c352></path><path d="M6 11.5 h7 v2 h-7 v-2 z" fill="currentColor" fill-opacity="0.9" data-v-71b5c352></path></svg>',1)],er={class:"px-1 pt-1"},rr=[w('<svg width="24" height="24" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-71b5c352><path d="M3 2.5 h2 v11 h-2 v-5 z" fill="#F43F5E" data-v-71b5c352></path><path d="M6 2.5 h7 v2 h-7 v-2 z" fill="currentColor" fill-opacity="0.9" data-v-71b5c352></path><path d="M6 5.5 h7 v2 h-7 v-2 z" fill="currentColor" fill-opacity="0.9" data-v-71b5c352></path><path d="M6 8.5 h7 v2 h-7 v-2 z" fill="currentColor" fill-opacity="0.9" data-v-71b5c352></path><path d="M6 11.5 h7 v2 h-7 v-2 z" fill="currentColor" fill-opacity="0.9" data-v-71b5c352></path></svg>',1)],tr={class:"px-1 pt-1"},ar={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 16 16"},sr=["fill"],lr=["fill"],or={key:0,class:"orderbook-header"},nr={class:"text-start",style:{"padding-left":"5px"}},ir={key:0,class:"text-center"},dr={class:"text-end",style:{"padding-right":"5px"}},cr={class:"px-3 py-2"},ur={class:""},pr={key:0,class:"orderbook-header"},gr={class:"pl-2 text-start"},vr={key:0,class:"text-center"},yr={class:"text-end"},br=b(e({__name:"OrderBook",props:{currency:{type:String,required:!0},pair:{type:String,required:!0}},setup(e){const n=z(),{priceFormatter:p}=h(),g=m({showMoreAsks:!1,showMoreBids:!1,sideLength:20,best_ask:"",best_ask_icon:"",activeItem:"pills-graph",asks:Array.from({length:20},(()=>[0,0,0])),bids:Array.from({length:20},(()=>[0,0,0])),bestAsker:0,showDepth:!1}),v=r(null),b=ae(),w=x((()=>v.value?.clientWidth||0)),$=e,T=N(),O=x((()=>{const e=Number(T.selectedMarket?.metadata?.precision?.price)||4;return Math.abs(e)})),B=x((()=>{const e=Number(T.selectedMarket?.metadata?.precision?.amount)||4;return Math.abs(e)})),E=x((()=>g.asks.map((({price:e,volume:r,width:t})=>[p(e,O.value),p(r,B.value),p(e*r,O.value),t])))),M=x((()=>g.bids.map((({price:e,volume:r,width:t})=>[p(e,O.value),p(r,B.value),p(e*r,O.value),t])))),C=new Worker(URL.createObjectURL(new Blob(["\n  function calculateWidths(asks, bids, orderBookDivWidth,shouldReverseAsks,shouldInvertBidsWidth) {\n    let totalAsksVolume = asks.reduce((total, ask) => total + ask.volume, 0);\n    let totalBidsVolume = bids.reduce((total, bid) => total + bid.volume, 0);\n\n    let accumulatedAsksVolume = 0;\n    asks.forEach((ask, index) => {\n      accumulatedAsksVolume += ask.volume;\n      ask.width = (accumulatedAsksVolume / totalAsksVolume) * orderBookDivWidth;\n    });\n\n    let accumulatedBidsVolume = 0;\n    if (shouldInvertBidsWidth) {\n      bids.forEach((bid, index) => {\n        accumulatedBidsVolume += bid.volume;\n        bid.width = (accumulatedBidsVolume / totalBidsVolume) * orderBookDivWidth;\n      });\n    } else {\n      bids.reverse().forEach((bid, index) => {\n        accumulatedBidsVolume += bid.volume;\n        bid.width = (accumulatedBidsVolume / totalBidsVolume) * orderBookDivWidth;\n      });\n    }\n\n    // Reverse the asks to get the right order conditionally\n    if (shouldReverseAsks) {\n      asks.reverse();\n    }\n\n    return { asks, bids };\n  }\n\n  function processOrderData(data, orderBookDivWidth, shouldReverseAsks,shouldInvertBidsWidth) {\n    let factor = 0.1; // Change this as needed\n\n    let asks = data.asks.slice(0, data.sideLength);\n    let bids = data.bids.slice(0, data.sideLength);\n\n    // Convert bids and asks to the desired format\n    asks = asks.map(([price, volume]) => ({ price, volume, width: 0 }));\n    bids = bids.map(([price, volume]) => ({ price, volume, width: 0 }));\n\n    // Sort asks in ascending order by price and bids in descending order\n    asks.sort((a, b) => a.price - b.price);\n    bids.sort((a, b) => a.price - b.price);\n\n    const result = calculateWidths(asks, bids, orderBookDivWidth, shouldReverseAsks, shouldInvertBidsWidth);\n\n    return result;\n  }\n\n  self.onmessage = function (event) {\n    const data = JSON.parse(event.data);\n    const { orderbookData, orderBookDivWidth, shouldReverseAsks, shouldInvertBidsWidth } = data;\n\n    if (orderbookData === undefined || orderbookData === null) return;\n\n    const result = processOrderData(orderbookData, orderBookDivWidth, shouldReverseAsks, shouldInvertBidsWidth);\n    self.postMessage(result);\n  };\n    "],{type:"text/javascript"})));t((()=>n.orderbook),(e=>{if(!e)return;const r={orderbookData:e,orderBookDivWidth:w.value,shouldReverseAsks:b.isGreaterOrEquals("md"),shouldInvertBidsWidth:b.isLessThan("md")};C.postMessage(JSON.stringify(r))}),{immediate:!0}),C.onmessage=function(e){const{asks:r,bids:t}=e.data;for(let a=0;a<g.asks.length;a++)g.asks[a]=[0,0,0];for(let a=0;a<g.bids.length;a++)g.bids[a]=[0,0,0];for(let a=0;a<r.length;a++)g.asks[g.asks.length-1-a]=r[r.length-1-a];for(let a=0;a<t.length;a++)g.bids[a]=t[a];t.length>0&&(T.bestBid=t[0].price)},a((async()=>{T.selectedMarket||T.selectMarketBySymbol($.currency+"/"+$.pair),L(),q(),window.addEventListener("beforeunload",_)}));const L=()=>{n.isSocketOpen&&n.subscribe("exchange",{method:"orderbook",symbol:`${$.currency}/${$.pair}`,limit:g.sideLength})},A=()=>{n.unsubscribe("exchange",{method:"orderbook",symbol:`${$.currency}/${$.pair}`,limit:g.sideLength})};t((()=>n.isSocketOpen),(e=>{e?L():A()})),s((()=>{_(),window.removeEventListener("beforeunload",_)}));const _=()=>{A(),C.terminate()},S=r();function q(){S.value&&b.isGreaterOrEquals("md")&&S.value.scrollTo({top:S.value.scrollHeight,behavior:"smooth"})}const D=x((()=>({"h-[46%]":!g.showMoreBids&&!g.showMoreAsks&&!g.showDepth&&b.isGreaterOrEquals("md"),"h-[92%]":g.showMoreAsks&&b.isGreaterOrEquals("md"),"h-[50%]":g.showDepth&&b.isGreaterOrEquals("md"),"h-0":g.showMoreBids,"h-full":b.isLessThan("md")}))),G=x((()=>({"h-[8%]":!g.showMoreBids&&!g.showMoreAsks&&!g.showDepth,hidden:g.showDepth}))),U=x((()=>({"h-[46%]":!g.showMoreBids&&!g.showMoreAsks&&!g.showDepth&&b.isGreaterOrEquals("md"),"h-[92%]":g.showMoreBids&&b.isGreaterOrEquals("md"),"h-[50%]":g.showDepth&&b.isGreaterOrEquals("md"),"h-0":g.showMoreAsks,"rounded-b-lg h-full":b.isLessThan("md")&&b.isGreaterOrEquals("xs")})));return(e,r)=>{const t=X;return y(),l("div",{class:u(["h-full w-full bg-white dark:bg-gray-900 shadow",{"rounded-lg":e.$viewport.isGreaterOrEquals("md")}]),ref_key:"orderBookDiv",ref:v},[e.$viewport.isGreaterOrEquals("md")?(y(),l("ul",Je,[o("li",He,[o("button",{class:u({"text-gray-300 dark:text-gray-600":c(g).showMoreAsks&&c(g).showMoreBids||c(g).showDepth||c(g).showMoreAsks||c(g).showMoreBids}),onClick:r[0]||(r[0]=k((e=>(g.showMoreBids=!1,g.showMoreAsks=!1,g.showDepth=!1,void q())),["prevent"]))},Qe,2)]),o("li",Xe,[o("button",{class:u({"text-gray-300 dark:text-gray-600":!c(g).showMoreBids}),onClick:r[1]||(r[1]=k((e=>(g.showMoreBids=!0,g.showMoreAsks=!1,void(g.showDepth=!1))),["prevent"]))},Ze,2)]),o("li",er,[o("button",{class:u({"text-gray-300 dark:text-gray-600":!c(g).showMoreAsks}),onClick:r[2]||(r[2]=k((e=>(g.showMoreBids=!1,g.showMoreAsks=!0,g.showDepth=!1,void q())),["prevent"]))},rr,2)]),o("li",tr,[o("button",{onClick:r[3]||(r[3]=k((e=>(g.showDepth=!0,g.showMoreBids=!1,g.showMoreAsks=!1,void q())),["prevent"])),class:u({"text-gray-300 dark:text-gray-600":!c(g).showDepth})},[(y(),l("svg",ar,[o("polygon",{points:"2.5,2.5 11.5,2.5 11.5,7.9",fill:c(g).showDepth?"#F43F5E":"currentColor"},null,8,sr),o("polygon",{points:"2.5,14 11.5,14 11.5,8.1",fill:c(g).showDepth?"#5EEAD4":"currentColor"},null,8,lr)]))],2)])])):f("",!0),o("div",{class:u(["OrderbookGrid flex xs:flex-row md:flex-col justify-between",{"rounded-b-lg":e.$viewport.isGreaterOrEquals("sm"),"h-[calc(100%)]":e.$viewport.isGreaterOrEquals("sm")&&e.$viewport.isLessThan("md"),"h-[calc(100%-2.5rem)]":e.$viewport.isGreaterOrEquals("md"),"h-full":e.$viewport.isLessThan("sm")}]),ref_key:"orderBookDiv",ref:v},[o("div",{class:u(["OrderbookAsks flex flex-col",c(D)])},[c(g).showMoreBids||c(g).showDepth?f("",!0):(y(),l("div",or,[o("div",nr,i(e.$t("Price")),1),e.$viewport.isGreaterOrEquals("xs")?(y(),l("div",ir,i(e.$t("Amount")),1)):f("",!0),o("div",dr,i(e.$t("Total")),1)])),o("div",{class:"orderbook-content overflow-y-scroll no-scrollbar",ref_key:"AsksBody",ref:S},[d(t,{data:c(E),type:"ask","show-less":c(g).showMoreBids,"show-depth":c(g).showDepth},null,8,["data","show-less","show-depth"])],512)],2),!c(g).showDepth&&e.$viewport.isGreaterOrEquals("md")?(y(),l("div",{key:0,class:u(["marketPrice text-sm",c(G)])},[o("div",cr,[o("span",ur,i(e.$t("Market Price"))+": ",1),o("span",{class:u([c(T).bestAskClass,"font-bold"])},i(c(T).bestAsk),3)])],2)):f("",!0),o("div",{class:u(["OrderbookBids flex flex-col",c(U)])},[c(g).showMoreBids&&!c(g).showMoreAsks&&!c(g).showDepth||e.$viewport.isLessThan("md")?(y(),l("div",pr,[o("div",gr,i(e.$t("Price")),1),e.$viewport.isGreaterOrEquals("xs")?(y(),l("div",vr,i(e.$t("Amount")),1)):f("",!0),o("div",yr,i(e.$t("Total")),1)])):f("",!0),o("div",{class:u(["orderbook-content overflow-y-scroll no-scrollbar",{"rounded-b-lg":e.$viewport.isGreaterOrEquals("md")}])},[d(t,{data:c(M),type:"bid","show-less":c(g).showMoreAsks,"show-depth":c(g).showDepth},null,8,["data","show-less","show-depth"])],2)],2)],2)],2)}}}),[["__scopeId","data-v-71b5c352"]]),hr={class:"group relative ml-2 mr-5"},mr=["disabled"],xr={class:"rc-slider-mark absolute top-6 left-0 w-full text-xs"},kr=["onClick"],fr={class:"rc-slider-step absolute w-full bg-transparent"},wr=["onClick"],$r=b(e({__name:"range",props:{min:{type:Number,default:0},max:{type:Number,default:100},isLeverage:{type:Boolean,default:!1},currency:{type:String,default:""},pair:{type:String,default:""}},setup(e){const r=N(),t=$(),a=e,s=x((()=>a.max-a.min)),n=x((()=>[a.min,...Array.from({length:4},((e,r)=>25*(r+1)))])),d=x((()=>{const e=r.order,a=r.bestAsk;return!t.isLoggedIn||("MARKET"!==e.type&&(0===e.price||null===e.price)||"MARKET"===e.type&&(null===a||0===a))})),p=e=>{r.order.percentage=Math.round(e/a.max*100)},g=()=>{r.order.percentage=Math.round(r.order.percentage)},v=x((()=>({background:`linear-gradient(to right, #01bc8d 0%, #01bc8d ${r.order.percentage}%, rgb(200 200 200 / 0.2) ${r.order.percentage}%, rgb(200 200 200 / 0.2) 100%)`}))),b=e=>r.order.percentage>=e/s.value*100&&0!==r.order.percentage?"text-gray-800 dark:text-gray-200":"text-gray-400 dark:text-gray-500",h=e=>{const r=e===a.max?"- 10px":e!==a.min?"- 4px":"";return{left:`calc(${e/s.value*100}% ${r})`}},m=e=>r.order.percentage>=e/s.value*100,f=e=>({left:`calc(${e/s.value*100}%)`});return(e,t)=>(y(),l("div",hr,[T(o("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c(r).order.percentage=e),disabled:c(d),type:"range",class:"rc-slider appearance-none relative w-full h-1 rounded-sm transition-opacity duration-200 p-0 m-0",style:B(c(v)),onChange:g},null,44,mr),[[O,c(r).order.percentage]]),o("div",xr,[(y(!0),l(E,null,M(c(n),(e=>(y(),l("div",{key:e,class:u(["rc-slider-mark-text absolute inline align-middle text-center cursor-pointer",b(e)]),style:B(h(e)),onClick:k((r=>p(e)),["prevent"])},i((e=>`${e}${a.isLeverage?"x":"%"}`)(e)),15,kr)))),128))]),o("div",fr,[(y(!0),l(E,null,M(c(n),(e=>(y(),l("div",{key:e,class:u(["rc-slider-dot absolute bottom-1 w-2.5 h-2.5 border-2 border-gray-400 bg-white cursor-pointer rounded-full align-middle",{"border-green-500":m(e)}]),style:B(f(e)),onClick:k((r=>p(e)),["prevent"])},null,14,wr)))),128))])]))}}),[["__scopeId","data-v-576ad9ff"]]),Tr={key:0,class:"flex w-full relative px-2 py-3"},Or={class:"text-md font-heading"},Br={class:"text-md font-heading"},Er={key:0,class:"w-full bg-gray-100 dark:bg-gray-800 rounded-tl-lg"},Mr={id:"myTab",class:"nf flex-cols -mb-px flex overflow-x-hidden text-center rounded-tl-lg",role:"tablist"},Cr={role:"presentation"},Lr=["aria-selected"],Ar={role:"presentation"},_r=["aria-selected"],Sr={class:"space-y-2 pt-2"},qr={key:0,class:"flex w-full relative"},Dr={class:"text-md font-heading"},Gr={class:"text-md font-heading"},Ur={class:"flex justify-between px-2 text-xs"},Wr={class:"text-gray-500 dark:text-gray-400"},jr={class:"text-gray-700 dark:text-gray-200"},Ir={class:"px-2"},Pr={key:"marketBestPrice",style:{inset:"0px",border:"1px dashed rgba(243, 243, 243, 0.08)"},class:"text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-2 rounded-md text-sm flex text-center justify-center"},Yr={key:"orderRange",class:"pb-10"},Rr=o("hr",{class:"border-gray-200 dark:border-gray-700"},null,-1),Vr={class:"flex justify-between px-2 text-xs",key:"fees"},Nr={class:"text-gray-500 dark:text-gray-400"},Fr={class:"flex justify-between px-2 text-xs",key:"total"},zr={class:"text-gray-500 dark:text-gray-400"},Kr={class:"px-2"},Jr={key:0},Hr={key:1,class:"text-lg font-heading"},Qr={key:1,style:{inset:"0px",border:"1px dashed rgba(243, 243, 243, 0.08)"},class:"text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-2 rounded-md text-sm flex text-center justify-center"},Xr=e({__name:"Order",props:{currency:{type:String,required:!0},pair:{type:String,required:!0}},setup(e){const s=le(),g=e,v=N(),b=$(),m=r(!1),k=se(),w=x((()=>k.wallets)),{createWallet:O,createOrder:B,getTokens:E}=F();async function M(e){try{const r=await O(e);w.value[g.currency]=r.data.result}catch(r){m.value=!0}}const q=r([]),D=x((()=>{const e=Number(v.selectedMarket?.metadata?.precision?.amount)||4;return Math.abs(e)})),G=r(!1);a((async()=>{b.isLoggedIn&&(G.value=!0,0===k.wallets.length&&await k.fetchWallets(!1,!1),(void 0===w.value[g.currency]||null===w.value[g.currency]||w.value[g.currency]&&"ECO"!==w.value[g.currency].type)&&await M(g.currency),(void 0===w.value[g.pair]||null===w.value[g.pair]||w.value[g.pair]&&"ECO"!==w.value[g.pair].type)&&await M(g.pair),G.value=!1);const e=await E();"success"===e.status&&(q.value=e.data.result)}));const U=x((()=>w.value[g.currency]||null)),W=x((()=>w.value[g.pair]||null)),j=r("SPOT"),I=e=>j.value===e,P=e=>{j.value=e},Y=x((()=>v.order.type)),R=e=>Y.value===e,V=e=>{v.order.type=e,v.order.price="MARKET"===Y.value?0:"BUY"===Q.value?de.value:ce.value},z=r(!1),K=ae(),J=r(""),H=e=>{K.isLessThan("sm")&&(J.value===e?(z.value=!z.value,J.value=z.value?e:""):(z.value=!0,J.value=e)),X(e)},Q=x((()=>v.order.side)),X=e=>{v.order.side=e,v.order.amount=0,v.order.price="MARKET"===Y.value?0:"BUY"===Q.value?de.value:ce.value,v.order.percentage=0},ee=r(!1),re=x((()=>v.selectedMarket?.metadata?.maker||0)),te=x((()=>v.selectedMarket?.metadata?.taker||0)),oe=x((()=>v.order?.amount||0)),ne=x((()=>v.selectedMarket?.metadata?.limits?.amount?.min||0)),ie=x((()=>v.selectedMarket?.metadata?.limits?.cost?.min||0)),de=x((()=>v.bestAsk)),ce=x((()=>v.bestBid)),ue=x((()=>R("MARKET")?"BUY"===v.order.side?de.value:ce.value:v.order.price||0));t((()=>v.order.percentage),(e=>{if(!b.isLoggedIn)return;const r="BUY"===v.order.side,t=w.value[r?g.pair:g.currency]?.balance||0,a=r?t/ue.value*(e/100):t*(e/100);v.order.amount=Number(a.toFixed(D.value))}));const pe=x((()=>{const e="BUY"===Q.value?te.value:re.value;return oe.value*ue.value*e/100})),ge=x((()=>"BUY"===Q.value?oe.value+pe.value:oe.value*ue.value-pe.value)),ve=x((()=>"BUY"===Q.value?oe.value*ue.value*(1+te.value/100):oe.value)),{toast:ye}=h();async function be(){if(!b.isLoggedIn)return void ye.dangerText("Please login to place an order");if(R("LIMIT")&&0===v.order.price)return void ye.dangerText("Please enter a price");if(0===v.order.amount)return void ye.dangerText("Please enter an amount");if("BUY"===Q.value?ve.value>W.value.balance:ve.value>U.value.balance)return void ye.dangerText("Insufficient balance");const e=R("MARKET")?"BUY"===Q.value?de.value:ce.value:v.order.price;if(0===e)return void ye.dangerText("Please enter a price");const r={symbol:`${g.currency}/${g.pair}`,amount:v.order.amount,price:e,type:v.order.type,side:v.order.side};ee.value=!0;try{const e=await B(r.symbol,r.type,r.side,r.amount,r.price);ye.response(e),"success"===e.status&&(v.order.amount=0,v.order.percentage=0,s.orders.push(e.data.result),await k.fetchWallets())}catch(t){ye.danger(t)}ee.value=!1}const he=r(!0);return(r,t)=>{const a=_,s=Z,g=$r,h=S;return y(),l("div",{class:u(["bg-white shadow w-full",{"rounded-l-lg h-full dark:bg-gray-900":r.$viewport.isGreaterOrEquals("sm"),"absolute bottom-0 dark:bg-gray-800":r.$viewport.isLessThan("sm"),"h-[400px]":c(z)&&r.$viewport.isLessThan("sm")}])},[r.$viewport.isLessThan("sm")?(y(),l("div",Tr,[d(a,{shape:"straight",shadow:"flat",class:"w-1/2 transition-all duration-300 translate-x-2 hover:translate-x-3 rounded-tl-md rounded-bl-md",color:"BUY"===c(J)||r.$viewport.isLessThan("sm")&&""===c(J)?"success":"muted",onClick:t[0]||(t[0]=e=>H("BUY")),style:{"clip-path":"polygon(0 0, 100% 0, 85% 100%, 0% 100%)"}},{default:p((()=>[o("span",Or,i(r.$t("Buy")),1)])),_:1},8,["color"]),d(a,{shape:"straight",shadow:"flat",class:"w-1/2 transition-all duration-300 -translate-x-2 hover:-translate-x-3 rounded-tr-md rounded-br-md",color:"SELL"===c(J)||r.$viewport.isLessThan("sm")&&""===c(J)?"danger":"muted",onClick:t[1]||(t[1]=e=>H("SELL")),style:{"clip-path":"polygon(15% 0, 100% 0, 100% 100%, 0% 100%)"}},{default:p((()=>[o("span",Br,i(r.$t("Sell")),1)])),_:1},8,["color"])])):f("",!0),T(o("div",{class:u(["h-full dark:bg-gray-900",{"pt-1":r.$viewport.isLessThan("sm")}])},[r.$viewport.isGreaterOrEquals("sm")&&!c(he)?(y(),l("div",Er,[o("ul",Mr,[o("li",Cr,[o("button",{id:"spot-tab",class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",I("SPOT")?"active-tab":"inactive-tab"]),type:"button",role:"tab","aria-controls":"spot","aria-selected":!!I("SPOT"),onClick:t[2]||(t[2]=e=>P("SPOT"))},i(r.$t("Spot")),11,Lr)]),o("li",Ar,[o("button",{id:"grid-tab",class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",I("GRID")?"active-tab":"inactive-tab"]),type:"button",role:"tab","aria-controls":"grid","aria-selected":!!I("GRID"),onClick:t[3]||(t[3]=e=>P("GRID"))},i(r.$t("Grid")),11,_r)])])])):f("",!0),o("div",{id:"spot",class:u(["relative",{hidden:!I("SPOT"),"pt-1 h-[calc(100%-32px)] ":!c(he),"rounded-tl-lg h-full ":c(he)}]),role:"tabpanel","aria-labelledby":"spot-tab"},[o("div",{class:u(["w-full bg-gray-100 dark:bg-gray-800 nf flex-cols -mb-px flex overflow-x-hidden text-center",{"rounded-tl-lg":c(he)}])},[o("button",{class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",R("MARKET")?"active-tab active-sub-tab":"inactive-tab"]),type:"button",onClick:t[4]||(t[4]=e=>V("MARKET"))},i(r.$t("Market")),3),o("button",{class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",R("LIMIT")?"active-tab active-sub-tab":"inactive-tab"]),type:"button",onClick:t[5]||(t[5]=e=>V("LIMIT"))},i(r.$t("Limit")),3)],2),o("div",Sr,[r.$viewport.isGreaterOrEquals("sm")?(y(),l("div",qr,[d(a,{shape:"straight",shadow:"flat",class:"w-1/2 transition-all duration-300 translate-x-2 hover:translate-x-3 rounded-tl-md rounded-bl-md",color:"BUY"===c(Q)?"success":"muted",onClick:t[6]||(t[6]=e=>X("BUY")),style:{"clip-path":"polygon(0 0, 100% 0, 85% 100%, 0% 100%)"}},{default:p((()=>[o("span",Dr,i(r.$t("Buy")),1)])),_:1},8,["color"]),d(a,{shape:"straight",shadow:"flat",class:"w-1/2 transition-all duration-300 -translate-x-2 hover:-translate-x-3 rounded-tr-md rounded-br-md",color:"SELL"===c(Q)?"danger":"muted",onClick:t[7]||(t[7]=e=>X("SELL")),style:{"clip-path":"polygon(15% 0, 100% 0, 100% 100%, 0% 100%)"}},{default:p((()=>[o("span",Gr,i(r.$t("Sell")),1)])),_:1},8,["color"])])):f("",!0),o("div",Ur,[o("span",Wr,i(r.$t("Available")),1),o("span",jr,i("BUY"===c(Q)?(c(W)?.balance.toFixed(c(D)||2)||0)+" "+e.pair:(c(U)?.balance.toFixed(c(D)||2)||0)+" "+e.currency),1)]),o("div",Ir,[d(L,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full duration-300","enter-to-class":"opacity-100 translate-x-0 duration-300","leave-active-class":"transform-gpu duration-300","leave-from-class":"opacity-100 translate-x-0 duration-300","leave-to-class":"opacity-0 -translate-x-full duration-300"},{default:p((()=>[R("MARKET")?(y(),l("div",Pr,i(r.$t("Best Market Price")),1)):(y(),A(s,{key:"limitPrice",modelValue:c(v).order.price,"onUpdate:modelValue":t[8]||(t[8]=e=>c(v).order.price=e),shape:"rounded",autocomplete:"off",label:"Price",placeholder:"Price",type:"number",inputText:e.pair,min:"0"},null,8,["modelValue","inputText"])),d(s,{modelValue:c(v).order.amount,"onUpdate:modelValue":t[9]||(t[9]=e=>c(v).order.amount=e),key:"amount",shape:"rounded",autocomplete:"off",placeholder:"Amount",label:"Amount",type:"number",inputText:e.currency,min:c(ne),step:c(ne)},null,8,["modelValue","inputText","min","step"]),o("div",Yr,[d(g,{range:"0",min:0,max:100,isLeverage:!1,currency:e.currency,pair:e.pair},null,8,["currency","pair"])])])),_:1})])]),o("div",{class:u(["w-full absolute space-y-2",{"bottom-20":r.$viewport.isLessThan("sm"),"bottom-2":r.$viewport.isGreaterOrEquals("sm")}])},[Rr,o("div",Vr,[o("span",Nr,i("BUY"===c(Q)?"Taker":"Maker")+" "+i(r.$t("Fees")),1),(y(),l("span",{class:"text-gray-700 dark:text-gray-200",key:c(Q)},i("BUY"===c(Q)?c(te):c(re))+"%",1))]),o("div",Fr,[o("span",zr,i(r.$t("Cost")),1),(y(),l("span",{key:c(Q),class:u({"text-success-500":"BUY"===c(Q)?c(ve)>=c(ie):c(ge)>=c(ie),"text-danger-500":"BUY"===c(Q)?c(ve)<c(ie):c(ge)<c(ie),"text-gray-700 dark:text-gray-300":0===c(ve)})},i(c(ve).toFixed(c(D)))+" "+i("BUY"===c(Q)?e.pair:e.currency),3))]),o("div",Kr,[c(b).isLoggedIn?(y(),A(a,{disabled:!c(ee)&&c(w)[e.currency]&&c(w)[e.pair]&&"BUY"!==c(Q)?c(ge)<c(ie):c(ve)<c(ie),loading:c(ee)||c(G),key:"buyButton",shape:"rounded",shadow:"flat",class:"w-full",color:c(w)[e.currency]&&c(w)[e.pair]&&"BUY"===c(Q)?"success":"danger",onClick:be},{default:p((()=>[c(w)[e.currency]&&c(w)[e.pair]?(y(),l("span",Hr,i("BUY"===c(Q)?"Buy":"Sell"),1)):(y(),l("span",Jr,i(r.$t("Wallet Generation Failed")),1))])),_:1},8,["disabled","loading","color"])):(y(),l("div",Qr,[d(h,{class:"text-warning-500 mr-1",to:"/login"},{default:p((()=>[n(i(r.$t("Login")),1)])),_:1}),n(" "+i(r.$t("or"))+" ",1),d(h,{class:"text-warning-500 ml-1",to:"/register"},{default:p((()=>[n(i(r.$t("Register")),1)])),_:1})]))])],2)],2)],2),[[C,c(z)||r.$viewport.isGreaterOrEquals("sm")]])],2)}}}),Zr={key:0,class:"flex w-full relative px-2 py-3"},et={class:"text-md font-heading"},rt={class:"text-md font-heading"},tt={key:0,class:"w-full bg-gray-100 dark:bg-gray-800 rounded-tl-lg"},at={id:"myTab",class:"nf flex-cols -mb-px flex overflow-x-hidden text-center rounded-tl-lg",role:"tablist"},st={role:"presentation"},lt=["aria-selected"],ot={role:"presentation"},nt=["aria-selected"],it={class:"space-y-2 pt-2"},dt={key:0,class:"flex w-full relative"},ct={class:"text-md font-heading"},ut={class:"text-md font-heading"},pt={class:"flex justify-between px-2 text-xs"},gt={class:"text-gray-500 dark:text-gray-400"},vt={class:"text-gray-700 dark:text-gray-200"},yt={class:"px-2 space-y-2"},bt={key:"marketBestPrice",style:{inset:"0px",border:"1px dashed rgba(243, 243, 243, 0.08)"},class:"text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-2 rounded-md text-sm flex text-center justify-center"},ht={key:"orderRange",class:"pb-10"},mt=o("hr",{class:"border-gray-200 dark:border-gray-700"},null,-1),xt={class:"flex justify-between px-2 text-xs",key:"fees"},kt={class:"text-gray-500 dark:text-gray-400"},ft={class:"flex justify-between px-2 text-xs",key:"total"},wt={class:"text-gray-500 dark:text-gray-400"},$t={class:"px-2"},Tt={key:0},Ot={key:1},Bt={key:2,class:"text-lg font-heading"},Et={key:1,style:{inset:"0px",border:"1px dashed rgba(243, 243, 243, 0.08)"},class:"text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-2 rounded-md text-sm flex text-center justify-center"},Mt=e({__name:"Order",props:{currency:{type:String,required:!0},pair:{type:String,required:!0}},setup(e){const s=e,g=q(),v=null!==g.public.appActiveExchange&&void 0!==g.public.appActiveExchange&&""!==g.public.appActiveExchange?g.public.appActiveExchange:null,b=N(),m=$(),k=r(!1),w=oe(),{createSpotWallet:O}=ne(),B=x((()=>{const e=Number(b.selectedMarket?.metadata?.precision?.amount)||4;return Math.abs(e)})),E=r(!1);a((async()=>{if(m.isLoggedIn){if(E.value=!0,(!w.currencyWallet||w.currencyWallet&&w.currencyWallet.currency!==s.currency)&&(await w.fetchCurrencyWallet(s.currency,"SPOT"),!w.currencyWallet))try{const e=await O(s.currency);"success"===e.status&&(w.currencyWallet=e.data.result)}catch(e){k.value=!0}if((!w.pairWallet||w.pairWallet&&w.pairWallet.currency!==s.pair)&&(await w.fetchPairWallet(s.pair,"SPOT"),!w.pairWallet))try{const e=await O(s.pair);"success"===e.status&&(w.pairWallet=e.data.result)}catch(e){k.value=!0}E.value=!1}}));const M=x((()=>w.currencyWallet)),D=x((()=>w.pairWallet)),G=r("SPOT"),U=e=>G.value===e,W=e=>{G.value=e},j=x((()=>b.order.type)),I=e=>j.value===e,P=e=>{b.order.type=e,b.order.price="MARKET"===j.value?0:"BUY"===z.value?te.value:se.value},Y=r(!1),R=ae(),V=r(""),F=e=>{R.isLessThan("sm")&&(V.value===e?(Y.value=!Y.value,V.value=Y.value?e:""):(Y.value=!0,V.value=e)),K(e)},z=x((()=>b.order.side)),K=e=>{b.order.side=e,b.order.amount=0,b.order.price="MARKET"===j.value?0:"BUY"===z.value?te.value:se.value,b.order.percentage=0},J=r(!1),H=x((()=>b.selectedMarket?.metadata?.maker||0)),Q=x((()=>b.selectedMarket?.metadata?.taker||0)),X=x((()=>b.order?.amount||0)),ee=x((()=>b.selectedMarket?.metadata?.limits?.amount?.min||0)),re=x((()=>b.selectedMarket?.metadata?.limits?.cost?.min||0)),te=x((()=>b.bestAsk)),se=x((()=>b.bestBid)),le=x((()=>I("MARKET")?"BUY"===b.order.side?te.value:se.value:b.order.price||0));t((()=>b.order.percentage),(e=>{if(!m.isLoggedIn)return;const r="BUY"===b.order.side,t=(r?w.pairWallet?.balance:w.currencyWallet?.balance)||0,a=r?t/le.value*(e/100):t*(e/100);b.order.amount=Number(a.toFixed(B.value))}));const de=x((()=>{const e="BUY"===z.value?Q.value:H.value,r=X.value*e/100;return"BUY"===z.value?r:r*le.value})),ce=x((()=>"BUY"===z.value?X.value+de.value:X.value*le.value-de.value)),ue=x((()=>{const e=I("MARKET")?"BUY"===z.value?te.value:se.value:b.order.price||0;return"BUY"===z.value?ce.value*e:X.value})),{createOrder:pe}=ie(),{toast:ge}=h();async function ve(){if(!m.isLoggedIn)return void ge.dangerText("Please login to place an order");if(I("LIMIT")&&0===b.order.price)return void ge.dangerText("Please enter a price");if(0===b.order.amount)return void ge.dangerText("Please enter an amount");if("BUY"===z.value?ue.value>D.value?.balance:ue.value>M.value?.balance)return void ge.dangerText("Insufficient balance");const e={price:I("MARKET")?"BUY"===z.value?te.value:se.value:b.order.price,amount:b.order.amount,type:b.order.type,side:b.order.side,symbol:`${s.currency}/${s.pair}`};J.value=!0;try{const r=await pe(e.symbol,e.type,e.side,e.amount,e.price);ge.response(r),"success"===r.status&&(b.order.amount=0,b.order.percentage=0,b.orders.push(r.data.result.order),await w.fetchCurrencyWallet(s.currency,"SPOT"),await w.fetchPairWallet(s.pair,"SPOT"))}catch(r){ge.danger(r)}J.value=!1}const ye=r(!0);return(r,t)=>{const a=_,s=Z,g=$r,h=S;return y(),l("div",{class:u(["bg-white shadow w-full",{"rounded-l-lg h-full dark:bg-gray-900":r.$viewport.isGreaterOrEquals("sm"),"absolute bottom-0 dark:bg-gray-800":r.$viewport.isLessThan("sm"),"h-[400px]":c(Y)&&r.$viewport.isLessThan("sm")}])},[r.$viewport.isLessThan("sm")?(y(),l("div",Zr,[d(a,{shape:"straight",shadow:"flat",class:"w-1/2 transition-all duration-300 translate-x-2 hover:translate-x-3 rounded-tl-md rounded-bl-md",color:"BUY"===c(V)||r.$viewport.isLessThan("sm")&&""===c(V)?"success":"muted",onClick:t[0]||(t[0]=e=>F("BUY")),style:{"clip-path":"polygon(0 0, 100% 0, 85% 100%, 0% 100%)"}},{default:p((()=>[o("span",et,i(r.$t("Buy")),1)])),_:1},8,["color"]),d(a,{shape:"straight",shadow:"flat",class:"w-1/2 transition-all duration-300 -translate-x-2 hover:-translate-x-3 rounded-tr-md rounded-br-md",color:"SELL"===c(V)||r.$viewport.isLessThan("sm")&&""===c(V)?"danger":"muted",onClick:t[1]||(t[1]=e=>F("SELL")),style:{"clip-path":"polygon(15% 0, 100% 0, 100% 100%, 0% 100%)"}},{default:p((()=>[o("span",rt,i(r.$t("Sell")),1)])),_:1},8,["color"])])):f("",!0),T(o("div",{class:u(["h-full dark:bg-gray-900",{"pt-1":r.$viewport.isLessThan("sm"),"rounded-l-lg":r.$viewport.isGreaterOrEquals("sm")}])},[r.$viewport.isGreaterOrEquals("sm")&&!c(ye)?(y(),l("div",tt,[o("ul",at,[o("li",st,[o("button",{id:"spot-tab",class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",U("SPOT")?"active-tab":"inactive-tab"]),type:"button",role:"tab","aria-controls":"spot","aria-selected":!!U("SPOT"),onClick:t[2]||(t[2]=e=>W("SPOT"))},i(r.$t("Spot")),11,lt)]),o("li",ot,[o("button",{id:"grid-tab",class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",U("GRID")?"active-tab":"inactive-tab"]),type:"button",role:"tab","aria-controls":"grid","aria-selected":!!U("GRID"),onClick:t[3]||(t[3]=e=>W("GRID"))},i(r.$t("Grid")),11,nt)])])])):f("",!0),o("div",{id:"spot",class:u(["relative",{hidden:!U("SPOT"),"pt-1 h-[calc(100%-32px)] ":!c(ye),"rounded-tl-lg h-full ":c(ye)}]),role:"tabpanel","aria-labelledby":"spot-tab"},[o("div",{class:u(["w-full bg-gray-100 dark:bg-gray-800 nf flex-cols -mb-px flex overflow-x-hidden text-center",{"rounded-tl-lg":c(ye)&&r.$viewport.isGreaterOrEquals("sm")}])},[o("button",{class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",I("MARKET")?"active-tab active-sub-tab":"inactive-tab"]),type:"button",onClick:t[4]||(t[4]=e=>P("MARKET"))},i(r.$t("Market")),3),o("button",{class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",I("LIMIT")?"active-tab active-sub-tab":"inactive-tab"]),type:"button",onClick:t[5]||(t[5]=e=>P("LIMIT"))},i(r.$t("Limit")),3)],2),o("div",it,[r.$viewport.isGreaterOrEquals("sm")?(y(),l("div",dt,[d(a,{shape:"straight",shadow:"flat",class:"w-1/2 transition-all duration-300 translate-x-2 hover:translate-x-3 rounded-tl-md rounded-bl-md",color:"BUY"===c(z)?"success":"muted",onClick:t[6]||(t[6]=e=>K("BUY")),style:{"clip-path":"polygon(0 0, 100% 0, 85% 100%, 0% 100%)"}},{default:p((()=>[o("span",ct,i(r.$t("Buy")),1)])),_:1},8,["color"]),d(a,{shape:"straight",shadow:"flat",class:"w-1/2 transition-all duration-300 -translate-x-2 hover:-translate-x-3 rounded-tr-md rounded-br-md",color:"SELL"===c(z)?"danger":"muted",onClick:t[7]||(t[7]=e=>K("SELL")),style:{"clip-path":"polygon(15% 0, 100% 0, 100% 100%, 0% 100%)"}},{default:p((()=>[o("span",ut,i(r.$t("Sell")),1)])),_:1},8,["color"])])):f("",!0),o("div",pt,[o("span",gt,i(r.$t("Available")),1),o("span",vt,i("BUY"===c(z)?(c(D)?.balance.toFixed(c(B)||2)||0)+" "+e.pair:(c(M)?.balance.toFixed(c(B)||2)||0)+" "+e.currency),1)]),o("div",yt,[d(L,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full duration-300","enter-to-class":"opacity-100 translate-x-0 duration-300","leave-active-class":"transform-gpu duration-300","leave-from-class":"opacity-100 translate-x-0 duration-300","leave-to-class":"opacity-0 -translate-x-full duration-300"},{default:p((()=>[I("MARKET")?(y(),l("div",bt,i(r.$t("Best Market Price")),1)):(y(),A(s,{key:"limitPrice",modelValue:c(b).order.price,"onUpdate:modelValue":t[8]||(t[8]=e=>c(b).order.price=e),shape:"rounded",autocomplete:"off",placeholder:"Price",type:"number",inputText:e.pair,min:"0"},null,8,["modelValue","inputText"])),d(s,{modelValue:c(b).order.amount,"onUpdate:modelValue":t[9]||(t[9]=e=>c(b).order.amount=e),key:"amount",shape:"rounded",autocomplete:"off",placeholder:"Amount",type:"number",inputText:e.currency,min:c(ee),step:c(ee)},null,8,["modelValue","inputText","min","step"]),o("div",ht,[d(g,{range:"0",min:0,max:100,isLeverage:!1,currency:e.currency,pair:e.pair},null,8,["currency","pair"])])])),_:1})])]),o("div",{class:u(["w-full absolute space-y-2",{"bottom-20":r.$viewport.isLessThan("sm"),"bottom-2":r.$viewport.isGreaterOrEquals("sm")}])},[mt,o("div",xt,[o("span",kt,i("BUY"===c(z)?"Taker":"Maker")+" "+i(r.$t("Fees")),1),(y(),l("span",{class:"text-gray-700 dark:text-gray-200",key:c(z)},i("BUY"===c(z)?c(Q):c(H))+"%",1))]),o("div",ft,[o("span",wt,i(r.$t("Cost")),1),(y(),l("span",{key:c(z),class:u({"text-success-500":"BUY"===c(z)?c(ue)>=c(re):c(ce)>=c(re),"text-danger-500":"BUY"===c(z)?c(ue)<c(re):c(ce)<c(re),"text-gray-700 dark:text-gray-300":0===c(ue)})},i(c(ue).toFixed(c(B)))+" "+i("BUY"===c(z)?e.pair:e.currency),3))]),o("div",$t,[c(m).isLoggedIn?(y(),A(a,{disabled:!c(J)&&c(b).bestAsk&&c(w).currencyWallet&&c(w).pairWallet&&"BUY"!==c(z)?c(ce)<c(re)||!c(v):c(ue)<c(re),loading:c(J)||!c(b).bestAsk||c(E),key:"buyButton",shape:"rounded",shadow:"flat",class:"w-full",color:c(w).currencyWallet&&c(w).pairWallet&&c(v)&&"BUY"===c(z)?"success":"danger",onClick:ve},{default:p((()=>[c(w).currencyWallet&&c(w).pairWallet?c(v)?(y(),l("span",Bt,i("BUY"===c(z)?"Buy":"Sell"),1)):(y(),l("span",Ot,i(r.$t("Exchange is offline")),1)):(y(),l("span",Tt,i(r.$t("Wallet Generation Failed")),1))])),_:1},8,["disabled","loading","color"])):(y(),l("div",Et,[d(h,{class:"text-warning-500 mr-1",to:"/login"},{default:p((()=>[n(i(r.$t("Login")),1)])),_:1}),n(" "+i(r.$t("or"))+" ",1),d(h,{class:"text-warning-500 ml-1",to:"/register"},{default:p((()=>[n(i(r.$t("Register")),1)])),_:1})]))])],2)],2)],2),[[C,c(Y)||r.$viewport.isGreaterOrEquals("sm")]])],2)}}}),Ct={key:0,class:"w-full bg-gray-100 dark:bg-gray-800 rounded-tl-lg"},Lt={id:"myTab",class:"nf flex-cols -mb-px flex overflow-x-hidden text-center rounded-tl-lg",role:"tablist"},At={class:"mr-2"},_t={id:"tradesContent",class:"trades-content"},St={class:"trades-header"},qt={class:"text-start w-2/5"},Dt={class:"text-start w-1/5"},Gt={class:"text-end w-2/5"},Ut={class:"text-start w-1/5"},Wt={class:"text-end w-2/5"},jt={key:1,class:"no-trades text-center"},It=e({__name:"Trades",setup(e){const n=z(),d=r([]),p=N(),g=r("recentTrades"),v=e=>g.value===e,b=x((()=>{const e=Number(p.selectedMarket?.metadata?.precision?.price)||4;return Math.abs(e)})),h=x((()=>{const e=Number(p.selectedMarket?.metadata?.precision?.amount)||4;return Math.abs(e)})),m=new Worker(URL.createObjectURL(new Blob(["\nconst priceFormatter = (value, precision) => {\n  if (isNaN(value) || value === null) return '0';\n  const formattedValue = parseFloat(value).toFixed(precision || 5);\n  return formattedValue;\n};\n\nfunction processTradesData(tradesData, precision) {\n  if (tradesData === undefined || tradesData === null) {\n    return [];\n  }\n\n  return tradesData.map((trade) => {\n    const pricePrecision = precision.price || 5;\n    const amountPrecision = precision.amount || 3;\n\n    const price = trade.price\n      ? priceFormatter(trade.price, pricePrecision)\n      : '0';\n\n    const sizeOrAmount = trade.amount\n    const amount = sizeOrAmount\n      ? priceFormatter(sizeOrAmount, amountPrecision)\n      : '0';\n\n    const time = new Date(trade.timestamp).toLocaleTimeString();\n    const side = trade.side || '';\n\n    return {\n      price,\n      amount,\n      time,\n      class: side === \"SELL\" ? \"text-danger-500\" : \"text-success-500 dark:text-success-400\",\n    };\n  });\n}\n\nself.onmessage = function (event) {\n  let data;\n  try {\n    data = JSON.parse(event.data);\n  } catch (e) {\n    console.error(\"Failed to parse incoming data\", e);\n    return;\n  }\n\n  const { rawData, precision } = data;\n\n  const result = processTradesData(rawData, precision);\n  self.postMessage(result);\n};\n\n        "],{type:"text/javascript"})));t((()=>n.orders),(e=>{if(!e||!e.uuid)return;let r=[];try{r="string"==typeof e.trades?JSON.parse(e.trades):e.trades}catch(a){return void console.error("Failed to parse trades data",a)}const t={rawData:r,precision:{price:b.value,amount:h.value}};m.postMessage(JSON.stringify(t))}),{immediate:!0}),m.onmessage=function(e){d.value=[...e.data,...d.value],d.value.length>50&&(d.value=d.value.slice(0,50))};const w=()=>{m.terminate()};return a((()=>{window.addEventListener("beforeunload",w)})),s((()=>{w(),window.removeEventListener("beforeunload",w)})),(e,r)=>(y(),l("div",{class:u(["bg-white dark:bg-gray-900 shadow relative h-full w-full",{"rounded-tl-lg":e.$viewport.isGreaterOrEquals("sm")}])},[e.$viewport.isGreaterOrEquals("sm")?(y(),l("div",Ct,[o("ul",Lt,[o("li",At,[o("a",{id:"recentTrades-tab",class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",v("recentTrades")?"active-tab":"inactive-tab"]),type:"button",role:"tab","aria-controls":"recentTrades","aria-selected":"false",onClick:r[0]||(r[0]=k((e=>{return r="recentTrades",void(g.value=r);var r}),["prevent"]))},i(e.$t("Recent Trades")),3)])])])):f("",!0),o("div",_t,[v("recentTrades")?(y(),l("div",{key:0,id:"recentTrades",class:u(["trades-grid",{"px-3 pt-2":e.$viewport.isGreaterOrEquals("sm"),"px-2 pt-1":e.$viewport.isLessThan("sm")}])},[o("div",St,[o("div",qt,i(e.$t("Price")),1),o("div",Dt,i(e.$t("Amount")),1),o("div",Gt,i(e.$t("Time")),1)]),c(d).length>0?(y(),l("div",{key:0,class:u(["trades-body overflow-y-scroll no-scrollbar",{"h-[calc(23.5vh)]":e.$viewport.isGreaterOrEquals("sm"),"h-[calc(25vh)]":e.$viewport.isLessThan("sm")}])},[(y(!0),l(E,null,M(c(d),((e,r)=>(y(),l("div",{key:r,class:"trade-item hover:bg-gray-100 dark:hover:bg-gray-800"},[o("div",{class:u(["text-start w-2/5",e.class])},i(e.price),3),o("div",Ut,i(e.amount),1),o("div",Wt,i(e.time),1)])))),128))],2)):(y(),l("div",jt,i(e.$t("No trades yet"))+". ",1))],2)):f("",!0)])],2))}}),Pt={id:"tradesContent",class:"h-full"},Yt={class:"h-full overflow-hidden"},Rt={key:0,id:"openOrders",class:"h-auto max-h-full"},Vt={key:0,class:"flex justify-center items-center flex-col h-full"},Nt={style:{inset:"0px",border:"1px dashed rgba(243, 243, 243, 0.08)"},class:"w-64 text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-2 rounded-md text-sm flex text-center justify-center"},Ft={key:1,class:"flex w-full justify-center items-center flex-col text-gray-500 dark:text-gray-500 h-[200px]"},zt={key:2,class:"w-full mt-2"},Kt={class:"pb-5"},Jt={key:0,class:"min-w-full bg-white dark:bg-gray-900 border-collapse"},Ht={class:"px-4 border-b border-gray-300 dark:border-gray-700 text-xs text-gray-700 dark:text-gray-200 pb-1 text-start"},Qt={class:"px-4 border-b border-gray-300 dark:border-gray-700 text-xs text-gray-700 dark:text-gray-200 text-center pb-1"},Xt={class:"px-4 border-b border-gray-300 dark:border-gray-700 text-xs text-gray-700 dark:text-gray-200 text-center pb-1"},Zt={class:"px-4 border-b border-gray-300 dark:border-gray-700 text-xs text-gray-700 dark:text-gray-200 text-center pb-1"},ea={class:"px-4 border-b border-gray-300 dark:border-gray-700 text-xs text-gray-700 dark:text-gray-200 text-center pb-1"},ra={class:"px-4 border-b border-gray-300 dark:border-gray-700 text-xs text-gray-700 dark:text-gray-200 text-center pb-1"},ta={key:0,class:"px-4 border-b border-gray-300 dark:border-gray-700 text-xs text-gray-700 dark:text-gray-200 text-center pb-1"},aa={class:"px-4 py-1 border-b border-gray-300 dark:border-gray-700 text-xs text-gray-700 dark:text-gray-200 text-start"},sa={class:"px-4 py-1 border-b border-gray-300 dark:border-gray-700 text-xs text-gray-700 dark:text-gray-200 text-center"},la={class:"px-4 py-1 border-b border-gray-300 dark:border-gray-700 text-xs text-gray-700 dark:text-gray-200 text-center"},oa={class:"px-4 py-1 border-b border-gray-300 dark:border-gray-700 text-xs text-gray-700 dark:text-gray-200 text-center"},na={class:"px-4 py-1 border-b border-gray-300 dark:border-gray-700 text-xs text-gray-700 dark:text-gray-200 text-center"},ia={key:0,class:"px-4 py-1 border-b border-gray-300 dark:border-gray-700 text-xs text-gray-700 dark:text-gray-200 text-center"},da={class:"text-xs text-gray-700 dark:text-gray-200 space-y-1"},ca={class:"flex justify-between"},ua={class:"flex justify-between"},pa={class:"flex justify-between"},ga={class:"flex justify-between"},va={class:"flex justify-between"},ya={class:"flex justify-between"},ba={class:"flex justify-between"},ha={class:"flex justify-between items-center gap-2"},ma={key:0},xa={class:"mt-2 px-3"},ka=e({__name:"Orders",props:{currency:{type:String,required:!0},pair:{type:String,required:!0}},setup(e){const v=se(),b=z(),m=le(),k=$(),w=x((()=>k.getProfile)),T=e;a((async()=>{if(k.isLoggedIn)try{await m.fetchOrders(`${T.currency}/${T.pair}`)}catch(e){console.log(e)}}));const O=r("openOrders"),B=D(),C=r("openOrders"),_=r(4),q=x((()=>m.orders)),U=x((()=>q.value.filter((e=>!!e&&("openOrders"===C.value?"OPEN"===e.status:"OPEN"!==e.status))).sort(((e,r)=>new Date(r.created_at).getTime()-new Date(e.created_at).getTime())))),W=x((()=>parseInt(B.query.page??"1"))),j=x((()=>{const e=(W.value-1)*_.value,r=e+_.value;return U.value.slice(e,r)})),I=e=>{switch(e){case"OPEN":return"warning";case"CLOSED":return"success";case"CANCELED":case"EXPIRED":case"REJECTED":return"danger";default:return"info"}},{formatedDate:P,toast:Y}=h(),{cancelOrder:V}=F();oe();const N=r(!1),K=async e=>{N.value=!0;try{const r=m.orders.find((r=>r.uuid===e))?.created_at,t=await V(e,r);Y.response(t);const a=m.orders.findIndex((r=>r.uuid===e));-1!==a&&m.orders.splice(a,1),"success"===t.status&&await v.fetchWallets(!1,!1)}catch(r){Y.danger(r)}N.value=!1};a((async()=>{k.isLoggedIn&&(0===m.orders.length&&await m.fetchOrders(`${T.currency}/${T.pair}`),J())})),t((()=>b.isSocketOpen),(e=>{e?J():H()}));const J=()=>{b.isSocketOpen&&b.subscribe("exchange",{method:"orders",id:`${w.value?.id}`})},H=()=>{b.unsubscribe("exchange",{method:"orders",id:`${w.value?.id}`})};return t((()=>b.orders),(async e=>{if(!e||!e.uuid)return;const r=m.orders.findIndex((r=>r.uuid===e.uuid));if(-1!==r){const t=m.orders[r];m.orders[r]={...t,...e},t.filled!==e.filled&&await v.fetchWallets(!1,!1)}})),s((()=>{H()})),(e,r)=>{const t=S,a=g,s=de,v=G,b=R;return y(),l("div",{class:u(["bg-white dark:bg-gray-900 shadow relative h-full w-full",{"rounded-tr-lg":e.$viewport.isGreaterOrEquals("sm")}])},[o("div",{class:u(["w-full bg-gray-100 dark:bg-gray-800 flex",{"rounded-tr-lg":e.$viewport.isGreaterOrEquals("sm")}])},[o("button",{class:u(["py-2 px-4 text-xs font-medium","openOrders"===c(C)?"active-tab":"inactive-tab"]),onClick:r[0]||(r[0]=e=>C.value="openOrders")},i(e.$t("Open Orders")),3),o("button",{class:u(["py-2 px-4 text-xs font-medium","orderHistory"===c(C)?"active-tab":"inactive-tab"]),onClick:r[1]||(r[1]=e=>C.value="orderHistory")},i(e.$t("Order History")),3)],2),o("div",Pt,[o("div",Yt,[(h="openOrders",O.value===h?(y(),l("div",Rt,[c(k).isLoggedIn?0===c(j)?.length?(y(),l("div",Ft,[d(a,{name:"ph:files-thin",class:"h-16 w-16"}),n(" "+i(e.$t("No Orders Found")),1)])):(y(),l("div",zt,[o("div",Kt,[e.$viewport.isGreaterOrEquals("sm")?(y(),l("table",Jt,[o("thead",null,[o("tr",null,[o("th",Ht,i(e.$t("Date")),1),o("th",Qt,i(e.$t("Side")),1),o("th",Xt,i(e.$t("Price")),1),o("th",Zt,i(e.$t("Amount")),1),o("th",ea,i(e.$t("Filled")),1),o("th",ra,i(e.$t("Status")),1),"openOrders"===c(C)?(y(),l("th",ta,i(e.$t("Actions")),1)):f("",!0)])]),o("tbody",null,[d(L,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:p((()=>[(y(!0),l(E,null,M(c(j),((e,r)=>(y(),l("tr",{key:r},[o("td",aa,i(c(P)(e.created_at,!0)),1),o("td",{class:u(["px-4 py-1 border-b border-gray-300 dark:border-gray-700 text-xs text-center",{"text-green-500":"BUY"===e.side,"text-red-500":"SELL"===e.side}])},i(e.side),3),o("td",sa,i(e.price),1),o("td",la,i(e.amount),1),o("td",oa,i(e.filled),1),o("td",na,[o("span",{class:u(["inline-block px-2 font-sans transition-shadow duration-300 py-0.5 text-[0.55rem] rounded-md border dark:bg-transparent",`bg-${I(e.status)}-100 text-${I(e.status)}-500 border-${I(e.status)}-100 dark:border-${I(e.status)}-500 dark:text-${I(e.status)}-500`])},i(e.status),3)]),"openOrders"===c(C)?(y(),l("td",ia,[0===e.filled?(y(),A(s,{key:0,color:"danger",condensed2:"","data-nui-tooltip":"Cancel Order","data-nui-tooltip-position":"left",onClick:r=>K(e.uuid),disabled:0!==e.filled||c(N),loading:c(N)},{default:p((()=>[d(a,{name:"line-md:close",class:"h-4 w-4"})])),_:2},1032,["onClick","disabled","loading"])):f("",!0)])):f("",!0)])))),128))])),_:1})])])):(y(),l("div",{key:1,class:u(["grid gap-2 px-2 overflow-y-auto no-scrollbar h-auto max-h-[200px]",{"grid-cols-1":e.$viewport.isLessThan("xs"),"grid-cols-2":e.$viewport.isGreaterOrEquals("xs")}])},[(y(!0),l(E,null,M(c(j),((r,t)=>(y(),A(v,{key:t,class:"bg-white dark:bg-gray-900 rounded-lg p-4",shadow:"sm"},{default:p((()=>[o("div",da,[o("div",ca,[o("span",null,i(e.$t("Market"))+":",1),o("span",null,i(r.symbol),1)]),o("div",ua,[o("span",null,i(e.$t("Date"))+":",1),o("span",null,i(c(P)(r.created_at,!0)),1)]),o("div",pa,[o("span",null,i(e.$t("Side"))+":",1),o("span",null,i(r.side),1)]),o("div",ga,[o("span",null,i(e.$t("Price"))+":",1),o("span",null,i(r.price),1)]),o("div",va,[o("span",null,i(e.$t("Amount"))+":",1),o("span",null,i(r.amount),1)]),o("div",ya,[o("span",null,i(e.$t("Filled"))+":",1),o("span",null,i(r.filled),1)]),o("div",ba,[o("span",null,i(e.$t("Status"))+":",1),o("div",ha,[o("span",{class:u(["inline-block px-2 font-sans transition-shadow duration-300 py-0.5 text-[0.55rem] rounded-md border dark:bg-transparent",`bg-${I(r.status)}-100 text-${I(r.status)}-500 border-${I(r.status)}-100 dark:border-${I(r.status)}-500 dark:text-${I(r.status)}-500`])},i(r.status),3),"openOrders"===c(C)?(y(),l("div",ma,[0===r.filled?(y(),A(s,{key:0,color:"danger",condensed2:"","data-nui-tooltip":"Cancel Order","data-nui-tooltip-position":"left",onClick:e=>K(r.uuid),disabled:0!==r.filled||c(N),loading:c(N)},{default:p((()=>[d(a,{name:"line-md:close",class:"h-4 w-4"})])),_:2},1032,["onClick","disabled","loading"])):f("",!0)])):f("",!0)])])])])),_:2},1024)))),128))],2)),o("div",xa,[c(U).length>c(_)?(y(),A(b,{key:0,"current-page":c(W),"total-items":c(U).length,"item-per-page":c(_),"max-links-displayed":3},null,8,["current-page","total-items","item-per-page"])):f("",!0)])])])):(y(),l("div",Vt,[o("div",Nt,[d(t,{class:"text-warning-500 mr-1",to:"/login"},{default:p((()=>[n(i(e.$t("Login")),1)])),_:1}),n(" "+i(e.$t("or"))+" ",1),d(t,{class:"text-warning-500 ml-1",to:"/register"},{default:p((()=>[n(i(e.$t("Register")),1)])),_:1})])]))])):f("",!0))])])],2);var h}}}),fa={class:"bg-white dark:bg-gray-900 h-full shadow w-full"},wa={class:"w-full bg-gray-100 dark:bg-gray-800"},$a={id:"myTab",class:"nf flex-cols -mb-px flex overflow-x-hidden text-center",role:"tablist"},Ta={role:"presentation"},Oa=["aria-selected"],Ba={role:"presentation"},Ea=["aria-selected"],Ma={role:"presentation"},Ca=["aria-selected"],La=e({__name:"Info",props:{currency:{type:String,required:!0},pair:{type:String,required:!0}},setup(e){const t=D();t.path.startsWith("/trade")||t.path.startsWith("/ai-trading")||t.path.startsWith("/binary");const a=r("orderbook"),s=e=>a.value===e,n=e=>{a.value=e};return(r,t)=>{const a=br,c=It,p=ka;return y(),l("div",fa,[o("div",wa,[o("ul",$a,[o("li",Ta,[o("button",{id:"orderbook-tab",class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",s("orderbook")?"active-tab":"inactive-tab"]),type:"button",role:"tab","aria-controls":"orderbook","aria-selected":!!s("orderbook"),onClick:t[0]||(t[0]=e=>n("orderbook"))},i(r.$t("Orderbook")),11,Oa)]),o("li",Ba,[o("button",{id:"trades-tab",class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",s("trades")?"active-tab":"inactive-tab"]),type:"button",role:"tab","aria-controls":"trades","aria-selected":!!s("trades"),onClick:t[1]||(t[1]=e=>n("trades"))},i(r.$t("Trades")),11,Ea)]),o("li",Ma,[o("button",{id:"orders-tab",class:u(["inline-block py-2 pl-3 pr-4 text-xs font-medium",s("orders")?"active-tab":"inactive-tab"]),type:"button",role:"tab","aria-controls":"orders","aria-selected":!!s("orders"),onClick:t[2]||(t[2]=e=>n("orders"))},i(r.$t("Orders")),11,Ca)])])]),o("div",{id:"orderbook",class:u(["pt-1 relative overflow-y-auto h-full",{hidden:!s("orderbook")}]),role:"tabpanel","aria-labelledby":"orderbook-tab"},[d(a,{currency:e.currency,pair:e.pair},null,8,["currency","pair"])],2),o("div",{id:"trades",class:u(["pt-1 relative h-full",{hidden:!s("trades")}]),role:"tabpanel","aria-labelledby":"trades-tab"},[d(c,{currency:e.currency,pair:e.pair},null,8,["currency","pair"])],2),o("div",{id:"orders",class:u(["pt-1 relative h-full",{hidden:!s("orders")}]),role:"tabpanel","aria-labelledby":"orders-tab"},[d(p,{currency:e.currency,pair:e.pair,class:"h-full bg-white dark:bg-gray-900 rounded-tr-lg shadow"},null,8,["currency","pair"])],2)])}}}),Aa={class:"Ticker"},_a={key:1,class:"ChartAndInfo rounded-r-lg"},Sa={key:2,class:"Orderbook flex"},qa={class:"h-full flex items-center justify-center relative"},Da={key:1,class:"bg-white dark:bg-gray-900 p-1 h-full rounded-lg"},Ga={key:3,class:"Order flex"},Ua={class:"h-full flex items-center justify-center relative z-10"},Wa={key:1,class:"bg-white dark:bg-gray-900 p-1 h-full rounded-l-lg"},ja={key:4,class:"collapseTradesOrdersButton flex justify-center items-center"},Ia={key:5,class:"Trades flex"},Pa={key:0,class:"h-full flex items-center justify-center relative"},Ya={key:2,class:"bg-white dark:bg-gray-900 p-1 h-full rounded-tl-lg"},Ra={key:3,class:"bg-white dark:bg-gray-900 p-1 w-full rounded-tl-lg"},Va={key:6,id:"orders",class:"Orders"},Na={key:1,class:"bg-white dark:bg-gray-900 p-1 w-full rounded-tr-lg"},Fa={key:7,class:"Info"},za=e({__name:"index",setup(e){const t=z(),s=N(),n=ce(),i=U(),p=x((()=>i.extensionsUser)),v=le(),b=W(),h=x((()=>b.settings)),m=D(),k=x((()=>m.params.currency)),w=x((()=>m.params.pair)),$=x((()=>k.value+"/"+w.value));j({title:$.value});const T=r(!1),O=r(!1),B=x((()=>s.selectedMarket)),M=I();a((async()=>{h.value?.spot_exchange||M.push("/user"),0===i.extensions.length&&await i.fetchExtensionsUser(),0===s.markets.length&&await s.fetchMarkets(),p.value.ecosystem&&0===v.markets.length&&(await v.fetchMarkets(),v.markets.forEach((e=>{e.is_eco=!0;const r=s.markets.findIndex((r=>r.symbol===e.symbol));-1!==r?s.markets[r]=e:s.markets.push(e)}))),s.selectMarketBySymbol(k.value+"/"+w.value),B.value&&(B.value?.is_eco?T.value||(t.createSocket("exchange"),T.value=!0):(T.value||(n.createSocket("trade"),T.value=!0),O.value||(n.createSocket("tickers"),O.value=!0)))})),P(((e,r,a)=>{e.path.startsWith("/trade")||(B.value&&(B.value?.is_eco?t.closeSocket("exchange"):(n.closeSocket("trade"),n.closeSocket("tickers"))),T.value=!1,O.value=!1),a()}));const C=r(!1),L=r(!1),_=r(!1),S=r(!1),q=()=>{C.value=!C.value},G=()=>{L.value=!L.value},Y=()=>{_.value=!_.value},R=()=>{_.value=!1,S.value=!S.value};return(e,r)=>{const t=We,a=V,s=K,n=J,i=Ke,p=ee,v=g,b=br,h=H,m=Xr,x=Mt,$=It,T=Q,O=ka,M=re,D=La,U=te;return y(),l("div",null,[c(B)?(y(),l("div",{key:0,style:{"font-family":"BinancePlex, Arial, sans-serif !important"},class:u([{tradingContainerOrderCollapsed:c(C),tradingContainerOrderBookCollapsed:c(L),tradingContainerOrderAndOrderBookCollapsed:c(C)&&c(L),tradingContainerTradesCollapsed:c(_),tradingContainerTradesOrdersCollapsed:c(S),tradingContainerTradesOrdersOrderbookCollapsed:c(S)&&c(L),tradingContainerTradesOrdersOrderCollapsed:c(S)&&c(C),tradingContainerTradesOrdersOrderbookOrderCollapsed:c(S)&&c(L)&&c(C)},"tradingContainer bg-slate-100 dark:bg-black h-[calc(100vh-64px)] relative mt-16"])},[o("div",Aa,[c(B)?.is_eco?(y(),A(t,{key:0,currency:c(k),pair:c(w)},null,8,["currency","pair"])):(y(),A(a,{key:1,currency:c(k),pair:c(w)},null,8,["currency","pair"]))]),e.$viewport.isGreaterOrEquals("md")||e.$viewport.isLessThan("sm")?(y(),l("div",{key:0,class:u(["Chart bg-gray-100 dark:bg-gray-800 rounded-r-lg shadow",{"mt-0.5":e.$viewport.isGreaterOrEquals("md")}])},[c(B)?.is_eco?(y(),A(s,{key:0,currency:c(k),pair:c(w),class:"rounded-lg"},null,8,["currency","pair"])):(y(),A(n,{key:1,currency:c(k),pair:c(w),class:"rounded-lg"},null,8,["currency","pair"]))],2)):f("",!0),e.$viewport.isLessThan("md")&&e.$viewport.isGreaterOrEquals("sm")?(y(),l("div",_a,[c(B)?.is_eco?(y(),A(i,{key:0,currency:c(k),pair:c(w)},null,8,["currency","pair"])):(y(),A(p,{key:1,currency:c(k),pair:c(w)},null,8,["currency","pair"]))])):f("",!0),e.$viewport.isGreaterOrEquals("md")?(y(),l("div",Sa,[o("div",qa,[o("div",{class:"h-24 border-gray-200 bg-white dark:bg-gray-800 p-0.5 flex items-center justify-center border rounded relative hover:bg-info-500 dark:hover:bg-info-500 dark:border-black group transition-all duration-300 cursor-pointer",onClick:G},[d(v,{name:"line-md:chevron-small-"+(c(L)?"left":"right"),class:"h-2 w-2 absolute rounded-full bg-gray-100 dark:bg-gray-700 group-hover:bg-info-500 -start-0.5 z-50 group-hover:h-4 group-hover:w-4 group-hover:-start-1.5 transition-all duration-300"},null,8,["name"])])]),c(L)?(y(),l("div",Da)):(y(),l(E,{key:0},[c(B)?.is_eco?(y(),A(b,{key:0,currency:c(k),pair:c(w)},null,8,["currency","pair"])):(y(),A(h,{key:1,currency:c(k),pair:c(w)},null,8,["currency","pair"]))],64))])):f("",!0),e.$viewport.isGreaterOrEquals("sm")?(y(),l("div",Ga,[o("div",Ua,[o("div",{class:"h-24 border-gray-200 bg-white dark:bg-gray-800 p-0.5 flex items-center justify-center border rounded relative hover:bg-info-500 dark:hover:bg-info-500 dark:border-black group transition-all duration-300 cursor-pointer",onClick:q},[d(v,{name:"line-md:chevron-small-"+(c(C)?"left":"right"),class:"h-2 w-2 absolute rounded-full bg-gray-100 dark:bg-gray-700 group-hover:bg-info-500 -start-0.5 z-20 group-hover:h-4 group-hover:w-4 group-hover:-start-1.5 transition-all duration-300"},null,8,["name"])])]),c(C)?(y(),l("div",Wa)):(y(),l(E,{key:0},[c(B)?.is_eco?(y(),A(m,{key:0,currency:c(k),pair:c(w)},null,8,["currency","pair"])):(y(),A(x,{key:1,currency:c(k),pair:c(w)},null,8,["currency","pair"]))],64))])):f("",!0),e.$viewport.isGreaterOrEquals("md")?(y(),l("div",ja,[o("div",{class:"w-24 border-gray-200 bg-white dark:bg-gray-800 p-0.5 flex items-center justify-center hover:bg-info-500 dark:hover:bg-info-500 dark:border-black border rounded relative group transition-all duration-300 cursor-pointer",onClick:R},[d(v,{name:"line-md:chevron-small-"+(c(S)?"up":"down"),class:"h-2 w-2 group-hover:h-4 group-hover:w-4 absolute rounded-full cursor-pointer bg-gray-100 dark:bg-gray-700 group-hover:bg-info-500 -top-0.5 group-hover:-top-1.5 start-50 transition-all duration-300"},null,8,["name"])])])):f("",!0),e.$viewport.isGreaterOrEquals("md")?(y(),l("div",Ia,[c(S)?f("",!0):(y(),l("div",Pa,[o("div",{class:"h-24 border-gray-200 bg-white dark:bg-gray-800 p-0.5 flex items-center justify-center border rounded relative hover:bg-info-500 dark:hover:bg-info-500 dark:border-black group transition-all duration-300 cursor-pointer",onClick:Y},[d(v,{name:"line-md:chevron-small-"+(c(_)?"left":"right"),class:"h-2 w-2 absolute rounded-full bg-gray-100 dark:bg-gray-700 group-hover:bg-info-500 -start-0.5 z-50 group-hover:h-4 group-hover:w-4 group-hover:-start-1.5 transition-all duration-300"},null,8,["name"])])])),c(_)||c(S)?f("",!0):(y(),l(E,{key:1},[c(B)?.is_eco?(y(),A($,{key:0,currency:c(k),pair:c(w)},null,8,["currency","pair"])):(y(),A(T,{key:1,currency:c(k),pair:c(w)},null,8,["currency","pair"]))],64)),c(_)?(y(),l("div",Ya)):f("",!0),c(S)?(y(),l("div",Ra)):f("",!0)])):f("",!0),e.$viewport.isGreaterOrEquals("sm")?(y(),l("div",Va,[c(S)?f("",!0):(y(),l(E,{key:0},[c(B)?.is_eco?(y(),A(O,{key:0,currency:c(k),pair:c(w),class:"h-full bg-white dark:bg-gray-900 rounded-tr-lg shadow"},null,8,["currency","pair"])):(y(),A(M,{key:1,currency:c(k),pair:c(w),class:"h-full bg-white dark:bg-gray-900 rounded-tr-lg shadow"},null,8,["currency","pair"]))],64)),c(S)?(y(),l("div",Na)):f("",!0)])):f("",!0),e.$viewport.isLessThan("sm")?(y(),l("div",Fa,[c(B)?.is_eco?(y(),A(D,{key:0,currency:c(k),pair:c(w)},null,8,["currency","pair"])):(y(),A(U,{key:1,currency:c(k),pair:c(w)},null,8,["currency","pair"]))])):f("",!0),e.$viewport.isLessThan("sm")?(y(),l(E,{key:8},[c(B)?.is_eco?(y(),A(m,{key:0,currency:c(k),pair:c(w)},null,8,["currency","pair"])):(y(),A(x,{key:1,currency:c(k),pair:c(w)},null,8,["currency","pair"]))],64)):f("",!0)],2)):f("",!0)])}}});export{za as default};
