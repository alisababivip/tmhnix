import{_ as e}from"./Chart.vue-YiyWNwaG.js";import{_ as s}from"./Chart.vue-6iSre37Q.js";import{a,ap as t,c as r,Q as c,z as o,cN as l,r as u,ac as n,E as m,as as i,b as p,f as k,u as v,O as h,o as y}from"../e/entry-8qgg5CL-.js";import{u as f}from"./market-Bq5Nv6Cu.js";import{u as d}from"./socket--t7FR4dG.js";import{u as j}from"./market-OqEbt887.js";import{u as g}from"./socket-uQEypT2z.js";import"./useEcosystem-9eBUNbsT.js";import"./wallet-n04aoRPe.js";import"./useWallet-8iHzU2hV.js";import"./composables-Om4eAUXX.js";import"./useExchange-VMAYQu3P.js";const x={class:"w-full h-screen"},_=a({__name:"chart",setup(a){const _=g(),S=f(),b=d(),w=t(),E=r((()=>w.extensionsUser)),M=j(),z=c(),C=r((()=>z.settings)),Q=o(),U=r((()=>Q.params.currency)),W=r((()=>Q.params.pair)),q=r((()=>U.value+"/"+W.value));l({title:q.value});const B=u(!1),G=u(!1),I=r((()=>S.selectedMarket)),N=n();return m((async()=>{C.value?.spot_exchange||N.push("/user"),0===w.extensions.length&&await w.fetchExtensionsUser(),0===S.markets.length&&await S.fetchMarkets(),E.value.ecosystem&&0===M.markets.length&&(await M.fetchMarkets(),M.markets.forEach((e=>{e.is_eco=!0;const s=S.markets.findIndex((s=>s.symbol===e.symbol));-1!==s?S.markets[s]=e:S.markets.push(e)}))),S.selectMarketBySymbol(U.value+"/"+W.value),I.value&&(I.value?.is_eco?B.value||(_.createSocket("exchange"),B.value=!0):(B.value||(b.createSocket("trade"),B.value=!0),G.value||(b.createSocket("tickers"),G.value=!0)))})),i(((e,s,a)=>{e.path.startsWith("/trade")||(I.value&&(I.value?.is_eco?_.closeSocket("exchange"):(b.closeSocket("trade"),b.closeSocket("tickers"))),B.value=!1,G.value=!1),a()})),(a,t)=>{const r=e,c=s;return y(),p("div",null,[k("div",x,[v(I)?.is_eco?(y(),h(r,{key:0,currency:v(U),pair:v(W),class:"rounded-lg"},null,8,["currency","pair"])):(y(),h(c,{key:1,currency:v(U),pair:v(W),class:"rounded-lg"},null,8,["currency","pair"]))])])}}});export{_ as default};
