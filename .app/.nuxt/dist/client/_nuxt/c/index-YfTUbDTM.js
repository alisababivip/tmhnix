import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{d as a,a as l,z as t,r as s,c as u,E as r,ac as n,ad as o,b as i,e as d,w as c,o as m,f as p,u as v,p as f,O as g,q as h,t as w,af as b,n as _,k as y,F as x,B as k,x as I,X as V,Y as j,ag as A}from"../e/entry-8qgg5CL-.js";import{_ as T}from"./BaseSelect.vue-p0KYznCX.js";import{_ as D}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as E,a as C}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as S}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as L}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as P}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as B}from"./TairoFlexTable-zdoraqRc.js";import{_ as N}from"./BasePagination.vue-eKZkqxB7.js";import{_ as R}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_ as U,a as $}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as F}from"./useAiTrading-wIB0sHyU.js";import{u as W}from"./plans-w2zjFGwh.js";import"./input-id-wZ-Ta08j.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const O=a({id:"adminAiInvestment",state:()=>({investments:[],userInvestment:null,loading:!1}),getters:{count:e=>e.investments.length},actions:{async fetchInvestments(){this.loading=!0;const{getAdminAITradings:e}=F(),a=await e();"success"===a.status&&(this.investments=a.data.result),this.loading=!1},async fetchUserInvestment(){const{getAITradings:e}=F(),a=await e();"success"===a.status&&(this.userInvestment=a.data.result??null)}}}),q={class:"w-full flex gap-2 xs:flex-col sm:flex-row"},G={value:10},J={value:25},M={value:50},z={value:100},H=p("img",{class:"block dark:hidden",src:U,alt:"Placeholder image"},null,-1),X=p("img",{class:"hidden dark:block",src:$,alt:"Placeholder image"},null,-1),Y={key:1,class:"w-full sm:pt-5"},K={class:"mt-6"},Q=l({__name:"index",setup(a){const l=t(),U=O(),$=W(),F=s(""),Q=s(!1),Z=s(""),ee=s(10),ae=u((()=>parseInt(l.query.page??"1")));r((async()=>{Q.value=!0,await U.fetchInvestments(),0===$.plans.length&&await $.fetchAiTradingPlans(),Q.value=!1}));const le=u((()=>U.investments.filter((e=>(!ue.value||"All"===ue.value||e.type===ue.value)&&((!re.value||"All"===re.value||e.status===re.value)&&((!ne.value||"All"===ne.value||e.result===ne.value)&&(!(oe.value&&new Date(e.created_at)<new Date(oe.value))&&(!(ie.value&&new Date(e.created_at)>new Date(ie.value))&&(Z.value&&""!==Z.value&&void 0!==Z.value&&Z.value!==F.value&&(me.push({query:{...l.query,page:"1",filter:Z.value}}),F.value=Z.value),!Z.value||e.uuid?.includes(Z.value)))))))).sort(((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())))),te=u((()=>{const e=(ae.value-1)*ee.value,a=e+ee.value;return le.value.slice(e,a)})),se=s(!1),ue=s(""),re=s(""),ne=s(""),oe=s(""),ie=s(""),de=["All","ACTIVE","COMPLETED","CANCELLED","REJECTED"],ce=["All","WIN","LOSS","DRAW"],me=n(),{formatedDate:pe}=o(),ve=e=>{switch(e){case"COMPLETED":return"success";case"REJECTED":case"CANCELLED":return"danger";default:return"info"}},fe=e=>{switch(e){case"WIN":return"success";case"LOSS":return"danger";case"DRAW":case"PEDING":return"warning";default:return"info"}},ge=e=>{switch(e){case"WIN":return"+";case"LOSS":return"-";default:return""}};return(a,l)=>{const t=e,s=I,u=V,r=T,n=D,o=j,U=A,F=E,W=S,O=L,he=P,we=C,be=B,_e=N,ye=R;return m(),i("div",null,[d(ye,null,{left:c((()=>[p("div",q,[d(t,{modelValue:v(Z),"onUpdate:modelValue":l[0]||(l[0]=e=>f(Z)?Z.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Search Investment ID..."},null,8,["modelValue"]),d(u,{onClick:l[1]||(l[1]=e=>se.value=!v(se)),color:"muted",block:""},{default:c((()=>[v(se)?(m(),g(s,{key:0,name:"line-md:arrow-up",class:"h-4 w-4 mr-2"})):(m(),g(s,{key:1,name:"line-md:arrow-down",class:"h-4 w-4 mr-2"})),h(" "+w(a.$t("Filters")),1)])),_:1})])])),right:c((()=>[d(r,{modelValue:v(ee),"onUpdate:modelValue":l[2]||(l[2]=e=>f(ee)?ee.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:c((()=>[p("option",G,"10 "+w(a.$t("per page")),1),p("option",J,"25 "+w(a.$t("per page")),1),p("option",M,"50 "+w(a.$t("per page")),1),p("option",z,"100 "+w(a.$t("per page")),1)])),_:1},8,["modelValue"])])),default:c((()=>[p("div",null,[d(b,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:c((()=>[v(se)?(m(),g(o,{key:0,class:_("grid gap-4 xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-3 mb-6 p-5")},{default:c((()=>[d(n,{modelValue:v(ue),"onUpdate:modelValue":l[3]||(l[3]=e=>f(ue)?ue.value=e:null),label:"Investment Plan",items:v($).plans.map((e=>e.title)),placeholder:"Select Investment Plan"},null,8,["modelValue","items"]),d(n,{modelValue:v(re),"onUpdate:modelValue":l[4]||(l[4]=e=>f(re)?re.value=e:null),label:"Status",items:de,placeholder:"Select a Status"},null,8,["modelValue"]),d(n,{modelValue:v(ne),"onUpdate:modelValue":l[5]||(l[5]=e=>f(ne)?ne.value=e:null),label:"Result",items:ce,placeholder:"Select a Result"},null,8,["modelValue"]),d(t,{modelValue:v(oe),"onUpdate:modelValue":l[6]||(l[6]=e=>f(oe)?oe.value=e:null),type:"date",label:"From"},null,8,["modelValue"]),d(t,{modelValue:v(ie),"onUpdate:modelValue":l[7]||(l[7]=e=>f(ie)?ie.value=e:null),type:"date",label:"To"},null,8,["modelValue"])])),_:1})):y("",!0)])),_:1}),v(Q)||0!==v(te)?.length?(m(),i("div",Y,[d(be,null,{default:c((()=>[d(b,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:c((()=>[(m(!0),i(x,null,k(v(te),((e,a)=>(m(),g(we,{key:e.id,spaced:""},{start:c((()=>[d(F,{label:"User","hide-label":a>0,logo:e.user?.avatar,title:`${e.user?.first_name} (${e.user?.last_name})`,subtitle:v(pe)(e.created_at,!0)},null,8,["hide-label","logo","title","subtitle"])])),end:c((()=>[d(W,{label:"Plan","hide-label":a>0,class:"w-20 xs:w-full text-xs"},{default:c((()=>[h(w(e.plan?.title),1)])),_:2},1032,["hide-label"]),d(W,{label:"Amount","hide-label":a>0,class:"w-20 xs:w-full text-xs"},{default:c((()=>[h(w(e.amount+" "+e.market?.split("/")[1]),1)])),_:2},1032,["hide-label"]),d(W,{label:"Result","hide-label":a>0,class:"w-20 xs:w-full"},{default:c((()=>[d(O,{color:fe(e.result??"PEDING"),flavor:"pastel",condensed:""},{default:c((()=>[h(w(ge(e.result))+w("DRAW"===e.result?0:e.profit??"Pending"),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),d(W,{label:"Status","hide-label":a>0,class:"w-20 xs:w-full"},{default:c((()=>[d(O,{color:ve(e.status),flavor:"pastel",condensed:""},{default:c((()=>[h(w(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),d(W,{label:"Actions","hide-label":a>0,class:"w-20"},{default:c((()=>[d(he,{condensed:"",color:"muted",onClick:a=>{return l=e.uuid,void me.push(`/admin/extensions/ai-trading/investments/${l}`);var l},"data-nui-tooltip":"View"},{default:c((()=>[d(s,{name:"ph:eye-duotone",class:"h-4 w-4"})])),_:2},1032,["onClick"])])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])),_:1})])):(m(),g(U,{key:0,title:v(Z)&&""!==v(Z)?"No matching results":"No results",subtitle:v(Z)&&""!==v(Z)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:c((()=>[H,X])),_:1},8,["title","subtitle"])),p("div",K,[v(le).length>v(ee)?(m(),g(_e,{key:0,"total-items":v(le).length,"current-page":v(ae),"item-per-page":v(ee)},null,8,["total-items","current-page","item-per-page"])):y("",!0)])])])),_:1})])}}});export{Q as default};
