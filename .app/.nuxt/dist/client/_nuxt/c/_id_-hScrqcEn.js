import{a as e,r as l,z as a,ac as s,ad as t,c as n,E as o,O as r,w as d,a3 as c,o as i,e as u,q as m,t as g,u as v,f as p,b as f,k as b,F as y,B as h,p as k,x as _,X as x,Y as C,ao as w,an as $,c7 as D,c5 as z,y as E}from"../e/entry-8qgg5CL-.js";import{_ as j}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as P}from"./BaseTextarea.vue-8st5U0qk.js";import{_ as R}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as T}from"./useKyc-y1ecMeTj.js";import"./input-id-wZ-Ta08j.js";const S=e=>(D("data-v-a7cd2b4b"),e=e(),z(),e),A={class:"flex items-center justify-between mb-6"},F={class:"text-2xl font-semibold text-gray-800 dark:text-gray-200"},N={class:"flex items-center xs:flex-col sm:flex-row gap-2"},K={key:0,class:"p-4 border rounded-md dark:border-gray-600 mb-6"},B={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},L={class:"grid gap-5 xs:grid-cols-1 sm:grid-cols-2"},V={class:"text-sm"},I=S((()=>p("br",null,null,-1))),J=S((()=>p("br",null,null,-1))),O=S((()=>p("br",null,null,-1))),G=S((()=>p("br",null,null,-1))),H=S((()=>p("br",null,null,-1))),M=S((()=>p("br",null,null,-1))),U={class:"text-sm"},W=S((()=>p("br",null,null,-1))),Y=S((()=>p("br",null,null,-1))),q=S((()=>p("br",null,null,-1))),X=S((()=>p("br",null,null,-1))),Z=S((()=>p("br",null,null,-1))),Q={key:1,class:"p-4 border rounded-md dark:border-gray-600 mb-6"},ee={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},le={key:0},ae={class:"grid grid-cols-3 gap-4"},se={class:"image-container"},te=["src"],ne={class:"image-container"},oe=["src"],re={key:1},de={class:"grid grid-cols-3 gap-4"},ce={class:"image-container"},ie=["src"],ue={class:"image-container"},me=["src"],ge={key:2},ve={class:"grid grid-cols-3 gap-4"},pe={class:"image-container"},fe=["src"],be={class:"image-container"},ye=["src"],he={class:"image-container"},ke=["src"],_e={key:2,class:"p-4 border rounded-md dark:border-gray-600 mb-6"},xe={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},Ce={class:"grid gap-5 grid-cols-3"},we={key:0},$e={key:1},De={class:"image-container"},ze=["src","onClick"],Ee=["onClick"],je={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6 text-gray-700 dark:text-gray-400"},Pe={class:"p-4 border rounded-md dark:border-gray-600"},Re={class:"flex jsutify-start items-center"},Te=["src"],Se={class:"font-bold"},Ae={class:"p-4 border rounded-md dark:border-gray-600"},Fe={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},Ne={key:3,class:"p-4 border rounded-md dark:border-gray-600 mb-6"},Ke={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},Be=["innerHTML"],Le={key:4,class:"w-full flex gap-2 xs:flex-col sm:flex-row mb-2"},Ve={class:"flex w-full items-center justify-between p-4 md:p-6"},Ie={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},Je={class:"p-4 md:p-6"},Oe={class:"mx-auto w-full text-start"},Ge={class:"p-4 md:p-6"},He={class:"flex gap-x-2"},Me={class:"flex w-full items-center justify-between p-4 md:p-6"},Ue={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},We={class:"p-4 md:p-6"},Ye={class:"mx-auto w-full text-start"},qe={class:"p-4 md:p-6"},Xe={class:"flex gap-x-2"},Ze=E(e({__name:"[id]",setup(e){const D=l(null),{getKyc:z,updateKycStatus:E}=T(),S=a(),Ze=s(),Qe=l(!1),el=l(!1),{toast:ll,formatedDate:al}=t(),sl=n((()=>S.params.id)),tl=l("We are sorry, your kyc has been rejected. Please contact support for more information. \n\nRejection reason goes here.  \n\nThank you."),nl=n((()=>D.value?.data));o((async()=>{try{const e=await z(sl.value);D.value=e.data.result}catch(e){Ze.back(),ll.danger(e)}}));const ol=async(e,l)=>{try{const a=await E(sl.value,e,l);D.value.status=a.data.result.status,D.value.notes=a.data.result.notes,ll.response(a)}catch(a){ll.danger(a)}"REJECTED"===e&&(Qe.value=!1),"APPROVED"===e&&(el.value=!1)},rl=e=>{switch(e){case"APPROVED":return"success";case"PENDING":return"warning";case"REJECTED":return"danger";default:return"info"}},dl=e=>{switch(e){case 1:default:return"info";case 2:return"primary";case 3:return"success"}},cl=n((()=>{if(nl.value){if(nl.value.document_passport)return"Passport";if(nl.value.document_drivers_license)return"Driver's License";if(nl.value.document_id_card)return"ID Card"}})),il=l(null),ul=l(!1);function ml(e){il.value=e,ul.value=!0}function gl(){ul.value=!1}return(e,l)=>{const a=_,s=x,t=j,n=C,o=w,z=$,E=P,T=c("VueEasyLightbox"),S=R;return i(),r(S,{class:"mb-20"},{right:d((()=>[u(s,{onClick:l[0]||(l[0]=e=>v(Ze).back()),color:"muted"},{default:d((()=>[u(a,{name:"line-md:chevron-left",class:"mr-2"}),m(" "+g(e.$t("Back")),1)])),_:1})])),default:d((()=>[u(n,{class:"px-8 pt-8 pb-4 mx-auto"},{default:d((()=>[p("div",A,[p("h1",F,g(e.$t("KYC Application Details")),1),p("div",N,[u(t,{shape:"rounded",color:rl(v(D)?.status),flavor:"pastel",class:"dark:bg-opacity-80"},{default:d((()=>[m(g(v(D)?.status),1)])),_:1},8,["color"]),u(t,{shape:"rounded",color:dl(v(D)?.level),class:"dark:bg-opacity-80"},{default:d((()=>[m(g(e.$t("Level"))+" "+g(v(D)?.level),1)])),_:1},8,["color"])])]),v(nl)?(i(),f("div",K,[p("h2",B,g(e.$t("General Details"))+": ",1),p("div",L,[p("div",V,[p("strong",null,g(e.$t("First Name"))+":",1),m(" "+g(v(nl).first_name),1),I,p("strong",null,g(e.$t("Last Name"))+":",1),m(" "+g(v(nl).last_name),1),J,p("strong",null,g(e.$t("Email"))+":",1),m(" "+g(v(nl).email),1),O,p("strong",null,g(e.$t("Phone"))+":",1),m(" "+g(v(nl).phone),1),G,p("strong",null,g(e.$t("Date of Birth"))+":",1),m(" "+g(v(nl).dob),1),H,p("strong",null,g(e.$t("Social Security Number"))+":",1),m(" "+g(v(nl).ssn),1),M]),p("div",U,[p("strong",null,g(e.$t("Address"))+":",1),m(" "+g(v(nl).address),1),W,p("strong",null,g(e.$t("City"))+":",1),m(" "+g(v(nl).city),1),Y,p("strong",null,g(e.$t("State"))+":",1),m(" "+g(v(nl).state),1),q,p("strong",null,g(e.$t("Country"))+":",1),m(" "+g(v(nl).country),1),X,p("strong",null,g(e.$t("ZIP"))+":",1),m(" "+g(v(nl).zip),1),Z])])])):b("",!0),v(nl)?(i(),f("div",Q,[p("h3",ee,g(e.$t("Uploaded Document"))+": "+g(v(cl)),1),v(nl).document_passport?(i(),f("div",le,[p("div",null,[p("strong",null,g(e.$t("Passport Documents")),1)]),p("div",ae,[p("div",null,[p("div",null,g(e.$t("Front"))+":",1),p("div",se,[p("img",{loading:"lazy",src:v(nl)?.documents?.document_passport?.front||"/img/placeholder.png",alt:"Front Document",class:"dark:bg-muted-800 rounded-2xl bg-white p-1",onClick:l[1]||(l[1]=e=>ml(v(nl)?.documents?.document_passport?.front)),height:"180"},null,8,te),p("div",{class:"overlay",onClick:l[2]||(l[2]=e=>ml(v(nl)?.documents?.document_passport?.front))},[u(a,{name:"lucide:zoom-in",class:"h-5 w-5 zoom-icon"})])])]),p("div",null,[p("div",null,g(e.$t("Selfie"))+":",1),p("div",ne,[p("img",{loading:"lazy",src:v(nl)?.documents?.document_passport?.selfie||"/img/placeholder.png",alt:"Selfie Document",class:"dark:bg-muted-800 rounded-2xl bg-white p-1",onClick:l[3]||(l[3]=e=>ml(v(nl)?.documents?.document_passport?.selfie)),height:"180"},null,8,oe),p("div",{class:"overlay",onClick:l[4]||(l[4]=e=>ml(v(nl)?.documents?.document_passport?.selfie))},[u(a,{name:"lucide:zoom-in",class:"h-5 w-5 zoom-icon"})])])])])])):b("",!0),v(nl).document_drivers_license?(i(),f("div",re,[p("div",null,[p("strong",null,g(e.$t("Driver License Documents")),1)]),p("div",de,[p("div",null,[p("div",null,g(e.$t("Front"))+":",1),p("div",ce,[p("img",{loading:"lazy",src:v(nl)?.documents?.document_drivers_license?.front||"/img/placeholder.png",alt:"Front Document",class:"dark:bg-muted-800 rounded-2xl bg-white p-1",onClick:l[5]||(l[5]=e=>ml(v(nl)?.documents?.document_drivers_license?.front)),height:"180"},null,8,ie),p("div",{class:"overlay",onClick:l[6]||(l[6]=e=>ml(v(nl)?.documents?.document_drivers_license?.front))},[u(a,{name:"lucide:zoom-in",class:"h-5 w-5 zoom-icon"})])])]),p("div",null,[p("div",null,g(e.$t("Selfie"))+":",1),p("div",ue,[p("img",{loading:"lazy",src:v(nl)?.documents?.document_drivers_license?.selfie||"/img/placeholder.png",alt:"Selfie Document",class:"dark:bg-muted-800 rounded-2xl bg-white p-1",onClick:l[7]||(l[7]=e=>ml(v(nl)?.documents?.document_drivers_license?.selfie)),height:"180"},null,8,me),p("div",{class:"overlay",onClick:l[8]||(l[8]=e=>ml(v(nl)?.documents?.document_drivers_license?.selfie))},[u(a,{name:"lucide:zoom-in",class:"h-5 w-5 zoom-icon"})])])])])])):b("",!0),v(nl).document_id_card?(i(),f("div",ge,[p("div",null,[p("strong",null,g(e.$t("National ID Documents")),1)]),p("div",ve,[p("div",null,[p("div",null,g(e.$t("Front"))+":",1),p("div",pe,[p("img",{loading:"lazy",src:v(nl)?.documents?.document_id_card?.front||"/img/placeholder.png",alt:"Front Document",class:"dark:bg-muted-800 rounded-2xl bg-white p-1",onClick:l[9]||(l[9]=e=>ml(v(nl)?.documents?.document_id_card?.front)),height:"180"},null,8,fe),p("div",{class:"overlay",onClick:l[10]||(l[10]=e=>ml(v(nl)?.documents?.document_id_card?.front))},[u(a,{name:"lucide:zoom-in",class:"h-5 w-5 zoom-icon"})])])]),p("div",null,[p("div",null,g(e.$t("Back"))+":",1),p("div",be,[p("img",{loading:"lazy",src:v(nl)?.documents?.document_id_card?.back||"/img/placeholder.png",alt:"Back Document",class:"dark:bg-muted-800 rounded-2xl bg-white p-1",onClick:l[11]||(l[11]=e=>ml(v(nl)?.documents?.document_id_card?.back)),height:"180"},null,8,ye),p("div",{class:"overlay",onClick:l[12]||(l[12]=e=>ml(v(nl)?.documents?.document_id_card?.back))},[u(a,{name:"lucide:zoom-in",class:"h-5 w-5 zoom-icon"})])])]),p("div",null,[p("div",null,g(e.$t("Selfie"))+":",1),p("div",he,[p("img",{loading:"lazy",src:v(nl)?.documents?.document_id_card?.selfie||"/img/placeholder.png",alt:"Selfie Document",class:"dark:bg-muted-800 rounded-2xl bg-white p-1",onClick:l[13]||(l[13]=e=>ml(v(nl)?.documents?.document_id_card?.selfie)),height:"180"},null,8,ke),p("div",{class:"overlay",onClick:l[14]||(l[14]=e=>ml(v(nl)?.documents?.document_id_card?.selfie))},[u(a,{name:"lucide:zoom-in",class:"h-5 w-5 zoom-icon"})])])])])])):b("",!0)])):b("",!0),v(nl)?(i(),f("div",_e,[p("h3",xe,g(e.$t("Custom Fields"))+": ",1),p("div",Ce,[(i(!0),f(y,null,h(v(nl).custom_fields,((e,l)=>(i(),f(y,{key:l},["input"===e.type||"textarea"===e.type?(i(),f("div",we,[p("strong",null,g(e.title)+":",1),m(" "+g(e.value),1)])):"file upload"===e.type?(i(),f("div",$e,[p("div",null,[p("strong",null,g(e.title)+":",1)]),p("div",De,[p("img",{loading:"lazy",src:e.value||"/img/placeholder.png",alt:"Custom Document",class:"dark:bg-muted-800 rounded-2xl bg-white p-1",onClick:l=>ml(e.value),height:"180"},null,8,ze),p("div",{class:"overlay",onClick:l=>ml(e.value)},[u(a,{name:"lucide:zoom-in",class:"h-5 w-5 zoom-icon"})],8,Ee)])])):b("",!0)],64)))),128))])])):b("",!0),p("div",je,[p("div",Pe,[p("div",Re,[p("img",{src:v(D)?.user?.avatar||"/img/avatars/placeholder-file.png",class:"mr-2 h-16 w-16 rounded-full"},null,8,Te),p("div",null,[p("div",Se,g(v(D)?.user?.first_name)+" "+g(v(D)?.user?.last_name),1),p("div",null,g(v(D)?.user?.uuid),1)])])]),p("div",Ae,[p("h2",Fe,g(e.$t("Date"))+": ",1),p("p",null,g(v(al)(v(D)?.created_at,!0)),1)])]),v(D)?.notes&&"REJECTED"===v(D)?.status?(i(),f("div",Ne,[p("h2",Ke,g(e.$t("Notes"))+": ",1),p("p",{innerHTML:v(D)?.notes.replace(/\n/g,"<br />")},null,8,Be)])):b("",!0),"PENDING"===v(D)?.status?(i(),f("div",Le,[u(s,{onClick:l[15]||(l[15]=e=>el.value=!0),color:"success",class:"w-full"},{default:d((()=>[m(g(e.$t("Approve Kyc")),1)])),_:1}),u(s,{onClick:l[16]||(l[16]=e=>Qe.value=!0),color:"danger",class:"w-full"},{default:d((()=>[m(g(e.$t("Reject Kyc")),1)])),_:1})])):b("",!0)])),_:1}),u(z,{open:v(el),size:"lg",onClose:l[20]||(l[20]=()=>el.value=!1)},{header:d((()=>[p("div",Ve,[p("h3",Ie,g(e.$t("Approve Kyc")),1),u(o,{onClick:l[17]||(l[17]=e=>el.value=!1)})])])),footer:d((()=>[p("div",Ge,[p("div",He,[u(s,{onClick:l[18]||(l[18]=e=>el.value=!1)},{default:d((()=>[m(g(e.$t("Cancel")),1)])),_:1}),u(s,{color:"success",flavor:"solid",onClick:l[19]||(l[19]=e=>ol("APPROVED"))},{default:d((()=>[m(g(e.$t("Approve")),1)])),_:1})])])])),default:d((()=>[p("div",Je,[p("div",Oe,[p("p",null,g(e.$t("Are you sure you want to approve this kyc? This action cannot be undone"))+". ",1)])])])),_:1},8,["open"]),u(z,{open:v(Qe),size:"lg",onClose:l[25]||(l[25]=()=>Qe.value=!1)},{header:d((()=>[p("div",Me,[p("h3",Ue,g(e.$t("Reject Kyc")),1),u(o,{onClick:l[21]||(l[21]=e=>Qe.value=!1)})])])),footer:d((()=>[p("div",qe,[p("div",Xe,[u(s,{onClick:l[23]||(l[23]=e=>Qe.value=!1)},{default:d((()=>[m(g(e.$t("Cancel")),1)])),_:1}),u(s,{color:"danger",flavor:"solid",onClick:l[24]||(l[24]=e=>ol("REJECTED",v(tl)))},{default:d((()=>[m(g(e.$t("Reject")),1)])),_:1})])])])),default:d((()=>[p("div",We,[p("div",Ye,[u(E,{modelValue:v(tl),"onUpdate:modelValue":l[22]||(l[22]=e=>k(tl)?tl.value=e:null),type:"text",rows:"10",label:"Please provide a reason for rejection.",placeholder:"Enter rejection reason",shape:"curved",classes:{input:"h-12"}},null,8,["modelValue"])])])])),_:1},8,["open"]),u(T,{visible:v(ul),imgs:[v(il)],onHide:gl},null,8,["visible","imgs"])])),_:1})}}}),[["__scopeId","data-v-a7cd2b4b"]]);export{Ze as default};
