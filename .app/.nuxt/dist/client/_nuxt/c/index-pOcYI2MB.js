import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{a,ad as l,z as t,r as s,c as r,E as o,b as i,e as u,w as n,u as d,an as m,o as c,p as f,f as p,t as v,F as x,B as h,af as g,O as w,q as y,k as b,x as k,X as j,s as _,Y as C,ag as D,_ as B,g as $,ao as F}from"../e/entry-8qgg5CL-.js";import{_ as V}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as T}from"./BasePagination.vue-eKZkqxB7.js";import{_ as M}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_ as U}from"./BaseListbox.vue-1Dy9Ui3z.js";import{u as A}from"./useForex-v_V55_1y.js";import{_ as E,a as H}from"./placeholder-search-1-dark-6GG3FkNl.js";import{z as P,u as W,t as z,F as N}from"./vee-validate.esm-n59zZCC5.js";import{u as O}from"./durations-0ECH6bw9.js";import"./input-id-wZ-Ta08j.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";const S={class:"pb-10"},I={class:"w-full"},L={key:0,class:"space-y-4"},q={class:"flex flex-col items-center justify-center gap-3 text-center sm:flex-row sm:justify-start sm:text-left"},Y={class:"space-y-2"},K={class:"flex flex-col gap-4 pt-4 sm:ms-auto sm:flex-row sm:items-center sm:justify-end sm:pt-0"},R={class:"flex w-full items-center justify-center sm:w-[160px] sm:justify-end"},X={class:"ptablet:hidden divide-muted-200 dark:divide-muted-700 flex items-center justify-center divide-x"},G={class:"flex flex-col gap-1 px-4 text-center"},J={class:"flex flex-col gap-1 px-4 text-center"},Q={class:"flex flex-col gap-1 px-4 text-center"},Z={class:"ptablet:hidden flex w-full items-center justify-center gap-1 py-3 sm:w-[160px] sm:justify-end sm:py-0"},ee={class:"sm:ms-6"},ae={key:1},le=p("img",{class:"block dark:hidden",src:E,alt:"Placeholder image"},null,-1),te=p("img",{class:"hidden dark:block",src:H,alt:"Placeholder image"},null,-1),se={key:2,class:"space-y-4"},re={class:"flex flex-col items-center justify-start gap-3 text-center sm:flex-row sm:justify-start sm:text-left"},oe={class:"flex flex-col gap-4 pt-4 sm:ms-auto sm:flex-row sm:items-center sm:justify-end sm:pt-0"},ie={class:"divide-muted-200 dark:divide-muted-700 flex items-center justify-center divide-x"},ue={class:"flex flex-col gap-1 px-4 text-center"},ne={class:"flex w-full items-center justify-between p-4 md:p-6"},de={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},me={class:"p-4 md:p-6"},ce={class:"mx-auto w-full text-start"},fe={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},pe={class:"p-4 md:p-6"},ve={class:"flex gap-x-2"},xe={class:"flex w-full items-center justify-between p-4 md:p-6"},he={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},ge={class:"p-4 md:p-6"},we={class:"mx-auto w-full text-center"},ye={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},be={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},ke={class:"p-4 md:p-6"},je={class:"flex gap-x-2"},_e=a({__name:"index",setup(a){const{toast:E}=l(),H=t(),_e=s(!0),{createForexDuration:Ce,deleteForexDuration:De}=A(),Be=O(),$e=r((()=>Be.durations));o((async()=>{_e.value=!0,0===Be.durations.length&&await Be.fetchForexDurations(),_e.value=!1}));const Fe=s(""),Ve=s(10),Te=r((()=>parseInt(H.query.page??"1"))),Me=s(!1),Ue=r((()=>$e.value&&Array.isArray($e.value)?$e.value.filter((e=>e.duration.toString().includes(Fe.value))):[])),Ae=r((()=>{const e=(Te.value-1)*Ve.value,a=e+Ve.value;return Ue.value.slice(e,a)})),Ee=P.object({duration:P.number().gt(0,"Maximum amount must be greater than 0"),timeframe:P.object({label:P.string(),value:P.string()})}),He=[{label:"Hour",value:"HOUR"},{label:"Day",value:"DAY"},{label:"Week",value:"WEEK"},{label:"Month",value:"MONTH"}],Pe={HOUR:"Hour",DAY:"Day",WEEK:"Week",MONTH:"Month"},We=r((()=>({duration:1,timeframe:He[0]}))),{handleSubmit:ze,isSubmitting:Ne,meta:Oe,resetForm:Se}=W({validationSchema:z(Ee),initialValues:We}),Ie=ze((async e=>{if($e.value&&$e.value.length>0&&$e.value.some((a=>a.duration===e.duration&&a.timeframe===e.timeframe.value)))return E.warning("Duration already exists"),void(Me.value=!1);const a={duration:e.duration,timeframe:e.timeframe.value};try{const e=await Ce(a);E.response(e),"success"===e.status&&(await Be.fetchForexDurations(),Se())}catch(l){E.danger(l)}Me.value=!1})),Le=s(!1),qe=s(!1),Ye=s(null);return(a,l)=>{const t=e,s=k,r=j,o=_,A=C,H=D,P=B,W=$,z=V,O=T,Ce=M,Ue=F,Ee=U,We=m;return c(),i("div",S,[u(Ce,null,{left:n((()=>[u(t,{modelValue:d(Fe),"onUpdate:modelValue":l[0]||(l[0]=e=>f(Fe)?Fe.value=e:null),icon:"lucide:search",placeholder:"Filter durations...",classes:{wrapper:"w-full sm:w-auto"}},null,8,["modelValue"])])),right:n((()=>[p("div",I,[u(r,{color:"success",class:"w-full",onClick:l[1]||(l[1]=e=>Me.value=!0),flavor:"outline"},{default:n((()=>[u(s,{name:"line-md:plus",class:"h-4 w-4"}),p("span",null,v(a.$t("Create Duration")),1)])),_:1})])])),default:n((()=>[p("div",null,[d(_e)?(c(),i("div",L,[(c(),i(x,null,h(3,(e=>u(A,{key:e,class:"flex flex-col p-5 sm:flex-row sm:items-center"},{default:n((()=>[p("div",q,[u(o,{class:"h-16 w-16 shrink-0 rounded-full"}),p("div",Y,[u(o,{class:"mx-auto h-3 w-[100px] rounded-lg sm:mx-0"}),u(o,{class:"mx-auto h-3 w-[75px] rounded-lg sm:mx-0"})])]),p("div",K,[p("div",R,[u(o,{class:"h-6 w-24 rounded-full"})]),p("div",X,[p("div",G,[u(o,{class:"h-3 w-16 rounded-lg"})]),p("div",J,[u(o,{class:"h-3 w-16 rounded-lg"})]),p("div",Q,[u(o,{class:"h-3 w-16 rounded-lg"})])]),p("div",Z,[u(o,{class:"h-8 w-8 shrink-0 rounded-full"}),u(o,{class:"h-8 w-8 shrink-0 rounded-full"}),u(o,{class:"hidden h-3 w-12 rounded-full sm:block"})]),p("div",ee,[u(o,{class:"mx-auto h-8 w-40 rounded-lg sm:mx-0 sm:w-20"})])])])),_:2},1024))),64))])):d(_e)||0!==d(Ae).length?(c(),i("div",se,[u(g,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:n((()=>[(c(!0),i(x,null,h(d(Ae),(e=>(c(),w(A,{key:e.id,class:"flex flex-col p-5 sm:flex-row sm:items-center"},{default:n((()=>[p("div",re,[u(P,{tag:"h3",size:"sm",weight:"medium",class:"text-muted-800 dark:text-muted-100"},{default:n((()=>[y(v(e.duration)+" "+v(Pe[e.timeframe]),1)])),_:2},1024)]),p("div",oe,[p("div",ie,[p("div",ue,[u(P,{tag:"h3",size:"md",weight:"semibold",class:"text-muted-800 dark:text-muted-100"},{default:n((()=>[p("span",null,v(e.forex_plan_duration?.length??0),1)])),_:2},1024),u(W,{lead:"none",weight:"semibold",class:"text-muted-400 !text-[0.65rem] uppercase"},{default:n((()=>[p("span",null,v(a.$t("Plans")),1)])),_:1})]),p("div",null,[u(z,{onClick:a=>function(e){Ye.value=e,Le.value=!0}(e),color:"danger",flavor:"outline","data-nui-tooltip":"Delete Duration",condensed:"",class:"ml-4"},{default:n((()=>[u(s,{name:"line-md:close",class:"h-4 w-4"})])),_:2},1032,["onClick"])])])])])),_:2},1024)))),128))])),_:1}),p("div",null,[d($e).length>d(Ve)?(c(),w(O,{key:0,"total-items":d($e).length,"item-per-page":d(Ve),"current-page":d(Te),shape:"full"},null,8,["total-items","item-per-page","current-page"])):b("",!0)])])):(c(),i("div",ae,[u(H,{title:d(Fe)&&""!==d(Fe)?"No matching results":"No results",subtitle:d(Fe)&&""!==d(Fe)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:n((()=>[le,te])),_:1},8,["title","subtitle"])]))])])),_:1}),u(We,{open:d(Me),size:"sm",onClose:l[4]||(l[4]=e=>Me.value=!1)},{header:n((()=>[p("div",ne,[p("h3",de,v(a.$t("Create New Duration")),1),u(Ue,{onClick:l[2]||(l[2]=e=>Me.value=!1)})])])),footer:n((()=>[p("div",pe,[p("div",ve,[u(r,{onClick:l[3]||(l[3]=e=>Me.value=!1)},{default:n((()=>[y(v(a.$t("Cancel")),1)])),_:1}),u(r,{color:"primary",flavor:"solid",onClick:d(Ie),disabled:d(Ne),loading:d(Ne)},{default:n((()=>[y(v(a.$t("Create")),1)])),_:1},8,["onClick","disabled","loading"])])])])),default:n((()=>[p("div",me,[p("div",ce,[p("p",fe,v(a.$t("Please provide a unique duration and timeframe for the new duration"))+". ",1),u(d(N),{name:"duration"},{default:n((({field:e,errorMessage:a,handleChange:l,handleBlur:s})=>[u(t,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,l],error:a,disabled:d(Ne),type:"number",label:"duration",placeholder:"Enter duration",onBlur:s},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1}),u(d(N),{name:"timeframe"},{default:n((({field:e,errorMessage:a,handleChange:l,handleBlur:t})=>[u(Ee,{"model-value":e.value,error:a,disabled:d(Ne),items:He,properties:{label:"label",value:"value"},placeholder:"Please select an option",label:"Timeframe",shape:"rounded","onUpdate:modelValue":l,onBlur:t},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})])])])),_:1},8,["open"]),u(We,{open:d(Le),size:"sm",onClose:l[8]||(l[8]=e=>Le.value=!1)},{header:n((()=>[p("div",xe,[p("h3",he,v(a.$t("Delete"))+" "+v(a.$t("Forex Duration")),1),u(Ue,{onClick:l[5]||(l[5]=e=>Le.value=!1)})])])),footer:n((()=>[p("div",ke,[p("div",je,[u(r,{onClick:l[6]||(l[6]=e=>Le.value=!1)},{default:n((()=>[y(v(a.$t("Cancel")),1)])),_:1}),u(r,{color:"danger",flavor:"solid",onClick:l[7]||(l[7]=e=>async function(){qe.value=!0;try{const e=await De(Ye.value?.id);E.response(e),"success"===e.status&&Be.removeDuration(Ye.value?.id)}catch(e){E.danger(e)}Le.value=!1,qe.value=!1,Ye.value=null}()),disabled:d(qe),loading:d(qe)},{default:n((()=>[y(v(a.$t("Delete")),1)])),_:1},8,["disabled","loading"])])])])),default:n((()=>[p("div",ge,[p("div",we,[p("h3",ye,v(a.$t("Are you sure?")),1),p("p",be,v(a.$t("Do you really want to delete this"))+" "+v(a.$t("duration"))+" "+v(a.$t("This process cannot be undone"))+". ",1)])])])),_:1},8,["open"])])}}});export{_e as default};
