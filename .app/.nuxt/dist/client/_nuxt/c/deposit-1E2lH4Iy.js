import{a as e,z as a,ac as l,ad as s,Q as t,c as u,r as o,E as n,b as r,e as i,w as d,o as c,q as p,t as m,u as v,f,O as x,p as h,F as y,k as w,_ as b,x as g,X as _,Y as j}from"../e/entry-8qgg5CL-.js";import{_ as k}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as $}from"./BaseInput.vue-iInHQMIA.js";import{_ as D}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as T}from"./useForex-v_V55_1y.js";import{u as B}from"./useWallet-8iHzU2hV.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";import"./input-id-wZ-Ta08j.js";const V={class:"flex justify-center items-center pt-5"},z={class:"p-5"},I=f("hr",{class:"border-gray-200 dark:border-gray-700"},null,-1),W={class:"px-5"},C={class:"space-y-5 pl-8"},P={class:"w-full"},E={class:"p-5"},F=e({__name:"deposit",setup(e){const F=a(),S=l(),{toast:U}=s(),{storeDepositTransaction:X}=T(),{fetchWalletsByType:q}=B(),A=t(),L=u((()=>A.settings)),{accountId:N}=F.params,O=o(0),Q=o(!1),Y=o(null),G=o([]),H=u((()=>G.value));async function J(){if(null!==Y.value?.value)if(O.value)if(O.value<0)U.dangerText("Please enter a valid deposit amount");else if(O.value>Y.value?.value?.balance)U.dangerText("Insufficient balance");else{Q.value=!0;try{const e=await X(N,Y.value?.value?.uuid,O.value);U.response(e),"success"===e.status&&S.push("/user/forex")}catch(e){U.danger(e)}Q.value=!1}else U.dangerText("Please enter a deposit amount");else U.dangerText("Please select a wallet")}return n((async()=>{const e=await q(L.value?.forex_deposit_wallet_type);"success"===e.status&&(G.value=e.data.result)})),(e,a)=>{const l=b,s=g,t=_,u=k,o=$,n=j,T=D;return c(),r("div",null,[i(T,null,{left:d((()=>[i(l,{size:"xl"},{default:d((()=>[p(m(e.$t("Deposit"))+" to account ID: "+m(v(N)),1)])),_:1})])),right:d((()=>[f("div",null,[i(t,{to:"/user/forex",color:"muted",flavor:"pastel"},{default:d((()=>[i(s,{name:"line-md:chevron-left",class:"h-4 w-4"}),f("span",null,m(e.$t("Cancel")),1)])),_:1})])])),default:d((()=>[f("div",V,[i(n,{class:"space-y-5 max-w-xl"},{default:d((()=>[f("div",z,[i(l,{as:"h3",size:"2xl",weight:"bold",class:"text-muted-800 dark:text-white items-center flex"},{default:d((()=>[v(Y)?(c(),x(s,{key:1,name:"line-md:confirm-circle",class:"h-6 w-6 mr-2 text-success-500"})):(c(),x(s,{key:0,name:"line-md:loading-alt-loop",class:"h-6 w-6 mr-2"})),p(" "+m(e.$t("Select Wallet")),1)])),_:1}),i(u,{class:"mt-5 pl-8 z-40",modelValue:v(Y),"onUpdate:modelValue":a[0]||(a[0]=e=>h(Y)?Y.value=e:null),items:v(H).length>0?v(H).map((e=>({label:`${e.type} - ${e.currency} - ${e.balance}`,value:e}))):[{label:"No wallet available",value:null}],properties:{label:"label",value:"value"},placeholder:"Select a wallet",shape:"rounded"},null,8,["modelValue","items"])]),v(Y)&&null!==v(Y).value?(c(),r(y,{key:0},[I,f("div",W,[i(l,{as:"h3",size:"2xl",weight:"bold",class:"text-muted-800 dark:text-white flex items-center gap-2"},{default:d((()=>[i(s,{name:"line-md:downloading-loop",class:"h-6 w-6"}),p(" "+m(e.$t("Deposital Details")),1)])),_:1}),f("div",C,[f("div",P,[(c(),x(o,{modelValue:v(O),"onUpdate:modelValue":a[1]||(a[1]=e=>h(O)?O.value=e:null),key:v(Y),shape:"rounded",type:"number",label:"Deposit amount",placeholder:"Enter your deposit amount..."},null,8,["modelValue"]))])])]),f("div",E,[i(t,{class:"w-full",color:"success",onClick:J,disabled:!v(O)||v(Q),loading:v(Q)},{default:d((()=>[p(m(e.$t("Deposit")),1)])),_:1},8,["disabled","loading"])])],64)):w("",!0)])),_:1})])])),_:1})])}}});export{F as default};
