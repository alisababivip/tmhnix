import{a as e,r as a,z as t,ac as s,ad as r,E as l,O as o,w as n,o as d,e as c,q as i,t as u,u as m,f as p,b as f,k as g,F as x,p as v,x as y,X as b,Y as k,ao as E,an as h}from"../e/entry-8qgg5CL-.js";import{_ as T}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as w}from"./BaseTextarea.vue-8st5U0qk.js";import{_}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as D}from"./useForex-v_V55_1y.js";import{a as C}from"./strings-rQgUKePI.js";import"./input-id-wZ-Ta08j.js";const j={class:"flex items-center justify-between mb-6"},R={class:"text-2xl font-semibold text-gray-800 dark:text-gray-200"},$={class:"flex items-center xs:flex-col sm:flex-row gap-2"},O={class:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 gap-4 mb-6 text-gray-700 dark:text-gray-400"},P={class:"flex flex-col"},A={class:"text-sm font-semibold text-gray-600 dark:text-gray-200"},I={key:0,class:"flex flex-col"},W={class:"text-sm font-semibold text-gray-600 dark:text-gray-200"},F={class:"p-4 border rounded-md mb-6 text-gray-700 dark:border-gray-600 dark:text-gray-400"},L={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},X={class:"mb-4"},M={key:1},N={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},H={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6 text-gray-700 dark:text-gray-400"},J={class:"p-4 border rounded-md dark:border-gray-600"},z={class:"flex jsutify-start items-center"},B=["src"],S={class:"font-bold"},V={class:"p-4 border rounded-md dark:border-gray-600"},G={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},q={key:0,class:"p-4 border rounded-md dark:border-gray-600 mb-6"},U={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},Y=["innerHTML"],K={key:1,class:"w-full flex gap-2 xs:flex-col sm:flex-row mb-2"},Q={class:"flex w-full items-center justify-between p-4 md:p-6"},Z={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},ee={class:"p-4 md:p-6"},ae={class:"mx-auto w-full text-start"},te={class:"p-4 md:p-6"},se={class:"flex gap-x-2"},re={class:"flex w-full items-center justify-between p-4 md:p-6"},le={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},oe={class:"p-4 md:p-6"},ne={class:"mx-auto w-full text-start"},de={class:"p-4 md:p-6"},ce={class:"flex gap-x-2"},ie=e({__name:"[uuid]",setup(e){const ie=a(null),{getForexTransaction:ue,updateTransactionStatus:me}=D(),pe=t(),fe=s(),ge=a(!1),xe=a(!1),{toast:ve}=r(),{uuid:ye}=pe.params,be=a("We are sorry, your transaction has been rejected. Please contact support for more information. \n\nRejection reason goes here.  \n\nThank you.");l((async()=>{try{const e=await ue(ye);ie.value=e.data.result}catch(e){fe.back(),ve.danger(e)}}));const ke=async(e,a)=>{if(ie.value){try{const t=await me(ye,e,a);ve.response(t),"success"===t.status&&(ie.value.status=e,"REJECTED"===e&&(ie.value.metadata.note=a))}catch(t){ve.danger(t)}"REJECTED"===e&&(ge.value=!1),"COMPLETED"===e&&(xe.value=!1)}},Ee=e=>{switch(e){case"COMPLETED":return"success";case"PENDING":return"warning";case"FAILED":case"CANCELLED":case"REJECTED":case"EXPIRED":return"danger";default:return"info"}},he=e=>{switch(e){case"FOREX_DEPOSIT":return"success";case"FOREX_WITHDRAW":return"danger";default:return"info"}},Te={FOREX_DEPOSIT:"Deposit",FOREX_WITHDRAW:"Withdraw"};return(e,a)=>{const t=y,s=b,r=T,l=k,D=E,ue=h,me=w,pe=_;return d(),o(pe,{class:"mb-20"},{right:n((()=>[c(s,{onClick:a[0]||(a[0]=e=>m(fe).back()),color:"muted"},{default:n((()=>[c(t,{name:"line-md:chevron-left",class:"mr-2"}),i(" "+u(e.$t("Back")),1)])),_:1})])),default:n((()=>[c(l,{class:"px-8 pt-8 pb-4 mx-auto"},{default:n((()=>[p("div",j,[p("h1",R,u(e.$t("Transaction Details")),1),p("div",$,[c(r,{shape:"rounded",color:Ee(m(ie)?.status),flavor:"pastel",class:"dark:bg-opacity-80"},{default:n((()=>[i(u(m(ie)?.status),1)])),_:1},8,["color"]),c(r,{shape:"rounded",color:he(m(ie)?.type),class:"dark:bg-opacity-80"},{default:n((()=>[i(u(Te[m(ie)?.type]),1)])),_:1},8,["color"])])]),p("div",O,[p("div",P,[p("label",A,u(e.$t("Total Amount"))+":",1),i(" "+u(m(ie)?.amount+" "+m(ie)?.wallet?.currency),1)]),"FOREX_WITHDRAW"===m(ie)?.type?(d(),f("div",I,[p("label",W,u(e.$t("Withdraw Method"))+":",1),i(" "+u(m(ie)?.method),1)])):g("",!0)]),p("div",F,[m(ie)?.description?(d(),f(x,{key:0},[p("h2",L,u(e.$t("Description"))+": ",1),p("p",X,u(m(ie)?.description),1)],64)):(d(),f("div",M,[p("h2",N,u(e.$t("Transaction ID"))+": ",1),p("p",null,u(m(ie)?.uuid),1)]))]),p("div",H,[p("div",J,[p("div",z,[p("img",{loading:"lazy",src:m(ie)?.user?.avatar||"/img/avatars/placeholder-file.png",class:"mr-2 h-16 w-16 rounded-full"},null,8,B),p("div",null,[p("div",S,u(m(ie)?.user.first_name)+" "+u(m(ie)?.user.last_name),1),p("div",null,u(m(ie)?.user.uuid),1)])])]),p("div",V,[p("h2",G,u(e.$t("Date"))+": ",1),p("p",null,u(("formatDate"in e?e.formatDate:m(C))(m(ie)?.created_at)),1)])]),m(ie)?.metadata?.note&&"REJECTED"===m(ie)?.status?(d(),f("div",q,[p("h2",U,u(e.$t("Note"))+": ",1),p("p",{innerHTML:m(ie)?.metadata?.note.replace(/\n/g,"<br />")},null,8,Y)])):g("",!0),"PENDING"===m(ie)?.status?(d(),f("div",K,[c(s,{onClick:a[1]||(a[1]=e=>xe.value=!0),color:"success",class:"w-full"},{default:n((()=>[i(u(e.$t("Approve Transaction")),1)])),_:1}),c(s,{onClick:a[2]||(a[2]=e=>ge.value=!0),color:"danger",class:"w-full"},{default:n((()=>[i(u(e.$t("Reject Transaction")),1)])),_:1})])):g("",!0)])),_:1}),c(ue,{open:m(xe),size:"lg",onClose:a[6]||(a[6]=()=>xe.value=!1)},{header:n((()=>[p("div",Q,[p("h3",Z,u(e.$t("Approve Transaction")),1),c(D,{onClick:a[3]||(a[3]=e=>xe.value=!1)})])])),footer:n((()=>[p("div",te,[p("div",se,[c(s,{onClick:a[4]||(a[4]=e=>xe.value=!1)},{default:n((()=>[i(u(e.$t("Cancel")),1)])),_:1}),c(s,{color:"success",flavor:"solid",onClick:a[5]||(a[5]=e=>ke("COMPLETED"))},{default:n((()=>[i(u(e.$t("Approve")),1)])),_:1})])])])),default:n((()=>[p("div",ee,[p("div",ae,[p("p",null,u(e.$t("Are you sure you want to approve this transaction? This action cannot be undone"))+". ",1)])])])),_:1},8,["open"]),c(ue,{open:m(ge),size:"lg",onClose:a[11]||(a[11]=()=>ge.value=!1)},{header:n((()=>[p("div",re,[p("h3",le,u(e.$t("Reject Transaction")),1),c(D,{onClick:a[7]||(a[7]=e=>ge.value=!1)})])])),footer:n((()=>[p("div",de,[p("div",ce,[c(s,{onClick:a[9]||(a[9]=e=>ge.value=!1)},{default:n((()=>[i(u(e.$t("Cancel")),1)])),_:1}),c(s,{color:"danger",flavor:"solid",onClick:a[10]||(a[10]=e=>ke("REJECTED",m(be)))},{default:n((()=>[i(u(e.$t("Reject")),1)])),_:1})])])])),default:n((()=>[p("div",oe,[p("div",ne,[c(me,{modelValue:m(be),"onUpdate:modelValue":a[8]||(a[8]=e=>v(be)?be.value=e:null),type:"text",rows:"10",label:"Please provide a reason for rejection.",placeholder:"Enter rejection reason",shape:"curved",classes:{input:"h-12"}},null,8,["modelValue"])])])])),_:1},8,["open"])])),_:1})}}});export{ie as default};
