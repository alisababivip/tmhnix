import{a as e,U as a,Q as t,c as r,r as l,as as s,ad as i,b as n,e as o,w as d,u,W as c,Y as p,o as m,f as b,q as g,t as v,O as _,k as f,_ as y,a0 as h,X as j}from"../e/entry-8qgg5CL-.js";import{_ as B}from"./BaseMessage.vue-Kpn2u5Rn.js";import{_ as x}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as w}from"./TairoFormGroup.vue--3qC-osX.js";import{_ as P}from"./BaseInput.vue-iInHQMIA.js";import{_ as S}from"./TairoFormSave.vue-aLVbwikq.js";import{z as F,u as T,t as k,F as E}from"./vee-validate.esm-n59zZCC5.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";import"./input-id-wZ-Ta08j.js";const $={class:"flex items-center justify-between p-4"},C={class:"flex items-center gap-2"},U={class:"px-8"},V={class:"mx-auto space-y-12 py-8"},A={class:"text-gray-700 dark:text-gray-300"},M={class:"grid grid-cols-12 gap-4 pt-2"},O={class:"col-span-12 sm:col-span-6"},Y={class:"grid grid-cols-12 gap-4 pt-2"},z={class:"col-span-12 sm:col-span-6"},D=e({__name:"binary-trading",setup(e){const{updateSettings:D}=a(),G=t(),I=r((()=>G.settings)),R=F.object({binary_trading_practice:F.object({label:F.string(),value:F.boolean()}).nullable(),binary_trading_profit_percentage:F.number().min(0,"Please enter a valid profit percentage"),binary_trading_fee:F.number().min(0,"Please enter a valid fee percentage")}),q=k(R),J=r((()=>({binary_trading_practice:{label:I.value.binary_trading_practice?"Enabled":"Disabled",value:!!I.value.binary_trading_practice},binary_trading_profit_percentage:I.value.binary_trading_profit_percentage?parseFloat(I.value.binary_trading_profit_percentage):0,binary_trading_fee:I.value.binary_trading_fee?parseFloat(I.value.binary_trading_fee):0}))),L=[{label:"Enabled",value:!0},{label:"Disabled",value:!1}],{handleSubmit:Q,isSubmitting:W,setFieldError:X,meta:H,errors:K,resetForm:N,setErrors:Z}=T({validationSchema:q,initialValues:J}),ee=l(!1),ae=r((()=>Object.keys(K.value).length));s((()=>{if(H.value.dirty)return confirm("You have unsaved changes. Are you sure you want to leave?")}));const{toast:te}=i(),re=Q((async e=>{e.binary_trading_practice&&(e.binary_trading_practice=e.binary_trading_practice.value),ee.value=!1;try{"success"===(await D(e)).status&&(await D(e),document.documentElement.scrollTo({top:0,behavior:"smooth"}),await G.invalidateCacheAndFetch(),ee.value=!0,setTimeout((()=>{ee.value=!1}),3e3))}catch(a){te.danger(a)}}));return(e,a)=>{const t=y,r=h,l=j,s=B,i=x,F=w,T=P,k=p,D=S;return m(),n("form",{method:"POST",action:"",class:"w-full pb-16",onSubmit:a[2]||(a[2]=c(((...e)=>u(re)&&u(re)(...e)),["prevent"]))},[o(k,null,{default:d((()=>[b("div",$,[b("div",null,[o(t,{tag:"h2",size:"sm",weight:"medium",lead:"normal",class:"uppercase tracking-wider"},{default:d((()=>[g(v(e.$t("Binary Trading")),1)])),_:1}),o(r,{size:"xs",class:"text-muted-400"},{default:d((()=>[g(v(e.$t("General settings for your site binary trading")),1)])),_:1})]),b("div",C,[o(l,{type:"submit",color:"primary",class:"w-24",disabled:u(W)||!u(H).dirty,loading:u(W)},{default:d((()=>[g(v(e.$t("Save")),1)])),_:1},8,["disabled","loading"])])]),b("div",U,[b("div",V,[u(ee)?(m(),_(s,{key:0,onClose:a[0]||(a[0]=e=>ee.value=!1)},{default:d((()=>[b("span",A,v(e.$t("Your settings have been saved"))+"!",1)])),_:1})):f("",!0),u(ae)?(m(),_(s,{key:1,type:"danger",onClose:a[1]||(a[1]=()=>u(Z)({}))},{default:d((()=>[g(v(e.$t("This form has"))+" "+v(u(ae))+" "+v(e.$t("errors, please check them before submitting")),1)])),_:1})):f("",!0),o(F,{label:"Feature Status",sublabel:"Enable or disable features"},{default:d((()=>[b("div",M,[b("div",O,[o(u(E),{name:"binary_trading_practice"},{default:d((({field:e,errorMessage:a,handleChange:t,handleBlur:r})=>[o(i,{"model-value":e.value,error:a,disabled:u(W),items:L,properties:{label:"label",value:"value"},placeholder:"Please select an option",label:"Practice",shape:"rounded","onUpdate:modelValue":t,onBlur:r},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})])])])),_:1}),o(F,{label:"Percentage",sublabel:"Set the percentage"},{default:d((()=>[b("div",Y,[b("div",z,[o(u(E),{name:"binary_trading_profit_percentage"},{default:d((({field:e,errorMessage:a,handleChange:t,handleBlur:r})=>[o(T,{"model-value":e.value,error:a,disabled:u(W),type:"number",icon:"mdi:percent-outline",placeholder:"Profit Percentage","onUpdate:modelValue":t,onBlur:r,label:"Profit Percentage"},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})])])])),_:1})])])])),_:1}),o(D,{disabled:u(W),loading:u(W),onReset:u(N)},null,8,["disabled","loading","onReset"])],32)}}});export{D as default};
