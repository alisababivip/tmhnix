import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as a}from"./BaseSelect.vue-p0KYznCX.js";import{d as l,a as t,z as s,r as o,c as n,E as i,ad as r,b as u,e as d,w as c,u as m,an as p,o as h,p as f,f as v,t as g,q as w,O as b,F as x,B as k,k as y,x as _,X as C,ag as j,ao as $}from"../e/entry-8qgg5CL-.js";import{_ as B,a as T}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as W}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as V}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as E,a as P}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as S}from"./TairoFlexTable-zdoraqRc.js";import{_ as F}from"./BasePagination.vue-eKZkqxB7.js";import{_ as L}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_ as M}from"./BaseListbox.vue-1Dy9Ui3z.js";import{u as A}from"./useEcosystem-9eBUNbsT.js";import{_ as D,a as O}from"./placeholder-search-4-dark-Jht91LnM.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const I=l({id:"ecosystemMasterWallet",state:()=>({wallets:[],loading:!1}),getters:{count:e=>e.wallets.length},actions:{async fetchWallets(){const{getMasterWallets:e}=A(),a=await e();"success"===a.status&&(this.wallets=a.data.result??null)},setWallets(e){this.wallets=e}}}),U={value:10},z={value:25},G={value:50},H={value:100},N=v("img",{class:"block dark:hidden",src:D,alt:"Placeholder image"},null,-1),R=v("img",{class:"hidden dark:block",src:O,alt:"Placeholder image"},null,-1),q={key:1,class:"w-full sm:pt-5"},Q={class:"mt-6"},X={class:"flex w-full items-center justify-between p-4 md:p-6"},Y={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},J={class:"p-4 md:p-6"},K={class:"mx-auto w-full text-start"},Z={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},ee={class:"p-4 md:p-6"},ae={class:"flex gap-x-2"},le={class:"flex w-full items-center justify-between p-4 md:p-6"},te={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},se={class:"p-4 md:p-6"},oe={class:"mx-auto w-full text-start"},ne={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},ie={class:"p-4 md:p-6"},re={class:"flex gap-x-2"},ue=t({__name:"index",setup(l){const t=I(),{createMasterWallet:D,setEcosystemPassphrase:O,fetchMasterWalletsBalance:ue}=A(),de=s(),ce=o(""),me=o(10),pe=n((()=>parseInt(de.query.page??"1"))),he=o(!1),fe=n((()=>t.wallets.filter((e=>e.chain.includes(ce.value))))),ve=n((()=>{const e=(pe.value-1)*me.value,a=e+me.value;return fe.value.slice(e,a)}));i((async()=>{0===t.wallets.length&&await t.fetchWallets(),he.value=!0;const e=await ue();"success"===e.status&&t.setWallets(e.data.result),he.value=!1}));const{toast:ge}=r(),we=o(!1),be=o(!1),xe=o(!1),ke=o(""),ye=o(null),_e=["ETH","BSC","POLYGON","FTM","OPTIMISM","ARBITRUM","BASE","CELO","BTC","LTC","DOGE","DASH"];const Ce=["BTC","LTC","DOGE","DASH"];return(l,s)=>{const o=e,n=a,i=_,r=C,A=j,I=B,ue=W,de=V,je=E,$e=P,Be=T,Te=S,We=F,Ve=L,Ee=$,Pe=M,Se=p;return h(),u("div",null,[d(Ve,null,{left:c((()=>[d(o,{modelValue:m(ce),"onUpdate:modelValue":s[0]||(s[0]=e=>f(ce)?ce.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter chain..."},null,8,["modelValue"]),d(n,{modelValue:m(me),"onUpdate:modelValue":s[1]||(s[1]=e=>f(me)?me.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:c((()=>[v("option",U,"10 "+g(l.$t("per page")),1),v("option",z,"25 "+g(l.$t("per page")),1),v("option",G,"50 "+g(l.$t("per page")),1),v("option",H,"100 "+g(l.$t("per page")),1)])),_:1},8,["modelValue"])])),right:c((()=>[d(r,{color:"primary",onClick:s[2]||(s[2]=e=>be.value=!0)},{default:c((()=>[d(i,{name:"lucide:plus",size:"16",class:"mr-2"}),w(" "+g(l.$t("Create Wallet")),1)])),_:1})])),default:c((()=>[v("div",null,[m(t).loading||0!==m(ve)?.length?(h(),u("div",q,[d(Te,null,{default:c((()=>[(h(!0),u(x,null,k(m(ve),((e,a)=>(h(),b(Be,{key:e.id,spaced:""},{start:c((()=>[d(I,{label:"Chain","hide-label":a>0,title:`${e.currency} (${e.chain})`,subtitle:e.address,avatar:`/img/crypto/${e.currency.toLowerCase()}.png`},null,8,["hide-label","title","subtitle","avatar"])])),end:c((()=>[d(ue,{label:"Balance","hide-label":a>0,class:"w-40 xs:w-full text-sm",loading:m(he)},{default:c((()=>[w(g(e.balance.toFixed(8)),1)])),_:2},1032,["hide-label","loading"]),d(ue,{label:"Status","hide-label":a>0,class:"w-20 xs:w-full"},{default:c((()=>[d(de,{color:e.status?"success":"danger",flavor:"pastel",condensed:""},{default:c((()=>[w(g(e.status?"Active":"Disabled"),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),d(ue,{label:"Actions","hide-label":a>0},{default:c((()=>[d($e,{flavor:"context",label:"Dropdown",orientation:"end"},{default:c((()=>[Ce.includes(e.chain)?y("",!0):(h(),b(je,{key:0,to:`/admin/extensions/ecosystem/blockchains/custodial/${e.chain}`,title:"Custodial Wallet",text:"For tokens without permit"},{start:c((()=>[d(i,{name:"solar:wallet-money-line-duotone",class:"me-2 block h-5 w-5"})])),_:2},1032,["to"])),d(je,{to:`/admin/extensions/ecosystem/blockchains/wallets/${e.uuid}`,title:"Transactions",text:"Blockchain transactions"},{start:c((()=>[d(i,{name:"grommet-icons:transaction",class:"me-2 block h-5 w-5"})])),_:2},1032,["to"]),d(je,{to:`/admin/extensions/ecosystem/tokens/${e.chain}`,title:"Tokens",text:"Tokens management"},{start:c((()=>[d(i,{name:"ic:twotone-generating-tokens",class:"me-2 block h-5 w-5"})])),_:2},1032,["to"])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(h(),b(A,{key:0,title:"No matching results",subtitle:"Looks like we couldn't find any matching results for your search terms. Try other search terms."},{image:c((()=>[N,R])),_:1})),v("div",Q,[m(fe).length>m(me)?(h(),b(We,{key:0,"total-items":m(fe).length,"current-page":m(pe),"item-per-page":m(me)},null,8,["total-items","current-page","item-per-page"])):y("",!0)])])])),_:1}),d(Se,{open:m(be),size:"sm",onClose:s[7]||(s[7]=e=>be.value=!1)},{header:c((()=>[v("div",X,[v("h3",Y,g(l.$t("Create New Wallet")),1),d(Ee,{onClick:s[3]||(s[3]=e=>be.value=!1)})])])),footer:c((()=>[v("div",ee,[v("div",ae,[d(r,{onClick:s[5]||(s[5]=e=>be.value=!1)},{default:c((()=>[w(g(l.$t("Cancel")),1)])),_:1}),d(r,{color:"primary",flavor:"solid",onClick:s[6]||(s[6]=e=>async function(){we.value=!0;try{if(!ye.value)throw new Error("Please select a chain");const e=await D(ye.value);ge.response(e),"success"===e.status&&await t.fetchWallets()}catch(e){ge.danger(e)}we.value=!1,be.value=!1,ye.value=null}()),disabled:m(we),loading:m(we)},{default:c((()=>[w(g(l.$t("Create")),1)])),_:1},8,["disabled","loading"])])])])),default:c((()=>[v("div",J,[v("div",K,[v("p",Z,g(l.$t("Please select the chain of the new master wallet"))+". ",1),d(Pe,{modelValue:m(ye),"onUpdate:modelValue":s[4]||(s[4]=e=>f(ye)?ye.value=e:null),disabled:m(we),items:_e,label:"Chain",placeholder:"Select a chain",shape:"curved",classes:{input:"h-12",wrapper:"max-w-xs"}},null,8,["modelValue","disabled"])])])])),_:1},8,["open"]),d(Se,{open:m(xe),size:"sm",onClose:s[12]||(s[12]=e=>xe.value=!1)},{header:c((()=>[v("div",le,[v("h3",te,g(l.$t("Set Ecosystem Passphrase")),1),d(Ee,{onClick:s[8]||(s[8]=e=>xe.value=!1)})])])),footer:c((()=>[v("div",ie,[v("div",re,[d(r,{onClick:s[10]||(s[10]=e=>xe.value=!1)},{default:c((()=>[w(g(l.$t("Cancel")),1)])),_:1}),d(r,{color:"primary",flavor:"solid",onClick:s[11]||(s[11]=e=>async function(){we.value=!0;try{const e=await O(ke.value);ge.response(e)}catch(e){ge.danger(e)}we.value=!1,xe.value=!1,ke.value=""}()),disabled:m(we),loading:m(we)},{default:c((()=>[w(g(l.$t("Submit")),1)])),_:1},8,["disabled","loading"])])])])),default:c((()=>[v("div",se,[v("div",oe,[v("p",ne,g(l.$t("Please enter the passphrase of the ecosystem vault"))+". ",1),d(o,{modelValue:m(ke),"onUpdate:modelValue":s[9]||(s[9]=e=>f(ke)?ke.value=e:null),label:"Passphrase",placeholder:"Enter passphrase",type:"password",disabled:m(we),loading:m(we)},null,8,["modelValue","disabled","loading"])])])])),_:1},8,["open"])])}}});export{ue as default};
