import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{a,z as l,c as t,ac as s,r as u,E as r,ad as o,b as n,e as i,w as m,o as c,f as d,u as p,p as v,O as f,q as g,t as h,af as y,k as w,n as _,F as b,B as k,x as j,X as x,Y as V,ag as E}from"../e/entry-8qgg5CL-.js";import{_ as D}from"./BaseSelect.vue-p0KYznCX.js";import{_ as T}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as C,a as I}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as P}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as B}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as $}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as L}from"./TairoFlexTable-zdoraqRc.js";import{_ as A}from"./BasePagination.vue-eKZkqxB7.js";import{_ as N}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as q}from"./investment-ZL9JbRBy.js";import{f as F}from"./strings-rQgUKePI.js";import{_ as S,a as U}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as O}from"./plan-Urxr1Gf-.js";import"./input-id-wZ-Ta08j.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";import"./useInvestment-ZaAPyLmc.js";const R={class:"w-full flex gap-2 xs:flex-col sm:flex-row"},G={value:10},J={value:25},M={value:50},z={value:100},W=d("img",{class:"block dark:hidden",src:S,alt:"Placeholder image"},null,-1),X=d("img",{class:"hidden dark:block",src:U,alt:"Placeholder image"},null,-1),Y={key:1,class:"w-full sm:pt-5"},H={class:"mt-6"},K=a({__name:"index",setup(a){const S=l(),U=q(),K=O(),Q=t((()=>S.query.user)),Z=t((()=>S.query.plan)),ee=t((()=>S.query.status)),ae=s(),le=u(!1),te=u(""),se=u(10),ue=t((()=>parseInt(S.query.page??"1"))),re=u("");r((async()=>{le.value=!0,await U.fetchInvestments(Q.value,Z.value,ee.value),0===K.plans.length&&await K.fetchInvestmentPlans(),le.value=!1}));const oe=t((()=>U.investments.filter((e=>(!Q.value||e.user.uuid===Q.value)&&((!ce.value||"All"===ce.value||e.type===ce.value)&&((!de.value||"All"===de.value||e.status===de.value)&&(!(pe.value&&new Date(e.created_at)<new Date(pe.value))&&(!(ve.value&&new Date(e.created_at)>new Date(ve.value))&&(te.value&&""!==te.value&&void 0!==te.value&&te.value!==re.value&&(ae.push({query:{...S.query,page:"1",filter:te.value}}),re.value=te.value),!te.value||e.uuid?.includes(te.value)))))))).sort(((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())))),ne=t((()=>{const e=(ue.value-1)*se.value,a=e+se.value;return oe.value.slice(e,a)})),ie=e=>{switch(e){case"COMPLETED":return"success";case"PENDING":return"warning";case"REJECTED":case"CANCELLED":return"danger";default:return"info"}},me=u(!1),ce=u(""),de=u(""),pe=u(""),ve=u(""),fe=["All","PENDING","COMPLETED","ACTIVE","CANCELLED","REJECTED"],ge=t((()=>{let e=2;return Z.value&&e--,ee.value&&e--,e})),{formatedDate:he}=o();return(a,l)=>{const t=e,s=j,u=x,r=D,o=T,q=V,S=E,U=C,O=P,Q=B,re=$,ye=I,we=L,_e=A,be=N;return c(),n("div",null,[i(be,null,{left:m((()=>[d("div",R,[i(t,{modelValue:p(te),"onUpdate:modelValue":l[0]||(l[0]=e=>v(te)?te.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Search Investment ID..."},null,8,["modelValue"]),i(u,{onClick:l[1]||(l[1]=e=>me.value=!p(me)),color:"muted",block:""},{default:m((()=>[p(me)?(c(),f(s,{key:0,name:"line-md:arrow-up",class:"h-4 w-4 mr-2"})):(c(),f(s,{key:1,name:"line-md:arrow-down",class:"h-4 w-4 mr-2"})),g(" "+h(a.$t("Filters")),1)])),_:1})])])),right:m((()=>[i(r,{modelValue:p(se),"onUpdate:modelValue":l[2]||(l[2]=e=>v(se)?se.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:m((()=>[d("option",G,"10 "+h(a.$t("per page")),1),d("option",J,"25 "+h(a.$t("per page")),1),d("option",M,"50 "+h(a.$t("per page")),1),d("option",z,"100 "+h(a.$t("per page")),1)])),_:1},8,["modelValue"])])),default:m((()=>[d("div",null,[i(y,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:m((()=>[p(me)?(c(),f(q,{key:0,class:_(`grid gap-4 xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-${p(ge)} lg:grid-cols-${p(ge)+2} mb-6 p-5`)},{default:m((()=>[p(Z)?w("",!0):(c(),f(o,{key:0,modelValue:p(ce),"onUpdate:modelValue":l[3]||(l[3]=e=>v(ce)?ce.value=e:null),label:"Investment Plan",items:p(K).plans.map((e=>e.title)),placeholder:"Select Investment Plan"},null,8,["modelValue","items"])),p(ee)?w("",!0):(c(),f(o,{key:1,modelValue:p(de),"onUpdate:modelValue":l[4]||(l[4]=e=>v(de)?de.value=e:null),label:"Status",items:fe,placeholder:"Select a Status"},null,8,["modelValue"])),i(t,{modelValue:p(pe),"onUpdate:modelValue":l[5]||(l[5]=e=>v(pe)?pe.value=e:null),type:"date",label:"From"},null,8,["modelValue"]),i(t,{modelValue:p(ve),"onUpdate:modelValue":l[6]||(l[6]=e=>v(ve)?ve.value=e:null),type:"date",label:"To"},null,8,["modelValue"])])),_:1},8,["class"])):w("",!0)])),_:1}),p(le)||0!==p(ne)?.length?(c(),n("div",Y,[i(we,null,{default:m((()=>[i(y,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:m((()=>[(c(!0),n(b,null,k(p(ne),((e,l)=>(c(),f(ye,{key:e.id,spaced:""},{start:m((()=>[i(U,{label:"User","hide-label":l>0,logo:e.user?.avatar,title:`${e.user?.first_name} (${e.user?.last_name})`,subtitle:p(he)(e.created_at,!0)},null,8,["hide-label","logo","title","subtitle"])])),end:m((()=>[i(O,{label:"Plan","hide-label":l>0,class:"w-20 xs:w-full"},{default:m((()=>[g(h(e.plan?.title),1)])),_:2},1032,["hide-label"]),i(O,{label:"Amount","hide-label":l>0,class:"w-20 xs:w-full"},{default:m((()=>[g(h(("formatPrice"in a?a.formatPrice:p(F))(e.amount,e.plan?.currency)),1)])),_:2},1032,["hide-label"]),i(O,{label:"Status","hide-label":l>0,class:"w-20 xs:w-full"},{default:m((()=>[i(Q,{color:ie(e.status),flavor:"pastel",condensed:""},{default:m((()=>[g(h(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),i(O,{label:"Actions","hide-label":l>0,class:"w-20"},{default:m((()=>[i(re,{condensed:"",color:"muted",onClick:a=>{return l=e.uuid,void ae.push(`/admin/finance/investments/${l}`);var l},"data-nui-tooltip":"View"},{default:m((()=>[i(s,{name:"ph:eye-duotone",class:"h-4 w-4"})])),_:2},1032,["onClick"])])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])),_:1})])):(c(),f(S,{key:0,title:p(te)&&""!==p(te)?"No matching results":"No results",subtitle:p(te)&&""!==p(te)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:m((()=>[W,X])),_:1},8,["title","subtitle"])),d("div",H,[p(oe).length>p(se)?(c(),f(_e,{key:0,"total-items":p(oe).length,"current-page":p(ue),"item-per-page":p(se)},null,8,["total-items","current-page","item-per-page"])):w("",!0)])])])),_:1})])}}});export{K as default};
