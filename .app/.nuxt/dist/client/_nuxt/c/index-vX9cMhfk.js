import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{a,c as l,ac as t,z as s,r as o,J as r,E as u,b as i,e as n,w as c,o as d,f as m,u as p,p as v,O as f,q as g,t as y,af as h,n as b,k as w,F as _,B as k,x,X as j,Y as B,ag as P}from"../e/entry-8qgg5CL-.js";import{_ as V}from"./BaseSelect.vue-p0KYznCX.js";import{_ as U}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as S}from"./BaseCheckbox.vue-cNhyVlDH.js";import{_ as T,a as $}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as q}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as I}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as C}from"./TairoFlexTable-zdoraqRc.js";import{_ as F}from"./BasePagination.vue-eKZkqxB7.js";import{_ as W}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as A}from"./useWallet-8iHzU2hV.js";import{f as L}from"./strings-rQgUKePI.js";import{_ as D,a as E}from"./placeholder-search-4-dark-Jht91LnM.js";import"./input-id-wZ-Ta08j.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";import"./IconCheck-JvP9GQU1.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const N={class:"w-full flex gap-2 xs:flex-col sm:flex-row"},O={value:10},R={value:25},z={value:50},G={value:100},H=m("img",{class:"block dark:hidden",src:D,alt:"Placeholder image"},null,-1),J=m("img",{class:"hidden dark:block",src:E,alt:"Placeholder image"},null,-1),X={key:1,class:"w-full sm:pt-5"},Y={class:"mt-6"},K=a({__name:"index",setup(a){const{adminGetWallets:D}=A(),E=l((()=>M.query.user));l((()=>M.query.type));const K=t(),M=s(),Q=o(!1),Z=o(!1),ee=o(""),ae=o(10),le=l((()=>parseInt(M.query.page??"1"))),te=o(M.query.type??void 0),se=["All","FIAT","SPOT"],oe=o(0),re=o(0),ue=o([]),ie=l((()=>"All"!==te.value?te.value:void 0)),ne=o(!1),ce=o("");async function de(){Q.value=!0;const e=await D({user:E.value||ce.value,type:ie.value,filter:""!==ee.value&&void 0!==ee.value?ee.value:void 0,perPage:ae.value,page:le.value,hideSmallBalances:ne.value});"success"===e.status&&(ue.value=e.data.result.data,oe.value=e.data.result.pagination.totalItems,re.value=e.data.result.pagination.totalPages),Q.value=!1}r([ee,ae,le,te,ne,ce],de),r([ee,ae,te,ne,ce],(async(e,a)=>{const[l,t,s,o,r]=e,[u,,,,]=a;l!==u&&void 0!==u?await K.push({query:{...M.query,filter:""!==l&&void 0!==l?l:void 0,perPage:t.toString(),page:"1",hideSmallBalances:o.toString(),type:ie.value}}):await K.push({query:{...M.query,filter:""!==l&&void 0!==l?l:void 0,perPage:t.toString(),page:le.value.toString(),hideSmallBalances:o.toString(),type:ie.value}})})),u((async()=>{await de()}));const me=l((()=>{let e=3;return te.value&&e--,e}));return(a,l)=>{const t=e,s=x,o=j,r=V,u=U,A=S,D=B,E=P,ie=T,de=q,pe=I,ve=$,fe=C,ge=F,ye=W;return d(),i("div",null,[n(ye,null,{left:c((()=>[m("div",N,[n(t,{modelValue:p(ee),"onUpdate:modelValue":l[0]||(l[0]=e=>v(ee)?ee.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter Wallet Currency/UUID..."},null,8,["modelValue"]),n(o,{onClick:l[1]||(l[1]=e=>Z.value=!p(Z)),color:"muted",block:""},{default:c((()=>[p(Z)?(d(),f(s,{key:0,name:"line-md:arrow-up",class:"h-4 w-4 mr-2"})):(d(),f(s,{key:1,name:"line-md:arrow-down",class:"h-4 w-4 mr-2"})),g(" "+y(a.$t("Filters")),1)])),_:1})])])),right:c((()=>[n(r,{modelValue:p(ae),"onUpdate:modelValue":l[2]||(l[2]=e=>v(ae)?ae.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:c((()=>[m("option",O,"10 "+y(a.$t("per page")),1),m("option",R,"25 "+y(a.$t("per page")),1),m("option",z,"50 "+y(a.$t("per page")),1),m("option",G,"100 "+y(a.$t("per page")),1)])),_:1},8,["modelValue"])])),default:c((()=>[m("div",null,[n(h,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:c((()=>[p(Z)?(d(),f(D,{key:0,class:b(`grid gap-4 xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-${p(me)} lg:grid-cols-${p(me)} mb-6 p-5 items-end`)},{default:c((()=>[n(u,{modelValue:p(te),"onUpdate:modelValue":l[3]||(l[3]=e=>v(te)?te.value=e:null),label:"Wallet Type",items:se,placeholder:"Select a Wallet Type"},null,8,["modelValue"]),n(t,{modelValue:p(ce),"onUpdate:modelValue":l[4]||(l[4]=e=>v(ce)?ce.value=e:null),label:"User UUID",placeholder:"Enter User UUID",classes:{wrapper:"w-full sm:w-auto"}},null,8,["modelValue"]),m("div",null,[n(A,{modelValue:p(ne),"onUpdate:modelValue":l[5]||(l[5]=e=>v(ne)?ne.value=e:null),value:"no-balance",label:"Hide Small Balances",shape:"rounded",color:"primary"},null,8,["modelValue"])])])),_:1},8,["class"])):w("",!0)])),_:1}),p(Q)||0!==p(ue)?.length?(d(),i("div",X,[n(fe,null,{default:c((()=>[n(h,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:c((()=>[(d(!0),i(_,null,k(p(ue),((e,l)=>(d(),f(ve,{key:e.id,spaced:""},{start:c((()=>[n(ie,{label:"Wallet","hide-label":l>0,logo:`/img/crypto/${e.currency.toLowerCase()}.png`,title:e.currency,subtitle:e.uuid},null,8,["hide-label","logo","title","subtitle"]),n(ie,{label:"User","hide-label":l>0,logo:e.user?.avatar,title:`${e.user?.first_name} (${e.user?.last_name})`,subtitle:e.user?.uuid},null,8,["hide-label","logo","title","subtitle"])])),end:c((()=>[n(de,{label:"Balance","hide-label":l>0,class:"xs:w-full sm:w-40 text-xs"},{default:c((()=>[g(y("FIAT"===e.type?("formatPrice"in a?a.formatPrice:p(L))(e.balance,e.currency):e.balance+" "+e.currency),1)])),_:2},1032,["hide-label"]),n(de,{label:"Actions","hide-label":l>0,class:"xs:w-full sm:w-20"},{default:c((()=>[n(pe,{condensed:"",color:"muted",onClick:a=>{return l=e.uuid,void K.push(`/admin/finance/wallets/${l}`);var l},"data-nui-tooltip":"View"},{default:c((()=>[n(s,{name:"ph:eye-duotone",class:"h-4 w-4"})])),_:2},1032,["onClick"])])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])),_:1})])):(d(),f(E,{key:0,title:p(ee)&&""!==p(ee)?"No matching results":"No results",subtitle:p(ee)&&""!==p(ee)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:c((()=>[H,J])),_:1},8,["title","subtitle"])),m("div",Y,[p(re)>1?(d(),f(ge,{key:0,"current-page":p(le),"total-items":p(oe),itemPerPage:p(ae),"total-pages":p(re),onPageChanged:l[6]||(l[6]=e=>p(K).push({query:{...p(M).query,page:e.toString()}}))},null,8,["current-page","total-items","itemPerPage","total-pages"])):w("",!0)])])])),_:1})])}}});export{K as default};
