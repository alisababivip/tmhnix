import{a as e,ad as a,r as s,z as t,c as l,E as r,O as n,w as u,o as i,e as c,q as d,t as o,u as m,f as p,n as g,p as f,b as E,F as C,B as b,k as w,_ as v,x as h,X as D,Y as _,ag as y}from"../e/entry-8qgg5CL-.js";import{_ as P}from"./BaseInput.vue-iInHQMIA.js";import{_ as x}from"./BaseSelect.vue-p0KYznCX.js";import{_ as k,a as N}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as T}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as S}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as j}from"./TairoFlexTable-zdoraqRc.js";import{_ as A}from"./BasePagination.vue-eKZkqxB7.js";import{_ as I}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as L}from"./useMailwizard-mGGEZWYz.js";import{a as B}from"./strings-rQgUKePI.js";import{_ as O,a as U}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as $}from"./campaigns-yRjF5fLV.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const V={class:"flex items-center justify-between gap-3 flex-col sm:flex-row"},z={class:"grid gap-5 grid-cols-1 sm:grid-cols-2 md:grid-cols-3"},M=p("span",{class:"text-gray-500 dark:text-gray-400 font-semibold uppercase text-xs tracking-wide"},"Name",-1),F=p("span",{class:"text-gray-500 dark:text-gray-400 font-semibold uppercase text-xs tracking-wide"},"Subject",-1),G=p("span",{class:"text-gray-500 dark:text-gray-400 font-semibold uppercase text-xs tracking-wide"},"Speed",-1),R=p("span",{class:"text-gray-500 dark:text-gray-400 font-semibold uppercase text-xs tracking-wide"},"Template",-1),q=p("span",{class:"text-gray-500 dark:text-gray-400 font-semibold uppercase text-xs tracking-wide"},"Status",-1),K=p("span",{class:"text-gray-500 dark:text-gray-400 font-semibold uppercase text-xs tracking-wide"},"Created At",-1),W={value:10},X={value:25},Y={value:50},H={value:100},J=p("img",{class:"block dark:hidden",src:O,alt:"Placeholder image"},null,-1),Q=p("img",{class:"hidden dark:block",src:U,alt:"Placeholder image"},null,-1),Z={key:1,class:"w-full"},ee={class:"mt-6"},ae=e({__name:"[id]",setup(e){const O=$(),{toast:U}=a(),{updateCampaignStatus:ae,getCampaign:se}=L(),te=s(null),le=t(),{id:re}=le.params,ne=s(""),ue=s(10),ie=l((()=>parseInt(le.query.page??"1"))),ce=l((()=>te.value?.targets??[])),de=l((()=>{const e=(ie.value-1)*ue.value,a=e+ue.value;return ce.value.slice(e,a)}));r((async()=>{const e=await se(re);"success"===e.status&&(te.value=e.data.result)}));const oe=async e=>{try{const a=await ae(te.value.id,e);U.response(a),"success"===a.status&&await O.fetchCampaigns()}catch(a){U.danger(a)}},me=e=>{switch(e){case"PENDING":return"warning";case"ACTIVE":default:return"primary";case"PAUSED":return"info";case"COMPLETED":return"success";case"CANCELED":case"STOPPED":return"danger"}},pe=e=>{switch(e){case"PENDING":default:return"Pending";case"ACTIVE":return"Active";case"PAUSED":return"Paused";case"COMPLETED":return"Completed";case"CANCELED":return"Canceled";case"STOPPED":return"Stopped"}},ge=e=>{switch(e){case"PENDING":return"warning";case"SENT":default:return"primary";case"OPENED":return"info";case"CLICKED":return"success";case"BOUNCED":case"UNSUBSCRIBED":return"danger"}},fe=e=>{switch(e){case"PENDING":default:return"Pending";case"SENT":return"Sent";case"OPENED":return"Opened";case"CLICKED":return"Clicked";case"BOUNCED":return"Bounced";case"UNSUBSCRIBED":return"Unsubscribed"}};return(e,a)=>{const s=v,t=h,l=D,r=_,L=P,U=x,$=y,ae=k,se=T,le=S,re=N,Ee=j,Ce=A,be=I;return i(),n(be,null,{left:u((()=>[c(s,{size:"lg"},{default:u((()=>[d(o(m(te)?.name)+" Campaign",1)])),_:1})])),right:u((()=>[c(l,{type:"button",color:"muted",class:"hover:bg-gray-300 dark:hover:bg-gray-800",to:"/admin/extensions/mailwizard/campaigns"},{default:u((()=>[c(t,{name:"line-md:chevron-left",class:"h-4 w-4 mr-2"}),d(" "+o(e.$t("Back")),1)])),_:1})])),default:u((()=>[c(r,{class:"p-3 mb-5"},{default:u((()=>[p("div",V,[c(l,{type:"button",color:"success",class:"w-full",onClick:a[0]||(a[0]=e=>oe("ACTIVE")),disabled:["ACTIVE","COMPLETED","CANCELED"].includes(m(te)?.status)},{default:u((()=>[c(t,{name:"line-md:play",class:"h-4 w-4 mr-2"}),d(" "+o(e.$t("Run")),1)])),_:1},8,["disabled"]),c(l,{type:"button",color:"warning",class:"w-full",onClick:a[1]||(a[1]=e=>oe("PAUSED")),disabled:["PENDING","STOPPED","PAUSED","COMPLETED","CANCELED"].includes(m(te)?.status)},{default:u((()=>[c(t,{name:"line-md:pause",class:"h-4 w-4 mr-2"}),d(" "+o(e.$t("Pause")),1)])),_:1},8,["disabled"]),c(l,{type:"button",color:"danger",class:"w-full",onClick:a[2]||(a[2]=e=>oe("STOPPED")),disabled:["PENDING","COMPLETED","CANCELED","STOPPED"].includes(m(te)?.status)},{default:u((()=>[c(t,{name:"mdi:stop",class:"h-4 w-4 mr-2"}),d(" "+o(e.$t("Stop")),1)])),_:1},8,["disabled"]),c(l,{type:"button",color:"danger",class:"w-full",onClick:a[3]||(a[3]=e=>oe("CANCELED")),disabled:["ACTIVE","PAUSED","COMPLETED","CANCELED"].includes(m(te)?.status)},{default:u((()=>[c(t,{name:"line-md:close",class:"h-4 w-4 mr-2"}),d(" "+o(e.$t("Cancel")),1)])),_:1},8,["disabled"])])])),_:1}),c(r,{class:"p-5"},{default:u((()=>[p("div",z,[p("div",null,[M,c(s,{size:"md",class:"mt-1"},{default:u((()=>[d(o(m(te)?.name),1)])),_:1})]),p("div",null,[F,c(s,{size:"md",class:"mt-1"},{default:u((()=>[d(o(m(te)?.subject),1)])),_:1})]),p("div",null,[G,c(s,{size:"md",class:"mt-1"},{default:u((()=>[d(o(m(te)?.speed),1)])),_:1})]),p("div",null,[R,c(s,{size:"md",class:"mt-1"},{default:u((()=>[d(o(m(te)?.template.name),1)])),_:1})]),p("div",null,[q,c(s,{size:"md",class:g(["mt-1",`text-${me(m(te)?.status)}-500`])},{default:u((()=>[d(o(pe(m(te)?.status)),1)])),_:1},8,["class"])]),p("div",null,[K,c(s,{size:"md",class:"mt-1"},{default:u((()=>[d(o(("formatDate"in e?e.formatDate:m(B))(m(te)?.created_at)),1)])),_:1})])])])),_:1}),c(be,{class:"mt-5"},{left:u((()=>[c(L,{modelValue:m(ne),"onUpdate:modelValue":a[4]||(a[4]=e=>f(ne)?ne.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter targets..."},null,8,["modelValue"])])),right:u((()=>[c(U,{modelValue:m(ue),"onUpdate:modelValue":a[5]||(a[5]=e=>f(ue)?ue.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:u((()=>[p("option",W,"10 "+o(e.$t("per page")),1),p("option",X,"25 "+o(e.$t("per page")),1),p("option",Y,"50 "+o(e.$t("per page")),1),p("option",H,"100 "+o(e.$t("per page")),1)])),_:1},8,["modelValue"])])),default:u((()=>[p("div",null,[m(O)?.loading||0!==m(de)?.length?(i(),E("div",Z,[c(Ee,{class:"pt-5"},{default:u((()=>[(i(!0),E(C,null,b(m(de),((e,a)=>(i(),n(re,{key:e.id,spaced:""},{start:u((()=>[c(ae,{label:"Target","hide-label":a>0,title:`${e.first_name} ${e.last_name}`,subtitle:e.email},null,8,["hide-label","title","subtitle"])])),end:u((()=>[c(le,{label:"Status","hide-label":a>0,class:"w-20 xs:w-full"},{default:u((()=>[c(se,{color:ge(e.status),flavor:"pastel",condensed:""},{default:u((()=>[d(o(fe(e.status)),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(i(),n($,{key:0,title:m(ne)&&""!==m(ne)?"No matching results":"No results",subtitle:m(ne)&&""!==m(ne)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:u((()=>[J,Q])),_:1},8,["title","subtitle"])),p("div",ee,[m(ce).length>m(ue)?(i(),n(Ce,{key:0,"total-items":m(ce).length,"current-page":m(ie),"item-per-page":m(ue)},null,8,["total-items","current-page","item-per-page"])):w("",!0)])])])),_:1})])),_:1})}}});export{ae as default};
