import{a as e,r as t,z as a,ac as l,ad as s,c as r,E as o,O as u,w as d,o as n,e as i,q as c,t as m,u as f,f as p,n as g,b as v,k as x,x as b,X as y,Y as h,ao as k,an as E}from"../e/entry-8qgg5CL-.js";import{_ as w}from"./BaseTag.vue-NMkN1Uk8.js";import{_}from"./BaseListbox.vue-1Dy9Ui3z.js";import{_ as T}from"./BaseInput.vue-iInHQMIA.js";import{_ as C}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as A}from"./useAiTrading-wIB0sHyU.js";import{z as D,u as I,t as B,F as j}from"./vee-validate.esm-n59zZCC5.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";import"./input-id-wZ-Ta08j.js";const S={class:"flex items-center justify-between mb-6"},V={class:"text-2xl font-semibold text-gray-800 dark:text-gray-200"},P={class:"flex items-center xs:flex-col sm:flex-row gap-2"},R={class:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 gap-4 mb-6 text-gray-700 dark:text-gray-400"},$={class:"flex flex-col"},W={class:"text-sm font-semibold text-gray-600 dark:text-gray-200"},L={class:"flex flex-col"},N={class:"text-sm font-semibold text-gray-600 dark:text-gray-200"},O={class:"flex flex-col"},U={class:"text-sm font-semibold text-gray-600 dark:text-gray-200"},F={class:"p-4 border rounded-md mb-6 text-gray-700 dark:border-gray-600 dark:text-gray-400"},M={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},X={class:"mb-4"},z={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},G={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6 text-gray-700 dark:text-gray-400"},q={class:"p-4 border rounded-md dark:border-gray-600"},H={class:"flex jsutify-start items-center"},J=["src"],Y={class:"font-bold"},K={class:"p-4 border rounded-md dark:border-gray-600"},Q={class:"text-lg font-semibold mb-2 text-gray-800 dark:text-gray-200"},Z={key:0,class:"w-full flex gap-2 xs:flex-col sm:flex-row mb-2"},ee={class:"flex w-full items-center justify-between p-4 md:p-6"},te={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},ae={class:"p-4 md:p-6"},le={class:"mx-auto w-full text-start space-y-3"},se={class:"p-4 md:p-6"},re={class:"flex gap-x-2"},oe=e({__name:"[uuid]",setup(e){const oe=D.object({result:D.string().nonempty("Please select an option"),profitType:D.enum(["FIXED","PERCENTAGE"]).optional(),profitValue:D.number().min(0,"Please enter a valid value")}),ue=B(oe),{handleSubmit:de,isSubmitting:ne,values:ie}=I({validationSchema:ue,initialValues:{result:"DRAW",profitType:null,profitValue:0}}),ce=t(null),{getAdminAITrading:me,updateAITrading:fe}=A(),pe=a(),ge=l(),ve=t(!1),{toast:xe}=s(),be=r((()=>pe.params.uuid)),ye=["WIN","LOSS","DRAW"];o((async()=>{try{const e=await me(be.value);ce.value=e.data.result}catch(e){ge.back(),xe.danger(e)}}));const he=de((async e=>{if(ce.value){let a=e.profitValue;"PERCENTAGE"===e.profitType&&(a=e.profitValue/100*ce.value.amount);try{const t=await fe(be.value,e.result,a);xe.response(t),"success"===t.status&&(ce.value.result=e.result,ce.value.profit=a)}catch(t){xe.danger(t)}ve.value=!1}})),ke=e=>{switch(e){case"COMPLETED":return"success";case"FAILED":case"CANCELLED":case"REJECTED":case"EXPIRED":return"danger";default:return"info"}},Ee=e=>{switch(e){case"WIN":return"success";case"LOSS":return"danger";case"DRAW":return"warning";default:return"info"}},{formatedDate:we}=s();return(e,t)=>{const a=b,l=y,s=w,r=h,o=k,A=_,D=T,I=E,B=C;return n(),u(B,{class:"mb-20"},{right:d((()=>[i(l,{onClick:t[0]||(t[0]=e=>f(ge).back()),color:"muted"},{default:d((()=>[i(a,{name:"line-md:chevron-left",class:"mr-2"}),c(" "+m(e.$t("Back")),1)])),_:1})])),default:d((()=>[i(r,{class:"px-8 pt-8 pb-4 mx-auto"},{default:d((()=>[p("div",S,[p("h1",V,m(e.$t("Investment Details")),1),p("div",P,[i(s,{shape:"rounded",color:ke(f(ce)?.status),flavor:"pastel",class:"dark:bg-opacity-80"},{default:d((()=>[c(m(f(ce)?.status),1)])),_:1},8,["color"]),i(s,{shape:"rounded",color:null!==f(ce)?.result?Ee(f(ce)?.result):"warning",flavor:"pastel",class:"dark:bg-opacity-80"},{default:d((()=>[c(m(null!==f(ce)?.result?f(ce)?.result:"Result not set"),1)])),_:1},8,["color"])])]),p("div",R,[p("div",$,[p("label",W,m(e.$t("Total Amount"))+":",1),c(" "+m(f(ce)?.amount+" "+f(ce)?.market?.split("/")[1]),1)]),p("div",L,[p("label",N,m(e.$t("Profit"))+":",1),p("span",{class:g({"text-green-500":null!==f(ce)?.profit&&"WIN"===f(ce)?.result,"text-red-500":null!==f(ce)?.profit&&"LOSS"===f(ce)?.result,"text-gray-500":null!==f(ce)?.profit&&"DRAW"===f(ce)?.result,"text-warning-500":null===f(ce)?.profit})},m(null!==f(ce)?.profit?("WIN"===f(ce)?.result?"+":"LOSS"===f(ce)?.result?"-":"")+f(ce)?.profit+" "+f(ce)?.market?.split("/")[1]:"Not set"),3)]),p("div",O,[p("label",U,m(e.$t("Duration"))+":",1),c(" "+m(f(ce)?.duration.duration)+" "+m(f(ce)?.duration.timeframe),1)])]),p("div",F,[p("h2",M,m(e.$t("Plan"))+" "+m(f(ce)?.plan?.title)+": ",1),p("p",X,m(f(ce)?.plan?.description),1),p("div",null,[p("h2",z,m(e.$t("Investment ID"))+": ",1),p("p",null,m(f(ce)?.uuid),1)])]),p("div",G,[p("div",q,[p("div",H,[p("img",{loading:"lazy",src:f(ce)?.user?.avatar||"/img/avatars/placeholder-file.png",class:"mr-2 h-16 w-16 rounded-full"},null,8,J),p("div",null,[p("div",Y,m(f(ce)?.user.first_name)+" "+m(f(ce)?.user.last_name),1),p("div",null,m(f(ce)?.user.uuid),1)])])]),p("div",K,[p("h2",Q,m(e.$t("Date"))+": ",1),p("p",null,m(f(we)(f(ce)?.created_at,!0)),1)])]),"ACTIVE"===f(ce)?.status?(n(),v("div",Z,[i(l,{onClick:t[1]||(t[1]=e=>ve.value=!0),color:"success",class:"w-full"},{default:d((()=>[c(m(e.$t("Set Result")),1)])),_:1})])):x("",!0)])),_:1}),i(I,{open:f(ve),size:"lg",onClose:t[5]||(t[5]=()=>ve.value=!1)},{header:d((()=>[p("div",ee,[p("h3",te,m(e.$t("Set Investment Result")),1),i(o,{onClick:t[2]||(t[2]=e=>ve.value=!1)})])])),footer:d((()=>[p("div",se,[p("div",re,[i(l,{onClick:t[3]||(t[3]=e=>ve.value=!1)},{default:d((()=>[c(m(e.$t("Cancel")),1)])),_:1}),i(l,{color:"success",flavor:"solid",onClick:t[4]||(t[4]=e=>f(he)())},{default:d((()=>[c(m(e.$t("Submit")),1)])),_:1})])])])),default:d((()=>[p("div",ae,[p("div",le,[p("div",null,m(e.$t("Are you sure you want to set this result for this investment?")),1),p("div",null,m(e.$t("Please note that this action will set the end result for this investment and the profit will be calculated based on the result you set.")),1),i(f(j),{name:"result"},{default:d((({field:e,errorMessage:t,handleChange:a,handleBlur:l})=>[i(A,{"model-value":e.value,error:t,disabled:f(ne),items:ye,placeholder:"Please select a result",label:"Result",shape:"rounded","onUpdate:modelValue":a,onBlur:l},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1}),"DRAW"!==f(ie).result?(n(),u(f(j),{key:0,name:"profitType"},{default:d((({field:e,errorMessage:t,handleChange:a,handleBlur:l})=>[i(A,{"model-value":e.value,error:t,disabled:f(ne),items:["FIXED","PERCENTAGE"],placeholder:"Select Profit Type",label:"Profit Type","onUpdate:modelValue":a,onBlur:l},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})):x("",!0),f(ie).profitType?(n(),u(f(j),{key:1,name:"profitValue"},{default:d((({field:e,errorMessage:t,handleChange:a,handleBlur:l})=>[i(D,{"model-value":e.value,error:t,disabled:f(ne),type:"number",placeholder:"Enter Value",label:"Profit Value","onUpdate:modelValue":a,onBlur:l},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})):x("",!0)])])])),_:1},8,["open"])])),_:1})}}});export{oe as default};
