import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as l}from"./BaseSelect.vue-p0KYznCX.js";import{a,z as t,r as s,c as o,E as i,ad as n,ac as d,b as u,e as r,w as c,u as m,an as p,o as f,p as h,f as v,t as g,q as b,O as x,k as _,F as w,B as k,x as j,X as y,ag as $,ao as C}from"../e/entry-8qgg5CL-.js";import{_ as B}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as D}from"./BaseCheckbox.vue-cNhyVlDH.js";import{_ as M}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as F,a as T}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as V}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as z,a as I}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as A}from"./TairoFlexTable-zdoraqRc.js";import{_ as S}from"./BasePagination.vue-eKZkqxB7.js";import{_ as E}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as L}from"./useWallet-8iHzU2hV.js";import{_ as P,a as U}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as q}from"./methods-p0eBlE7Q.js";import"./input-id-wZ-Ta08j.js";import"./IconCheck-JvP9GQU1.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const N={value:10},R={value:25},W={value:50},O={value:100},X=v("img",{class:"block dark:hidden",src:P,alt:"Placeholder image"},null,-1),Y=v("img",{class:"hidden dark:block",src:U,alt:"Placeholder image"},null,-1),G={key:1,class:"w-full"},H={key:0,class:"bg-info-100 text-info-700 dark:bg-info-900 dark:text-info-100 rounded-lg p-4 flex justify-between items-center w-full mb-2"},J={class:"text-sm"},K={class:"flex gap-2"},Q={class:"relative"},Z={class:"pl-4"},ee={class:"mt-6"},le={class:"flex w-full items-center justify-between p-4 md:p-6"},ae={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},te={class:"p-4 md:p-6"},se={class:"mx-auto w-full text-center"},oe={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},ie={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},ne={class:"p-4 md:p-6"},de={class:"flex gap-x-2"},ue=a({__name:"index",setup(a){const P=q(),{deleteDepositMethod:U}=L(),ue=t(),re=s(""),ce=s(10),me=o((()=>parseInt(ue.query.page??"1"))),pe=s([]),fe=o((()=>pe.value.length===P.methods.length)),he=o((()=>P.methods.filter((e=>e.title.includes(re.value))))),ve=o((()=>{const e=(me.value-1)*ce.value,l=e+ce.value;return he.value.slice(e,l)}));function ge(){fe.value?pe.value=[]:pe.value=he.value.map((e=>e.id))??[]}i((async()=>{0===P.methods.length&&(P.loading=!0,await P.fetchDepositMethods(),P.loading=!1)}));const{toast:be}=n();function xe(e){P.updateDepositMethodsStatus(pe.value,e).then((e=>{"success"===e.status?be.success(e):be.danger(e),pe.value=[]}))}const _e=d();const we=s(!1),ke=s(!1),je=s(null);return(a,t)=>{const s=e,o=l,i=j,n=y,d=$,L=B,q=D,ue=M,ye=F,$e=V,Ce=z,Be=I,De=T,Me=A,Fe=S,Te=E,Ve=C,ze=p;return f(),u("div",null,[r(Te,null,{left:c((()=>[r(s,{modelValue:m(re),"onUpdate:modelValue":t[0]||(t[0]=e=>h(re)?re.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter methods..."},null,8,["modelValue"]),r(o,{modelValue:m(ce),"onUpdate:modelValue":t[1]||(t[1]=e=>h(ce)?ce.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:c((()=>[v("option",N,"10 "+g(a.$t("per page")),1),v("option",R,"25 "+g(a.$t("per page")),1),v("option",W,"50 "+g(a.$t("per page")),1),v("option",O,"100 "+g(a.$t("per page")),1)])),_:1},8,["modelValue"])])),right:c((()=>[r(n,{color:"primary",to:"/admin/finance/deposit/methods/create"},{default:c((()=>[r(i,{name:"lucide:plus",size:"16",class:"mr-2"}),b(" "+g(a.$t("Create")),1)])),_:1})])),default:c((()=>[v("div",null,[m(P).loading||0!==m(ve)?.length?(f(),u("div",G,[!m(P).loading&&m(pe).length>0?(f(),u("div",H,[v("span",J,g(a.$t("You have selected"))+" "+g(m(pe).length)+" "+g(a.$t("items of the total"))+" "+g(m(he).length)+" "+g(a.$t("items"))+". ",1),v("div",K,[r(L,{color:"danger",size:"xs","data-nui-tooltip":"Disable currencies",onClick:t[2]||(t[2]=()=>xe(!1))},{default:c((()=>[r(i,{name:"line-md:close-small",class:"h-5 w-5"})])),_:1}),r(L,{color:"success",size:"xs","data-nui-tooltip":"Enable currencies",onClick:t[3]||(t[3]=()=>xe(!0))},{default:c((()=>[r(i,{name:"line-md:confirm",class:"h-5 w-5"})])),_:1})])])):_("",!0),r(Me,null,{header:c((()=>[v("div",Q,[v("span",Z,[r(q,{"model-value":m(fe),indeterminate:m(pe).length>0&&!m(fe),onClick:ge},null,8,["model-value","indeterminate"])])])])),default:c((()=>[(f(!0),u(w,null,k(m(ve),((e,l)=>(f(),x(De,{key:e.id,spaced:""},{start:c((()=>[r(ue,{"data-content":"Selection",class:"xs:absolute right-2 ml-2"},{default:c((()=>[r(q,{modelValue:m(pe),"onUpdate:modelValue":t[4]||(t[4]=e=>h(pe)?pe.value=e:null),value:e.id,name:`item-checkbox-${e.id}`,shape:"rounded",class:"text-primary-500"},null,8,["modelValue","value","name"])])),_:2},1024),r(ye,{label:"Method","hide-label":l>0,picture:e.image,title:e.title},null,8,["hide-label","picture","title"])])),end:c((()=>[r(ue,{label:"Fixed Fee","hide-label":l>0,class:"w-20 xs:w-full"},{default:c((()=>[b(g(e.fixed_fee),1)])),_:2},1032,["hide-label"]),r(ue,{label:"% Fee","hide-label":l>0,class:"w-20 xs:w-full"},{default:c((()=>[b(g(e.percentage_fee)+"%",1)])),_:2},1032,["hide-label"]),r(ue,{label:"Min / Max","hide-label":l>0,class:"w-40 xs:w-full"},{default:c((()=>[b(g(e.min_amount)+" / "+g(e.max_amount),1)])),_:2},1032,["hide-label"]),r(ue,{label:"Status","hide-label":l>0,class:"w-20 xs:w-full"},{default:c((()=>[r($e,{color:e.status?"success":"danger",flavor:"pastel",condensed:""},{default:c((()=>[b(g(e.status?"Active":"Disabled"),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),r(ue,{label:"Actions","hide-label":l>0},{default:c((()=>[r(Be,{flavor:"context",label:"Dropdown",orientation:"end"},{default:c((()=>[r(Ce,{onClick:l=>{return a=e,P.selectMethod(a),void _e.push(`/admin/finance/deposit/methods/edit/${a.id}`);var a},title:"Edit Method"},{start:c((()=>[r(i,{name:"line-md:edit-twotone",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"]),r(Ce,{onClick:l=>function(e){je.value=e,we.value=!0}(e),title:"Delete Method"},{start:c((()=>[r(i,{name:"line-md:close",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(f(),x(d,{key:0,title:m(re)&&""!==m(re)?"No matching results":"No results",subtitle:m(re)&&""!==m(re)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:c((()=>[X,Y])),_:1},8,["title","subtitle"])),v("div",ee,[m(he).length>m(ce)?(f(),x(Fe,{key:0,"total-items":m(he).length,"current-page":m(me),"item-per-page":m(ce)},null,8,["total-items","current-page","item-per-page"])):_("",!0)])])])),_:1}),r(ze,{open:m(we),size:"sm",onClose:t[8]||(t[8]=e=>we.value=!1)},{header:c((()=>[v("div",le,[v("h3",ae,g(a.$t("Delete"))+" "+g(a.$t("Deposit Method")),1),r(Ve,{onClick:t[5]||(t[5]=e=>we.value=!1)})])])),footer:c((()=>[v("div",ne,[v("div",de,[r(n,{onClick:t[6]||(t[6]=e=>we.value=!1)},{default:c((()=>[b(g(a.$t("Cancel")),1)])),_:1}),r(n,{color:"danger",flavor:"solid",onClick:t[7]||(t[7]=e=>async function(){ke.value=!0;try{const e=await U(je.value?.id);be.response(e),"success"===e.status&&(P.methods=P.methods.filter((e=>e.id!==je.value?.id)))}catch(e){be.danger(e)}we.value=!1,ke.value=!1,je.value=null}()),disabled:m(ke),loading:m(ke)},{default:c((()=>[b(g(a.$t("Delete")),1)])),_:1},8,["disabled","loading"])])])])),default:c((()=>[v("div",te,[v("div",se,[v("h3",oe,g(a.$t("Are you sure?")),1),v("p",ie,g(a.$t("Do you really want to delete this"))+" "+g(a.$t("deposit method"))+" "+g(a.$t("This process cannot be undone"))+". ",1)])])])),_:1},8,["open"])])}}});export{ue as default};
