import{_ as e}from"./transfer.vue-xUPtEXCI.js";import{a,z as l,ac as t,r as s,c as r,E as o,b as u,f as i,n,e as c,w as m,_ as p,g as d,o as f,q as v,t as g,u as h,p as w,O as y,af as x,k as b,F as _,B as k,x as j,X as $,Y as T,ag as V}from"../e/entry-8qgg5CL-.js";import{_ as F}from"./BaseInput.vue-iInHQMIA.js";import{_ as P}from"./BaseSelect.vue-p0KYznCX.js";import{_ as B,a as q}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as D}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as C}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as R}from"./TairoFlexTable-zdoraqRc.js";import{_ as L}from"./BasePagination.vue-eKZkqxB7.js";import{_ as U}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_ as I}from"./Faqs.vue-my_shOF5.js";import{_ as O,a as A}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as W}from"./offers-pCoDOi_A.js";import"./client-only-nGApKnAn.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";import"./useFaq-K_svOq1B.js";import"./useP2P-NV4dmDWU.js";const z={class:"relative"},E={class:"bg-primary-800 flex flex-col items-center rounded-2xl p-4 sm:flex-row w-full mb-10"},N={class:"mt-20 grow sm:mt-0"},G={class:"pb-4 text-center sm:pb-0 sm:text-left max-w-xs md:max-w-md lg:max-w-2xl"},K=i("span",{class:"text-3xl"},"ðŸ“ˆ",-1),M={class:"relative pt-2"},S={class:"w-full flex gap-2 xs:flex-col sm:flex-row"},X={value:10},Y={value:25},H={value:50},J={value:100},Q=i("img",{class:"block dark:hidden",src:O,alt:"Placeholder image"},null,-1),Z=i("img",{class:"hidden dark:block",src:A,alt:"Placeholder image"},null,-1),ee={key:1,class:"w-full"},ae=["data-nui-tooltip"],le={class:"mt-6"},te=a({__name:"index",setup(a){const O=W(),A=l(),te=t(),se=s(""),re=s(""),oe=s(10),ue=r((()=>parseInt(A.query.page??"1"))),ie=r((()=>O.offers.filter((e=>!(me.value&&new Date(e.created_at)<new Date(me.value))&&(!(pe.value&&new Date(e.created_at)>new Date(pe.value))&&(re.value&&""!==re.value&&void 0!==re.value&&re.value!==se.value&&(te.push({query:{...A.query,page:"1",filter:re.value}}),se.value=re.value),!re.value||e.currency?.includes(re.value))))).sort(((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())).map((e=>{const a=e.reviews||[],l=a.reduce(((e,a)=>e+a.rating),0),t=a.length?l/a.length:0;return{...e,avgRating:t}})))),ne=r((()=>{const e=(ue.value-1)*oe.value,a=e+oe.value;return ie.value.slice(e,a)}));o((async()=>{0===O.offers.length&&(O.loading=!0,await O.fetchP2POffers(),O.loading=!1)}));const ce=s(!1),me=s(""),pe=s("");function de(e,a){const l=Math.floor(a);return e<=l?"full":e===l+1&&a%1>=.5?"half":"empty"}return(a,l)=>{const t=e,s=p,r=d,o=F,A=j,W=$,te=P,se=T,fe=V,ve=B,ge=D,he=C,we=q,ye=R,xe=L,be=U,_e=I;return f(),u("div",z,[i("div",E,[i("div",{class:n(["relative w-[320px]",{"h-[170px]":a.$viewport.isLessThan("sm"),"h-[175px]":a.$viewport.isGreaterOrEquals("sm")}])},[c(t,{classes:"pointer-events-none absolute -top-6 start-3 sm:-start-5 sm:-top-8",height:"280px"})],2),i("div",N,[i("div",G,[c(s,{tag:"h1",class:"mb-2 text-white opacity-90"},{default:m((()=>[i("span",null,[v(g(a.$t("Check out our latest offers"))+" ",1),K])])),_:1}),c(r,{size:"sm",class:"text-white opacity-70"},{default:m((()=>[i("span",null,g(a.$t("We have a wide range of offers available for you to choose from. Check them out below.")),1)])),_:1})])])]),i("div",M,[c(be,null,{left:m((()=>[i("div",S,[c(o,{modelValue:h(re),"onUpdate:modelValue":l[0]||(l[0]=e=>w(re)?re.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter currency..."},null,8,["modelValue"]),c(W,{onClick:l[1]||(l[1]=e=>ce.value=!h(ce)),color:"muted",block:""},{default:m((()=>[h(ce)?(f(),y(A,{key:0,name:"line-md:arrow-up",class:"h-4 w-4 mr-2"})):(f(),y(A,{key:1,name:"line-md:arrow-down",class:"h-4 w-4 mr-2"})),v(" "+g(a.$t("Filters")),1)])),_:1})])])),right:m((()=>[c(te,{modelValue:h(oe),"onUpdate:modelValue":l[2]||(l[2]=e=>w(oe)?oe.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:m((()=>[i("option",X,"10 "+g(a.$t("per page")),1),i("option",Y,"25 "+g(a.$t("per page")),1),i("option",H,"50 "+g(a.$t("per page")),1),i("option",J,"100 "+g(a.$t("per page")),1)])),_:1},8,["modelValue"])])),default:m((()=>[i("div",null,[c(x,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:m((()=>[h(ce)?(f(),y(se,{key:0,class:n("grid gap-4 xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-3 mb-6 p-5")},{default:m((()=>[c(o,{modelValue:h(me),"onUpdate:modelValue":l[3]||(l[3]=e=>w(me)?me.value=e:null),type:"date",label:"From"},null,8,["modelValue"]),c(o,{modelValue:h(pe),"onUpdate:modelValue":l[4]||(l[4]=e=>w(pe)?pe.value=e:null),type:"date",label:"To"},null,8,["modelValue"])])),_:1})):b("",!0)])),_:1}),h(O).loading||0!==h(ne).length?(f(),u("div",ee,[c(ye,{class:"pt-5"},{default:m((()=>[(f(!0),u(_,null,k(h(ne),((e,a)=>(f(),y(we,{key:e.id,spaced:""},{start:m((()=>[c(ve,{label:"Offer","hide-label":a>0,logo:`/img/crypto/${e.currency.toLowerCase()}.png`,title:`${e.currency} (${e.wallet_type} Wallet)`,subtitle:e.uuid},null,8,["hide-label","logo","title","subtitle"])])),end:m((()=>[c(ge,{label:"Available","hide-label":a>0,class:"w-20 xs:w-full text-xs"},{default:m((()=>[v(g(e.amount)+" "+g(e.currency),1)])),_:2},1032,["hide-label"]),c(ge,{label:"Price","hide-label":a>0,class:"w-20 xs:w-full text-xs"},{default:m((()=>[v(g(e.price)+" "+g(e.payment_method?.currency),1)])),_:2},1032,["hide-label"]),c(ge,{label:"Rating","hide-label":a>0,class:"w-20 xs:w-full text-xs"},{default:m((()=>[i("span",{"data-nui-tooltip":`${e.avgRating.toFixed(1)} (${e.reviews.length} ${e.reviews.length>1?"reviews":"review"})`,class:"flex"},[(f(),u(_,null,k(5,(a=>i("span",{key:a},["full"===de(a,e.avgRating)?(f(),y(A,{key:0,name:"uim:star",class:"w-4 h-4 text-yellow-400"})):"half"===de(a,e.avgRating)?(f(),y(A,{key:1,name:"uim:star-half-alt",class:"w-4 h-4 text-yellow-400"})):(f(),y(A,{key:2,name:"uim:star",class:"w-4 h-4 text-gray-300"}))]))),64))],8,ae)])),_:2},1032,["hide-label"]),c(ge,{label:"Actions","hide-label":a>0},{default:m((()=>[c(he,{to:`/user/p2p/offers/${e.uuid}`,color:"info",condensed:""},{default:m((()=>[c(A,{name:"mdi-eye",class:"h-4 w-4"})])),_:2},1032,["to"])])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(f(),y(fe,{key:0,title:h(re)&&""!==h(re)?"No matching results":"No results",subtitle:h(re)&&""!==h(re)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any offers here yet."},{image:m((()=>[Q,Z])),_:1},8,["title","subtitle"])),i("div",le,[h(ie).length>h(oe)?(f(),y(xe,{key:0,"total-items":h(ie).length,"current-page":h(ue),"item-per-page":h(oe)},null,8,["total-items","current-page","item-per-page"])):b("",!0)])])])),_:1})]),c(_e,{category:"P2P"})])}}});export{te as default};
