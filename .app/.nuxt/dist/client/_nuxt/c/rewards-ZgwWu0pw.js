import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{a,z as l,ac as t,r as s,c as r,E as o,b as u,e as i,w as n,o as d,f as c,u as m,p,O as v,q as f,t as g,af as w,k as h,F as _,B as y,X as b,Y as k,ag as x,x as j}from"../e/entry-8qgg5CL-.js";import{_ as V}from"./BaseSelect.vue-p0KYznCX.js";import{_ as T,a as B}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as D}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as $}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as F}from"./TairoFlexTable-zdoraqRc.js";import{_ as P}from"./BasePagination.vue-eKZkqxB7.js";import{_ as R}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as q}from"./useMlm-tZO3tueF.js";import{a as C}from"./strings-rQgUKePI.js";import{_ as I,a as U}from"./placeholder-search-4-dark-Jht91LnM.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const A={class:"w-full flex gap-2 xs:flex-col sm:flex-row"},L={value:10},S={value:25},N={value:50},z={value:100},E=c("img",{class:"block dark:hidden",src:I,alt:"Placeholder image"},null,-1),M=c("img",{class:"hidden dark:block",src:U,alt:"Placeholder image"},null,-1),O={key:1,class:"w-full sm:pt-5"},W={class:"mt-6"},X=a({__name:"rewards",setup(a){const I=l(),{getAllRewards:U}=q(),X=t(),Y=s(""),G=s(!1),H=s(""),J=s(10),K=r((()=>parseInt(I.query.page??"1")));let Q=s([]);o((async()=>{G.value=!0;try{const e=await U();Q.value=e.data.result}catch(e){Q.value=[]}G.value=!1}));const Z=r((()=>Q.value.filter((e=>!(le.value&&new Date(e.created_at)<new Date(le.value))&&(!(te.value&&new Date(e.created_at)>new Date(te.value))&&(H.value&&""!==H.value&&void 0!==H.value&&H.value!==Y.value&&(X.push({query:{...I.query,page:"1",filter:H.value}}),Y.value=H.value),!H.value||e.id?.includes(H.value))))).sort(((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())))),ee=r((()=>{const e=(K.value-1)*J.value,a=e+J.value;return Z.value.slice(e,a)})),ae=s(!1),le=s(""),te=s("");return(a,l)=>{const t=e,s=j,r=b,o=V,q=k,I=x,U=T,X=D,Y=$,Q=B,se=F,re=P,oe=R;return d(),u("div",null,[i(oe,null,{left:n((()=>[c("div",A,[i(t,{modelValue:m(H),"onUpdate:modelValue":l[0]||(l[0]=e=>p(H)?H.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Search Reward ID..."},null,8,["modelValue"]),i(r,{onClick:l[1]||(l[1]=e=>ae.value=!m(ae)),color:"muted",block:""},{default:n((()=>[m(ae)?(d(),v(s,{key:0,name:"line-md:arrow-up",class:"h-4 w-4 mr-2"})):(d(),v(s,{key:1,name:"line-md:arrow-down",class:"h-4 w-4 mr-2"})),f(" "+g(a.$t("Filters")),1)])),_:1})])])),right:n((()=>[i(o,{modelValue:m(J),"onUpdate:modelValue":l[2]||(l[2]=e=>p(J)?J.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:n((()=>[c("option",L,"10 "+g(a.$t("per page")),1),c("option",S,"25 "+g(a.$t("per page")),1),c("option",N,"50 "+g(a.$t("per page")),1),c("option",z,"100 "+g(a.$t("per page")),1)])),_:1},8,["modelValue"])])),default:n((()=>[c("div",null,[i(w,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:n((()=>[m(ae)?(d(),v(q,{key:0,class:"grid gap-4 xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-2 mb-6 p-5"},{default:n((()=>[i(t,{modelValue:m(le),"onUpdate:modelValue":l[3]||(l[3]=e=>p(le)?le.value=e:null),type:"date",label:"From"},null,8,["modelValue"]),i(t,{modelValue:m(te),"onUpdate:modelValue":l[4]||(l[4]=e=>p(te)?te.value=e:null),type:"date",label:"To"},null,8,["modelValue"])])),_:1})):h("",!0)])),_:1}),m(G)||0!==m(ee)?.length?(d(),u("div",O,[i(se,null,{default:n((()=>[i(w,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:n((()=>[(d(!0),u(_,null,y(m(ee),((e,l)=>(d(),v(Q,{key:e.id,spaced:""},{start:n((()=>[i(U,{label:"Referrer","hide-label":l>0,class:"w-20 xs:w-full",logo:e.referrer?.avatar??"/img/placeholder.png",title:`${e.referrer?.first_name} ${e.referrer?.last_name}`,subtitle:e.referrer?.uuid},null,8,["hide-label","logo","title","subtitle"]),i(U,{label:"Reward","hide-label":l>0,title:e.condition?.title,subtitle:("formatDate"in a?a.formatDate:m(C))(e.created_at)},null,8,["hide-label","title","subtitle"])])),end:n((()=>[i(X,{label:"Amount","hide-label":l>0,class:"w-full sm:w-24 xs:flex sm:hidden lg:flex"},{default:n((()=>[f(g(e.reward)+" "+g(e.condition?.reward_currency),1)])),_:2},1032,["hide-label"]),i(X,{label:"Status","hide-label":l>0},{default:n((()=>[i(Y,{color:e.is_claimed?"success":"warning",flavor:"pastel",condensed:""},{default:n((()=>[f(g(e.is_claimed?"Claimed":"Pending"),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])),_:1})])):(d(),v(I,{key:0,title:m(H)&&""!==m(H)?"No matching results":"No results",subtitle:m(H)&&""!==m(H)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:n((()=>[E,M])),_:1},8,["title","subtitle"])),c("div",W,[m(Z).length>m(J)?(d(),v(re,{key:0,"total-items":m(Z).length,"current-page":m(K),"item-per-page":m(J)},null,8,["total-items","current-page","item-per-page"])):h("",!0)])])])),_:1})])}}});export{X as default};
