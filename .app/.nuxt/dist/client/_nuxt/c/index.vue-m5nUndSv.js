import{a as e,z as t,r as s,Q as a,c as r,ad as l,E as o,o as n,b as u,e as c,w as i,u as d,t as f,q as m,f as p,k as w,O as h,n as y,_ as v,x,X as b,Y as $}from"../e/entry-8qgg5CL-.js";import{_ as g}from"./BaseIconBox.vue-qjQCKz6R.js";import{_}from"./BaseButtonAction.vue-hzSHyI6o.js";import{_ as N,a as k,b as j}from"./Transactions.vue-zBG-Mjsv.js";import{_ as T}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as W}from"./useWallet-8iHzU2hV.js";import{u as C}from"./currency-9FjTf2Bf.js";const E={class:"flex justify-between items-center mb-5"},D={key:0,class:"h-[calc(80vh)] flex justify-center items-center"},F={class:"my-auto text-center flex-col justify-center space-y-5"},P={class:"text-2xl font-bold"},G={key:1,class:"h-[calc(86vh)] flex justify-center items-center"},I={class:"my-auto text-center flex-col justify-center space-y-5"},L={class:"text-2xl font-bold"},O={key:2,class:"flex flex-col gap-6 md:pb-10"},B={class:"grid gap-5 grid-cols-12"},z={class:"mb-12 flex items-center justify-between"},M={class:"flex xs:flex-col sm:flex-row justify-center items-center gap-2"},R={class:"mt-4 flex justify-center text-center"},S={key:1,class:"flex flex-col justify-center items-center gap-2 w-full col-span-12"},A=e({__name:"index",props:{flutter:{type:Boolean,default:!1}},setup(e){const{createSpotWallet:A,getSpotWallet:q}=W(),U=t().params.currency.toUpperCase(),H=s(!1),Q=s(!1),V=a(),X=r((()=>V.settings)),Y=s(null);const J=C(),K=r((()=>J.currencies)),Z=r((()=>K.value.find((e=>e.currency===Y.value?.currency)))),{countDecimals:ee}=l(),te=r((()=>Math.abs(Number(ee(Number(Z.value?.precision)))||8)));o((async()=>{await async function(){try{const e=await q(U);if(e.data.result)Y.value=e.data.result;else{H.value=!0;const e=await A(U);Y.value=e.data.result,H.value=!1}}catch(e){Q.value=!0}}(),0===J.currencies.length&&await J.fetchCurrencies()}));const se=r((()=>{if(!Y.value)return 0;return Y.value.transactions.filter((e=>!("DEPOSIT"!==e.type&&"INCOMING_TRANSFER"!==e.type||"COMPLETED"!==e.status&&"PENDING"!==e.status))).reduce(((e,t)=>e+t.amount),0)})),ae=r((()=>{if(!Y.value)return 0;return Y.value.transactions.filter((e=>!("WITHDRAW"!==e.type&&"OUTGOING_TRANSFER"!==e.type||"COMPLETED"!==e.status&&"PENDING"!==e.status))).reduce(((e,t)=>e+t.amount),0)}));return(t,s)=>{const a=v,r=x,l=b,o=g,W=_,C=$,A=N,q=k,V=j,J=T;return n(),u("div",null,[c(J,null,{default:i((()=>[p("div",E,[c(a,{size:"lg"},{default:i((()=>[m(f(d(U)+" "+t.$t("Wallet")),1)])),_:1}),c(l,{type:"button",color:"muted",class:"hover:bg-gray-300 dark:hover:bg-gray-800",to:`/user/${e.flutter?"flutter/":""}wallets/spot`},{default:i((()=>[c(r,{name:"line-md:chevron-left",class:"h-4 w-4 mr-2"}),m(" "+f(t.$t("Back")),1)])),_:1},8,["to"])]),d(H)&&!d(Q)?(n(),u("div",D,[p("div",F,[c(o,{size:"2xl",shape:"full",color:"info"},{default:i((()=>[c(r,{name:"svg-spinners:blocks-shuffle-3",class:"h-12 w-12"})])),_:1}),p("h1",P,f(t.$t("Generating Wallet")),1),p("p",null,f(t.$t("Please wait while we generate your wallet"))+".",1)])])):w("",!0),d(Q)?(n(),u("div",G,[p("div",I,[c(o,{size:"2xl",shape:"full",color:"danger"},{default:i((()=>[c(r,{name:"line-md:sunny-filled-loop-to-moon-alt-filled-loop-transition",class:"h-12 w-12"})])),_:1}),p("h1",L,f(t.$t("Failed to Generate Wallet")),1),p("p",null,f(t.$t("We were unable to generate your wallet. Please try again later or contact support"))+". ",1),c(W,{to:`/user/${e.flutter?"flutter/":""}wallets/spot`},{default:i((()=>[c(r,{name:"lucide:arrow-left",class:"h-3 w-3"}),p("span",null,f(t.$t("Go Back")),1)])),_:1},8,["to"])])])):w("",!0),d(Y)?.currency?(n(),u("div",O,[p("div",B,[t.$viewport.isGreaterOrEquals("sm")?(n(),h(C,{key:0,class:"overflow-hidden p-6 col-span-12 lg:col-span-7"},{default:i((()=>[p("div",z,[c(a,{as:"h3",size:"md",weight:"semibold",lead:"tight",class:"text-muted-800 dark:text-white"},{default:i((()=>[p("span",null,f(t.$t("Portfolio")),1)])),_:1})]),p("div",M,[d(X).deposit?(n(),h(l,{key:0,shape:"curved",flavor:"outline",color:"success",shadow:"hover",to:`/user/${e.flutter?"flutter/":""}wallets/spot/deposit/${d(Y)?.currency.toLowerCase()}`},{default:i((()=>[c(r,{name:"solar:card-recive-bold-duotone",class:"h-6 w-6 mr-2"}),m(" "+f(t.$t("Deposit")),1)])),_:1},8,["to"])):w("",!0),d(X).withdraw?(n(),h(l,{key:1,shape:"curved",flavor:"outline",color:"danger",shadow:"hover",to:`/user/${e.flutter?"flutter/":""}wallets/spot/withdraw/${d(Y)?.currency.toLowerCase()}`},{default:i((()=>[c(r,{name:"solar:card-send-bold-duotone",class:"h-6 w-6 mr-2"}),m(" "+f(t.$t("Withdraw")),1)])),_:1},8,["to"])):w("",!0),d(X).transfer?(n(),h(l,{key:2,shape:"curved",flavor:"outline",color:"warning",shadow:"hover",to:`/user/${e.flutter?"flutter/":""}wallets/spot/transfer/${d(Y)?.currency.toLowerCase()}`},{default:i((()=>[c(r,{name:"solar:card-send-bold-duotone",class:"h-6 w-6 mr-2"}),m(" "+f(t.$t("Transfer")),1)])),_:1},8,["to"])):w("",!0)]),p("div",R,[p("p",{class:y(["ltablet:mx-0 text-muted-400 mx-auto max-w-xs text-center font-sans lg:mx-0",{"text-md":!d(X).deposit&&!d(X).withdraw&&!d(X).transfer,"text-xs":d(X).deposit||d(X).withdraw||d(X).transfer}])},f(t.$t("Monitor your deposits, withdrawals, and transactions conveniently in one place"))+". ",3)])])),_:1})):(n(),u("div",S,[d(X).deposit?(n(),h(l,{key:0,class:"w-full",shape:"curved",flavor:"outline",color:"success",shadow:"hover",to:`/user/${e.flutter?"flutter/":""}wallets/spot/deposit/${d(Y)?.currency.toLowerCase()}`},{default:i((()=>[c(r,{name:"solar:card-recive-bold-duotone",class:"h-6 w-6 mr-2"}),m(" "+f(t.$t("Deposit")),1)])),_:1},8,["to"])):w("",!0),d(X).withdraw?(n(),h(l,{key:1,shape:"curved",class:"w-full",flavor:"outline",color:"danger",shadow:"hover",to:`/user/${e.flutter?"flutter/":""}wallets/spot/withdraw/${d(Y)?.currency.toLowerCase()}`},{default:i((()=>[c(r,{name:"solar:card-send-bold-duotone",class:"h-6 w-6 mr-2"}),m(" "+f(t.$t("Withdraw")),1)])),_:1},8,["to"])):w("",!0),d(X).transfer?(n(),h(l,{key:2,shape:"curved",class:"w-full",flavor:"outline",color:"warning",shadow:"hover",to:`/user/${e.flutter?"flutter/":""}wallets/spot/transfer/${d(Y)?.currency.toLowerCase()}`},{default:i((()=>[c(r,{name:"solar:card-send-bold-duotone",class:"h-6 w-6 mr-2"}),m(" "+f(t.$t("Transfer")),1)])),_:1},8,["to"])):w("",!0)])),d(Y)?(n(),h(A,{class:"overflow-hidden p-6 col-span-12 lg:col-span-5",key:Number(d(te)),balance:Number(d(Y).balance).toFixed(Number(d(te))),currency:d(Y).currency,uuid:d(Y).uuid,income:Number(d(se)).toFixed(Number(d(te))),expenses:Number(d(ae)).toFixed(Number(d(te))),incomeText:"Deposits",expensesText:"Withdrawals",uuidFormated:!0,currencyFormated:!1},null,8,["balance","currency","uuid","income","expenses"])):w("",!0)]),d(Y)?(n(),h(q,{key:0,incomeText:"Deposits",expensesText:"Withdrawals",income:Number(d(se)).toFixed(Number(d(te))),expenses:Number(d(ae)).toFixed(Number(d(te))),wallet:d(Y),currencyFormated:!1},null,8,["income","expenses","wallet"])):w("",!0),d(Y)?(n(),h(V,{key:1,wallet:d(Y),precision:d(te),viewPath:`/user/${e.flutter?"flutter/":""}wallets/trx`},null,8,["wallet","precision","viewPath"])):w("",!0)])):w("",!0)])),_:1})])}}});export{A as _};
