import{au as r,c as t,ac as e,r as n,a2 as o,a7 as a}from"../e/entry-8qgg5CL-.js";var u=Function.prototype.toString,c=Object.create,i=Object.prototype.toString,f=function(){function r(){this._keys=[],this._values=[]}return r.prototype.has=function(r){return!!~this._keys.indexOf(r)},r.prototype.get=function(r){return this._values[this._keys.indexOf(r)]},r.prototype.set=function(r,t){this._keys.push(r),this._values.push(t)},r}();var s="undefined"!=typeof WeakMap?function(){return new WeakMap}:function(){return new f};function l(r){if(!r)return c(null);var t=r.constructor;if(t===Object)return r===Object.prototype?{}:c(r);if(~u.call(t).indexOf("[native code]"))try{return new t}catch(m){}return c(r)}var p="g"===/test/g.flags?function(r){return r.flags}:function(r){var t="";return r.global&&(t+="g"),r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),r.unicode&&(t+="u"),r.sticky&&(t+="y"),t};function y(r){var t=i.call(r);return t.substring(8,t.length-1)}var v="undefined"!=typeof Symbol?function(r){return r[Symbol.toStringTag]||y(r)}:y,g=Object.defineProperty,b=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,m=Object.prototype,w=m.hasOwnProperty,O=m.propertyIsEnumerable,S="function"==typeof d;var j=S?function(r){return h(r).concat(d(r))}:h;function A(r,t,e){for(var n=j(r),o=0,a=n.length,u=void 0,c=void 0;o<a;++o)if("callee"!==(u=n[o])&&"caller"!==u)if(c=b(r,u)){c.get||c.set||(c.value=e.copier(c.value,e));try{g(t,u,c)}catch(i){t[u]=c.value}}else t[u]=e.copier(r[u],e);return t}function B(r,t){return r.slice(0)}function C(r,t){var e=new t.Constructor;return t.cache.set(r,e),r.forEach((function(r,n){e.set(n,t.copier(r,t))})),e}var x=S?function(r,t){var e=l(t.prototype);for(var n in t.cache.set(r,e),r)w.call(r,n)&&(e[n]=t.copier(r[n],t));for(var o=d(r),a=0,u=o.length,c=void 0;a<u;++a)c=o[a],O.call(r,c)&&(e[c]=t.copier(r[c],t));return e}:function(r,t){var e=l(t.prototype);for(var n in t.cache.set(r,e),r)w.call(r,n)&&(e[n]=t.copier(r[n],t));return e};function _(r,t){return new t.Constructor(r.valueOf())}function E(r,t){return r}function k(r,t){var e=new t.Constructor;return t.cache.set(r,e),r.forEach((function(r){e.add(t.copier(r,t))})),e}var P=Array.isArray,I=Object.assign,M=Object.getPrototypeOf||function(r){return r.__proto__},F={array:function(r,t){var e=new t.Constructor;t.cache.set(r,e);for(var n=0,o=r.length;n<o;++n)e[n]=t.copier(r[n],t);return e},arrayBuffer:B,blob:function(r,t){return r.slice(0,r.size,r.type)},dataView:function(r,t){return new t.Constructor(B(r.buffer))},date:function(r,t){return new t.Constructor(r.getTime())},error:E,map:C,object:x,regExp:function(r,t){var e=new t.Constructor(r.source,p(r));return e.lastIndex=r.lastIndex,e},set:k},U=I({},F,{array:function(r,t){var e=new t.Constructor;return t.cache.set(r,e),A(r,e,t)},map:function(r,t){return A(r,C(r,t),t)},object:function(r,t){var e=l(t.prototype);return t.cache.set(r,e),A(r,e,t)},set:function(r,t){return A(r,k(r,t),t)}});function W(r){var t=function(r){return{Arguments:r.object,Array:r.array,ArrayBuffer:r.arrayBuffer,Blob:r.blob,Boolean:_,DataView:r.dataView,Date:r.date,Error:r.error,Float32Array:r.arrayBuffer,Float64Array:r.arrayBuffer,Int8Array:r.arrayBuffer,Int16Array:r.arrayBuffer,Int32Array:r.arrayBuffer,Map:r.map,Number:_,Object:r.object,Promise:E,RegExp:r.regExp,Set:r.set,String:_,WeakMap:E,WeakSet:E,Uint8Array:r.arrayBuffer,Uint8ClampedArray:r.arrayBuffer,Uint16Array:r.arrayBuffer,Uint32Array:r.arrayBuffer,Uint64Array:r.arrayBuffer}}(I({},F,r)),e=t.Array,n=t.Object;function o(r,o){if(o.prototype=o.Constructor=void 0,!r||"object"!=typeof r)return r;if(o.cache.has(r))return o.cache.get(r);if(o.prototype=M(r),o.Constructor=o.prototype&&o.prototype.constructor,!o.Constructor||o.Constructor===Object)return n(r,o);if(P(r))return e(r,o);var a=t[v(r)];return a?a(r,o):"function"==typeof r.then?r:n(r,o)}return function(r){return o(r,{Constructor:void 0,cache:s(),copier:o,prototype:void 0})}}W(I({},U,{}));var D=W({});function N(a){const u=r(a.initialState),c=t((()=>a.steps.map(((r,t)=>({...r,id:t}))))),i=e(),f=t((()=>c.value.length)),s=t((()=>{const r=c.value.find((r=>r.to===i.currentRoute.value.path))?.id;return"number"!=typeof r?0:r>-1?r:0})),l=t((()=>(s.value+1)/f.value*100)),p=n(D(u.value)),y=n(!1),v=n(!1),g=n(!1),b={steps:c,totalSteps:f,currentStep:s,progress:l,data:p,loading:y,preview:v,complete:g,getStep:h,getNextStep:function(){if(s.value+1>=f.value)return null;return h(s.value+1)},getPrevStep:function(){if(s.value-1<0)return null;return h(s.value-1)},goToStep:function(r){r&&i.push(r.to)},reset:function(){p.value=D(u.value),v.value=!1,g.value=!1},handleSubmit:async function(){if(y.value)return;y.value=!0;try{a.onSubmit&&await a.onSubmit(p.value,b),g.value=!0}catch(r){a.onError&&await a.onError(r,b)}finally{y.value=!1}}};function h(r){return c.value[r]}return o(T,b),b}const T=Symbol("multi-step-form-context");function V(){const r=a(T);if(!r)throw new Error("MultiStepForm: no context found, did you forget to call createMultiStepForm?");return r}export{N as c,V as u};
