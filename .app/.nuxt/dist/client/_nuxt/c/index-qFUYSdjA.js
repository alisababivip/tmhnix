import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{a,ad as t,z as l,r as s,c as r,E as i,b as n,e as u,w as o,u as d,an as m,o as c,p as f,f as p,t as v,F as x,B as g,af as h,O as w,q as y,k as b,x as k,X as j,s as _,Y as C,ag as D,_ as B,g as T,ao as $}from"../e/entry-8qgg5CL-.js";import{_ as A}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as V}from"./BasePagination.vue-eKZkqxB7.js";import{_ as H}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_ as I}from"./BaseListbox.vue-1Dy9Ui3z.js";import{u as M}from"./useAiTrading-wIB0sHyU.js";import{_ as U,a as E}from"./placeholder-search-1-dark-6GG3FkNl.js";import{z as P,u as z,t as F,F as N}from"./vee-validate.esm-n59zZCC5.js";import{u as O}from"./durations-gSTqwGyf.js";import"./input-id-wZ-Ta08j.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./use-text-value-9iwzs_EA.js";const S={class:"pb-10"},W={class:"w-full"},L={key:0,class:"space-y-4"},q={class:"flex flex-col items-center justify-center gap-3 text-center sm:flex-row sm:justify-start sm:text-left"},Y={class:"space-y-2"},K={class:"flex flex-col gap-4 pt-4 sm:ms-auto sm:flex-row sm:items-center sm:justify-end sm:pt-0"},R={class:"flex w-full items-center justify-center sm:w-[160px] sm:justify-end"},G={class:"ptablet:hidden divide-muted-200 dark:divide-muted-700 flex items-center justify-center divide-x"},X={class:"flex flex-col gap-1 px-4 text-center"},J={class:"flex flex-col gap-1 px-4 text-center"},Q={class:"flex flex-col gap-1 px-4 text-center"},Z={class:"ptablet:hidden flex w-full items-center justify-center gap-1 py-3 sm:w-[160px] sm:justify-end sm:py-0"},ee={class:"sm:ms-6"},ae={key:1},te=p("img",{class:"block dark:hidden",src:U,alt:"Placeholder image"},null,-1),le=p("img",{class:"hidden dark:block",src:E,alt:"Placeholder image"},null,-1),se={key:2,class:"space-y-4"},re={class:"flex flex-col items-center justify-start gap-3 text-center sm:flex-row sm:justify-start sm:text-left"},ie={class:"flex flex-col gap-4 pt-4 sm:ms-auto sm:flex-row sm:items-center sm:justify-end sm:pt-0"},ne={class:"divide-muted-200 dark:divide-muted-700 flex items-center justify-center divide-x"},ue={class:"flex flex-col gap-1 px-4 text-center"},oe={class:"flex w-full items-center justify-between p-4 md:p-6"},de={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},me={class:"p-4 md:p-6"},ce={class:"mx-auto w-full text-start"},fe={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},pe={class:"p-4 md:p-6"},ve={class:"flex gap-x-2"},xe={class:"flex w-full items-center justify-between p-4 md:p-6"},ge={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},he={class:"p-4 md:p-6"},we={class:"mx-auto w-full text-center"},ye={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},be={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},ke={class:"p-4 md:p-6"},je={class:"flex gap-x-2"},_e=a({__name:"index",setup(a){const{toast:U}=t(),E=l(),_e=s(!0),{createAITradingDuration:Ce,deleteAITradingDuration:De}=M(),Be=O(),Te=r((()=>Be.durations));i((async()=>{_e.value=!0,0===Be.durations.length&&await Be.fetchAiTradingDurations(),_e.value=!1}));const $e=s(""),Ae=s(10),Ve=r((()=>parseInt(E.query.page??"1"))),He=s(!1),Ie=r((()=>Te.value&&Array.isArray(Te.value)?Te.value.filter((e=>e.duration.toString().includes($e.value))):[])),Me=r((()=>{const e=(Ve.value-1)*Ae.value,a=e+Ae.value;return Ie.value.slice(e,a)})),Ue=P.object({duration:P.number().gt(0,"Maximum amount must be greater than 0"),timeframe:P.object({label:P.string(),value:P.string()})}),Ee=[{label:"Hour",value:"HOUR"},{label:"Day",value:"DAY"},{label:"Week",value:"WEEK"},{label:"Month",value:"MONTH"}],Pe={HOUR:"Hour",DAY:"Day",WEEK:"Week",MONTH:"Month"},ze=r((()=>({duration:1,timeframe:Ee[0]}))),{handleSubmit:Fe,isSubmitting:Ne,meta:Oe,resetForm:Se}=z({validationSchema:F(Ue),initialValues:ze}),We=Fe((async e=>{if(Te.value&&Te.value.length>0&&Te.value.some((a=>a.duration===e.duration&&a.timeframe===e.timeframe.value)))return U.warning("Duration already exists"),void(He.value=!1);const a={duration:e.duration,timeframe:e.timeframe.value};try{const e=await Ce(a);U.response(e),"success"===e.status&&(await Be.fetchAiTradingDurations(),Se())}catch(t){U.danger(t)}He.value=!1})),Le=s(!1),qe=s(!1),Ye=s(null);return(a,t)=>{const l=e,s=k,r=j,i=_,M=C,E=D,P=B,z=T,F=A,O=V,Ce=H,Ie=$,Ue=I,ze=m;return c(),n("div",S,[u(Ce,null,{left:o((()=>[u(l,{modelValue:d($e),"onUpdate:modelValue":t[0]||(t[0]=e=>f($e)?$e.value=e:null),icon:"lucide:search",placeholder:"Filter durations...",classes:{wrapper:"w-full sm:w-auto"}},null,8,["modelValue"])])),right:o((()=>[p("div",W,[u(r,{color:"success",class:"w-full",onClick:t[1]||(t[1]=e=>He.value=!0),flavor:"outline"},{default:o((()=>[u(s,{name:"line-md:plus",class:"h-4 w-4"}),p("span",null,v(a.$t("Create Duration")),1)])),_:1})])])),default:o((()=>[p("div",null,[d(_e)?(c(),n("div",L,[(c(),n(x,null,g(3,(e=>u(M,{key:e,class:"flex flex-col p-5 sm:flex-row sm:items-center"},{default:o((()=>[p("div",q,[u(i,{class:"h-16 w-16 shrink-0 rounded-full"}),p("div",Y,[u(i,{class:"mx-auto h-3 w-[100px] rounded-lg sm:mx-0"}),u(i,{class:"mx-auto h-3 w-[75px] rounded-lg sm:mx-0"})])]),p("div",K,[p("div",R,[u(i,{class:"h-6 w-24 rounded-full"})]),p("div",G,[p("div",X,[u(i,{class:"h-3 w-16 rounded-lg"})]),p("div",J,[u(i,{class:"h-3 w-16 rounded-lg"})]),p("div",Q,[u(i,{class:"h-3 w-16 rounded-lg"})])]),p("div",Z,[u(i,{class:"h-8 w-8 shrink-0 rounded-full"}),u(i,{class:"h-8 w-8 shrink-0 rounded-full"}),u(i,{class:"hidden h-3 w-12 rounded-full sm:block"})]),p("div",ee,[u(i,{class:"mx-auto h-8 w-40 rounded-lg sm:mx-0 sm:w-20"})])])])),_:2},1024))),64))])):d(_e)||0!==d(Me).length?(c(),n("div",se,[u(h,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:o((()=>[(c(!0),n(x,null,g(d(Me),(e=>(c(),w(M,{key:e.id,class:"flex flex-col p-5 sm:flex-row sm:items-center"},{default:o((()=>[p("div",re,[u(P,{tag:"h3",size:"sm",weight:"medium",class:"text-muted-800 dark:text-muted-100"},{default:o((()=>[y(v(e.duration)+" "+v(Pe[e.timeframe]),1)])),_:2},1024)]),p("div",ie,[p("div",ne,[p("div",ue,[u(P,{tag:"h3",size:"md",weight:"semibold",class:"text-muted-800 dark:text-muted-100"},{default:o((()=>[p("span",null,v(e.ai_trading_plan_duration?.length??0),1)])),_:2},1024),u(z,{lead:"none",weight:"semibold",class:"text-muted-400 !text-[0.65rem] uppercase"},{default:o((()=>[p("span",null,v(a.$t("Plans")),1)])),_:1})]),p("div",null,[u(F,{onClick:a=>function(e){Ye.value=e,Le.value=!0}(e),color:"danger",flavor:"outline","data-nui-tooltip":"Delete Duration",condensed:"",class:"ml-4"},{default:o((()=>[u(s,{name:"line-md:close",class:"h-4 w-4"})])),_:2},1032,["onClick"])])])])])),_:2},1024)))),128))])),_:1}),p("div",null,[d(Te).length>d(Ae)?(c(),w(O,{key:0,"total-items":d(Te).length,"item-per-page":d(Ae),"current-page":d(Ve),shape:"full"},null,8,["total-items","item-per-page","current-page"])):b("",!0)])])):(c(),n("div",ae,[u(E,{title:d($e)&&""!==d($e)?"No matching results":"No results",subtitle:d($e)&&""!==d($e)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:o((()=>[te,le])),_:1},8,["title","subtitle"])]))])])),_:1}),u(ze,{open:d(He),size:"sm",onClose:t[4]||(t[4]=e=>He.value=!1)},{header:o((()=>[p("div",oe,[p("h3",de,v(a.$t("Create New Duration")),1),u(Ie,{onClick:t[2]||(t[2]=e=>He.value=!1)})])])),footer:o((()=>[p("div",pe,[p("div",ve,[u(r,{onClick:t[3]||(t[3]=e=>He.value=!1)},{default:o((()=>[y(v(a.$t("Cancel")),1)])),_:1}),u(r,{color:"primary",flavor:"solid",onClick:d(We),disabled:d(Ne),loading:d(Ne)},{default:o((()=>[y(v(a.$t("Create")),1)])),_:1},8,["onClick","disabled","loading"])])])])),default:o((()=>[p("div",me,[p("div",ce,[p("p",fe,v(a.$t("Please provide a unique duration and timeframe for the new duration"))+". ",1),u(d(N),{name:"duration"},{default:o((({field:e,errorMessage:a,handleChange:t,handleBlur:s})=>[u(l,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,t],error:a,disabled:d(Ne),type:"number",label:"duration",placeholder:"Enter duration",classes:{input:"h-12",wrapper:"max-w-xs"},onBlur:s},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1}),u(d(N),{name:"timeframe"},{default:o((({field:e,errorMessage:a,handleChange:t,handleBlur:l})=>[u(Ue,{"model-value":e.value,error:a,disabled:d(Ne),items:Ee,properties:{label:"label",value:"value"},placeholder:"Please select an option",label:"Timeframe",shape:"rounded","onUpdate:modelValue":t,onBlur:l},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])])),_:1})])])])),_:1},8,["open"]),u(ze,{open:d(Le),size:"sm",onClose:t[8]||(t[8]=e=>Le.value=!1)},{header:o((()=>[p("div",xe,[p("h3",ge,v(a.$t("Delete"))+" "+v(a.$t("AI Trading Duration")),1),u(Ie,{onClick:t[5]||(t[5]=e=>Le.value=!1)})])])),footer:o((()=>[p("div",ke,[p("div",je,[u(r,{onClick:t[6]||(t[6]=e=>Le.value=!1)},{default:o((()=>[y(v(a.$t("Cancel")),1)])),_:1}),u(r,{color:"danger",flavor:"solid",onClick:t[7]||(t[7]=e=>async function(){qe.value=!0;try{const e=await De(Ye.value?.id);U.response(e),"success"===e.status&&Be.removeDuration(Ye.value?.id)}catch(e){U.danger(e)}Le.value=!1,qe.value=!1,Ye.value=null}()),disabled:d(qe),loading:d(qe)},{default:o((()=>[y(v(a.$t("Delete")),1)])),_:1},8,["disabled","loading"])])])])),default:o((()=>[p("div",he,[p("div",we,[p("h3",ye,v(a.$t("Are you sure?")),1),p("p",be,v(a.$t("Do you really want to delete this"))+" "+v(a.$t("duration"))+" "+v(a.$t("This process cannot be undone"))+". ",1)])])])),_:1},8,["open"])])}}});export{_e as default};
