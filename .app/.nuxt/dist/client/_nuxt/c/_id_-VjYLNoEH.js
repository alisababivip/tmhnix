import{a as e,z as a,c as t,r,E as l,ad as s,ac as o,J as d,O as n,w as u,o as i,e as m,q as c,t as p,u as f,f as b,p as g,W as h,b as y,A as v,F as x,B as w,n as k,k as _,_ as V,x as j,X as B,Y as U}from"../e/entry-8qgg5CL-.js";import{_ as C}from"./BaseInput.vue-iInHQMIA.js";import{_ as G}from"./BaseProgress.vue-xH0Mhn3Z.js";import{_ as $}from"./BaseInputFileHeadless.vue-LOgyN9kF.js";import{_ as D}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as F}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as z}from"./useWallet-8iHzU2hV.js";import{u as M}from"./fetch-i3Y1jjTS.js";import{b as S}from"./strings-rQgUKePI.js";import{_ as E}from"./placeholder-file-IxKzOaSl.js";import{z as P,u as q,t as I,F as A}from"./vee-validate.esm-n59zZCC5.js";import{u as T}from"./gateways-XQMiYxyn.js";import"./input-id-wZ-Ta08j.js";const R={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},W={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},O=["onDrop"],K=["onClick","onKeydown"],H={class:"p-5 text-center"},J={class:"text-muted-400 font-sans text-sm"},L={class:"text-muted-400 font-sans text-[0.7rem] font-semibold uppercase"},N={for:"file",class:"text-muted-400 group-hover:text-primary-500 group-focus:text-primary-500 cursor-pointer font-sans text-sm underline underline-offset-4 transition-colors duration-300"},X={key:1,class:"mt-6 space-y-2"},Y={class:"border-muted-200 dark:border-muted-700 dark:bg-muted-800 relative flex items-center justify-end gap-2 rounded-xl border bg-white p-3"},Z={class:"flex items-center gap-2"},Q={class:"shrink-0"},ee=["src"],ae={key:1,loading:"lazy",class:"h-14 w-14 rounded-xl object-cover object-center",src:E,alt:"Image preview"},te={class:"font-sans"},re={class:"text-muted-800 dark:text-muted-100 line-clamp-1 block text-sm"},le={class:"text-muted-400 block text-xs"},se={class:"flex gap-2"},oe={class:"border-muted-200 hover:border-primary-500 text-muted-700 dark:text-muted-200 hover:text-primary-600 dark:border-muted-700 dark:bg-muted-900 dark:hover:border-primary-500 dark:hover:text-primary-600 relative flex h-8 w-8 cursor-pointer items-center justify-center rounded-full border bg-white transition-colors duration-300 disabled:cursor-not-allowed disabled:opacity-60",disabled:"",type:"button",tooltip:"Cancel"},de={class:"sr-only"},ne={class:"border-muted-200 hover:border-primary-500 text-muted-700 dark:text-muted-200 hover:text-primary-600 dark:border-muted-700 dark:bg-muted-900 dark:hover:border-primary-500 dark:hover:text-primary-600 relative flex h-8 w-8 cursor-pointer items-center justify-center rounded-full border bg-white transition-colors duration-300",type:"button",tooltip:"Upload"},ue={class:"sr-only"},ie=["onClick"],me={class:"sr-only"},ce={key:0,class:"mb-4 h-36 w-full flex items-center justify-center overflow-hidden rounded-xl"},pe=["src"],fe={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},be={class:"flex flex-wrap gap-2 items-center justify-start"},ge={class:"mx-auto flex items-center justify-center"},he={class:"px-3 py-2 bg-white dark:bg-muted-900 dark:text-muted-200 text-muted-700 rounded-lg shadow-md flex items-center justify-center gap-3"},ye=e({__name:"[id]",setup(e){const E=a().params.id,ye=T(),{updateDepositGateway:ve}=z(),xe=t((()=>ye.selectedGateway||ye.getGatewayById(E))),we=r(null),ke=r(xe.value?.image||null);l((async()=>{const e=Number(E);0===ye.gateways.length&&await ye.fetchDepositGateways(),ye.selectGatewayById(e),ke.value=xe.value?.image||null,ye.selectedGateway||Ve.push("/admin/finance/deposit/gateways")}));const{toast:_e}=s(),Ve=o(),je=P.object({title:P.string().min(3,"Title must be at least 3 characters"),description:P.string().min(3,"Description must be at least 3 characters"),image:P.union([P.string(),P.null()]).optional(),fixed_fee:P.number().min(0,"Fixed fee must be greater or equal to 0"),percentage_fee:P.number().min(0,"Percentage fee must be greater or equal to 0").max(100,"Percentage fee must be less than or equal to 100"),min_amount:P.number().min(0,"Minimum amount must be greater or equal to 0"),max_amount:P.number().min(0,"Maximum amount must be greater or equal to 0")}),Be=t((()=>({...xe.value}))),{handleSubmit:Ue,isSubmitting:Ce,resetForm:Ge,setFieldValue:$e}=q({validationSchema:I(je),initialValues:Be});d(we,(e=>{const a=e?.item(0)||null;if(we.value){const e=new FileReader;e.onload=e=>{ke.value=e.target?.result},e.readAsDataURL(a)}}));const De=Ue((async e=>{try{let a={...e};if(we.value){const e=new FormData;e.append("files",we.value[0]),e.append("type","depositGateways");const t=await M("/api/upload",{method:"POST",body:e},"$Ad4GPZA9Eq");t&&""!==t.data.value&&(a.image=t.data.value[0])}const t=await ve(E,a);_e.response(t),"success"===t.status&&(await ye.fetchDepositGateways(),Ve.push("/admin/finance/deposit/gateways"),Ge())}catch(a){_e.danger(a)}}));return(e,a)=>{const t=V,r=j,l=B,s=C,o=U,d=G,z=$,M=D,E=F;return i(),n(E,null,{left:u((()=>[m(t,{size:"lg"},{default:u((()=>[c(p(e.$t("Edit"))+" "+p(f(ye).selectedGateway?.title)+" "+p(e.$t("Gateway")),1)])),_:1})])),right:u((()=>[m(l,{type:"button",color:"muted",to:"/admin/finance/deposit/gateways"},{default:u((()=>[m(r,{name:"line-md:chevron-left",class:"h-4 w-4 mr-2"}),c(" "+p(e.$t("Back")),1)])),_:1})])),default:u((()=>[b("form",{onSubmit:a[3]||(a[3]=(...e)=>f(De)&&f(De)(...e)),class:"space-y-8"},[b("div",R,[m(o,{class:"p-5 space-y-5"},{default:u((()=>[m(f(A),{name:"title"},{default:u((({field:e,errorMessage:a,handleChange:t,handleBlur:r})=>[m(s,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,t],error:a,disabled:f(Ce),type:"text",label:"Title",placeholder:"Enter title",shape:"rounded",class:"w-full",onBlur:r},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1}),m(f(A),{name:"description"},{default:u((({field:e,errorMessage:a,handleChange:t,handleBlur:r})=>[m(s,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,t],error:a,disabled:f(Ce),type:"text",label:"Description",placeholder:"Enter description",shape:"rounded",class:"w-full",onBlur:r},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1})])),_:1}),m(o,{class:"p-5"},{default:u((()=>[b("div",W,[m(z,{modelValue:f(we),"onUpdate:modelValue":a[2]||(a[2]=e=>g(we)?we.value=e:null)},{default:u((({open:t,remove:l,preview:s,drop:o,files:n})=>[b("div",{class:"",onDragenter:a[0]||(a[0]=h((()=>{}),["stop","prevent"])),onDragover:a[1]||(a[1]=h((()=>{}),["stop","prevent"])),onDrop:o},[n?.length?(i(),y("ul",X,[(i(!0),y(x,null,w(n,(a=>(i(),y("li",{key:a.name},[b("div",Y,[b("div",Z,[b("div",Q,[a.type.startsWith("image")?(i(),y("img",{key:0,loading:"lazy",class:"h-14 w-14 rounded-xl object-cover object-center",src:s(a).value,alt:"Image preview"},null,8,ee)):(i(),y("img",ae))]),b("div",te,[b("span",re,p(a.name),1),b("span",le,p(("formatFileSize"in e?e.formatFileSize:f(S))(a.size)),1)])]),b("div",{class:k(["ms-auto w-32 px-4 transition-opacity duration-300","opacity-100"])},[m(d,{value:0,size:"xs",color:"success"})]),b("div",se,[b("button",oe,[m(r,{name:"lucide:slash",class:"h-4 w-4"}),b("span",de,p(e.$t("Cancel")),1)]),b("button",ne,[m(r,{name:"lucide:arrow-up",class:"h-4 w-4"}),b("span",ue,p(e.$t("Upload")),1)]),b("button",{class:"border-muted-200 hover:border-primary-500 text-muted-700 dark:text-muted-200 hover:text-primary-600 dark:border-muted-700 dark:bg-muted-900 dark:hover:border-primary-500 dark:hover:text-primary-600 relative flex h-8 w-8 cursor-pointer items-center justify-center rounded-full border bg-white transition-colors duration-300",type:"button",tooltip:"Remove",onClick:h((e=>l(a)),["prevent"])},[m(r,{name:"lucide:x",class:"h-4 w-4"}),b("span",me,p(e.$t("Remove")),1)],8,ie)])])])))),128))])):(i(),y("div",{key:0,class:"nui-focus border-muted-300 dark:border-muted-700 hover:border-muted-400 focus:border-muted-400 dark:hover:border-muted-600 dark:focus:border-muted-700 group cursor-pointer rounded-lg border-[3px] border-dashed transition-colors duration-300",tabindex:"0",role:"button",onClick:t,onKeydown:v(h(t,["prevent"]),["enter"])},[b("div",H,[m(r,{name:"mdi-light:cloud-upload",class:"text-muted-400 group-hover:text-primary-500 group-focus:text-primary-500 mb-2 h-10 w-10 transition-colors duration-300"}),b("h4",J,p(e.$t("Drop file to upload")),1),b("div",null,[b("span",L,p(e.$t("Or")),1)]),b("label",N,p(e.$t("Select Image")),1)])],40,K))],40,O)])),_:1},8,["modelValue"]),f(ke)?(i(),y("div",ce,[b("img",{loading:"lazy",src:f(ke),alt:"Image Preview",class:"max-h-full max-w-full object-cover object-center"},null,8,pe)])):_("",!0)])])),_:1})]),b("div",fe,[m(o,{class:"p-5 space-y-5"},{default:u((()=>[m(f(A),{name:"fixed_fee"},{default:u((({field:e,errorMessage:a,handleChange:t,handleBlur:r})=>[m(s,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,t],error:a,type:"number",label:"Fixed Fee",placeholder:"Enter fixed fee",shape:"rounded",class:"w-full",onBlur:r},null,8,["modelValue","onUpdate:modelValue","error","onBlur"])])),_:1}),m(f(A),{name:"percentage_fee"},{default:u((({field:e,errorMessage:a,handleChange:t,handleBlur:r})=>[m(s,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,t],error:a,type:"number",label:"Percentage fee",placeholder:"Enter Percentage fee",shape:"rounded",min:"0",max:"100",class:"w-full",onBlur:r},null,8,["modelValue","onUpdate:modelValue","error","onBlur"])])),_:1})])),_:1}),m(o,{class:"p-5 space-y-5"},{default:u((()=>[m(f(A),{name:"min_amount"},{default:u((({field:e,errorMessage:a,handleChange:t,handleBlur:r})=>[m(s,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,t],error:a,type:"number",label:"Minimum Amount",placeholder:"Enter minimum amount",shape:"rounded",class:"w-full",onBlur:r},null,8,["modelValue","onUpdate:modelValue","error","onBlur"])])),_:1}),m(f(A),{name:"max_amount"},{default:u((({field:e,errorMessage:a,handleChange:t,handleBlur:r})=>[m(s,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,t],error:a,type:"number",label:"Maximum Amount",placeholder:"Enter maximum amount",shape:"rounded",class:"w-full",onBlur:r},null,8,["modelValue","onUpdate:modelValue","error","onBlur"])])),_:1})])),_:1})]),f(ye).selectedGateway?.currencies?(i(),n(o,{key:0,class:"p-5 space-y-5"},{default:u((()=>[m(t,{size:"lg"},{default:u((()=>[c(p(e.$t("Supported Currencies")),1)])),_:1}),b("div",be,[(i(!0),y(x,null,w(f(ye).selectedGateway?.currencies,(e=>(i(),n(M,{key:e,class:"w-full md:w-auto"},{default:u((()=>[c(p(e),1)])),_:2},1024)))),128))])])),_:1})):_("",!0),b("div",ge,[b("div",he,[m(l,{type:"button",color:"muted",to:"/admin/finance/deposit/gateways"},{default:u((()=>[m(r,{name:"line-md:close",class:"h-4 w-4 mr-2"}),c(" "+p(e.$t("Cancel")),1)])),_:1}),m(l,{type:"submit",color:"success",disabled:f(Ce),class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"},{default:u((()=>[m(r,{name:"line-md:confirm",class:"h-4 w-4 mr-2"}),c(" "+p(e.$t("Update")),1)])),_:1},8,["disabled"])])])],32)])),_:1})}}});export{ye as default};
