import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as a}from"./BaseSelect.vue-p0KYznCX.js";import{a as l,z as t,r as s,c as i,E as o,ad as n,ac as u,b as r,e as d,w as c,o as m,u as p,p as f,f as h,t as g,O as v,k as b,F as w,B as _,q as k,ag as x,x as y}from"../e/entry-8qgg5CL-.js";import{_ as j}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as B}from"./BaseCheckbox.vue-cNhyVlDH.js";import{_ as C}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as $,a as F}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as V}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as T}from"./TairoFlexTable-zdoraqRc.js";import{_ as I}from"./BasePagination.vue-eKZkqxB7.js";import{_ as D}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_ as G,a as S}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as z}from"./gateways-XQMiYxyn.js";import"./input-id-wZ-Ta08j.js";import"./IconCheck-JvP9GQU1.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";import"./useWallet-8iHzU2hV.js";const A={value:10},E={value:25},L={value:50},P={value:100},U=h("img",{class:"block dark:hidden",src:G,alt:"Placeholder image"},null,-1),q=h("img",{class:"hidden dark:block",src:S,alt:"Placeholder image"},null,-1),M={key:1,class:"w-full"},N={key:0,class:"bg-info-100 text-info-700 dark:bg-info-900 dark:text-info-100 rounded-lg p-4 flex justify-between items-center w-full mb-2"},O={class:"text-sm"},R={class:"flex gap-2"},W={class:"relative"},Y={class:"pl-4"},H={class:"mt-6"},J=l({__name:"index",setup(l){const G=z(),S=t(),J=s(""),K=s(10),Q=i((()=>parseInt(S.query.page??"1"))),X=s([]),Z=i((()=>X.value.length===G.gateways.length)),ee=i((()=>G.gateways.filter((e=>e.title.includes(J.value))))),ae=i((()=>{const e=(Q.value-1)*K.value,a=e+K.value;return ee.value.slice(e,a)}));function le(){Z.value?X.value=[]:X.value=ee.value.map((e=>e.id))??[]}o((async()=>{0===G.gateways.length&&(G.loading=!0,await G.fetchDepositGateways(),G.loading=!1)}));const{toast:te}=n();function se(e){G.updateDepositGatewaysStatus(X.value,e).then((e=>{"success"===e.status?te.success(e):te.danger(e),X.value=[]}))}const ie=u();return(l,t)=>{const s=e,i=a,o=x,n=y,u=j,S=B,z=C,te=$,oe=V,ne=F,ue=T,re=I,de=D;return m(),r("div",null,[d(de,null,{left:c((()=>[d(s,{modelValue:p(J),"onUpdate:modelValue":t[0]||(t[0]=e=>f(J)?J.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter gateways..."},null,8,["modelValue"])])),right:c((()=>[d(i,{modelValue:p(K),"onUpdate:modelValue":t[1]||(t[1]=e=>f(K)?K.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:c((()=>[h("option",A,"10 "+g(l.$t("per page")),1),h("option",E,"25 "+g(l.$t("per page")),1),h("option",L,"50 "+g(l.$t("per page")),1),h("option",P,"100 "+g(l.$t("per page")),1)])),_:1},8,["modelValue"])])),default:c((()=>[h("div",null,[p(G).loading||0!==p(ae)?.length?(m(),r("div",M,[!p(G).loading&&p(X).length>0?(m(),r("div",N,[h("span",O,g(l.$t("You have selected"))+" "+g(p(X).length)+" "+g(l.$t("items of the total"))+" "+g(p(ee).length)+" "+g(l.$t("items"))+". ",1),h("div",R,[d(u,{color:"danger",size:"xs","data-nui-tooltip":"Disable currencies",onClick:t[2]||(t[2]=()=>se(!1))},{default:c((()=>[d(n,{name:"line-md:close-small",class:"h-5 w-5"})])),_:1}),d(u,{color:"success",size:"xs","data-nui-tooltip":"Enable currencies",onClick:t[3]||(t[3]=()=>se(!0))},{default:c((()=>[d(n,{name:"line-md:confirm",class:"h-5 w-5"})])),_:1})])])):b("",!0),d(ue,null,{header:c((()=>[h("div",W,[h("span",Y,[d(S,{"model-value":p(Z),indeterminate:p(X).length>0&&!p(Z),onClick:le},null,8,["model-value","indeterminate"])])])])),default:c((()=>[(m(!0),r(w,null,_(p(ae),((e,a)=>(m(),v(ne,{key:e.id,spaced:""},{start:c((()=>[d(z,{"data-content":"Selection",class:"xs:absolute right-2 ml-2"},{default:c((()=>[d(S,{modelValue:p(X),"onUpdate:modelValue":t[4]||(t[4]=e=>f(X)?X.value=e:null),value:e.id,name:`item-checkbox-${e.id}`,shape:"rounded",class:"text-primary-500"},null,8,["modelValue","value","name"])])),_:2},1024),d(te,{label:"Gateway","hide-label":a>0,logo:e.image,title:e.title,subtitle:e.description},null,8,["hide-label","logo","title","subtitle"])])),end:c((()=>[d(z,{label:"Currencies","hide-label":a>0,class:"w-20 xs:w-full"},{default:c((()=>[k(g(Object.keys(e.currencies).length),1)])),_:2},1032,["hide-label"]),d(z,{label:"% Fee","hide-label":a>0,class:"w-20 xs:w-full"},{default:c((()=>[k(g(e.percentage_fee??0)+"%",1)])),_:2},1032,["hide-label"]),d(z,{label:"Fixed Fee","hide-label":a>0,class:"w-20 xs:w-full"},{default:c((()=>[k(g(e.fixed_fee??0)+"%",1)])),_:2},1032,["hide-label"]),d(z,{label:"Min / Max","hide-label":a>0,class:"w-40 xs:w-full"},{default:c((()=>[k(g(e.min_amount)+" / "+g(e.max_amount??"âˆž"),1)])),_:2},1032,["hide-label"]),d(z,{label:"Status","hide-label":a>0,class:"w-20 xs:w-full"},{default:c((()=>[d(oe,{color:e.status?"success":"danger",flavor:"pastel",condensed:""},{default:c((()=>[k(g(e.status?"Active":"Disabled"),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),d(z,{label:"Actions","hide-label":a>0},{default:c((()=>[d(u,{condensed:"",color:"warning",onClick:a=>{return l=e,G.selectGateway(l),void ie.push(`/admin/finance/deposit/gateways/edit/${l.id}`);var l},"data-nui-tooltip":"Edit"},{default:c((()=>[d(n,{name:"line-md:edit",class:"h-4 w-4"})])),_:2},1032,["onClick"])])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(m(),v(o,{key:0,title:p(J)&&""!==p(J)?"No matching results":"No results",subtitle:p(J)&&""!==p(J)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:c((()=>[U,q])),_:1},8,["title","subtitle"])),h("div",H,[p(ee).length>p(K)?(m(),v(re,{key:0,"total-items":p(ee).length,"item-per-page":p(K),"current-page":p(Q)},null,8,["total-items","item-per-page","current-page"])):b("",!0)])])])),_:1})])}}});export{J as default};
