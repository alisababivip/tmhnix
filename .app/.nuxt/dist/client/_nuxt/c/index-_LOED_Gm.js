import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as a}from"./BaseSelect.vue-p0KYznCX.js";import{a as t,z as l,r as s,c as o,E as r,ad as u,ac as i,b as n,e as d,w as c,u as m,an as p,o as f,p as v,f as h,t as g,q as b,O as w,F as _,B as k,k as x,x as j,X as y,ag as C,ao as P}from"../e/entry-8qgg5CL-.js";import{_ as $,a as B}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as T}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as V}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as A,a as D}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as F}from"./TairoFlexTable-zdoraqRc.js";import{_ as I}from"./BasePagination.vue-eKZkqxB7.js";import{_ as E}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as L}from"./useEcommerce-2nLxpPKu.js";import{_ as z,a as N}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as q}from"./products-LxuNCGpu.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const S={value:10},U={value:25},M={value:50},O={value:100},R=h("img",{class:"block dark:hidden",src:z,alt:"Placeholder image"},null,-1),W=h("img",{class:"hidden dark:block",src:N,alt:"Placeholder image"},null,-1),X={key:1,class:"w-full"},G={class:"mt-6"},H={class:"flex w-full items-center justify-between p-4 md:p-6"},J={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},K={class:"p-4 md:p-6"},Q={class:"mx-auto w-full text-center"},Y={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},Z={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},ee={class:"p-4 md:p-6"},ae={class:"flex gap-x-2"},te=t({__name:"index",setup(t){const z=q(),{deleteAdminProduct:N}=L(),te=l(),le=s(""),se=s(10),oe=o((()=>parseInt(te.query.page??"1"))),re=o((()=>z.products.filter((e=>e.name.includes(le.value)))??[])),ue=o((()=>{const e=(oe.value-1)*se.value,a=e+se.value;return re.value.slice(e,a)}));r((async()=>{0===z.products.length&&(z.loading=!0,await z.fetchProducts(),z.loading=!1)}));const{toast:ie}=u(),ne=i();const de=s(!1),ce=s(!1),me=s(null);const pe=e=>{switch(e){case"ACTIVE":return"success";case"INACTIVE":return"danger";default:return"info"}};return(t,l)=>{const s=e,o=a,r=j,u=y,i=C,L=$,q=T,te=V,fe=A,ve=D,he=B,ge=F,be=I,we=E,_e=P,ke=p;return f(),n("div",null,[d(we,null,{left:c((()=>[d(s,{modelValue:m(le),"onUpdate:modelValue":l[0]||(l[0]=e=>v(le)?le.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter products..."},null,8,["modelValue"]),d(o,{modelValue:m(se),"onUpdate:modelValue":l[1]||(l[1]=e=>v(se)?se.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:c((()=>[h("option",S,"10 "+g(t.$t("per page")),1),h("option",U,"25 "+g(t.$t("per page")),1),h("option",M,"50 "+g(t.$t("per page")),1),h("option",O,"100 "+g(t.$t("per page")),1)])),_:1},8,["modelValue"])])),right:c((()=>[d(u,{color:"primary",to:"/admin/extensions/ecommerce/products/create"},{default:c((()=>[d(r,{name:"lucide:plus",size:"16",class:"mr-2"}),b(" "+g(t.$t("Create Product")),1)])),_:1})])),default:c((()=>[h("div",null,[m(z)?.loading||0!==m(ue)?.length?(f(),n("div",X,[d(ge,{class:"pt-5"},{default:c((()=>[(f(!0),n(_,null,k(m(ue),((e,a)=>(f(),w(he,{key:e.id,spaced:""},{start:c((()=>[d(L,{label:"Product","hide-label":a>0,picture:e.image,title:e.name,subtitle:e.description},null,8,["hide-label","picture","title","subtitle"])])),end:c((()=>[d(q,{label:"Price","hide-label":a>0,class:"w-20 xs:w-full"},{default:c((()=>[b(g(e.price),1)])),_:2},1032,["hide-label"]),d(q,{label:"Status","hide-label":a>0,class:"w-20 xs:w-full"},{default:c((()=>[d(te,{color:pe(e.status),flavor:"pastel",condensed:""},{default:c((()=>[b(g(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),d(q,{label:"Actions","hide-label":a>0},{default:c((()=>[d(ve,{flavor:"context",label:"Dropdown",orientation:"end"},{default:c((()=>[d(fe,{onClick:a=>function(e){z.selectProduct(e),ne.push(`/admin/extensions/ecommerce/products/edit/${e.id}`)}(e),title:"Edit Product"},{start:c((()=>[d(r,{name:"line-md:edit-twotone",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"]),d(fe,{onClick:a=>function(e){me.value=e,de.value=!0}(e),title:"Delete Product"},{start:c((()=>[d(r,{name:"line-md:close",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(f(),w(i,{key:0,title:m(le)&&""!==m(le)?"No matching results":"No results",subtitle:m(le)&&""!==m(le)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:c((()=>[R,W])),_:1},8,["title","subtitle"])),h("div",G,[m(re).length>m(se)?(f(),w(be,{key:0,"total-items":m(re).length,"current-page":m(oe),"item-per-page":m(se)},null,8,["total-items","current-page","item-per-page"])):x("",!0)])])])),_:1}),d(ke,{open:m(de),size:"sm",onClose:l[5]||(l[5]=e=>de.value=!1)},{header:c((()=>[h("div",H,[h("h3",J,g(t.$t("Delete Product")),1),d(_e,{onClick:l[2]||(l[2]=e=>de.value=!1)})])])),footer:c((()=>[h("div",ee,[h("div",ae,[d(u,{onClick:l[3]||(l[3]=e=>de.value=!1)},{default:c((()=>[b(g(t.$t("Cancel")),1)])),_:1}),d(u,{color:"danger",flavor:"solid",onClick:l[4]||(l[4]=e=>async function(){ce.value=!0;try{const e=await N(me.value?.id);ie.response(e),"success"===e.status&&z.removeProduct(me.value?.id)}catch(e){ie.danger(e)}de.value=!1,ce.value=!1,me.value=null}()),disabled:m(ce),loading:m(ce)},{default:c((()=>[b(g(t.$t("Delete")),1)])),_:1},8,["disabled","loading"])])])])),default:c((()=>[h("div",K,[h("div",Q,[h("h3",Y,g(t.$t("Are you sure?")),1),h("p",Z,g(t.$t("Do you really want to delete this product? This process cannot be undone.")),1)])])])),_:1},8,["open"])])}}});export{te as default};
