import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{a,z as l,r as t,c as s,ac as o,E as r,b as u,e as i,w as n,u as d,an as c,o as m,f as p,p as v,O as f,q as g,t as w,af as h,k as y,F as _,B as b,x,X as k,Y as j,ag as C,ao as V}from"../e/entry-8qgg5CL-.js";import{_ as B}from"./BaseSelect.vue-p0KYznCX.js";import{_ as T,a as D}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as $}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as F}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as R}from"./BaseButtonIcon.vue-6tAU_b7C.js";import{_ as I}from"./TairoFlexTable-zdoraqRc.js";import{_ as P}from"./BasePagination.vue-eKZkqxB7.js";import{_ as q}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as A}from"./useMlm-tZO3tueF.js";import{a as U}from"./strings-rQgUKePI.js";import{_ as z,a as L}from"./placeholder-search-4-dark-Jht91LnM.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const S={class:"w-full flex gap-2 xs:flex-col sm:flex-row"},E={value:10},N={value:25},M={value:50},O={value:100},W=p("img",{class:"block dark:hidden",src:z,alt:"Placeholder image"},null,-1),X=p("img",{class:"hidden dark:block",src:L,alt:"Placeholder image"},null,-1),Y={key:1,class:"w-full sm:pt-5"},G={class:"mt-6"},H={class:"flex w-full items-center justify-between p-4 md:p-6"},J={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},K=p("div",{class:"px-4 md:px-6 space-y-5"}," Are you sure you want to claim this reward? ",-1),Q={class:"p-4 md:p-6"},Z={class:"flex gap-x-2"},ee=a({__name:"rewards",setup(a){const z=l(),{getRewards:L,claimReward:ee}=A(),ae=t(!1),le=t(""),te=t(10),se=s((()=>parseInt(z.query.page??"1"))),oe=o(),re=t("");let ue=t([]);r((async()=>{ae.value=!0;try{const e=await L();ue.value=e.data.result}catch(e){ue.value=[]}ae.value=!1}));const ie=s((()=>ue.value.filter((e=>!(ce.value&&new Date(e.created_at)<new Date(ce.value))&&(!(me.value&&new Date(e.created_at)>new Date(me.value))&&(le.value&&""!==le.value&&void 0!==le.value&&le.value!==re.value&&(oe.push({query:{...z.query,page:"1",filter:le.value}}),re.value=le.value),!le.value||e.id?.includes(le.value))))).sort(((e,a)=>new Date(a.created_at).getTime()-new Date(e.created_at).getTime())))),ne=s((()=>{const e=(se.value-1)*te.value,a=e+te.value;return ie.value.slice(e,a)})),de=t(!1),ce=t(""),me=t(""),pe=t(!1),ve=t(""),fe=t(!1),ge=()=>{pe.value=!1};return(a,l)=>{const t=e,s=x,o=k,r=B,A=j,z=C,L=T,oe=$,re=F,we=R,he=D,ye=I,_e=P,be=q,xe=V,ke=c;return m(),u("div",null,[i(be,null,{left:n((()=>[p("div",S,[i(t,{modelValue:d(le),"onUpdate:modelValue":l[0]||(l[0]=e=>v(le)?le.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Search Reward ID..."},null,8,["modelValue"]),i(o,{onClick:l[1]||(l[1]=e=>de.value=!d(de)),color:"muted",block:""},{default:n((()=>[d(de)?(m(),f(s,{key:0,name:"line-md:arrow-up",class:"h-4 w-4 mr-2"})):(m(),f(s,{key:1,name:"line-md:arrow-down",class:"h-4 w-4 mr-2"})),g(" "+w(a.$t("Filters")),1)])),_:1})])])),right:n((()=>[i(r,{modelValue:d(te),"onUpdate:modelValue":l[2]||(l[2]=e=>v(te)?te.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:n((()=>[p("option",E,"10 "+w(a.$t("per page")),1),p("option",N,"25 "+w(a.$t("per page")),1),p("option",M,"50 "+w(a.$t("per page")),1),p("option",O,"100 "+w(a.$t("per page")),1)])),_:1},8,["modelValue"])])),default:n((()=>[p("div",null,[i(h,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-y-4","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-4"},{default:n((()=>[d(de)?(m(),f(A,{key:0,class:"grid gap-4 xs:grid-cols-1 sm:grid-cols-2 md:grid-cols-2 mb-6 p-5"},{default:n((()=>[i(t,{modelValue:d(ce),"onUpdate:modelValue":l[3]||(l[3]=e=>v(ce)?ce.value=e:null),type:"date",label:"From"},null,8,["modelValue"]),i(t,{modelValue:d(me),"onUpdate:modelValue":l[4]||(l[4]=e=>v(me)?me.value=e:null),type:"date",label:"To"},null,8,["modelValue"])])),_:1})):y("",!0)])),_:1}),d(ae)||0!==d(ne)?.length?(m(),u("div",Y,[i(ye,null,{default:n((()=>[i(h,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 -translate-x-full","enter-to-class":"opacity-100 translate-x-0","leave-active-class":"absolute transform-gpu","leave-from-class":"opacity-100 translate-x-0","leave-to-class":"opacity-0 -translate-x-full"},{default:n((()=>[(m(!0),u(_,null,b(d(ne),((e,l)=>(m(),f(he,{key:e.id,spaced:""},{start:n((()=>[i(L,{label:"Reward","hide-label":l>0,title:e.condition?.title,subtitle:("formatDate"in a?a.formatDate:d(U))(e.created_at)},null,8,["hide-label","title","subtitle"])])),end:n((()=>[i(oe,{label:"Amount","hide-label":l>0,class:"w-full sm:w-24 xs:flex sm:hidden lg:flex"},{default:n((()=>[g(w(e.reward)+" "+w(e.condition?.reward_currency),1)])),_:2},1032,["hide-label"]),i(oe,{label:"Status","hide-label":l>0},{default:n((()=>[i(re,{color:e.is_claimed?"success":"warning",flavor:"pastel",condensed:""},{default:n((()=>[g(w(e.is_claimed?"Claimed":"Pending"),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),i(oe,{label:"Actions","hide-label":l>0,class:"w-full sm:w-24 xs:flex sm:hidden lg:flex"},{default:n((()=>[e.is_claimed?y("",!0):(m(),f(we,{key:0,color:"success",size:"sm",onClick:a=>{return l=e.id,ve.value=l,void(pe.value=!0);var l},"data-nui-tooltip":"Claim Reward"},{default:n((()=>[i(s,{name:"line-md:confirm",class:"h-4 w-4"})])),_:2},1032,["onClick"]))])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])),_:1})])):(m(),f(z,{key:0,title:d(le)&&""!==d(le)?"No matching results":"No results",subtitle:d(le)&&""!==d(le)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:n((()=>[W,X])),_:1},8,["title","subtitle"])),p("div",G,[d(ie).length>d(te)?(m(),f(_e,{key:0,"total-items":d(ie).length,"current-page":d(se),"item-per-page":d(te)},null,8,["total-items","current-page","item-per-page"])):y("",!0)])])])),_:1}),i(ke,{open:d(pe),size:"lg",onClose:ge},{header:n((()=>[p("div",H,[p("h3",J,w(a.$t("Claim Reward")),1),i(xe,{onClick:l[5]||(l[5]=e=>pe.value=!1)})])])),footer:n((()=>[p("div",Q,[p("div",Z,[i(o,{onClick:l[6]||(l[6]=e=>pe.value=!1)},{default:n((()=>[g(w(a.$t("Cancel")),1)])),_:1}),i(o,{color:"primary",flavor:"solid",onClick:l[7]||(l[7]=e=>(async()=>{fe.value=!0;try{await ee(ve.value),pe.value=!1,ue.value=ue.value.map((e=>(e.id===ve.value&&(e.is_claimed=!0),e)))}catch(e){console.log(e)}fe.value=!1})()),disabled:d(fe),loading:d(fe)},{default:n((()=>[g(w(a.$t("Claim")),1)])),_:1},8,["disabled","loading"])])])])),default:n((()=>[K])),_:1},8,["open"])])}}});export{ee as default};
