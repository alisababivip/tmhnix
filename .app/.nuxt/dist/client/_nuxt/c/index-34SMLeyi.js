import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as a}from"./BaseSelect.vue-p0KYznCX.js";import{a as l,z as t,r as s,c as o,E as i,ad as n,ac as r,b as u,e as c,w as d,u as m,an as p,o as f,p as v,f as h,t as g,q as b,O as k,F as w,B as _,k as x,x as j,X as y,ag as $,ao as C}from"../e/entry-8qgg5CL-.js";import{_ as A,a as B}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as I}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as T,a as D}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as F}from"./TairoFlexTable-zdoraqRc.js";import{_ as V}from"./BasePagination.vue-eKZkqxB7.js";import{_ as P}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as z}from"./useIco-3A31FykS.js";import{_ as L,a as q}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as E}from"./allocations-78-uxLhO.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const N={value:10},O={value:25},U={value:50},R={value:100},S=h("img",{class:"block dark:hidden",src:L,alt:"Placeholder image"},null,-1),W=h("img",{class:"hidden dark:block",src:q,alt:"Placeholder image"},null,-1),X={key:1,class:"w-full"},G={class:"mt-6"},H={class:"flex w-full items-center justify-between p-4 md:p-6"},J={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},K={class:"p-4 md:p-6"},M={class:"mx-auto w-full text-center"},Q={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},Y={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},Z={class:"p-4 md:p-6"},ee={class:"flex gap-x-2"},ae=l({__name:"index",setup(l){const L=E(),{deleteIcoAllocation:q}=z(),ae=t(),le=s(""),te=s(10),se=o((()=>parseInt(ae.query.page??"1"))),oe=o((()=>L.allocations.filter((e=>e.name.includes(le.value))))),ie=o((()=>{const e=(se.value-1)*te.value,a=e+te.value;return oe.value.slice(e,a)}));i((async()=>{0===L.allocations.length&&(L.loading=!0,await L.fetchIcoAllocations(),L.loading=!1)}));const{toast:ne}=n(),re=r();const ue=s(!1),ce=s(!1),de=s(null);return(l,t)=>{const s=e,o=a,i=j,n=y,r=$,z=A,E=I,ae=T,me=D,pe=B,fe=F,ve=V,he=P,ge=C,be=p;return f(),u("div",null,[c(he,null,{left:d((()=>[c(s,{modelValue:m(le),"onUpdate:modelValue":t[0]||(t[0]=e=>v(le)?le.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter allocations..."},null,8,["modelValue"]),c(o,{modelValue:m(te),"onUpdate:modelValue":t[1]||(t[1]=e=>v(te)?te.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:d((()=>[h("option",N,"10 "+g(l.$t("per page")),1),h("option",O,"25 "+g(l.$t("per page")),1),h("option",U,"50 "+g(l.$t("per page")),1),h("option",R,"100 "+g(l.$t("per page")),1)])),_:1},8,["modelValue"])])),right:d((()=>[c(n,{color:"primary",to:"/admin/extensions/ico/allocations/create"},{default:d((()=>[c(i,{name:"lucide:plus",size:"16",class:"mr-2"}),b(" "+g(l.$t("Create")),1)])),_:1})])),default:d((()=>[h("div",null,[m(L).loading||0!==m(ie)?.length?(f(),u("div",X,[c(fe,{class:"pt-5"},{default:d((()=>[(f(!0),u(w,null,_(m(ie),((e,a)=>(f(),k(pe,{key:e.id,spaced:""},{start:d((()=>[c(z,{label:"Item","hide-label":a>0,title:e.name},null,8,["hide-label","title"])])),end:d((()=>[c(E,{label:"Token","hide-label":a>0,class:"w-20 xs:w-full"},{default:d((()=>[b(g(e.token?.currency),1)])),_:2},1032,["hide-label"]),c(E,{label:"Percentage","hide-label":a>0,class:"w-32 xs:w-full"},{default:d((()=>[b(g(e.percentage),1)])),_:2},1032,["hide-label"]),c(E,{label:"Actions","hide-label":a>0},{default:d((()=>[c(me,{flavor:"context",label:"Dropdown",orientation:"end"},{default:d((()=>[c(ae,{onClick:a=>function(e){L.selectAllocation(e),re.push(`/admin/extensions/ico/allocations/edit/${e.id}`)}(e),title:"Edit Allocation"},{start:d((()=>[c(i,{name:"line-md:edit-twotone",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"]),c(ae,{onClick:a=>function(e){de.value=e,ue.value=!0}(e),title:"Delete Allocation"},{start:d((()=>[c(i,{name:"line-md:close",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(f(),k(r,{key:0,title:m(le)&&""!==m(le)?"No matching results":"No results",subtitle:m(le)&&""!==m(le)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:d((()=>[S,W])),_:1},8,["title","subtitle"])),h("div",G,[m(oe).length>m(te)?(f(),k(ve,{key:0,"total-items":m(oe).length,"current-page":m(se),"item-per-page":m(te)},null,8,["total-items","current-page","item-per-page"])):x("",!0)])])])),_:1}),c(be,{open:m(ue),size:"sm",onClose:t[5]||(t[5]=e=>ue.value=!1)},{header:d((()=>[h("div",H,[h("h3",J,g(l.$t("Delete"))+" "+g(l.$t("ICO Allocation")),1),c(ge,{onClick:t[2]||(t[2]=e=>ue.value=!1)})])])),footer:d((()=>[h("div",Z,[h("div",ee,[c(n,{onClick:t[3]||(t[3]=e=>ue.value=!1)},{default:d((()=>[b(g(l.$t("Cancel")),1)])),_:1}),c(n,{color:"danger",flavor:"solid",onClick:t[4]||(t[4]=e=>async function(){ce.value=!0;try{const e=await q(de.value?.id);ne.response(e),"success"===e.status&&L.removeAllocation(de.value?.id)}catch(e){ne.danger(e)}ue.value=!1,ce.value=!1,de.value=null}()),disabled:m(ce),loading:m(ce)},{default:d((()=>[b(g(l.$t("Delete")),1)])),_:1},8,["disabled","loading"])])])])),default:d((()=>[h("div",K,[h("div",M,[h("h3",Q,g(l.$t("Are you sure?")),1),h("p",Y,g(l.$t("Do you really want to delete this"))+" "+g(l.$t("allocation"))+" "+g(l.$t("This process cannot be undone"))+". ",1)])])])),_:1},8,["open"])])}}});export{ae as default};
