import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as l}from"./BaseSelect.vue-p0KYznCX.js";import{a,z as t,ad as s,S as o,c as i,r as n,E as u,b as d,e as r,w as m,u as c,an as p,o as f,p as v,f as h,t as g,O as k,k as w,F as b,B as x,q as _,x as y,X as j,ag as T,ao as $}from"../e/entry-8qgg5CL-.js";import{_ as C}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as B}from"./BaseCheckbox.vue-cNhyVlDH.js";import{_ as V}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as D,a as F}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as I}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as K,a as S}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as z}from"./TairoFlexTable-zdoraqRc.js";import{_ as A}from"./BasePagination.vue-eKZkqxB7.js";import{_ as P}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as E}from"./useKyc-y1ecMeTj.js";import{_ as L,a as U}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as q}from"./template-_415AK_u.js";import"./input-id-wZ-Ta08j.js";import"./IconCheck-JvP9GQU1.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const N={value:10},R={value:25},O={value:50},W={value:100},X={class:"w-full"},Y=h("img",{class:"block dark:hidden",src:L,alt:"Placeholder image"},null,-1),G=h("img",{class:"hidden dark:block",src:U,alt:"Placeholder image"},null,-1),H={key:1,class:"w-full"},J={key:0,class:"bg-info-100 text-info-700 dark:bg-info-900 dark:text-info-100 rounded-lg p-4 flex justify-between items-center w-full mb-2"},M={class:"text-sm"},Q={class:"flex gap-2"},Z={class:"relative"},ee={class:"pl-4"},le={class:"mt-6"},ae={class:"flex w-full items-center justify-between p-4 md:p-6"},te={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},se={class:"p-4 md:p-6"},oe={class:"mx-auto w-full text-center"},ie={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},ne={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},ue={class:"p-4 md:p-6"},de={class:"flex gap-x-2"},re=a({__name:"templates",setup(a){const L=q(),U=t(),{toast:re}=s(),{updateKycTemplateStatus:me,deleteKycTemplate:ce}=E(),pe=o();i((()=>pe.getProfile));const fe=n(""),ve=n(10),he=i((()=>parseInt(U.query.page??"1"))),ge=n([]),ke=i((()=>ge.value.length===L.templates.length)),we=i((()=>L.templates.filter((e=>e.title.includes(fe.value))))),be=i((()=>{const e=(he.value-1)*ve.value,l=e+ve.value;return we.value.slice(e,l)}));function xe(){ke.value?ge.value=[]:ge.value=we.value.map((e=>e.id))??[]}async function _e(e){try{const l=await me(ge.value,e);re.success(l),ge.value=[],await L.fetchKycTemplates()}catch(l){re.danger(l)}}u((async()=>{0===L.templates.length&&(L.loading=!0,await L.fetchKycTemplates(),L.loading=!1)}));const ye=n(!1),je=n(!1);return(a,t)=>{const s=e,o=l,i=y,n=j,u=T,E=C,U=B,q=V,me=D,pe=I,Te=K,$e=S,Ce=F,Be=z,Ve=A,De=P,Fe=$,Ie=p;return f(),d("div",null,[r(De,null,{left:m((()=>[r(s,{modelValue:c(fe),"onUpdate:modelValue":t[0]||(t[0]=e=>v(fe)?fe.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter templates..."},null,8,["modelValue"]),r(o,{modelValue:c(ve),"onUpdate:modelValue":t[1]||(t[1]=e=>v(ve)?ve.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:m((()=>[h("option",N,"10 "+g(a.$t("per page")),1),h("option",R,"25 "+g(a.$t("per page")),1),h("option",O,"50 "+g(a.$t("per page")),1),h("option",W,"100 "+g(a.$t("per page")),1)])),_:1},8,["modelValue"])])),right:m((()=>[h("div",X,[r(n,{color:"primary",class:"w-full",to:"/admin/kyc/template/create",flavor:"outline"},{default:m((()=>[r(i,{name:"line-md:plus",class:"h-4 w-4"}),h("span",null,g(a.$t("Create Template")),1)])),_:1})])])),default:m((()=>[h("div",null,[c(L).loading||0!==c(be)?.length?(f(),d("div",H,[!c(L).loading&&c(ge).length>0?(f(),d("div",J,[h("span",M,g(a.$t("You have selected"))+" "+g(c(ge).length)+" "+g(a.$t("items of the total"))+" "+g(c(we).length)+" "+g(a.$t("items"))+". ",1),h("div",Q,[r(E,{color:"danger",size:"xs","data-nui-tooltip":"Disable templates",onClick:t[2]||(t[2]=()=>_e(!1))},{default:m((()=>[r(i,{name:"line-md:close-small",class:"h-5 w-5"})])),_:1}),r(E,{color:"success",size:"xs","data-nui-tooltip":"Enable templates",onClick:t[3]||(t[3]=()=>_e(!0))},{default:m((()=>[r(i,{name:"line-md:confirm",class:"h-5 w-5"})])),_:1})])])):w("",!0),r(Be,null,{header:m((()=>[h("div",Z,[h("span",ee,[r(U,{"model-value":c(ke),indeterminate:c(ge).length>0&&!c(ke),onClick:xe},null,8,["model-value","indeterminate"])])])])),default:m((()=>[(f(!0),d(b,null,x(c(be),((e,l)=>(f(),k(Ce,{key:e.id,spaced:""},{start:m((()=>[r(q,{"data-content":"Selection",class:"xs:absolute right-2 ml-2"},{default:m((()=>[r(U,{modelValue:c(ge),"onUpdate:modelValue":t[4]||(t[4]=e=>v(ge)?ge.value=e:null),value:e.id,name:`item-checkbox-${e.id}`,shape:"rounded",class:"text-primary-500"},null,8,["modelValue","value","name"])])),_:2},1024),r(me,{label:"Template","hide-label":l>0,picture:e.image,title:e.title},null,8,["hide-label","picture","title"])])),end:m((()=>[r(q,{label:"Status","hide-label":l>0,class:"w-20 xs:w-full"},{default:m((()=>[r(pe,{color:e.status?"success":"danger",flavor:"pastel",condensed:""},{default:m((()=>[_(g(e.status?"Active":"Disabled"),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),r(q,{label:"Actions","hide-label":l>0},{default:m((()=>[r($e,{flavor:"context",label:"Dropdown",orientation:"end"},{default:m((()=>[r(Te,{to:`/admin/kyc/template/edit/${e.id}`,title:"Edit Template"},{start:m((()=>[r(i,{name:"line-md:edit",class:"me-2 block h-5 w-5"})])),_:2},1032,["to"]),r(Te,{onClick:l=>function(e){L.selectedTemplate=e,ye.value=!0}(e),title:"Delete Template"},{start:m((()=>[r(i,{name:"line-md:close",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(f(),k(u,{key:0,title:c(fe)&&""!==c(fe)?"No matching results":"No results",subtitle:c(fe)&&""!==c(fe)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:m((()=>[Y,G])),_:1},8,["title","subtitle"])),h("div",le,[c(we).length>c(ve)?(f(),k(Ve,{key:0,"total-items":c(we).length,"current-page":c(he),"item-per-page":c(ve)},null,8,["total-items","current-page","item-per-page"])):w("",!0)])])])),_:1}),r(Ie,{open:c(ye),size:"sm",onClose:t[8]||(t[8]=e=>ye.value=!1)},{header:m((()=>[h("div",ae,[h("h3",te,g(a.$t("Delete"))+" "+g(a.$t("Template")),1),r(Fe,{onClick:t[5]||(t[5]=e=>ye.value=!1)})])])),footer:m((()=>[h("div",ue,[h("div",de,[r(n,{onClick:t[6]||(t[6]=e=>ye.value=!1)},{default:m((()=>[_(g(a.$t("Cancel")),1)])),_:1}),r(n,{color:"danger",flavor:"solid",onClick:t[7]||(t[7]=e=>async function(){je.value=!0;try{const e=await ce(L.selectedTemplate?.id);L.templates=L.templates.filter((e=>e.id!==L.selectedTemplate?.id)),re.response(e)}catch(e){console.log(e),re.danger(e)}ye.value=!1,je.value=!1,L.selectedTemplate=null}()),disabled:c(je),loading:c(je)},{default:m((()=>[_(g(a.$t("Delete")),1)])),_:1},8,["disabled","loading"])])])])),default:m((()=>[h("div",se,[h("div",oe,[h("h3",ie,g(a.$t("Are you sure?")),1),h("p",ne,g(a.$t("Do you really want to delete this"))+" "+g(a.$t("template"))+" "+g(a.$t("This process cannot be undone"))+". "+g(a.$t("This will also delete all the posts associated with this template"))+". ",1)])])])),_:1},8,["open"])])}}});export{re as default};
