import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as a}from"./BaseSelect.vue-p0KYznCX.js";import{d as l,a as s,z as t,r,c as o,ad as i,E as n,b as d,e as u,w as c,u as m,an as p,o as g,p as f,f as h,t as v,O as w,F as b,B as y,q as _,k,l as E,a1 as x,n as j,ag as I,x as C,ao as D}from"../e/entry-8qgg5CL-.js";import{_ as O,a as T}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as L}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as B}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as P,a as V}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as A}from"./TairoFlexTable-zdoraqRc.js";import{_ as F}from"./BasePagination.vue-eKZkqxB7.js";import{_ as N}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{a as K}from"./strings-rQgUKePI.js";import{_ as M,a as U}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as $}from"./useEcommerce-2nLxpPKu.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const q=l({id:"userEcommerceOrders",state:()=>({orders:[],loading:!1}),getters:{getOrderById:e=>a=>e.orders.find((e=>e.id===a))},actions:{async fetchOrders(){this.loading=!0;try{const{getUserOrders:e}=$(),a=await e();this.orders=a.data.result}catch(e){console.error("Error fetching user orders:",e)}this.loading=!1}}}),z={value:10},R={value:25},S={value:50},W={value:100},G=h("img",{class:"block dark:hidden",src:M,alt:"Placeholder image"},null,-1),J=h("img",{class:"hidden dark:block",src:U,alt:"Placeholder image"},null,-1),Y={key:1,class:"w-full"},H={key:0},Q={key:1},X={class:"mt-6"},Z={class:"flex w-full items-center justify-between p-4 md:p-6"},ee={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},ae={class:"px-4 md:px-6 pb-5"},le={class:"flex flex-col md:flex-row md:space-x-5"},se={class:"flex-1"},te=s({__name:"orders",setup(l){const s=q(),M=t(),U=r(""),$=r(10),te=o((()=>parseInt(M.query.page??"1"))),{formatedPrice:re}=i(),oe=o((()=>s.orders.map((e=>1===e.order_items.length?{...e,singleItem:e.order_items[0]}:e)))),ie=o((()=>oe.value.filter((e=>e.uuid.includes(U.value))))),ne=o((()=>{const e=(te.value-1)*$.value,a=e+$.value;return ie.value.slice(e,a)}));n((async()=>{0===s.orders.length&&(s.loading=!0,await s.fetchOrders(),s.loading=!1)}));const de=e=>{switch(e){case"PENDING":return"warning";case"ACTIVE":return"info";case"COMPLETED":return"success";case"CANCELLED":case"REJECTED":return"danger"}},ue=r(!1),ce=r(null),me=()=>{ce.value=null,ue.value=!1};return(l,t)=>{const r=e,o=a,i=I,n=O,M=L,q=B,oe=C,pe=P,ge=V,fe=T,he=A,ve=F,we=N,be=D,ye=p;return g(),d("div",null,[u(we,null,{left:c((()=>[u(r,{modelValue:m(U),"onUpdate:modelValue":t[0]||(t[0]=e=>f(U)?U.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter orderss UUID..."},null,8,["modelValue"])])),right:c((()=>[u(o,{modelValue:m($),"onUpdate:modelValue":t[1]||(t[1]=e=>f($)?$.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:c((()=>[h("option",z,"10 "+v(l.$t("per page")),1),h("option",R,"25 "+v(l.$t("per page")),1),h("option",S,"50 "+v(l.$t("per page")),1),h("option",W,"100 "+v(l.$t("per page")),1)])),_:1},8,["modelValue"])])),default:c((()=>[h("div",null,[m(s).loading||0!==m(ne)?.length?(g(),d("div",Y,[u(he,{class:"pt-5"},{default:c((()=>[(g(!0),d(b,null,y(m(ne),((e,a)=>(g(),w(fe,{key:e.id,spaced:""},{start:c((()=>[u(n,{label:"Orders","hide-label":a>0,logo:e.singleItem?.product?.image,title:e.singleItem?.product?.name,subtitle:("formatDate"in l?l.formatDate:m(K))(e.created_at)},null,8,["hide-label","logo","title","subtitle"])])),end:c((()=>[u(M,{label:"Price","hide-label":a>0,class:"w-20 xs:w-full"},{default:c((()=>["FIAT"!==e.singleItem?.product?.wallet_type?(g(),d("span",H,v(e.singleItem?.product?.price)+" "+v(e.singleItem?.product?.currency),1)):(g(),d("span",Q,v(m(re)(e.singleItem?.product?.price,e.singleItem?.product?.currency)),1))])),_:2},1032,["hide-label"]),u(M,{label:"Status","hide-label":a>0,class:"w-28 xs:w-full"},{default:c((()=>[u(q,{color:de(e.status),flavor:"pastel",condensed:""},{default:c((()=>[_(v(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),u(M,{label:"Actions","hide-label":a>0},{default:c((()=>[u(ge,{flavor:"context",label:"Dropdown",orientation:"end"},{default:c((()=>["DOWNLOADABLE"===e.singleItem?.product?.type?(g(),w(pe,{key:0,to:e.singleItem?.product?.file_path,title:"Download"},{start:c((()=>[u(oe,{name:"line-md:download",class:"me-2 block h-5 w-5"})])),_:2},1032,["to"])):k("",!0),E(u(pe,{disabled:"COMPLETED"!==e.status,onClick:a=>"COMPLETED"===e.status?(e=>{ce.value=e,ue.value=!0})(e):null,title:"View Key"},{start:c((()=>[u(oe,{name:"line-md:downloading-loop",class:j(["me-2 block h-5 w-5",{"text-gray-400":"COMPLETED"!==e.status}])},null,8,["class"])])),default:c((()=>[_(" "+v("COMPLETED"===e.status?"View Key":"Key not available yet"),1)])),_:2},1032,["disabled","onClick"]),[[x,"KEY"===e.singleItem?.product?.type]])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(g(),w(i,{key:0,title:m(U)&&""!==m(U)?"No matching results":"No results",subtitle:m(U)&&""!==m(U)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:c((()=>[G,J])),_:1},8,["title","subtitle"])),h("div",X,[m(ie).length>m($)?(g(),w(ve,{key:0,"total-items":m(ie).length,"current-page":m(te),"item-per-page":m($)},null,8,["total-items","current-page","item-per-page"])):k("",!0)])])])),_:1}),u(ye,{open:m(ue),size:"lg",onClose:me},{header:c((()=>[h("div",Z,[h("h3",ee," View Order #"+v(m(ce)?.id)+" Keys ",1),u(be,{onClick:t[2]||(t[2]=e=>ue.value=!1)})])])),default:c((()=>[h("div",ae,[h("div",le,[h("div",se,[(g(),w(r,{key:m(ce)?.id,modelValue:m(ce)?.singleItem?.key??"N/A",readonly:"",label:m(ce)?.singleItem?.product?.name},null,8,["modelValue","label"]))])])])])),_:1},8,["open"])])}}});export{te as default};
