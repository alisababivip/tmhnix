import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as a}from"./BaseSelect.vue-p0KYznCX.js";import{a as l,z as t,r as s,c as o,E as i,ad as n,ac as r,b as u,e as d,w as c,u as m,an as p,o as h,p as f,f as v,t as g,q as b,O as _,F as w,B as x,k,x as j,X as y,ag as $,ao as C}from"../e/entry-8qgg5CL-.js";import{_ as D,a as P}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as T}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as E}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as B,a as I}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as L}from"./TairoFlexTable-zdoraqRc.js";import{_ as F}from"./BasePagination.vue-eKZkqxB7.js";import{_ as V}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as A}from"./useIco-3A31FykS.js";import{_ as N,a as S}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as z}from"./phases-sCK1hM1T.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const M={value:10},O={value:25},q={value:50},R={value:100},U=v("img",{class:"block dark:hidden",src:N,alt:"Placeholder image"},null,-1),G=v("img",{class:"hidden dark:block",src:S,alt:"Placeholder image"},null,-1),J={key:1,class:"w-full"},W={class:"mt-6"},X={class:"flex w-full items-center justify-between p-4 md:p-6"},H={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},K={class:"p-4 md:p-6"},Q={class:"mx-auto w-full text-center"},Y={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},Z={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},ee={class:"p-4 md:p-6"},ae={class:"flex gap-x-2"},le=l({__name:"index",setup(l){const N=z(),{deleteIcoPhase:S}=A(),le=t(),te=s(""),se=s(10),oe=o((()=>parseInt(le.query.page??"1"))),ie=o((()=>N.phases.filter((e=>e.name.includes(te.value))))),ne=o((()=>{const e=(oe.value-1)*se.value,a=e+se.value;return ie.value.slice(e,a)}));i((async()=>{0===N.phases.length&&(N.loading=!0,await N.fetchIcoPhases(),N.loading=!1)}));const{toast:re}=n(),ue=r();const de=s(!1),ce=s(!1),me=s(null);const pe=e=>{switch(e){case"PENDING":return"warning";case"ACTIVE":return"success";case"COMPLETED":return"info";case"CANCELLED":case"REJECTED":return"danger"}};return(l,t)=>{const s=e,o=a,i=j,n=y,r=$,A=D,z=T,le=E,he=B,fe=I,ve=P,ge=L,be=F,_e=V,we=C,xe=p;return h(),u("div",null,[d(_e,null,{left:c((()=>[d(s,{modelValue:m(te),"onUpdate:modelValue":t[0]||(t[0]=e=>f(te)?te.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter phases..."},null,8,["modelValue"]),d(o,{modelValue:m(se),"onUpdate:modelValue":t[1]||(t[1]=e=>f(se)?se.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:c((()=>[v("option",M,"10 "+g(l.$t("per page")),1),v("option",O,"25 "+g(l.$t("per page")),1),v("option",q,"50 "+g(l.$t("per page")),1),v("option",R,"100 "+g(l.$t("per page")),1)])),_:1},8,["modelValue"])])),right:c((()=>[d(n,{color:"primary",to:"/admin/extensions/ico/phases/create"},{default:c((()=>[d(i,{name:"lucide:plus",size:"16",class:"mr-2"}),b(" "+g(l.$t("Create")),1)])),_:1})])),default:c((()=>[v("div",null,[m(N).loading||0!==m(ne)?.length?(h(),u("div",J,[d(ge,{class:"pt-5"},{default:c((()=>[(h(!0),u(w,null,x(m(ne),((e,a)=>(h(),_(ve,{key:e.id,spaced:""},{start:c((()=>[d(A,{label:"Item","hide-label":a>0,title:e.name},null,8,["hide-label","title"]),d(A,{label:"Dates","hide-label":a>0,title:`From: ${new Date(e.start_date).toLocaleString()}`,subtitle:`To: ${new Date(e.end_date).toLocaleString()}`},null,8,["hide-label","title","subtitle"]),d(A,{label:"Limits","hide-label":a>0,title:`Min: ${e.min_purchase}`,subtitle:`Max: ${e.max_purchase}`},null,8,["hide-label","title","subtitle"])])),end:c((()=>[d(z,{label:"Token","hide-label":a>0,class:"w-20 xs:w-full text-xs"},{default:c((()=>[b(g(e.token?.currency),1)])),_:2},1032,["hide-label"]),d(z,{label:"Price","hide-label":a>0,class:"w-20 xs:w-full text-xs"},{default:c((()=>[b(g(e.price)+" "+g(e.token?.purchase_currency),1)])),_:2},1032,["hide-label"]),d(z,{label:"Status","hide-label":a>0,class:"w-20 xs:w-full"},{default:c((()=>[d(le,{color:pe(e.status),flavor:"pastel",condensed:""},{default:c((()=>[b(g(e.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),d(z,{label:"Actions","hide-label":a>0},{default:c((()=>[d(fe,{flavor:"context",label:"Dropdown",orientation:"end"},{default:c((()=>[d(he,{onClick:a=>function(e){N.selectPhase(e),ue.push(`/admin/extensions/ico/phases/edit/${e.id}`)}(e),title:"Edit Phase"},{start:c((()=>[d(i,{name:"line-md:edit-twotone",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"]),d(he,{onClick:a=>function(e){me.value=e,de.value=!0}(e),title:"Delete Phase"},{start:c((()=>[d(i,{name:"line-md:close",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(h(),_(r,{key:0,title:m(te)&&""!==m(te)?"No matching results":"No results",subtitle:m(te)&&""!==m(te)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:c((()=>[U,G])),_:1},8,["title","subtitle"])),v("div",W,[m(ie).length>m(se)?(h(),_(be,{key:0,"total-items":m(ie).length,"current-page":m(oe),"item-per-page":m(se)},null,8,["total-items","current-page","item-per-page"])):k("",!0)])])])),_:1}),d(xe,{open:m(de),size:"sm",onClose:t[5]||(t[5]=e=>de.value=!1)},{header:c((()=>[v("div",X,[v("h3",H,g(l.$t("Delete"))+" "+g(l.$t("ICO Phase")),1),d(we,{onClick:t[2]||(t[2]=e=>de.value=!1)})])])),footer:c((()=>[v("div",ee,[v("div",ae,[d(n,{onClick:t[3]||(t[3]=e=>de.value=!1)},{default:c((()=>[b(g(l.$t("Cancel")),1)])),_:1}),d(n,{color:"danger",flavor:"solid",onClick:t[4]||(t[4]=e=>async function(){ce.value=!0;try{const e=await S(me.value?.id);re.response(e),"success"===e.status&&N.removePhase(me.value?.id)}catch(e){re.danger(e)}de.value=!1,ce.value=!1,me.value=null}()),disabled:m(ce),loading:m(ce)},{default:c((()=>[b(g(l.$t("Delete")),1)])),_:1},8,["disabled","loading"])])])])),default:c((()=>[v("div",K,[v("div",Q,[v("h3",Y,g(l.$t("Are you sure?")),1),v("p",Z,g(l.$t("Do you really want to delete this"))+" "+g(l.$t("phase"))+" "+g(l.$t("This process cannot be undone"))+". ",1)])])])),_:1},8,["open"])])}}});export{le as default};
