import{a as e,r as a,ad as l,at as s,E as t,c as i,b as o,e as n,w as r,u,an as m,o as d,f as c,O as p,af as f,F as v,B as h,q as g,t as b,k as y,ag as _,x,X as w}from"../e/entry-8qgg5CL-.js";import{_ as j,a as k}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as B}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as C}from"./TairoButtonIcon.vue-KqKLsAHm.js";import{_ as V}from"./TairoFlexTable-zdoraqRc.js";import{_ as T}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{_ as N}from"./BaseInput.vue-iInHQMIA.js";import{_ as P}from"./BaseListbox.vue-1Dy9Ui3z.js";import{u as F}from"./useRoles-LBTtGXtV.js";import{u as I}from"./usePermissions-zbVS2zgJ.js";import{_ as $,a as E}from"./placeholder-search-4-dark-Jht91LnM.js";import{n as L}from"./navigation-j4BU5uvx.js";import{z as M,u as S,t as U,F as R}from"./vee-validate.esm-n59zZCC5.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./input-id-wZ-Ta08j.js";import"./use-text-value-9iwzs_EA.js";const q={class:"pb-10"},A=c("img",{class:"block dark:hidden",src:$,alt:"Placeholder image"},null,-1),z=c("img",{class:"hidden dark:block",src:E,alt:"Placeholder image"},null,-1),O={key:1,class:"w-full sm:pt-5"},W={class:"flex gap-2"},X={class:"flex w-full items-center justify-between p-4 md:p-6"},D={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},G={class:"p-4 md:p-6"},H={class:"mx-auto w-full text-start space-y-2"},J={class:"p-4 md:p-6"},K={class:"flex gap-x-2"},Q=e({__name:"index",setup(e){const $=a([]),E=a([]),Q=a(!1),{toast:Y}=l(),{getRoles:Z}=F(),{getPermissions:ee}=I(),{updateNavigation:ae}=s();t((async()=>{Q.value=!0,await async function(){const e=await Z();$.value=e.data.result}(),await async function(){const e=await ee();E.value=[{name:"None"},...e.data.result]}(),Q.value=!1}));const le=a([...L]),se=a(!1),te=M.object({name:M.string().nonempty("Name is required"),permission:M.string().nullable().optional()}),ie=i((()=>({name:"",permission:""}))),{handleSubmit:oe,isSubmitting:ne,values:re,setFieldValue:ue}=S({validationSchema:U(te),initialValues:ie}),me=a(null),de=oe((async e=>{if(null===me.value)return Y.dangerText("Please select a menu item"),void(se.value=!1);try{le.value[me.value].name=e.name,le.value[me.value].permission="None"===e.permission?null:e.permission;const a=await ae(le.value);Y.response(a),se.value=!1}catch(a){console.log(a),Y.danger(a)}}));return(e,a)=>{const l=_,s=j,t=B,i=x,F=C,I=k,$=V,L=T,M=N,S=P,U=w,Y=m;return d(),o("div",q,[n(L,null,{default:r((()=>[c("div",null,[u(Q)||0!==u(le)?.length?(d(),o("div",O,[n($,null,{default:r((()=>[n(f,{"enter-active-class":"transform-gpu","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transform-gpu","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:r((()=>[(d(!0),o(v,null,h(u(le),((e,a)=>(d(),p(I,{key:a,spaced:""},{start:r((()=>[n(s,{label:"Language","hide-label":a>0,title:e.name??"---------------",subtitle:e.to},null,8,["hide-label","title","subtitle"])])),end:r((()=>[n(t,{label:"Permission","hide-label":a>0,class:"w-64 xs:w-full"},{default:r((()=>[g(b(e.permission),1)])),_:2},1032,["hide-label"]),n(t,{label:"Actions","hide-label":a>0,class:"w-64 xs:justify-end xs:w-full"},{default:r((()=>[c("div",W,[n(F,{onClick:l=>((e,a)=>{me.value=a,ue("name",e.name),ue("permission",e.permission),se.value=!0})(e,a),color:"warning","data-nui-tooltip":"Edit"},{default:r((()=>[n(i,{name:"line-md:edit",class:"h-4 w-4"})])),_:2},1032,["onClick"]),e.children?(d(),p(F,{key:0,to:`/admin/menu/${a}`,"data-nui-tooltip":"View child items"},{default:r((()=>[n(i,{name:"mdi:eye",class:"h-4 w-4"})])),_:2},1032,["to"])):y("",!0)])])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])),_:1})])):(d(),p(l,{key:0,title:e.filter&&""!==e.filter?"No matching results":"No results",subtitle:e.filter&&""!==e.filter?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:r((()=>[A,z])),_:1},8,["title","subtitle"]))])])),_:1}),n(Y,{open:u(se),size:"sm",onClose:a[1]||(a[1]=e=>se.value=!1)},{header:r((()=>[c("div",X,[c("h3",D,b(e.$t("Edit Menu Item")),1)])])),footer:r((()=>[c("div",J,[c("div",K,[n(U,{onClick:a[0]||(a[0]=e=>se.value=!1)},{default:r((()=>[g(b(e.$t("Cancel")),1)])),_:1}),n(U,{color:"primary",flavor:"solid",onClick:u(de),disabled:u(ne),loading:u(ne)},{default:r((()=>[g(b(e.$t("Save")),1)])),_:1},8,["onClick","disabled","loading"])])])])),default:r((()=>[c("div",G,[c("div",H,[n(u(R),{name:"name"},{default:r((({field:e,errorMessage:a,handleChange:l,handleBlur:s})=>[n(M,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,l],error:a,disabled:u(ne),type:"text",label:"Menu Item Name",placeholder:"Enter menu item name",onBlur:s},null,8,["modelValue","onUpdate:modelValue","error","disabled","onBlur"])])),_:1}),n(u(R),{name:"permission"},{default:r((({field:e,errorMessage:a,handleChange:l,handleBlur:s})=>[n(S,{modelValue:e.value,"onUpdate:modelValue":[a=>e.value=a,l],error:a,disabled:u(ne),label:"Permission",items:u(E).map((e=>e.name)),onBlur:s},null,8,["modelValue","onUpdate:modelValue","error","disabled","items","onBlur"])])),_:1})])])])),_:1},8,["open"])])}}});export{Q as default};
