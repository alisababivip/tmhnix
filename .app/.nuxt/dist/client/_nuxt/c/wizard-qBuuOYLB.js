import{a as e,c as t,r as a,di as s,o as n,b as o,f as r,e as i,w as l,t as d,u as c,n as u,F as m,B as h,C as p,x,O as f,k as g,T as w,X as b,Y as v,ad as y,Z as k,cN as S,am as _,a3 as j,W as z}from"../e/entry-8qgg5CL-.js";import{_ as E}from"./Logo.vue-Ap1LDK0R.js";import{_ as T}from"./BaseThemeToggle.vue-XIprjhKe.js";import{_ as C}from"./AccountMenu.vue-fQ4Lp7sc.js";import{_ as $}from"./BaseProgress.vue-xH0Mhn3Z.js";import{u as P,c as A}from"./multi-step-form-Tb8qYR9z.js";import{u as F}from"./market-Bq5Nv6Cu.js";import"./IconMoon-j5mEjxsz.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./useExchange-VMAYQu3P.js";const B={class:"dark:bg-muted-800 absolute start-0 top-0 h-16 w-full bg-white"},M={class:"relative flex h-16 w-full items-center justify-between px-4"},W={class:"flex items-center"},L={class:"hidden items-center gap-2 ps-6 font-sans sm:flex"},N={class:"text-muted-500 dark:text-muted-400"},O={class:"text-muted-800 font-semibold dark:text-white"},I={class:"space-y-1"},q=["onClick"],R={class:"text-muted-500 dark:text-muted-400 text-xs"},U={class:"text-muted-800 text-xs font-medium dark:text-white"},V={class:"flex items-center justify-end gap-4"},X={class:"absolute inset-x-0 bottom-0 z-10 w-full"},Y=e({__name:"WizardNavigation",setup(e){const{steps:f,currentStep:g,progress:w,preview:b,goToStep:v}=P(),y=t((()=>{const e=f.value.find((e=>e.id===g.value));return e?.meta?.name})),k=a(null),S=a(!1);function _(){S.value=!0}return s(k,(()=>S.value=!1)),(e,t)=>{const a=E,s=p,b=x,j=T,z=C,P=$;return n(),o("div",B,[r("div",M,[r("div",W,[i(s,{to:"/admin",class:"border-muted-200 dark:border-muted-700 flex w-14 items-center justify-center border-r"},{default:l((()=>[i(a,{class:"text-primary-600 h-12 w-18 shrink-0"})])),_:1}),r("div",L,[r("p",N,d(e.$t("Step"))+" "+d(c(g)+1)+": ",1),r("h2",O,d(c(y)),1)]),r("div",{ref_key:"target",ref:k,class:"relative hidden sm:block"},[r("button",{type:"button",class:"flex h-10 w-10 items-center justify-center",onClick:_},[i(b,{name:"lucide:chevron-down",class:u(["text-muted-400 h-4 w-4 transition-transform duration-300",c(S)?"rotate-180":""])},null,8,["class"])]),r("div",{class:u(["border-muted-200 dark:border-muted-700 dark:bg-muted-800 shadow-muted-300/30 dark:shadow-muted-900/30 absolute start-0 top-8 z-20 w-52 rounded-xl border bg-white p-2 shadow-xl transition-all duration-300",c(S)?"opacity-100 translate-y-0":"opacity-0 pointer-events-none translate-y-1"])},[r("div",I,[(n(!0),o(m,null,h(c(f),(t=>(n(),o("button",{key:t.id,type:"button",class:"hover:bg-muted-100 dark:hover:bg-muted-700 flex w-full items-center gap-2 rounded-lg px-3 py-2 font-sans disabled:cursor-not-allowed disabled:opacity-70",onClick:()=>{S.value=!1,c(v)(t)}},[r("p",R,d(e.$t("Step"))+" "+d(t.id+1)+": ",1),r("h4",U,d(t.meta.name),1)],8,q)))),128))])],2)],512)]),r("div",V,[i(j),i(z,{horizontal:""})]),r("div",X,[i(P,{value:c(w),size:"xs",shape:"full"},null,8,["value"])])])])}}}),Z={key:0,class:"fixed inset-x-0 bottom-6 z-20 mx-auto w-full max-w-[304px]"},D=e({__name:"WizardButtons",setup(e){const{totalSteps:t,currentStep:a,loading:s,complete:u,getNextStep:m,getPrevStep:h}=P();return(e,p)=>{const x=b,y=v;return n(),o("div",null,[i(w,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"translate-y-20 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition-all duration-100 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-20 opacity-0"},{default:l((()=>[c(a)>0&&!c(u)?(n(),o("div",Z,[i(y,{class:"shadow-muted-300/30 dark:shadow-muted-800/30 flex items-center justify-between gap-2 rounded-2xl p-4 shadow-xl"},{default:l((()=>[i(x,{to:c(s)?void 0:c(h)()?.to,disabled:!c(h)(),class:"w-full"},{default:l((()=>[r("span",null,d(e.$t("Previous")),1)])),_:1},8,["to","disabled"]),c(a)<c(t)-1?(n(),f(x,{key:0,to:c(m)()?.to,disabled:!c(m)(),color:"primary",class:"w-full"},{default:l((()=>[r("span",null,d(e.$t("Continue")),1)])),_:1},8,["to","disabled"])):(n(),f(x,{key:1,type:"submit",color:"primary",class:"w-full",loading:c(s),disabled:c(s)},{default:l((()=>[r("span",null,d(e.$t("Finish")),1)])),_:1},8,["loading","disabled"]))])),_:1})])):g("",!0)])),_:1})])}}}),G={class:"pb-32 pt-24"},H=e({__name:"wizard",setup(e){const t=F(),s=a({exchange:void 0,activeExchange:void 0,productId:void 0,licenseStatus:!1,username:void 0,connection:!1,symbols:{},currencies:{},status:!1}),{toast:o}=y(),d=k().public.apiPath,{handleSubmit:u,currentStep:m}=A({initialState:s,steps:[{to:"/admin/exchange/wizard",meta:{name:"Selection",title:"Select the Exchange",subtitle:"Choose the exchange provider you want to use"}},{to:"/admin/exchange/wizard/step-2",meta:{name:"License",title:"Add the Exchange License",subtitle:"Add the license for the exchange provider you want to use"}},{to:"/admin/exchange/wizard/step-3",meta:{name:"Credentials",title:"Add the Exchange Credentials",subtitle:"Add the credentials for the exchange provider you want to use"}},{to:"/admin/exchange/wizard/step-4",meta:{name:"Markets",title:"Select the Exchange Markets",subtitle:"Select the markets you want to use for your exchange"}},{to:"/admin/exchange/wizard/step-5",meta:{name:"Fees",title:"Set the Exchange Fees",subtitle:"Set the fees for the exchange markets you want to use"}},{to:"/admin/exchange/wizard/step-6",meta:{name:"Finish",title:"Finish the Exchange Wizard",subtitle:"Finish the wizard of the exchange provider you want to use"}}],onSubmit:async(e,a)=>{if(!e.exchange)throw a.goToStep(a.getStep(0)),new Error("Please select an exchange");if(!1===e.licenseStatus)throw a.goToStep(a.getStep(1)),new Error("Please add the exchange license & verify it");if(!e.connection&&!0!==e.connection)throw a.goToStep(a.getStep(2)),new Error("Please add the exchange credentials & check the connection");if(!e.symbols||0===e.symbols.length)throw a.goToStep(a.getStep(3)),new Error("Please select at least one symbol");try{const a=await $fetch(d+"/api/exchange/settings/save/markets",{method:"POST",credentials:"include",headers:{"client-platform":"browser"},body:{exchange:e.exchange,symbols:e.symbols,currencies:e.currencies}});o.response(a),"success"===a.status&&(e.status=!0,o.successText(`${e.exchange.charAt(0).toUpperCase()+e.exchange.slice(1)} exchange installed successfully!`),await t.fetchMarkets())}catch(s){throw new Error(s.data.message)}},onError:e=>{o.danger(e)}});return S({titleTemplate:e=>`${e} | Exchange Wizard - Step ${m.value+1}`}),(e,t)=>{const a=x,s=p,o=Y,d=j("RouterView"),m=D,h=_;return n(),f(h,{toolbar:!1,sidebar:!1,class:"bg-muted-100 dark:bg-muted-900 min-h-screen w-full"},{logo:l((()=>[i(s,{to:"/",class:"text-muted-400 hover:text-primary-500 hover:bg-primary-500/20 flex h-12 w-12 items-center justify-center rounded-2xl transition-colors duration-300",onClick:t[0]||(t[0]=z((t=>e.$router.back()),["prevent"]))},{default:l((()=>[i(a,{name:"lucide:arrow-left",class:"h-5 w-5"})])),_:1})])),default:l((()=>[i(o),r("form",{action:"",method:"POST",onSubmit:t[1]||(t[1]=z(((...e)=>c(u)&&c(u)(...e)),["prevent"])),novalidate:""},[r("div",G,[i(d)]),i(m)],32)])),_:1})}}});export{H as default};
