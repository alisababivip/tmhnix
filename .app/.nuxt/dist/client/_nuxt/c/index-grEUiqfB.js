import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as a}from"./BaseSelect.vue-p0KYznCX.js";import{a as l,z as s,r as t,c as o,E as i,ad as u,b as r,e as n,w as d,u as p,an as c,o as m,p as v,f,t as h,O as g,F as _,B as b,q as w,k as y,ag as k,x,ao as j,X as $}from"../e/entry-8qgg5CL-.js";import{_ as D,a as C}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as B}from"./BaseTag.vue-NMkN1Uk8.js";import{_ as P}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as R,a as V}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as T}from"./TairoFlexTable-zdoraqRc.js";import{_ as E}from"./BasePagination.vue-eKZkqxB7.js";import{_ as F}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as I}from"./useP2P-NV4dmDWU.js";import{_ as L,a as N}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as A}from"./disputes-06lNUM_z.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const S={value:10},O={value:25},q={value:50},z={value:100},G=f("img",{class:"block dark:hidden",src:L,alt:"Placeholder image"},null,-1),U=f("img",{class:"hidden dark:block",src:N,alt:"Placeholder image"},null,-1),W={key:1,class:"w-full"},X={class:"mt-6"},H={class:"flex w-full items-center justify-between p-4 md:p-6"},J={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},K={class:"p-4 md:p-6"},M={class:"mx-auto w-full text-center"},Q={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},Y={class:"p-4 md:p-6"},Z={class:"flex gap-x-2"},ee=l({__name:"index",setup(l){const L=A(),{resolveAdminP2PDispute:N}=I(),ee=s(),ae=t(""),le=t(10),se=o((()=>parseInt(ee.query.page??"1"))),te=o((()=>L.disputes.filter((e=>e.reason?.includes(ae.value))))),oe=o((()=>{const e=(se.value-1)*le.value,a=e+le.value;return te.value.slice(e,a)}));i((async()=>{0===L.disputes.length&&(L.loading=!0,await L.fetchP2PDisputes(),L.loading=!1)}));const{toast:ie}=u(),ue=t(!1),re=t(!1),ne=t(null);async function de(){if(ne.value){re.value=!0;try{await N(ne.value.id,"resolved"),ie.success("Dispute resolved successfully")}catch(e){ie.error("Failed to resolve dispute")}ue.value=!1,re.value=!1,ne.value=null}}const pe=e=>{switch(e){case"PENDING":return"warning";case"IN_PROGRESS":return"info";case"RESOLVED":return"success";case"CANCELLED":return"danger";default:return"default"}};return(l,s)=>{const t=e,o=a,i=k,u=D,I=B,N=P,A=x,ee=R,ie=V,ce=C,me=T,ve=E,fe=F,he=j,ge=$,_e=c;return m(),r("div",null,[n(fe,null,{left:d((()=>[n(t,{modelValue:p(ae),"onUpdate:modelValue":s[0]||(s[0]=e=>v(ae)?ae.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter disputes..."},null,8,["modelValue"])])),right:d((()=>[n(o,{modelValue:p(le),"onUpdate:modelValue":s[1]||(s[1]=e=>v(le)?le.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:d((()=>[f("option",S,"10 "+h(l.$t("per page")),1),f("option",O,"25 "+h(l.$t("per page")),1),f("option",q,"50 "+h(l.$t("per page")),1),f("option",z,"100 "+h(l.$t("per page")),1)])),_:1},8,["modelValue"])])),default:d((()=>[f("div",null,[p(L).loading||0!==p(oe).length?(m(),r("div",W,[n(me,{class:"pt-5"},{default:d((()=>[(m(!0),r(_,null,b(p(oe),((e,a)=>(m(),g(ce,{key:e.id,spaced:""},{start:d((()=>[n(u,{label:"Dispute","hide-label":a>0,title:`Trade ID: ${e.trade?.uuid}`,subtitle:`Reason: ${e.reason}`},null,8,["hide-label","title","subtitle"])])),end:d((()=>[n(u,{label:"Raised By","hide-label":a>0,logo:e.raised_by?.avatar,title:`${e.raised_by?.first_name} ${e.raised_by?.last_name}`,subtitle:e.raised_by?.uuid},null,8,["hide-label","logo","title","subtitle"]),n(N,{label:"Status","hide-label":a>0,class:"w-28 xs:w-full"},{default:d((()=>[n(I,{color:pe(e?.status),flavor:"pastel"},{default:d((()=>[w(h(e?.status),1)])),_:2},1032,["color"])])),_:2},1032,["hide-label"]),n(N,{label:"Actions","hide-label":a>0},{default:d((()=>[n(ie,{flavor:"context",label:"Dropdown",orientation:"end"},{default:d((()=>[n(ee,{to:`/admin/extensions/p2p/disputes/${e.id}`,title:"View Details"},{default:d((()=>[n(A,{name:"mdi:eye",class:"w-4 h-4 mr-2"}),w(" "+h(l.$t("View")),1)])),_:2},1032,["to"]),n(ee,{onClick:a=>{return l=e,ne.value=l,void(ue.value=!0);var l},title:"Resolve Dispute"},{default:d((()=>[n(A,{name:"line-md:close",class:"w-4 h-4 mr-2"}),w(" "+h(l.$t("Resolve")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(m(),g(i,{key:0,title:p(ae)&&""!==p(ae)?"No matching results":"No results",subtitle:p(ae)&&""!==p(ae)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:d((()=>[G,U])),_:1},8,["title","subtitle"])),f("div",X,[p(te).length>p(le)?(m(),g(ve,{key:0,"total-items":p(te).length,"current-page":p(se),"item-per-page":p(le)},null,8,["total-items","current-page","item-per-page"])):y("",!0)])])])),_:1}),n(_e,{open:p(ue),size:"sm",onClose:s[4]||(s[4]=()=>ue.value=!1)},{header:d((()=>[f("div",H,[f("h3",J,h(l.$t("Resolve Dispute")),1),n(he,{onClick:s[2]||(s[2]=()=>ue.value=!1)})])])),footer:d((()=>[f("div",Y,[f("div",Z,[n(ge,{onClick:s[3]||(s[3]=()=>ue.value=!1)},{default:d((()=>[w(h(l.$t("Cancel")),1)])),_:1}),n(ge,{color:"success",flavor:"solid",onClick:de,disabled:p(re),loading:p(re)},{default:d((()=>[w(h(l.$t("Resolve")),1)])),_:1},8,["disabled","loading"])])])])),default:d((()=>[f("div",K,[f("div",M,[f("h3",Q,h(l.$t("Are you sure you want to resolve this dispute?")),1)])])])),_:1},8,["open"])])}}});export{ee as default};
