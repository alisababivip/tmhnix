import{_ as e}from"./BaseInput.vue-iInHQMIA.js";import{_ as a}from"./BaseSelect.vue-p0KYznCX.js";import{a as t,z as l,r as s,c as o,E as i,ad as n,ac as r,b as u,e as d,w as m,u as p,an as c,av as f,o as v,p as g,f as h,t as w,q as k,O as b,F as x,B as _,l as j,k as y,x as T,X as C,ag as $,ao as B}from"../e/entry-8qgg5CL-.js";import{_ as z,a as D}from"./FlexTableRow.vue-LmGXINIn.js";import{_ as F,a as V}from"./BaseDropdown.vue-wSpyT9xX.js";import{_ as A}from"./FlexTableCell.vue-Rbj2Whgl.js";import{_ as I}from"./TairoFlexTable-zdoraqRc.js";import{_ as L}from"./BasePagination.vue-eKZkqxB7.js";import{_ as P}from"./TairoContentWrapper.vue-JqAKR4O_.js";import{u as q}from"./useMailwizard-mGGEZWYz.js";import{_ as E,a as M}from"./placeholder-search-4-dark-Jht91LnM.js";import{u as N}from"./templates-P8j7kCfk.js";import"./input-id-wZ-Ta08j.js";import"./BaseAvatar.vue-XYSxxLJP.js";import"./BaseIconBox.vue-qjQCKz6R.js";import"./menu-KWZreDHB.js";import"./use-text-value-9iwzs_EA.js";import"./BaseFocusLoop.vue-E4yqAJcg.js";const U={value:10},O={value:25},R={value:50},S={value:100},W=h("img",{class:"block dark:hidden",src:E,alt:"Placeholder image"},null,-1),X=h("img",{class:"hidden dark:block",src:M,alt:"Placeholder image"},null,-1),G={key:1,class:"w-full"},H={class:"mt-6"},J={class:"flex w-full items-center justify-between p-4 md:p-6"},K={class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"},Q={class:"p-4 md:p-6"},Y={class:"mx-auto w-full text-center"},Z={class:"font-heading text-muted-800 text-lg font-medium leading-6 dark:text-white"},ee={class:"font-alt text-muted-500 dark:text-muted-400 text-sm leading-5 mb-3"},ae={class:"p-4 md:p-6"},te={class:"flex gap-x-2"},le=t({__name:"index",setup(t){const E=N(),{deleteTemplate:M}=q(),le=l(),se=s(""),oe=s(10),ie=o((()=>parseInt(le.query.page??"1"))),ne=o((()=>E.templates.filter((e=>e.name.includes(se.value)))??[])),re=o((()=>{const e=(ie.value-1)*oe.value,a=e+oe.value;return ne.value.slice(e,a)}));i((async()=>{0===E.templates.length&&(E.loading=!0,await E.fetchTemplates(),E.loading=!1)}));const{toast:ue}=n(),de=r();const me=s(!1),pe=s(!1),ce=s(null);return(t,l)=>{const s=e,o=a,i=T,n=C,r=$,q=z,N=F,le=V,fe=A,ve=D,ge=I,he=L,we=P,ke=B,be=c,xe=f("can");return v(),u("div",null,[d(we,null,{left:m((()=>[d(s,{modelValue:p(se),"onUpdate:modelValue":l[0]||(l[0]=e=>g(se)?se.value=e:null),icon:"lucide:search",classes:{wrapper:"w-full sm:w-auto"},placeholder:"Filter templates..."},null,8,["modelValue"]),d(o,{modelValue:p(oe),"onUpdate:modelValue":l[1]||(l[1]=e=>g(oe)?oe.value=e:null),label:"",classes:{wrapper:"w-full sm:w-40"}},{default:m((()=>[h("option",U,"10 "+w(t.$t("per page")),1),h("option",O,"25 "+w(t.$t("per page")),1),h("option",R,"50 "+w(t.$t("per page")),1),h("option",S,"100 "+w(t.$t("per page")),1)])),_:1},8,["modelValue"])])),right:m((()=>[d(n,{color:"primary",to:"/admin/extensions/mailwizard/templates/create"},{default:m((()=>[d(i,{name:"lucide:plus",size:"16",class:"mr-2"}),k(" "+w(t.$t("Create Template")),1)])),_:1})])),default:m((()=>[h("div",null,[p(E)?.loading||0!==p(re)?.length?(v(),u("div",G,[d(ge,{class:"pt-5"},{default:m((()=>[(v(!0),u(x,null,_(p(re),((e,a)=>(v(),b(ve,{key:e.id,spaced:""},{start:m((()=>[d(q,{label:"Template","hide-label":a>0,picture:e.image,title:e.name,subtitle:e.description},null,8,["hide-label","picture","title","subtitle"])])),end:m((()=>[d(fe,{label:"Actions","hide-label":a>0},{default:m((()=>[d(le,{flavor:"context",label:"Dropdown",orientation:"end"},{default:m((()=>[d(N,{onClick:a=>function(e){E.selectTemplate(e),de.push(`/admin/extensions/mailwizard/templates/edit/${e.id}`)}(e),title:"Edit Template"},{start:m((()=>[d(i,{name:"line-md:edit-twotone",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"]),j((v(),b(N,{onClick:a=>function(e){ce.value=e,me.value=!0}(e),title:"Delete Template"},{start:m((()=>[d(i,{name:"line-md:close",class:"me-2 block h-5 w-5"})])),_:2},1032,["onClick"])),[[xe,"Delete Mailwizard Template"]])])),_:2},1024)])),_:2},1032,["hide-label"])])),_:2},1024)))),128))])),_:1})])):(v(),b(r,{key:0,title:p(se)&&""!==p(se)?"No matching results":"No results",subtitle:p(se)&&""!==p(se)?"Looks like we couldn't find any matching results for your search terms. Try other search terms.":"Looks like we don't have any data here yet."},{image:m((()=>[W,X])),_:1},8,["title","subtitle"])),h("div",H,[p(ne).length>p(oe)?(v(),b(he,{key:0,"total-items":p(ne).length,"current-page":p(ie),"item-per-page":p(oe)},null,8,["total-items","current-page","item-per-page"])):y("",!0)])])])),_:1}),d(be,{open:p(me),size:"sm",onClose:l[5]||(l[5]=e=>me.value=!1)},{header:m((()=>[h("div",J,[h("h3",K,w(t.$t("Delete Template")),1),d(ke,{onClick:l[2]||(l[2]=e=>me.value=!1)})])])),footer:m((()=>[h("div",ae,[h("div",te,[d(n,{onClick:l[3]||(l[3]=e=>me.value=!1)},{default:m((()=>[k(w(t.$t("Cancel")),1)])),_:1}),d(n,{color:"danger",flavor:"solid",onClick:l[4]||(l[4]=e=>async function(){pe.value=!0;try{const e=await M(ce.value?.id);ue.response(e),"success"===e.status&&E.removeTemplate(ce.value?.id)}catch(e){ue.danger(e)}me.value=!1,pe.value=!1,ce.value=null}()),disabled:p(pe),loading:p(pe)},{default:m((()=>[k(w(t.$t("Delete")),1)])),_:1},8,["disabled","loading"])])])])),default:m((()=>[h("div",Q,[h("div",Y,[h("h3",Z,w(t.$t("Are you sure?")),1),h("p",ee,w(t.$t("Do you really want to delete this template? This process cannot be undone.")),1)])])])),_:1},8,["open"])])}}});export{le as default};
